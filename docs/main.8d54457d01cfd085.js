"use strict";(self.webpackChunkNotas_Mentais=self.webpackChunkNotas_Mentais||[]).push([[179],{7247:($t,Ge,z)=>{z.d(Ge,{nm:()=>Tr});var p=z(8186),fe=(z(5879),z(8726),z(3182),z(5861)),xe=z(534),Me=z(4537),Ee=z(9058),ze=z(7879);const oe=new Map,pe={activated:!1,tokenObservers:[]},Te={initialized:!1,enabled:!1};function et(De){return oe.get(De)||Object.assign({},pe)}function mt(){return Te}const ht="https://content-firebaseappcheck.googleapis.com/v1",Mn="exchangeDebugToken",bt={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class Ve{constructor(we,Ne,nt,vt,Zt){if(this.operation=we,this.retryPolicy=Ne,this.getWaitDuration=nt,this.lowerBound=vt,this.upperBound=Zt,this.pending=null,this.nextErrorWaitInterval=vt,vt>Zt)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(we){var Ne=this;return(0,fe.Z)(function*(){Ne.stop();try{Ne.pending=new Ee.BH,yield function Oe(De){return new Promise(we=>{setTimeout(we,De)})}(Ne.getNextRun(we)),Ne.pending.resolve(),yield Ne.pending.promise,Ne.pending=new Ee.BH,yield Ne.operation(),Ne.pending.resolve(),yield Ne.pending.promise,Ne.process(!0).catch(()=>{})}catch(nt){Ne.retryPolicy(nt)?Ne.process(!1).catch(()=>{}):Ne.stop()}})()}getNextRun(we){if(we)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const Ne=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),Ne}}}const pt=new Ee.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function ln(De){if(!et(De).activated)throw pt.create("use-before-activation",{appName:De.name})}function dn(De,we){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,fe.Z)(function*({url:De,body:we},Ne){const nt={"Content-Type":"application/json"},vt=Ne.getImmediate({optional:!0});if(vt){const $i=yield vt.getHeartbeatsHeader();$i&&(nt["X-Firebase-Client"]=$i)}const Zt={method:"POST",body:JSON.stringify(we),headers:nt};let Bn,Dn;try{Bn=yield fetch(De,Zt)}catch($i){throw pt.create("fetch-network-error",{originalErrorMessage:$i?.message})}if(200!==Bn.status)throw pt.create("fetch-status-error",{httpStatus:Bn.status});try{Dn=yield Bn.json()}catch($i){throw pt.create("fetch-parse-error",{originalErrorMessage:$i?.message})}const $n=Dn.ttl.match(/^([\d.]+)(s)$/);if(!$n||!$n[2]||isNaN(Number($n[1])))throw pt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${Dn.ttl}`});const Ps=1e3*Number($n[1]),Ri=Date.now();return{token:Dn.token,expireTimeMillis:Ri+Ps,issuedAtTimeMillis:Ri}})).apply(this,arguments)}function Cr(De,we){const{projectId:Ne,appId:nt,apiKey:vt}=De.options;return{url:`${ht}/projects/${Ne}/apps/${nt}:${Mn}?key=${vt}`,body:{debug_token:we}}}const vr="firebase-app-check-database",ke=1,He="firebase-app-check-store";let Be=null;function xn(){return(xn=(0,fe.Z)(function*(De,we){const nt=(yield function Je(){return Be||(Be=new Promise((De,we)=>{try{const Ne=indexedDB.open(vr,ke);Ne.onsuccess=nt=>{De(nt.target.result)},Ne.onerror=nt=>{var vt;we(pt.create("storage-open",{originalErrorMessage:null===(vt=nt.target.error)||void 0===vt?void 0:vt.message}))},Ne.onupgradeneeded=nt=>{0===nt.oldVersion&&nt.target.result.createObjectStore(He,{keyPath:"compositeKey"})}}catch(Ne){we(pt.create("storage-open",{originalErrorMessage:Ne?.message}))}}),Be)}()).transaction(He,"readwrite"),Zt=nt.objectStore(He).put({compositeKey:De,value:we});return new Promise((Bn,Dn)=>{Zt.onsuccess=$n=>{Bn()},nt.onerror=$n=>{var Ps;Dn(pt.create("storage-set",{originalErrorMessage:null===(Ps=$n.target.error)||void 0===Ps?void 0:Ps.message}))}})})).apply(this,arguments)}const Qn=new ze.Yd("@firebase/app-check");function Nr(De,we){return(0,Ee.hl)()?function Tt(De,we){return function rn(De,we){return xn.apply(this,arguments)}(function lr(De){return`${De.options.appId}-${De.name}`}(De),we)}(De,we).catch(Ne=>{Qn.warn(`Failed to write token to IndexedDB. Error: ${Ne}`)}):Promise.resolve()}function $r(){return mt().enabled}function si(){return nr.apply(this,arguments)}function nr(){return(nr=(0,fe.Z)(function*(){const De=mt();if(De.enabled&&De.token)return De.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const gn={error:"UNKNOWN_ERROR"};function tn(De){return Ee.US.encodeString(JSON.stringify(De),!1)}function vn(De){return _r.apply(this,arguments)}function _r(){return(_r=(0,fe.Z)(function*(De,we=!1){const Ne=De.app;ln(Ne);const nt=et(Ne);let Zt,vt=nt.token;if(vt&&!gr(vt)&&(nt.token=void 0,vt=void 0),!vt){const $n=yield nt.cachedTokenPromise;$n&&(gr($n)?vt=$n:yield Nr(Ne,void 0))}if(!we&&vt&&gr(vt))return{token:vt.token};let Dn,Bn=!1;if($r()){nt.exchangeTokenPromise||(nt.exchangeTokenPromise=dn(Cr(Ne,yield si()),De.heartbeatServiceProvider).finally(()=>{nt.exchangeTokenPromise=void 0}),Bn=!0);const $n=yield nt.exchangeTokenPromise;return yield Nr(Ne,$n),nt.token=$n,{token:$n.token}}try{nt.exchangeTokenPromise||(nt.exchangeTokenPromise=nt.provider.getToken().finally(()=>{nt.exchangeTokenPromise=void 0}),Bn=!0),vt=yield et(Ne).exchangeTokenPromise}catch($n){"appCheck/throttled"===$n.code?Qn.warn($n.message):Qn.error($n),Zt=$n}return vt?Zt?Dn=gr(vt)?{token:vt.token,internalError:Zt}:Pn(Zt):(Dn={token:vt.token},nt.token=vt,yield Nr(Ne,vt)):Dn=Pn(Zt),Bn&&function fn(De,we){const Ne=et(De).tokenObservers;for(const nt of Ne)try{"EXTERNAL"===nt.type&&null!=we.error?nt.error(we.error):nt.next(we)}catch{}}(Ne,Dn),Dn})).apply(this,arguments)}function di(De){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,fe.Z)(function*(De){const we=De.app;ln(we);const{provider:Ne}=et(we);if($r()){const nt=yield si(),{token:vt}=yield dn(Cr(we,nt),De.heartbeatServiceProvider);return{token:vt}}{const{token:nt}=yield Ne.getToken();return{token:nt}}})).apply(this,arguments)}function Mi(De,we){const Ne=et(De),nt=Ne.tokenObservers.filter(vt=>vt.next!==we);0===nt.length&&Ne.tokenRefresher&&Ne.tokenRefresher.isRunning()&&Ne.tokenRefresher.stop(),Ne.tokenObservers=nt}function jn(De){const{app:we}=De,Ne=et(we);let nt=Ne.tokenRefresher;nt||(nt=function Di(De){const{app:we}=De;return new Ve((0,fe.Z)(function*(){let nt;if(nt=et(we).token?yield vn(De,!0):yield vn(De),nt.error)throw nt.error;if(nt.internalError)throw nt.internalError}),()=>!0,()=>{const Ne=et(we);if(Ne.token){let nt=Ne.token.issuedAtTimeMillis+.5*(Ne.token.expireTimeMillis-Ne.token.issuedAtTimeMillis)+3e5;return nt=Math.min(nt,Ne.token.expireTimeMillis-3e5),Math.max(0,nt-Date.now())}return 0},bt.RETRIAL_MIN_WAIT,bt.RETRIAL_MAX_WAIT)}(De),Ne.tokenRefresher=nt),!nt.isRunning()&&Ne.isTokenAutoRefreshEnabled&&nt.start()}function gr(De){return De.expireTimeMillis-Date.now()>0}function Pn(De){return{token:tn(gn),error:De}}class ei{constructor(we,Ne){this.app=we,this.heartbeatServiceProvider=Ne}_delete(){const{tokenObservers:we}=et(this.app);for(const Ne of we)Mi(this.app,Ne.next);return Promise.resolve()}}const kt="app-check-internal";!function wt(){(0,xe._registerComponent)(new Me.wA("app-check",De=>function Xn(De,we){return new ei(De,we)}(De.getProvider("app").getImmediate(),De.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((De,we,Ne)=>{De.getProvider(kt).initialize()})),(0,xe._registerComponent)(new Me.wA(kt,De=>function kn(De){return{getToken:we=>vn(De,we),getLimitedUseToken:()=>di(De),addTokenListener:we=>function pr(De,we,Ne,nt){const{app:vt}=De,Zt=et(vt);if(Zt.tokenObservers=[...Zt.tokenObservers,{next:Ne,error:nt,type:we}],Zt.token&&gr(Zt.token)){const Dn=Zt.token;Promise.resolve().then(()=>{Ne({token:Dn.token}),jn(De)}).catch(()=>{})}Zt.cachedTokenPromise.then(()=>jn(De))}(De,"INTERNAL",we),removeTokenListener:we=>Mi(De.app,we)}}(De.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,xe.registerVersion)("@firebase/app-check","0.8.0")}();class Tr{constructor(){return(0,p.vb)("app-check")}}typeof window<"u"&&window},8726:($t,Ge,z)=>{z.d(Ge,{Ot:()=>he,ZF:()=>Qt,hX:()=>et,z6:()=>fe});var p=z(3182),W=z(5879),ae=z(8186);class he{constructor(Ve){return Ve}}class fe{constructor(){return(0,p.C6)()}}const Ee=new W.OlP("angularfire2._apps"),ze={provide:he,useFactory:function Me(le){return le&&1===le.length?le[0]:new he((0,p.Mq)())},deps:[[new W.FiY,Ee]]},oe={provide:fe,deps:[[new W.FiY,Ee]]};function pe(le){return(Ve,Oe)=>{const Ze=Ve.runOutsideAngular(()=>le(Oe));return new he(Ze)}}let Te=(()=>{class le{constructor(Oe){(0,p.KN)("angularfire",ae.q4.full,"core"),(0,p.KN)("angularfire",ae.q4.full,"app"),(0,p.KN)("angular",W.q4F.full,Oe.toString())}}return le.\u0275fac=function(Oe){return new(Oe||le)(W.LFG(W.Lbi))},le.\u0275mod=W.oAB({type:le}),le.\u0275inj=W.cJS({providers:[ze,oe]}),le})();function et(le,...Ve){return{ngModule:Te,providers:[{provide:Ee,useFactory:pe(le),multi:!0,deps:[W.R0b,W.zs3,ae.HU,...Ve]}]}}const Qt=(0,ae.u3)(p.ZF,!0)},5975:($t,Ge,z)=>{z.d(Ge,{gx:()=>ht,dh:()=>Qt,v0:()=>qe,AR:()=>pt,e5:()=>Vn,w7:()=>fn,EA:()=>ln});var p=z(8186),W=z(5879),ae=z(8726),he=z(3182),fe=z(7247),xe=z(6878),pe=(z(9058),z(534),z(7879),z(4537),z(5592));function et(wn){return new pe.y(function(Jt){return{unsubscribe:(0,xe.v)(wn,Jt.next.bind(Jt),Jt.error.bind(Jt),Jt.complete.bind(Jt))}})}class ht{constructor(Jt){return Jt}}class Qt{constructor(){return(0,p.vb)("auth")}}const Mn=new W.OlP("angularfire2.auth-instances");function le(wn){return(Jt,Yn)=>{const me=Jt.runOutsideAngular(()=>wn(Yn));return new ht(me)}}const Ve={provide:Qt,deps:[[new W.FiY,Mn]]},Oe={provide:ht,useFactory:function bt(wn,Jt){const Yn=(0,p.JM)("auth",wn,Jt);return Yn&&new ht(Yn)},deps:[[new W.FiY,Mn],ae.Ot]};let Ze=(()=>{class wn{constructor(){(0,he.KN)("angularfire",p.q4.full,"auth")}}return wn.\u0275fac=function(Yn){return new(Yn||wn)},wn.\u0275mod=W.oAB({type:wn}),wn.\u0275inj=W.cJS({providers:[Oe,Ve]}),wn})();function pt(wn,...Jt){return{ngModule:Ze,providers:[{provide:Mn,useFactory:le(wn),multi:!0,deps:[W.R0b,W.zs3,p.HU,ae.z6,[new W.FiY,fe.nm],...Jt]}]}}const ln=(0,p.u3)(et,!0),qe=(0,p.u3)(xe.o,!0),Vn=(0,p.u3)(xe.a9,!0),fn=(0,p.u3)(xe.B,!0)},8186:($t,Ge,z)=>{z.d(Ge,{q4:()=>Da,iC:()=>li,HU:()=>$s,vb:()=>Gc,JM:()=>vc,u3:()=>Za});var p=z(5879),W=z(3182),ae=z(5861),he=z(534),fe=z(9058),xe=z(4537),Me=z(7879);const Ee=(D,N)=>N.some(B=>D instanceof B);let ze,oe;const et=new WeakMap,rt=new WeakMap,mt=new WeakMap,ht=new WeakMap,Qt=new WeakMap;let bt={get(D,N,B){if(D instanceof IDBTransaction){if("done"===N)return rt.get(D);if("objectStoreNames"===N)return D.objectStoreNames||mt.get(D);if("store"===N)return B.objectStoreNames[1]?void 0:B.objectStore(B.objectStoreNames[0])}return Ze(D[N])},set:(D,N,B)=>(D[N]=B,!0),has:(D,N)=>D instanceof IDBTransaction&&("done"===N||"store"===N)||N in D};function Oe(D){return"function"==typeof D?function Ve(D){return D!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Te(){return oe||(oe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(D)?function(...N){return D.apply(pt(this),N),Ze(et.get(this))}:function(...N){return Ze(D.apply(pt(this),N))}:function(N,...B){const se=D.call(pt(this),N,...B);return mt.set(se,N.sort?N.sort():[N]),Ze(se)}}(D):(D instanceof IDBTransaction&&function Mn(D){if(rt.has(D))return;const N=new Promise((B,se)=>{const ye=()=>{D.removeEventListener("complete",Ae),D.removeEventListener("error",tt),D.removeEventListener("abort",tt)},Ae=()=>{B(),ye()},tt=()=>{se(D.error||new DOMException("AbortError","AbortError")),ye()};D.addEventListener("complete",Ae),D.addEventListener("error",tt),D.addEventListener("abort",tt)});rt.set(D,N)}(D),Ee(D,function pe(){return ze||(ze=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(D,bt):D)}function Ze(D){if(D instanceof IDBRequest)return function Rt(D){const N=new Promise((B,se)=>{const ye=()=>{D.removeEventListener("success",Ae),D.removeEventListener("error",tt)},Ae=()=>{B(Ze(D.result)),ye()},tt=()=>{se(D.error),ye()};D.addEventListener("success",Ae),D.addEventListener("error",tt)});return N.then(B=>{B instanceof IDBCursor&&et.set(B,D)}).catch(()=>{}),Qt.set(N,D),N}(D);if(ht.has(D))return ht.get(D);const N=Oe(D);return N!==D&&(ht.set(D,N),Qt.set(N,D)),N}const pt=D=>Qt.get(D),en=["get","getKey","getAll","getAllKeys","count"],Nn=["put","add","delete","clear"],dn=new Map;function Dr(D,N){if(!(D instanceof IDBDatabase)||N in D||"string"!=typeof N)return;if(dn.get(N))return dn.get(N);const B=N.replace(/FromIndex$/,""),se=N!==B,ye=Nn.includes(B);if(!(B in(se?IDBIndex:IDBObjectStore).prototype)||!ye&&!en.includes(B))return;const Ae=function(){var tt=(0,ae.Z)(function*(jt,...Lt){const an=this.transaction(jt,ye?"readwrite":"readonly");let qn=an.store;return se&&(qn=qn.index(Lt.shift())),(yield Promise.all([qn[B](...Lt),ye&&an.done]))[0]});return function(Lt){return tt.apply(this,arguments)}}();return dn.set(N,Ae),Ae}!function le(D){bt=D(bt)}(D=>({...D,get:(N,B,se)=>Dr(N,B)||D.get(N,B,se),has:(N,B)=>!!Dr(N,B)||D.has(N,B)}));const ii="@firebase/installations",br="0.6.4",Cr=1e4,vr=`w:${br}`,ke="FIS_v2",He="https://firebaseinstallations.googleapis.com/v1",qe=36e5,Tt=new fe.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Et(D){return D instanceof fe.ZR&&D.code.includes("request-failed")}function Wn({projectId:D}){return`${He}/projects/${D}/installations`}function rn(D){return{token:D.token,requestStatus:2,expiresIn:Vt(D.expiresIn),creationTime:Date.now()}}function xn(D,N){return Ht.apply(this,arguments)}function Ht(){return(Ht=(0,ae.Z)(function*(D,N){const se=(yield N.json()).error;return Tt.create("request-failed",{requestName:D,serverCode:se.code,serverMessage:se.message,serverStatus:se.status})})).apply(this,arguments)}function Kn({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function Qn(D){return er.apply(this,arguments)}function er(){return(er=(0,ae.Z)(function*(D){const N=yield D();return N.status>=500&&N.status<600?D():N})).apply(this,arguments)}function Vt(D){return Number(D.replace("s","000"))}function Ln(){return(Ln=(0,ae.Z)(function*({appConfig:D,heartbeatServiceProvider:N},{fid:B}){const se=Wn(D),ye=Kn(D),Ae=N.getImmediate({optional:!0});if(Ae){const an=yield Ae.getHeartbeatsHeader();an&&ye.append("x-firebase-client",an)}const jt={method:"POST",headers:ye,body:JSON.stringify({fid:B,authVersion:ke,appId:D.appId,sdkVersion:vr})},Lt=yield Qn(()=>fetch(se,jt));if(Lt.ok){const an=yield Lt.json();return{fid:an.fid||B,registrationStatus:2,refreshToken:an.refreshToken,authToken:rn(an.authToken)}}throw yield xn("Create Installation",Lt)})).apply(this,arguments)}function $r(D){return new Promise(N=>{setTimeout(N,D)})}const nr=/^[cdef][\w-]{21}$/,Xt="";function gn(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const B=function tn(D){return function si(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return nr.test(B)?B:Xt}catch{return Xt}}function vn(D){return`${D.appName}!${D.appId}`}const _r=new Map;function di(D,N){const B=vn(D);Mi(B,N),function jn(D,N){const B=function fn(){return!Di&&"BroadcastChannel"in self&&(Di=new BroadcastChannel("[Firebase] FID Change"),Di.onmessage=D=>{Mi(D.data.key,D.data.fid)}),Di}();B&&B.postMessage({key:D,fid:N}),function gr(){0===_r.size&&Di&&(Di.close(),Di=null)}()}(B,N)}function Mi(D,N){const B=_r.get(D);if(B)for(const se of B)se(N)}let Di=null;const Pn="firebase-installations-database",ei=1,Xn="firebase-installations-store";let kn=null;function zr(){return kn||(kn=function Se(D,N,{blocked:B,upgrade:se,blocking:ye,terminated:Ae}={}){const tt=indexedDB.open(D,N),jt=Ze(tt);return se&&tt.addEventListener("upgradeneeded",Lt=>{se(Ze(tt.result),Lt.oldVersion,Lt.newVersion,Ze(tt.transaction))}),B&&tt.addEventListener("blocked",()=>B()),jt.then(Lt=>{Ae&&Lt.addEventListener("close",()=>Ae()),ye&&Lt.addEventListener("versionchange",()=>ye())}).catch(()=>{}),jt}(Pn,ei,{upgrade:(D,N)=>{0===N&&D.createObjectStore(Xn)}})),kn}function xr(D,N){return hi.apply(this,arguments)}function hi(){return(hi=(0,ae.Z)(function*(D,N){const B=vn(D),ye=(yield zr()).transaction(Xn,"readwrite"),Ae=ye.objectStore(Xn),tt=yield Ae.get(B);return yield Ae.put(N,B),yield ye.done,(!tt||tt.fid!==N.fid)&&di(D,N.fid),N})).apply(this,arguments)}function Zn(D){return wn.apply(this,arguments)}function wn(){return(wn=(0,ae.Z)(function*(D){const N=vn(D),se=(yield zr()).transaction(Xn,"readwrite");yield se.objectStore(Xn).delete(N),yield se.done})).apply(this,arguments)}function Jt(D,N){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,ae.Z)(function*(D,N){const B=vn(D),ye=(yield zr()).transaction(Xn,"readwrite"),Ae=ye.objectStore(Xn),tt=yield Ae.get(B),jt=N(tt);return void 0===jt?yield Ae.delete(B):yield Ae.put(jt,B),yield ye.done,jt&&(!tt||tt.fid!==jt.fid)&&di(D,jt.fid),jt})).apply(this,arguments)}function me(D){return X.apply(this,arguments)}function X(){return X=(0,ae.Z)(function*(D){let N;const B=yield Jt(D.appConfig,se=>{const ye=function ee(D){return Mt(D||{fid:gn(),registrationStatus:0})}(se),Ae=function K(D,N){if(0===N.registrationStatus){if(!navigator.onLine)return{installationEntry:N,registrationPromise:Promise.reject(Tt.create("app-offline"))};const B={fid:N.fid,registrationStatus:1,registrationTime:Date.now()},se=function J(D,N){return Ie.apply(this,arguments)}(D,B);return{installationEntry:B,registrationPromise:se}}return 1===N.registrationStatus?{installationEntry:N,registrationPromise:at(D)}:{installationEntry:N}}(D,ye);return N=Ae.registrationPromise,Ae.installationEntry});return B.fid===Xt?{installationEntry:yield N}:{installationEntry:B,registrationPromise:N}}),X.apply(this,arguments)}function Ie(){return Ie=(0,ae.Z)(function*(D,N){try{const B=yield function Ki(D,N){return Ln.apply(this,arguments)}(D,N);return xr(D.appConfig,B)}catch(B){throw Et(B)&&409===B.customData.serverCode?yield Zn(D.appConfig):yield xr(D.appConfig,{fid:N.fid,registrationStatus:0}),B}}),Ie.apply(this,arguments)}function at(D){return yt.apply(this,arguments)}function yt(){return(yt=(0,ae.Z)(function*(D){let N=yield pn(D.appConfig);for(;1===N.registrationStatus;)yield $r(100),N=yield pn(D.appConfig);if(0===N.registrationStatus){const{installationEntry:B,registrationPromise:se}=yield me(D);return se||B}return N})).apply(this,arguments)}function pn(D){return Jt(D,N=>{if(!N)throw Tt.create("installation-not-found");return Mt(N)})}function Mt(D){return function _n(D){return 1===D.registrationStatus&&D.registrationTime+Cr<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function dr(){return(dr=(0,ae.Z)(function*({appConfig:D,heartbeatServiceProvider:N},B){const se=function Ni(D,{fid:N}){return`${Wn(D)}/${N}/authTokens:generate`}(D,B),ye=function lr(D,{refreshToken:N}){const B=Kn(D);return B.append("Authorization",function Nr(D){return`${ke} ${D}`}(N)),B}(D,B),Ae=N.getImmediate({optional:!0});if(Ae){const an=yield Ae.getHeartbeatsHeader();an&&ye.append("x-firebase-client",an)}const jt={method:"POST",headers:ye,body:JSON.stringify({installation:{sdkVersion:vr,appId:D.appId}})},Lt=yield Qn(()=>fetch(se,jt));if(Lt.ok)return rn(yield Lt.json());throw yield xn("Generate Auth Token",Lt)})).apply(this,arguments)}function ms(D){return ts.apply(this,arguments)}function ts(){return ts=(0,ae.Z)(function*(D,N=!1){let B;const se=yield Jt(D.appConfig,Ae=>{if(!mn(Ae))throw Tt.create("not-registered");const tt=Ae.authToken;if(!N&&function En(D){return 2===D.requestStatus&&!function Tr(D){const N=Date.now();return N<D.creationTime||D.creationTime+D.expiresIn<N+qe}(D)}(tt))return Ae;if(1===tt.requestStatus)return B=function We(D,N){return Re.apply(this,arguments)}(D,N),Ae;{if(!navigator.onLine)throw Tt.create("app-offline");const jt=function hr(D){const N={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:N})}(Ae);return B=function kt(D,N){return wt.apply(this,arguments)}(D,jt),jt}});return B?yield B:se.authToken}),ts.apply(this,arguments)}function Re(){return(Re=(0,ae.Z)(function*(D,N){let B=yield ut(D.appConfig);for(;1===B.authToken.requestStatus;)yield $r(100),B=yield ut(D.appConfig);const se=B.authToken;return 0===se.requestStatus?ms(D,N):se})).apply(this,arguments)}function ut(D){return Jt(D,N=>{if(!mn(N))throw Tt.create("not-registered");return function Rr(D){return 1===D.requestStatus&&D.requestTime+Cr<Date.now()}(N.authToken)?Object.assign(Object.assign({},N),{authToken:{requestStatus:0}}):N})}function wt(){return wt=(0,ae.Z)(function*(D,N){try{const B=yield function In(D,N){return dr.apply(this,arguments)}(D,N),se=Object.assign(Object.assign({},N),{authToken:B});return yield xr(D.appConfig,se),B}catch(B){if(!Et(B)||401!==B.customData.serverCode&&404!==B.customData.serverCode){const se=Object.assign(Object.assign({},N),{authToken:{requestStatus:0}});yield xr(D.appConfig,se)}else yield Zn(D.appConfig);throw B}}),wt.apply(this,arguments)}function mn(D){return void 0!==D&&2===D.registrationStatus}function ys(){return(ys=(0,ae.Z)(function*(D){const N=D,{installationEntry:B,registrationPromise:se}=yield me(N);return se?se.catch(console.error):ms(N).catch(console.error),B.fid})).apply(this,arguments)}function Rs(){return Rs=(0,ae.Z)(function*(D,N=!1){const B=D;return yield function oi(D){return Os.apply(this,arguments)}(B),(yield ms(B,N)).token}),Rs.apply(this,arguments)}function Os(){return(Os=(0,ae.Z)(function*(D){const{registrationPromise:N}=yield me(D);N&&(yield N)})).apply(this,arguments)}function we(D){return Tt.create("missing-app-config-values",{valueName:D})}const Ne="installations",vt=D=>{const N=D.getProvider("app").getImmediate(),B=function De(D){if(!D||!D.options)throw we("App Configuration");if(!D.name)throw we("App Name");const N=["projectId","apiKey","appId"];for(const B of N)if(!D.options[B])throw we(B);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(N);return{app:N,appConfig:B,heartbeatServiceProvider:(0,he._getProvider)(N,"heartbeat"),_delete:()=>Promise.resolve()}},Zt=D=>{const N=D.getProvider("app").getImmediate(),B=(0,he._getProvider)(N,Ne).getImmediate();return{getId:()=>function xi(D){return ys.apply(this,arguments)}(B),getToken:ye=>function fi(D){return Rs.apply(this,arguments)}(B,ye)}};(function Bn(){(0,he._registerComponent)(new xe.wA(Ne,vt,"PUBLIC")),(0,he._registerComponent)(new xe.wA("installations-internal",Zt,"PRIVATE"))})(),(0,he.registerVersion)(ii,br),(0,he.registerVersion)(ii,br,"esm2017");const Dn="@firebase/remote-config",pi=new fe.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Cn{constructor(N,B,se,ye){this.client=N,this.storage=B,this.storageCache=se,this.logger=ye}isCachedDataFresh(N,B){if(!B)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const se=Date.now()-B,ye=se<=N;return this.logger.debug(`Config fetch cache check. Cache age millis: ${se}. Cache max age millis (minimumFetchIntervalMillis setting): ${N}. Is cache hit: ${ye}.`),ye}fetch(N){var B=this;return(0,ae.Z)(function*(){const[se,ye]=yield Promise.all([B.storage.getLastSuccessfulFetchTimestampMillis(),B.storage.getLastSuccessfulFetchResponse()]);if(ye&&B.isCachedDataFresh(N.cacheMaxAgeMillis,se))return ye;N.eTag=ye&&ye.eTag;const Ae=yield B.client.fetch(N),tt=[B.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Ae.status&&tt.push(B.storage.setLastSuccessfulFetchResponse(Ae)),yield Promise.all(tt),Ae})()}}function Er(D=navigator){return D.languages&&D.languages[0]||D.language}class ai{constructor(N,B,se,ye,Ae,tt){this.firebaseInstallations=N,this.sdkVersion=B,this.namespace=se,this.projectId=ye,this.apiKey=Ae,this.appId=tt}fetch(N){var B=this;return(0,ae.Z)(function*(){const[se,ye]=yield Promise.all([B.firebaseInstallations.getId(),B.firebaseInstallations.getToken()]),tt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${B.projectId}/namespaces/${B.namespace}:fetch?key=${B.apiKey}`,jt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":N.eTag||"*"},Lt={sdk_version:B.sdkVersion,app_instance_id:se,app_instance_id_token:ye,app_id:B.appId,language_code:Er()},an={method:"POST",headers:jt,body:JSON.stringify(Lt)},qn=fetch(tt,an),Sn=new Promise((Sa,es)=>{N.signal.addEventListener(()=>{const gu=new Error("The operation was aborted.");gu.name="AbortError",es(gu)})});let bo;try{yield Promise.race([qn,Sn]),bo=yield qn}catch(Sa){let es="fetch-client-network";throw"AbortError"===Sa?.name&&(es="fetch-timeout"),pi.create(es,{originalErrorMessage:Sa?.message})}let no=bo.status;const ji=bo.headers.get("ETag")||void 0;let qc,Ta;if(200===bo.status){let Sa;try{Sa=yield bo.json()}catch(es){throw pi.create("fetch-client-parse",{originalErrorMessage:es?.message})}qc=Sa.entries,Ta=Sa.state}if("INSTANCE_STATE_UNSPECIFIED"===Ta?no=500:"NO_CHANGE"===Ta?no=304:("NO_TEMPLATE"===Ta||"EMPTY_CONFIG"===Ta)&&(qc={}),304!==no&&200!==no)throw pi.create("fetch-status",{httpStatus:no});return{status:no,eTag:ji,config:qc}})()}}class Ms{constructor(N,B){this.client=N,this.storage=B}fetch(N){var B=this;return(0,ae.Z)(function*(){const se=(yield B.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return B.attemptFetch(N,se)})()}attemptFetch(N,{throttleEndTimeMillis:B,backoffCount:se}){var ye=this;return(0,ae.Z)(function*(){yield function ks(D,N){return new Promise((B,se)=>{const ye=Math.max(N-Date.now(),0),Ae=setTimeout(B,ye);D.addEventListener(()=>{clearTimeout(Ae),se(pi.create("fetch-throttle",{throttleEndTimeMillis:N}))})})}(N.signal,B);try{const Ae=yield ye.client.fetch(N);return yield ye.storage.deleteThrottleMetadata(),Ae}catch(Ae){if(!function Pi(D){if(!(D instanceof fe.ZR&&D.customData))return!1;const N=Number(D.customData.httpStatus);return 429===N||500===N||503===N||504===N}(Ae))throw Ae;const tt={throttleEndTimeMillis:Date.now()+(0,fe.$s)(se),backoffCount:se+1};return yield ye.storage.setThrottleMetadata(tt),ye.attemptFetch(N,tt)}})()}}class ui{constructor(N,B,se,ye,Ae){this.app=N,this._client=B,this._storageCache=se,this._storage=ye,this._logger=Ae,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function nn(D,N){const B=D.target.error||void 0;return pi.create(N,{originalErrorMessage:B&&B?.message})}const bi="app_namespace_store";class Ns{constructor(N,B,se,ye=function Yr(){return new Promise((D,N)=>{try{const B=indexedDB.open("firebase_remote_config",1);B.onerror=se=>{N(nn(se,"storage-open"))},B.onsuccess=se=>{D(se.target.result)},B.onupgradeneeded=se=>{0===se.oldVersion&&se.target.result.createObjectStore(bi,{keyPath:"compositeKey"})}}catch(B){N(pi.create("storage-open",{originalErrorMessage:B?.message}))}})}()){this.appId=N,this.appName=B,this.namespace=se,this.openDbPromise=ye}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(N){return this.set("last_fetch_status",N)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(N){return this.set("last_successful_fetch_timestamp_millis",N)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(N){return this.set("last_successful_fetch_response",N)}getActiveConfig(){return this.get("active_config")}setActiveConfig(N){return this.set("active_config",N)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(N){return this.set("active_config_etag",N)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(N){return this.set("throttle_metadata",N)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(N){var B=this;return(0,ae.Z)(function*(){const se=yield B.openDbPromise;return new Promise((ye,Ae)=>{const jt=se.transaction([bi],"readonly").objectStore(bi),Lt=B.createCompositeKey(N);try{const an=jt.get(Lt);an.onerror=qn=>{Ae(nn(qn,"storage-get"))},an.onsuccess=qn=>{const Sn=qn.target.result;ye(Sn?Sn.value:void 0)}}catch(an){Ae(pi.create("storage-get",{originalErrorMessage:an?.message}))}})})()}set(N,B){var se=this;return(0,ae.Z)(function*(){const ye=yield se.openDbPromise;return new Promise((Ae,tt)=>{const Lt=ye.transaction([bi],"readwrite").objectStore(bi),an=se.createCompositeKey(N);try{const qn=Lt.put({compositeKey:an,value:B});qn.onerror=Sn=>{tt(nn(Sn,"storage-set"))},qn.onsuccess=()=>{Ae()}}catch(qn){tt(pi.create("storage-set",{originalErrorMessage:qn?.message}))}})})()}delete(N){var B=this;return(0,ae.Z)(function*(){const se=yield B.openDbPromise;return new Promise((ye,Ae)=>{const jt=se.transaction([bi],"readwrite").objectStore(bi),Lt=B.createCompositeKey(N);try{const an=jt.delete(Lt);an.onerror=qn=>{Ae(nn(qn,"storage-delete"))},an.onsuccess=()=>{ye()}}catch(an){Ae(pi.create("storage-delete",{originalErrorMessage:an?.message}))}})})()}createCompositeKey(N){return[this.appId,this.appName,this.namespace,N].join()}}class is{constructor(N){this.storage=N}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var N=this;return(0,ae.Z)(function*(){const B=N.storage.getLastFetchStatus(),se=N.storage.getLastSuccessfulFetchTimestampMillis(),ye=N.storage.getActiveConfig(),Ae=yield B;Ae&&(N.lastFetchStatus=Ae);const tt=yield se;tt&&(N.lastSuccessfulFetchTimestampMillis=tt);const jt=yield ye;jt&&(N.activeConfig=jt)})()}setLastFetchStatus(N){return this.lastFetchStatus=N,this.storage.setLastFetchStatus(N)}setLastSuccessfulFetchTimestampMillis(N){return this.lastSuccessfulFetchTimestampMillis=N,this.storage.setLastSuccessfulFetchTimestampMillis(N)}setActiveConfig(N){return this.activeConfig=N,this.storage.setActiveConfig(N)}}function ss(){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,ae.Z)(function*(){if(!(0,fe.hl)())return!1;try{return yield(0,fe.eu)()}catch{return!1}})).apply(this,arguments)}!function mi(){(0,he._registerComponent)(new xe.wA("remote-config",function D(N,{instanceIdentifier:B}){const se=N.getProvider("app").getImmediate(),ye=N.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw pi.create("registration-window");if(!(0,fe.hl)())throw pi.create("indexed-db-unavailable");const{projectId:Ae,apiKey:tt,appId:jt}=se.options;if(!Ae)throw pi.create("registration-project-id");if(!tt)throw pi.create("registration-api-key");if(!jt)throw pi.create("registration-app-id");const Lt=new Ns(jt,se.name,B=B||"firebase"),an=new is(Lt),qn=new Me.Yd(Dn);qn.logLevel=Me.in.ERROR;const Sn=new ai(ye,he.SDK_VERSION,B,Ae,tt,jt),bo=new Ms(Sn,Lt),no=new Cn(bo,Lt,an,qn),ji=new ui(se,no,an,Lt,qn);return function Ci(D){const N=(0,fe.m9)(D);N._initializePromise||(N._initializePromise=N._storageCache.loadFromStorage().then(()=>{N._isInitializationComplete=!0}))}(ji),ji},"PUBLIC").setMultipleInstances(!0)),(0,he.registerVersion)(Dn,"0.4.4"),(0,he.registerVersion)(Dn,"0.4.4","esm2017")}();const os=(D,N)=>N.some(B=>D instanceof B);let Hr,Rn;const qs=new WeakMap,ci=new WeakMap,ni=new WeakMap,as=new WeakMap,oo=new WeakMap;let ki={get(D,N,B){if(D instanceof IDBTransaction){if("done"===N)return ci.get(D);if("objectStoreNames"===N)return D.objectStoreNames||ni.get(D);if("store"===N)return B.objectStoreNames[1]?void 0:B.objectStore(B.objectStoreNames[0])}return Ti(D[N])},set:(D,N,B)=>(D[N]=B,!0),has:(D,N)=>D instanceof IDBTransaction&&("done"===N||"store"===N)||N in D};function _s(D){return"function"==typeof D?function zi(D){return D!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ta(){return Rn||(Rn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(D)?function(...N){return D.apply(Es(this),N),Ti(qs.get(this))}:function(...N){return Ti(D.apply(Es(this),N))}:function(N,...B){const se=D.call(Es(this),N,...B);return ni.set(se,N.sort?N.sort():[N]),Ti(se)}}(D):(D instanceof IDBTransaction&&function ao(D){if(ci.has(D))return;const N=new Promise((B,se)=>{const ye=()=>{D.removeEventListener("complete",Ae),D.removeEventListener("error",tt),D.removeEventListener("abort",tt)},Ae=()=>{B(),ye()},tt=()=>{se(D.error||new DOMException("AbortError","AbortError")),ye()};D.addEventListener("complete",Ae),D.addEventListener("error",tt),D.addEventListener("abort",tt)});ci.set(D,N)}(D),os(D,function ea(){return Hr||(Hr=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(D,ki):D)}function Ti(D){if(D instanceof IDBRequest)return function Gr(D){const N=new Promise((B,se)=>{const ye=()=>{D.removeEventListener("success",Ae),D.removeEventListener("error",tt)},Ae=()=>{B(Ti(D.result)),ye()},tt=()=>{se(D.error),ye()};D.addEventListener("success",Ae),D.addEventListener("error",tt)});return N.then(B=>{B instanceof IDBCursor&&qs.set(B,D)}).catch(()=>{}),oo.set(N,D),N}(D);if(as.has(D))return as.get(D);const N=_s(D);return N!==D&&(as.set(D,N),oo.set(N,D)),N}const Es=D=>oo.get(D);function Eo(D,N,{blocked:B,upgrade:se,blocking:ye,terminated:Ae}={}){const tt=indexedDB.open(D,N),jt=Ti(tt);return se&&tt.addEventListener("upgradeneeded",Lt=>{se(Ti(tt.result),Lt.oldVersion,Lt.newVersion,Ti(tt.transaction))}),B&&tt.addEventListener("blocked",()=>B()),jt.then(Lt=>{Ae&&Lt.addEventListener("close",()=>Ae()),ye&&Lt.addEventListener("versionchange",()=>ye())}).catch(()=>{}),jt}function Mo(D,{blocked:N}={}){const B=indexedDB.deleteDatabase(D);return N&&B.addEventListener("blocked",()=>N()),Ti(B).then(()=>{})}const wo=["get","getKey","getAll","getAllKeys","count"],uo=["put","add","delete","clear"],da=new Map;function us(D,N){if(!(D instanceof IDBDatabase)||N in D||"string"!=typeof N)return;if(da.get(N))return da.get(N);const B=N.replace(/FromIndex$/,""),se=N!==B,ye=uo.includes(B);if(!(B in(se?IDBIndex:IDBObjectStore).prototype)||!ye&&!wo.includes(B))return;const Ae=function(){var tt=(0,ae.Z)(function*(jt,...Lt){const an=this.transaction(jt,ye?"readwrite":"readonly");let qn=an.store;return se&&(qn=qn.index(Lt.shift())),(yield Promise.all([qn[B](...Lt),ye&&an.done]))[0]});return function(Lt){return tt.apply(this,arguments)}}();return da.set(N,Ae),Ae}!function zn(D){ki=D(ki)}(D=>({...D,get:(N,B,se)=>us(N,B)||D.get(N,B,se),has:(N,B)=>!!us(N,B)||D.has(N,B)}));const co="/firebase-messaging-sw.js",jo="/firebase-cloud-messaging-push-scope",$a="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",xa="https://fcmregistrations.googleapis.com/v1",mr="google.c.a.c_id",No="google.c.a.c_l",Ha="google.c.a.ts";var x=function(D){return D.PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",D}(x||{});function te(D){const N=new Uint8Array(D);return btoa(String.fromCharCode(...N)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function _e(D){const B=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),se=atob(B),ye=new Uint8Array(se.length);for(let Ae=0;Ae<se.length;++Ae)ye[Ae]=se.charCodeAt(Ae);return ye}const qt="fcm_token_details_db",cn=5,Li="fcm_token_object_Store";function yi(){return yi=(0,ae.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Ae=>Ae.name).includes(qt))return null;let N=null;return(yield Eo(qt,cn,{upgrade:(se=(0,ae.Z)(function*(ye,Ae,tt,jt){var Lt;if(Ae<2||!ye.objectStoreNames.contains(Li))return;const an=jt.objectStore(Li),qn=yield an.index("fcmSenderId").get(D);if(yield an.clear(),qn)if(2===Ae){const Sn=qn;if(!Sn.auth||!Sn.p256dh||!Sn.endpoint)return;N={token:Sn.fcmToken,createTime:null!==(Lt=Sn.createTime)&&void 0!==Lt?Lt:Date.now(),subscriptionOptions:{auth:Sn.auth,p256dh:Sn.p256dh,endpoint:Sn.endpoint,swScope:Sn.swScope,vapidKey:"string"==typeof Sn.vapidKey?Sn.vapidKey:te(Sn.vapidKey)}}}else if(3===Ae){const Sn=qn;N={token:Sn.fcmToken,createTime:Sn.createTime,subscriptionOptions:{auth:te(Sn.auth),p256dh:te(Sn.p256dh),endpoint:Sn.endpoint,swScope:Sn.swScope,vapidKey:te(Sn.vapidKey)}}}else if(4===Ae){const Sn=qn;N={token:Sn.fcmToken,createTime:Sn.createTime,subscriptionOptions:{auth:te(Sn.auth),p256dh:te(Sn.p256dh),endpoint:Sn.endpoint,swScope:Sn.swScope,vapidKey:te(Sn.vapidKey)}}}}),function(Ae,tt,jt,Lt){return se.apply(this,arguments)})})).close(),yield Mo(qt),yield Mo("fcm_vapid_details_db"),yield Mo("undefined"),function cs(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:N}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof N.auth&&N.auth.length>0&&"string"==typeof N.p256dh&&N.p256dh.length>0&&"string"==typeof N.endpoint&&N.endpoint.length>0&&"string"==typeof N.swScope&&N.swScope.length>0&&"string"==typeof N.vapidKey&&N.vapidKey.length>0}(N)?N:null;var se}),yi.apply(this,arguments)}const Gi="firebase-messaging-database",Io=1,Ks="firebase-messaging-store";let Wr=null;function ha(){return Wr||(Wr=Eo(Gi,Io,{upgrade:(D,N)=>{0===N&&D.createObjectStore(Ks)}})),Wr}function Qi(D){return na.apply(this,arguments)}function na(){return na=(0,ae.Z)(function*(D){const N=pa(D),se=yield(yield ha()).transaction(Ks).objectStore(Ks).get(N);if(se)return se;{const ye=yield function ws(D){return yi.apply(this,arguments)}(D.appConfig.senderId);if(ye)return yield fa(D,ye),ye}}),na.apply(this,arguments)}function fa(D,N){return ra.apply(this,arguments)}function ra(){return(ra=(0,ae.Z)(function*(D,N){const B=pa(D),ye=(yield ha()).transaction(Ks,"readwrite");return yield ye.objectStore(Ks).put(N,B),yield ye.done,N})).apply(this,arguments)}function Zs(){return(Zs=(0,ae.Z)(function*(D){const N=pa(D),se=(yield ha()).transaction(Ks,"readwrite");yield se.objectStore(Ks).delete(N),yield se.done})).apply(this,arguments)}function pa({appConfig:D}){return D.appId}const vi=new fe.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Qs(D,N){return $o.apply(this,arguments)}function $o(){return($o=(0,ae.Z)(function*(D,N){const B=yield xo(D),se=Ra(N),ye={method:"POST",headers:B,body:JSON.stringify(se)};let Ae;try{Ae=yield(yield fetch(ga(D.appConfig),ye)).json()}catch(tt){throw vi.create("token-subscribe-failed",{errorInfo:tt?.toString()})}if(Ae.error)throw vi.create("token-subscribe-failed",{errorInfo:Ae.error.message});if(!Ae.token)throw vi.create("token-subscribe-no-token");return Ae.token})).apply(this,arguments)}function Ls(){return(Ls=(0,ae.Z)(function*(D,N){const B=yield xo(D),se=Ra(N.subscriptionOptions),ye={method:"PATCH",headers:B,body:JSON.stringify(se)};let Ae;try{Ae=yield(yield fetch(`${ga(D.appConfig)}/${N.token}`,ye)).json()}catch(tt){throw vi.create("token-update-failed",{errorInfo:tt?.toString()})}if(Ae.error)throw vi.create("token-update-failed",{errorInfo:Ae.error.message});if(!Ae.token)throw vi.create("token-update-no-token");return Ae.token})).apply(this,arguments)}function Xs(D,N){return _i.apply(this,arguments)}function _i(){return(_i=(0,ae.Z)(function*(D,N){const se={method:"DELETE",headers:yield xo(D)};try{const Ae=yield(yield fetch(`${ga(D.appConfig)}/${N}`,se)).json();if(Ae.error)throw vi.create("token-unsubscribe-failed",{errorInfo:Ae.error.message})}catch(ye){throw vi.create("token-unsubscribe-failed",{errorInfo:ye?.toString()})}})).apply(this,arguments)}function ga({projectId:D}){return`${xa}/projects/${D}/registrations`}function xo(D){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,ae.Z)(function*({appConfig:D,installations:N}){const B=yield N.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${B}`})})).apply(this,arguments)}function Ra({p256dh:D,auth:N,endpoint:B,vapidKey:se}){const ye={web:{endpoint:B,auth:N,p256dh:D}};return se!==$a&&(ye.web.applicationPubKey=se),ye}const wu=6048e5;function Vs(){return Vs=(0,ae.Z)(function*(D){const N=yield function Ho(D,N){return Ga.apply(this,arguments)}(D.swRegistration,D.vapidKey),B={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:N.endpoint,auth:te(N.getKey("auth")),p256dh:te(N.getKey("p256dh"))},se=yield Qi(D.firebaseDependencies);if(se){if(function C(D,N){return N.vapidKey===D.vapidKey&&N.endpoint===D.endpoint&&N.auth===D.auth&&N.p256dh===D.p256dh}(se.subscriptionOptions,B))return Date.now()>=se.createTime+wu?function ma(D,N){return Po.apply(this,arguments)}(D,{token:se.token,createTime:Date.now(),subscriptionOptions:B}):se.token;try{yield Xs(D.firebaseDependencies,se.token)}catch(ye){console.warn(ye)}return ko(D.firebaseDependencies,B)}return ko(D.firebaseDependencies,B)}),Vs.apply(this,arguments)}function Oo(){return Oo=(0,ae.Z)(function*(D){const N=yield Qi(D.firebaseDependencies);N&&(yield Xs(D.firebaseDependencies,N.token),yield function xs(D){return Zs.apply(this,arguments)}(D.firebaseDependencies));const B=yield D.swRegistration.pushManager.getSubscription();return!B||B.unsubscribe()}),Oo.apply(this,arguments)}function Po(){return Po=(0,ae.Z)(function*(D,N){try{const B=yield function Ar(D,N){return Ls.apply(this,arguments)}(D.firebaseDependencies,N),se=Object.assign(Object.assign({},N),{token:B,createTime:Date.now()});return yield fa(D.firebaseDependencies,se),B}catch(B){throw yield function Vi(D){return Oo.apply(this,arguments)}(D),B}}),Po.apply(this,arguments)}function ko(D,N){return za.apply(this,arguments)}function za(){return(za=(0,ae.Z)(function*(D,N){const se={token:yield Qs(D,N),createTime:Date.now(),subscriptionOptions:N};return yield fa(D,se),se.token})).apply(this,arguments)}function Ga(){return(Ga=(0,ae.Z)(function*(D,N){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:_e(N)})})).apply(this,arguments)}function q(D){const N={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function O(D,N){if(!N.notification)return;D.notification={};const B=N.notification.title;B&&(D.notification.title=B);const se=N.notification.body;se&&(D.notification.body=se);const ye=N.notification.image;ye&&(D.notification.image=ye);const Ae=N.notification.icon;Ae&&(D.notification.icon=Ae)}(N,D),function j(D,N){N.data&&(D.data=N.data)}(N,D),function de(D,N){var B,se,ye,Ae,tt;if(!(N.fcmOptions||null!==(B=N.notification)&&void 0!==B&&B.click_action))return;D.fcmOptions={};const jt=null!==(ye=null===(se=N.fcmOptions)||void 0===se?void 0:se.link)&&void 0!==ye?ye:null===(Ae=N.notification)||void 0===Ae?void 0:Ae.click_action;jt&&(D.fcmOptions.link=jt);const Lt=null===(tt=N.fcmOptions)||void 0===tt?void 0:tt.analytics_label;Lt&&(D.fcmOptions.analyticsLabel=Lt)}(N,D),N}function st(D,N){const B=[];for(let se=0;se<D.length;se++)B.push(D.charAt(se)),se<N.length&&B.push(N.charAt(se));return B.join("")}function Or(D){return vi.create("missing-app-config-values",{valueName:D})}st("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),st("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class rr{constructor(N,B,se){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const ye=function sn(D){if(!D||!D.options)throw Or("App Configuration Object");if(!D.name)throw Or("App Name");const N=["projectId","apiKey","appId","messagingSenderId"],{options:B}=D;for(const se of N)if(!B[se])throw Or(se);return{appName:D.name,projectId:B.projectId,apiKey:B.apiKey,appId:B.appId,senderId:B.messagingSenderId}}(N);this.firebaseDependencies={app:N,appConfig:ye,installations:B,analyticsProvider:se}}_delete(){return Promise.resolve()}}function un(){return(un=(0,ae.Z)(function*(D){try{D.swRegistration=yield navigator.serviceWorker.register(co,{scope:jo}),D.swRegistration.update().catch(()=>{})}catch(N){throw vi.create("failed-service-worker-registration",{browserErrorMessage:N?.message})}})).apply(this,arguments)}function Gn(){return(Gn=(0,ae.Z)(function*(D,N){if(!N&&!D.swRegistration&&(yield function ir(D){return un.apply(this,arguments)}(D)),N||!D.swRegistration){if(!(N instanceof ServiceWorkerRegistration))throw vi.create("invalid-sw-registration");D.swRegistration=N}})).apply(this,arguments)}function Js(){return(Js=(0,ae.Z)(function*(D,N){N?D.vapidKey=N:D.vapidKey||(D.vapidKey=$a)})).apply(this,arguments)}function Mr(){return Mr=(0,ae.Z)(function*(D,N){if(!navigator)throw vi.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw vi.create("permission-blocked");return yield function qr(D,N){return Js.apply(this,arguments)}(D,N?.vapidKey),yield function Br(D,N){return Gn.apply(this,arguments)}(D,N?.serviceWorkerRegistration),function ls(D){return Vs.apply(this,arguments)}(D)}),Mr.apply(this,arguments)}function Fi(){return(Fi=(0,ae.Z)(function*(D,N,B){const se=function Bt(D){switch(D){case x.NOTIFICATION_CLICKED:return"notification_open";case x.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(N);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(se,{message_id:B[mr],message_name:B[No],message_time:B[Ha],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Ur(){return Ur=(0,ae.Z)(function*(D,N){const B=N.data;if(!B.isFirebaseMessaging)return;D.onMessageHandler&&B.messageType===x.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(q(B)):D.onMessageHandler.next(q(B)));const se=B.data;(function Ke(D){return"object"==typeof D&&!!D&&mr in D})(se)&&"1"===se["google.c.a.e"]&&(yield function Si(D,N,B){return Fi.apply(this,arguments)}(D,B.messageType,se))}),Ur.apply(this,arguments)}const Ft="@firebase/messaging",ot=D=>{const N=new rr(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",B=>function zt(D,N){return Ur.apply(this,arguments)}(N,B)),N},Xi=D=>{const N=D.getProvider("messaging").getImmediate();return{getToken:se=>function dt(D,N){return Mr.apply(this,arguments)}(N,se)}};function Oa(){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,ae.Z)(function*(){try{yield(0,fe.eu)()}catch{return!1}return typeof window<"u"&&(0,fe.hl)()&&(0,fe.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Iu(){(0,he._registerComponent)(new xe.wA("messaging",ot,"PUBLIC")),(0,he._registerComponent)(new xe.wA("messaging-internal",Xi,"PRIVATE")),(0,he.registerVersion)(Ft,"0.12.4"),(0,he.registerVersion)(Ft,"0.12.4","esm2017")}();const On="analytics",ya="firebase_id",bn="origin",Kr=6e4,hn="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",va="https://www.googletagmanager.com/gtag/js",on=new Me.Yd("@firebase/analytics"),tr=new fe.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Ot(D){if(!D.startsWith(va)){const N=tr.create("invalid-gtag-resource",{gtagURL:D});return on.warn(N.message),""}return D}function _a(D){return Promise.all(D.map(N=>N.catch(B=>B)))}function lt(){return(lt=(0,ae.Z)(function*(D,N,B,se,ye,Ae){const tt=se[ye];try{if(tt)yield N[tt];else{const Lt=(yield _a(B)).find(an=>an.measurementId===ye);Lt&&(yield N[Lt.appId])}}catch(jt){on.error(jt)}D("config",ye,Ae)})).apply(this,arguments)}function zo(){return(zo=(0,ae.Z)(function*(D,N,B,se,ye){try{let Ae=[];if(ye&&ye.send_to){let tt=ye.send_to;Array.isArray(tt)||(tt=[tt]);const jt=yield _a(B);for(const Lt of tt){const an=jt.find(Sn=>Sn.measurementId===Lt),qn=an&&N[an.appId];if(!qn){Ae=[];break}Ae.push(qn)}}0===Ae.length&&(Ae=Object.values(N)),yield Promise.all(Ae),D("event",se,ye||{})}catch(Ae){on.error(Ae)}})).apply(this,arguments)}const R=30,ve=new class ie{constructor(N={},B=1e3){this.throttleMetadata=N,this.intervalMillis=B}getThrottleMetadata(N){return this.throttleMetadata[N]}setThrottleMetadata(N,B){this.throttleMetadata[N]=B}deleteThrottleMetadata(N){delete this.throttleMetadata[N]}};function Q(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function Qe(){return(Qe=(0,ae.Z)(function*(D){var N;const{appId:B,apiKey:se}=D,ye={method:"GET",headers:Q(se)},Ae=hn.replace("{app-id}",B),tt=yield fetch(Ae,ye);if(200!==tt.status&&304!==tt.status){let jt="";try{const Lt=yield tt.json();null!==(N=Lt.error)&&void 0!==N&&N.message&&(jt=Lt.error.message)}catch{}throw tr.create("config-fetch-failed",{httpStatus:tt.status,responseMessage:jt})}return tt.json()})).apply(this,arguments)}function Pt(){return(Pt=(0,ae.Z)(function*(D,N=ve,B){const{appId:se,apiKey:ye,measurementId:Ae}=D.options;if(!se)throw tr.create("no-app-id");if(!ye){if(Ae)return{measurementId:Ae,appId:se};throw tr.create("no-api-key")}const tt=N.getThrottleMetadata(se)||{backoffCount:0,throttleEndTimeMillis:Date.now()},jt=new Zr;return setTimeout((0,ae.Z)(function*(){jt.abort()}),void 0!==B?B:Kr),Un({appId:se,apiKey:ye,measurementId:Ae},tt,jt,N)})).apply(this,arguments)}function Un(D,N,B){return Tn.apply(this,arguments)}function Tn(){return Tn=(0,ae.Z)(function*(D,{throttleEndTimeMillis:N,backoffCount:B},se,ye=ve){var Ae;const{appId:tt,measurementId:jt}=D;try{yield function Kt(D,N){return new Promise((B,se)=>{const ye=Math.max(N-Date.now(),0),Ae=setTimeout(B,ye);D.addEventListener(()=>{clearTimeout(Ae),se(tr.create("fetch-throttle",{throttleEndTimeMillis:N}))})})}(se,N)}catch(Lt){if(jt)return on.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${jt} provided in the "measurementId" field in the local Firebase config. [${Lt?.message}]`),{appId:tt,measurementId:jt};throw Lt}try{const Lt=yield function je(D){return Qe.apply(this,arguments)}(D);return ye.deleteThrottleMetadata(tt),Lt}catch(Lt){const an=Lt;if(!function Fn(D){if(!(D instanceof fe.ZR&&D.customData))return!1;const N=Number(D.customData.httpStatus);return 429===N||500===N||503===N||504===N}(an)){if(ye.deleteThrottleMetadata(tt),jt)return on.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${jt} provided in the "measurementId" field in the local Firebase config. [${an?.message}]`),{appId:tt,measurementId:jt};throw Lt}const qn=503===Number(null===(Ae=an?.customData)||void 0===Ae?void 0:Ae.httpStatus)?(0,fe.$s)(B,ye.intervalMillis,R):(0,fe.$s)(B,ye.intervalMillis),Sn={throttleEndTimeMillis:Date.now()+qn,backoffCount:B+1};return ye.setThrottleMetadata(tt,Sn),on.debug(`Calling attemptFetch again in ${qn} millis`),Un(D,Sn,se,ye)}}),Tn.apply(this,arguments)}class Zr{constructor(){this.listeners=[]}addEventListener(N){this.listeners.push(N)}abort(){this.listeners.forEach(N=>N())}}let Bi,$e;function Pr(){return(Pr=(0,ae.Z)(function*(D,N,B,se,ye){if(ye&&ye.global)D("event",B,se);else{const Ae=yield N;D("event",B,Object.assign(Object.assign({},se),{send_to:Ae}))}})).apply(this,arguments)}function xt(){return(xt=(0,ae.Z)(function*(){if(!(0,fe.hl)())return on.warn(tr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,fe.eu)()}catch(D){return on.warn(tr.create("indexeddb-unavailable",{errorInfo:D?.toString()}).message),!1}return!0})).apply(this,arguments)}function fr(){return fr=(0,ae.Z)(function*(D,N,B,se,ye,Ae,tt){var jt;const Lt=function Dt(D){return Pt.apply(this,arguments)}(D);Lt.then(no=>{B[no.measurementId]=no.appId,D.options.measurementId&&no.measurementId!==D.options.measurementId&&on.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${no.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(no=>on.error(no)),N.push(Lt);const an=function ft(){return xt.apply(this,arguments)}().then(no=>{if(no)return se.getId()}),[qn,Sn]=yield Promise.all([Lt,an]);(function I(D){const N=window.document.getElementsByTagName("script");for(const B of Object.values(N))if(B.src&&B.src.includes(va)&&B.src.includes(D))return B;return null})(Ae)||function Ea(D,N){const B=function Pa(D,N){let B;return window.trustedTypes&&(B=window.trustedTypes.createPolicy(D,N)),B}("firebase-js-sdk-policy",{createScriptURL:Ot}),se=document.createElement("script"),ye=`${va}?l=${D}&id=${N}`;se.src=B?B?.createScriptURL(ye):ye,se.async=!0,document.head.appendChild(se)}(Ae,qn.measurementId),$e&&(ye("consent","default",$e),function Fe(D){$e=D}(void 0)),ye("js",new Date);const bo=null!==(jt=tt?.config)&&void 0!==jt?jt:{};return bo[bn]="firebase",bo.update=!0,null!=Sn&&(bo[ya]=Sn),ye("config",qn.measurementId,bo),Bi&&(ye("set",Bi),function Xe(D){Bi=D}(void 0)),qn.measurementId}),fr.apply(this,arguments)}class Is{constructor(N){this.app=N}_delete(){return delete Qr[this.app.options.appId],Promise.resolve()}}let Qr={},Do=[];const kr={};let Ai,Us,ia="dataLayer",Ji=!1;function yc(D,N,B){!function wa(){const D=[];if((0,fe.ru)()&&D.push("This is a browser extension environment."),(0,fe.zI)()||D.push("Cookies are not available."),D.length>0){const N=D.map((se,ye)=>`(${ye+1}) ${se}`).join(" "),B=tr.create("invalid-analytics-context",{errorInfo:N});on.warn(B.message)}}();const se=D.options.appId;if(!se)throw tr.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw tr.create("no-api-key");on.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Qr[se])throw tr.create("already-exists",{id:se});if(!Ji){!function Xa(D){let N=[];Array.isArray(window[D])?N=window[D]:window[D]=N}(ia);const{wrappedGtag:Ae,gtagCore:tt}=function y(D,N,B,se,ye){let Ae=function(...tt){window[se].push(arguments)};return window[ye]&&"function"==typeof window[ye]&&(Ae=window[ye]),window[ye]=function H(D,N,B,se){function Ae(){return Ae=(0,ae.Z)(function*(tt,...jt){try{if("event"===tt){const[Lt,an]=jt;yield function sr(D,N,B,se,ye){return zo.apply(this,arguments)}(D,N,B,Lt,an)}else if("config"===tt){const[Lt,an]=jt;yield function Ja(D,N,B,se,ye,Ae){return lt.apply(this,arguments)}(D,N,B,se,Lt,an)}else if("consent"===tt){const[Lt]=jt;D("consent","update",Lt)}else if("get"===tt){const[Lt,an,qn]=jt;D("get",Lt,an,qn)}else if("set"===tt){const[Lt]=jt;D("set",Lt)}else D(tt,...jt)}catch(Lt){on.error(Lt)}}),Ae.apply(this,arguments)}return function ye(tt){return Ae.apply(this,arguments)}}(Ae,D,N,B),{gtagCore:Ae,wrappedGtag:window[ye]}}(Qr,Do,kr,ia,"gtag");Us=Ae,Ai=tt,Ji=!0}return Qr[se]=function At(D,N,B,se,ye,Ae,tt){return fr.apply(this,arguments)}(D,Do,kr,N,Ai,ia,B),new Is(D)}function js(){return Go.apply(this,arguments)}function Go(){return(Go=(0,ae.Z)(function*(){if((0,fe.ru)()||!(0,fe.zI)()||!(0,fe.hl)())return!1;try{return yield(0,fe.eu)()}catch{return!1}})).apply(this,arguments)}const Zu="@firebase/analytics";!function hs(){(0,he._registerComponent)(new xe.wA(On,(N,{options:B})=>yc(N.getProvider("app").getImmediate(),N.getProvider("installations-internal").getImmediate(),B),"PUBLIC")),(0,he._registerComponent)(new xe.wA("analytics-internal",function D(N){try{const B=N.getProvider(On).getImmediate();return{logEvent:(se,ye,Ae)=>function Cu(D,N,B,se){D=(0,fe.m9)(D),function ds(D,N,B,se,ye){return Pr.apply(this,arguments)}(Us,Qr[D.app.options.appId],N,B,se).catch(ye=>on.error(ye))}(B,se,ye,Ae)}}catch(B){throw tr.create("interop-component-reg-failed",{reason:B})}},"PRIVATE")),(0,he.registerVersion)(Zu,"0.10.0"),(0,he.registerVersion)(Zu,"0.10.0","esm2017")}();var Yu=z(1954),wi=z(2631);const Qu=new class nu extends wi.v{}(class ka extends Yu.o{constructor(N,B){super(N,B),this.scheduler=N,this.work=B}schedule(N,B=0){return B>0?super.schedule(N,B):(this.delay=B,this.state=N,this.scheduler.flush(this),this)}execute(N,B){return B>0||this.closed?super.execute(N,B):this._execute(N,B)}requestAsyncId(N,B,se=0){return null!=se&&se>0||null==se&&this.delay>0?super.requestAsyncId(N,B,se):(N.flush(this),0)}});var Xu=z(6321),qo=z(5592),Fa=z(9397),Lo=z(5137),ru=z(3093);const Da=new p.GfV("7.6.1"),Co="__angularfire_symbol__analyticsIsSupportedValue",La="__angularfire_symbol__analyticsIsSupported",Ca="__angularfire_symbol__remoteConfigIsSupportedValue",Su="__angularfire_symbol__remoteConfigIsSupported",qa="__angularfire_symbol__messagingIsSupportedValue",hu="__angularfire_symbol__messagingIsSupported";function vc(D,N,B){if(N){if(1===N.length)return N[0];const Ae=N.filter(tt=>tt.app===B);if(1===Ae.length)return Ae[0]}return B.container.getProvider(D).getImmediate({optional:!0})}globalThis[La]||(globalThis[La]=js().then(D=>globalThis[Co]=D).catch(()=>globalThis[Co]=!1)),globalThis[hu]||(globalThis[hu]=Oa().then(D=>globalThis[qa]=D).catch(()=>globalThis[qa]=!1)),globalThis[Su]||(globalThis[Su]=ss().then(D=>globalThis[Ca]=D).catch(()=>globalThis[Ca]=!1));const Gc=(D,N)=>{const B=N?[N]:(0,W.C6)(),se=[];return B.forEach(ye=>{ye.container.getProvider(D).instances.forEach(tt=>{se.includes(tt)||se.push(tt)})}),se};function Ba(){}class ba{constructor(N,B=Qu){this.zone=N,this.delegate=B}now(){return this.delegate.now()}schedule(N,B,se){const ye=this.zone;return this.delegate.schedule(function(tt){ye.runGuarded(()=>{N.apply(this,[tt])})},B,se)}}class Ml{constructor(N){this.zone=N,this.task=null}call(N,B){const se=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ba,{},Ba,Ba)),B.pipe((0,Fa.b)({next:se,complete:se,error:se})).subscribe(N).add(se)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let $s=(()=>{class D{constructor(B){this.ngZone=B,this.outsideAngular=B.runOutsideAngular(()=>new ba(Zone.current)),this.insideAngular=B.run(()=>new ba(Zone.current,Xu.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(B){return new(B||D)(p.LFG(p.R0b))},D.\u0275prov=p.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function fu(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function Ua(D){return fu().ngZone.run(()=>D())}function li(D){return fu(),function Ko(D){return function(B){return(B=B.lift(new Ml(D.ngZone))).pipe((0,Lo.R)(D.outsideAngular),(0,ru.Q)(D.insideAngular))}}(fu())(D)}const pu=(D,N)=>function(){const se=arguments;return N&&setTimeout(()=>{"scheduled"===N.state&&N.invoke()},10),Ua(()=>D.apply(void 0,se))},Za=(D,N)=>function(){let B;const se=arguments;for(let Ae=0;Ae<arguments.length;Ae++)"function"==typeof se[Ae]&&(N&&(B||(B=Ua(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ba,{},Ba,Ba)))),se[Ae]=pu(se[Ae],B));const ye=function Wc(D){return fu().ngZone.runOutsideAngular(()=>D())}(()=>D.apply(this,se));if(!N){if(ye instanceof qo.y){const Ae=fu();return ye.pipe((0,Lo.R)(Ae.outsideAngular),(0,ru.Q)(Ae.insideAngular))}return Ua(()=>ye)}return ye instanceof qo.y?ye.pipe(li):ye instanceof Promise?Ua(()=>new Promise((Ae,tt)=>ye.then(jt=>Ua(()=>Ae(jt)),jt=>Ua(()=>tt(jt))))):"function"==typeof ye&&B?function(){return setTimeout(()=>{B&&"scheduled"===B.state&&B.invoke()},10),ye.apply(this,arguments)}:Ua(()=>ye)}},6878:($t,Ge,z)=>{z.d(Ge,{$:()=>co,A:()=>pe,B:()=>ir,D:()=>rt,I:()=>yo,J:()=>vt,L:()=>It,N:()=>Jt,P:()=>At,Q:()=>Ns,R:()=>ho,U:()=>Ao,V:()=>ss,W:()=>Hi,X:()=>Yi,Y:()=>ea,Z:()=>ta,_:()=>oo,a:()=>lu,a0:()=>$a,a1:()=>mr,a2:()=>U,a3:()=>Li,a4:()=>yi,a5:()=>Gi,a6:()=>Ks,a7:()=>ha,a8:()=>na,a9:()=>ra,aA:()=>Se,aB:()=>La,aC:()=>Zn,aD:()=>Yn,aE:()=>Fa,aF:()=>Al,aG:()=>Ui,aH:()=>Lr,aL:()=>Wa,aO:()=>Hr,aa:()=>xs,ab:()=>pa,ac:()=>Ys,ad:()=>Ar,ae:()=>Xs,af:()=>ga,ai:()=>wu,aj:()=>Vs,ak:()=>Vi,an:()=>zi,ao:()=>O,aq:()=>Js,ar:()=>Ft,as:()=>en,at:()=>Mt,au:()=>at,av:()=>le,aw:()=>Sn,ax:()=>hu,ay:()=>_n,az:()=>Ve,b:()=>eo,c:()=>Us,d:()=>yc,e:()=>tu,f:()=>Zu,g:()=>nu,h:()=>Yu,i:()=>G,j:()=>Xu,k:()=>Ta,l:()=>k,m:()=>gu,o:()=>yd,p:()=>Ee,r:()=>ce,s:()=>v,u:()=>ft,v:()=>Ke});var p=z(5861),W=z(9058),ae=z(534),he=z(7582),fe=z(7879),xe=z(4537);const Ee={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},pe={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const rt=function Te(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},mt=function et(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ht=new W.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Rt=new fe.Yd("@firebase/auth");function bt(w,...h){Rt.logLevel<=fe.in.ERROR&&Rt.error(`Auth (${ae.SDK_VERSION}): ${w}`,...h)}function le(w,...h){throw pt(w,...h)}function Ve(w,...h){return pt(w,...h)}function Oe(w,h,g){const b=Object.assign(Object.assign({},mt()),{[h]:g});return new W.LL("auth","Firebase",b).create(h,{appName:w.name})}function Ze(w,h,g){if(!(h instanceof g))throw g.name!==h.constructor.name&&le(w,"argument-error"),Oe(w,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function pt(w,...h){if("string"!=typeof w){const g=h[0],b=[...h.slice(1)];return b[0]&&(b[0].appName=w.name),w._errorFactory.create(g,...b)}return ht.create(w,...h)}function Se(w,h,...g){if(!w)throw pt(h,...g)}function ln(w){const h="INTERNAL ASSERTION FAILED: "+w;throw bt(h),new Error(h)}function en(w,h){w||ln(h)}function Nn(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function dn(){return"http:"===Dr()||"https:"===Dr()}function Dr(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class Cr{constructor(h,g){this.shortDelay=h,this.longDelay=g,en(g>h,"Short delay should be less than long delay!"),this.isMobile=(0,W.uI)()||(0,W.b$)()}get(){return function ii(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(dn()||(0,W.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function vr(w,h){en(w.emulator,"Emulator should always be set here");const{url:g}=w.emulator;return h?`${g}${h.startsWith("/")?h.slice(1):h}`:g}class ke{static initialize(h,g,b){this.fetchImpl=h,g&&(this.headersImpl=g),b&&(this.responseImpl=b)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ln("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ln("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ln("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const He={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},qe=new Cr(3e4,6e4);function Be(w,h){return w.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:w.tenantId}):h}function Je(w,h,g,b){return gt.apply(this,arguments)}function gt(){return(gt=(0,p.Z)(function*(w,h,g,b,$={}){return Tt(w,$,(0,p.Z)(function*(){let re={},be={};b&&("GET"===h?be=b:re={body:JSON.stringify(b)});const Ye=(0,W.xO)(Object.assign({key:w.config.apiKey},be)).slice(1),Nt=yield w._getAdditionalHeaders();return Nt["Content-Type"]="application/json",w.languageCode&&(Nt["X-Firebase-Locale"]=w.languageCode),ke.fetch()(xn(w,w.config.apiHost,g,Ye),Object.assign({method:h,headers:Nt,referrerPolicy:"no-referrer"},re))}))})).apply(this,arguments)}function Tt(w,h,g){return Et.apply(this,arguments)}function Et(){return(Et=(0,p.Z)(function*(w,h,g){w._canInitEmulator=!1;const b=Object.assign(Object.assign({},He),h);try{const $=new Ht(w),re=yield Promise.race([g(),$.promise]);$.clearNetworkTimeout();const be=yield re.json();if("needConfirmation"in be)throw Kn(w,"account-exists-with-different-credential",be);if(re.ok&&!("errorMessage"in be))return be;{const Ye=re.ok?be.errorMessage:be.error.message,[Nt,Ut]=Ye.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Nt)throw Kn(w,"credential-already-in-use",be);if("EMAIL_EXISTS"===Nt)throw Kn(w,"email-already-in-use",be);if("USER_DISABLED"===Nt)throw Kn(w,"user-disabled",be);const yn=b[Nt]||Nt.toLowerCase().replace(/[_\s]+/g,"-");if(Ut)throw Oe(w,yn,Ut);le(w,yn)}}catch($){if($ instanceof W.ZR)throw $;le(w,"network-request-failed",{message:String($)})}})).apply(this,arguments)}function Wn(w,h,g,b){return rn.apply(this,arguments)}function rn(){return(rn=(0,p.Z)(function*(w,h,g,b,$={}){const re=yield Je(w,h,g,b,$);return"mfaPendingCredential"in re&&le(w,"multi-factor-auth-required",{_serverResponse:re}),re})).apply(this,arguments)}function xn(w,h,g,b){const $=`${h}${g}?${b}`;return w.config.emulator?vr(w.config,$):`${w.config.apiScheme}://${$}`}class Ht{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((g,b)=>{this.timer=setTimeout(()=>b(Ve(this.auth,"network-request-failed")),qe.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Kn(w,h,g){const b={appName:w.name};g.email&&(b.email=g.email),g.phoneNumber&&(b.phoneNumber=g.phoneNumber);const $=Ve(w,h,b);return $.customData._tokenResponse=g,$}function Qn(){return(Qn=(0,p.Z)(function*(w,h){return Je(w,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function Vt(){return(Vt=(0,p.Z)(function*(w,h){return Je(w,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Ki(){return(Ki=(0,p.Z)(function*(w,h){return Je(w,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function Ln(w){if(w)try{const h=new Date(Number(w));if(!isNaN(h.getTime()))return h.toUTCString()}catch{}}function nr(){return(nr=(0,p.Z)(function*(w,h=!1){const g=(0,W.m9)(w),b=yield g.getIdToken(h),$=gn(b);Se($&&$.exp&&$.auth_time&&$.iat,g.auth,"internal-error");const re="object"==typeof $.firebase?$.firebase:void 0,be=re?.sign_in_provider;return{claims:$,token:b,authTime:Ln(Xt($.auth_time)),issuedAtTime:Ln(Xt($.iat)),expirationTime:Ln(Xt($.exp)),signInProvider:be||null,signInSecondFactor:re?.sign_in_second_factor||null}})).apply(this,arguments)}function Xt(w){return 1e3*Number(w)}function gn(w){const[h,g,b]=w.split(".");if(void 0===h||void 0===g||void 0===b)return bt("JWT malformed, contained fewer than 3 sections"),null;try{const $=(0,W.tV)(g);return $?JSON.parse($):(bt("Failed to decode base64 JWT payload"),null)}catch($){return bt("Caught error parsing JWT payload as JSON",$?.toString()),null}}function vn(w,h){return _r.apply(this,arguments)}function _r(){return(_r=(0,p.Z)(function*(w,h,g=!1){if(g)return h;try{return yield h}catch(b){throw b instanceof W.ZR&&function di({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}(b)&&w.auth.currentUser===w&&(yield w.auth.signOut()),b}})).apply(this,arguments)}class Vn{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var g;if(h){const b=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),b}{this.errorBackoff=3e4;const $=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,$)}}schedule(h=!1){var g=this;if(!this.isRunning)return;const b=this.getInterval(h);this.timerId=setTimeout((0,p.Z)(function*(){yield g.iteration()}),b)}iteration(){var h=this;return(0,p.Z)(function*(){try{yield h.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g?.code&&h.schedule(!0))}h.schedule()})()}}class pr{constructor(h,g){this.createdAt=h,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ln(this.lastLoginAt),this.creationTime=Ln(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Mi(w){return jn.apply(this,arguments)}function jn(){return jn=(0,p.Z)(function*(w){var h;const g=w.auth,b=yield w.getIdToken(),$=yield vn(w,function Nr(w,h){return Ki.apply(this,arguments)}(g,{idToken:b}));Se($?.users.length,g,"internal-error");const re=$.users[0];w._notifyReloadListener(re);const be=null!==(h=re.providerUserInfo)&&void 0!==h&&h.length?function Pn(w){return w.map(h=>{var{providerId:g}=h,b=(0,he._T)(h,["providerId"]);return{providerId:g,uid:b.rawId||"",displayName:b.displayName||null,email:b.email||null,phoneNumber:b.phoneNumber||null,photoURL:b.photoUrl||null}})}(re.providerUserInfo):[],Ye=function gr(w,h){return[...w.filter(b=>!h.some($=>$.providerId===b.providerId)),...h]}(w.providerData,be),yn=!!w.isAnonymous&&!(w.email&&re.passwordHash||Ye?.length),wr={uid:re.localId,displayName:re.displayName||null,photoURL:re.photoUrl||null,email:re.email||null,emailVerified:re.emailVerified||!1,phoneNumber:re.phoneNumber||null,tenantId:re.tenantId||null,providerData:Ye,metadata:new pr(re.createdAt,re.lastLoginAt),isAnonymous:yn};Object.assign(w,wr)}),jn.apply(this,arguments)}function fn(){return(fn=(0,p.Z)(function*(w){const h=(0,W.m9)(w);yield Mi(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function Xn(){return(Xn=(0,p.Z)(function*(w,h){const g=yield Tt(w,{},(0,p.Z)(function*(){const b=(0,W.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:$,apiKey:re}=w.config,be=xn(w,$,"/v1/token",`key=${re}`),Ye=yield w._getAdditionalHeaders();return Ye["Content-Type"]="application/x-www-form-urlencoded",ke.fetch()(be,{method:"POST",headers:Ye,body:b})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class kn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){Se(h.idToken,"internal-error"),Se(typeof h.idToken<"u","internal-error"),Se(typeof h.refreshToken<"u","internal-error");const g="expiresIn"in h&&typeof h.expiresIn<"u"?Number(h.expiresIn):function tn(w){const h=gn(w);return Se(h,"internal-error"),Se(typeof h.exp<"u","internal-error"),Se(typeof h.iat<"u","internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,g)}getToken(h,g=!1){var b=this;return(0,p.Z)(function*(){return Se(!b.accessToken||b.refreshToken,h,"user-token-expired"),g||!b.accessToken||b.isExpired?b.refreshToken?(yield b.refresh(h,b.refreshToken),b.accessToken):null:b.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,g){var b=this;return(0,p.Z)(function*(){const{accessToken:$,refreshToken:re,expiresIn:be}=yield function ei(w,h){return Xn.apply(this,arguments)}(h,g);b.updateTokensAndExpiration($,re,Number(be))})()}updateTokensAndExpiration(h,g,b){this.refreshToken=g||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*b}static fromJSON(h,g){const{refreshToken:b,accessToken:$,expirationTime:re}=g,be=new kn;return b&&(Se("string"==typeof b,"internal-error",{appName:h}),be.refreshToken=b),$&&(Se("string"==typeof $,"internal-error",{appName:h}),be.accessToken=$),re&&(Se("number"==typeof re,"internal-error",{appName:h}),be.expirationTime=re),be}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new kn,this.toJSON())}_performRefresh(){return ln("not implemented")}}function zr(w,h){Se("string"==typeof w||typeof w>"u","internal-error",{appName:h})}class xr{constructor(h){var{uid:g,auth:b,stsTokenManager:$}=h,re=(0,he._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Vn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=b,this.stsTokenManager=$,this.accessToken=$.accessToken,this.displayName=re.displayName||null,this.email=re.email||null,this.emailVerified=re.emailVerified||!1,this.phoneNumber=re.phoneNumber||null,this.photoURL=re.photoURL||null,this.isAnonymous=re.isAnonymous||!1,this.tenantId=re.tenantId||null,this.providerData=re.providerData?[...re.providerData]:[],this.metadata=new pr(re.createdAt||void 0,re.lastLoginAt||void 0)}getIdToken(h){var g=this;return(0,p.Z)(function*(){const b=yield vn(g,g.stsTokenManager.getToken(g.auth,h));return Se(b,g.auth,"internal-error"),g.accessToken!==b&&(g.accessToken=b,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),b})()}getIdTokenResult(h){return function si(w){return nr.apply(this,arguments)}(this,h)}reload(){return function Di(w){return fn.apply(this,arguments)}(this)}_assign(h){this!==h&&(Se(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(g=>Object.assign({},g)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){const g=new xr(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}));return g.metadata._copy(this.metadata),g}_onReload(h){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,g=!1){var b=this;return(0,p.Z)(function*(){let $=!1;h.idToken&&h.idToken!==b.stsTokenManager.accessToken&&(b.stsTokenManager.updateFromServerResponse(h),$=!0),g&&(yield Mi(b)),yield b.auth._persistUserIfCurrent(b),$&&b.auth._notifyListenersIfCurrent(b)})()}delete(){var h=this;return(0,p.Z)(function*(){const g=yield h.getIdToken();return yield vn(h,function lr(w,h){return Qn.apply(this,arguments)}(h.auth,{idToken:g})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,g){var b,$,re,be,Ye,Nt,Ut,yn;const wr=null!==(b=g.displayName)&&void 0!==b?b:void 0,Vo=null!==($=g.email)&&void 0!==$?$:void 0,ro=null!==(re=g.phoneNumber)&&void 0!==re?re:void 0,Yc=null!==(be=g.photoURL)&&void 0!==be?be:void 0,Zo=null!==(Ye=g.tenantId)&&void 0!==Ye?Ye:void 0,Rl=null!==(Nt=g._redirectEventId)&&void 0!==Nt?Nt:void 0,Ya=null!==(Ut=g.createdAt)&&void 0!==Ut?Ut:void 0,ec=null!==(yn=g.lastLoginAt)&&void 0!==yn?yn:void 0,{uid:ja,emailVerified:Ah,isAnonymous:tc,providerData:vd,stsTokenManager:jf}=g;Se(ja&&jf,h,"internal-error");const ur=kn.fromJSON(this.name,jf);Se("string"==typeof ja,h,"internal-error"),zr(wr,h.name),zr(Vo,h.name),Se("boolean"==typeof Ah,h,"internal-error"),Se("boolean"==typeof tc,h,"internal-error"),zr(ro,h.name),zr(Yc,h.name),zr(Zo,h.name),zr(Rl,h.name),zr(Ya,h.name),zr(ec,h.name);const _d=new xr({uid:ja,auth:h,email:Vo,emailVerified:Ah,displayName:wr,isAnonymous:tc,photoURL:Yc,phoneNumber:ro,tenantId:Zo,stsTokenManager:ur,createdAt:Ya,lastLoginAt:ec});return vd&&Array.isArray(vd)&&(_d.providerData=vd.map(Ed=>Object.assign({},Ed))),Rl&&(_d._redirectEventId=Rl),_d}static _fromIdTokenResponse(h,g,b=!1){return(0,p.Z)(function*(){const $=new kn;$.updateFromServerResponse(g);const re=new xr({uid:g.localId,auth:h,stsTokenManager:$,isAnonymous:b});return yield Mi(re),re})()}}const hi=new Map;function Zn(w){en(w instanceof Function,"Expected a class definition");let h=hi.get(w);return h?(en(h instanceof w,"Instance stored in cache mismatched with class"),h):(h=new w,hi.set(w,h),h)}const Jt=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,p.Z)(function*(){return!0})()}_set(g,b){var $=this;return(0,p.Z)(function*(){$.storage[g]=b})()}_get(g){var b=this;return(0,p.Z)(function*(){const $=b.storage[g];return void 0===$?null:$})()}_remove(g){var b=this;return(0,p.Z)(function*(){delete b.storage[g]})()}_addListener(g,b){}_removeListener(g,b){}}return w.type="NONE",w})();function Yn(w,h,g){return`firebase:${w}:${h}:${g}`}class me{constructor(h,g,b){this.persistence=h,this.auth=g,this.userKey=b;const{config:$,name:re}=this.auth;this.fullUserKey=Yn(this.userKey,$.apiKey,re),this.fullPersistenceKey=Yn("persistence",$.apiKey,re),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,p.Z)(function*(){const g=yield h.persistence._get(h.fullUserKey);return g?xr._fromJSON(h.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var g=this;return(0,p.Z)(function*(){if(g.persistence===h)return;const b=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=h,b?g.setCurrentUser(b):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,g,b="authUser"){return(0,p.Z)(function*(){if(!g.length)return new me(Zn(Jt),h,b);const $=(yield Promise.all(g.map(function(){var Ut=(0,p.Z)(function*(yn){if(yield yn._isAvailable())return yn});return function(yn){return Ut.apply(this,arguments)}}()))).filter(Ut=>Ut);let re=$[0]||Zn(Jt);const be=Yn(b,h.config.apiKey,h.name);let Ye=null;for(const Ut of g)try{const yn=yield Ut._get(be);if(yn){const wr=xr._fromJSON(h,yn);Ut!==re&&(Ye=wr),re=Ut;break}}catch{}const Nt=$.filter(Ut=>Ut._shouldAllowMigration);return re._shouldAllowMigration&&Nt.length?(re=Nt[0],Ye&&(yield re._set(be,Ye.toJSON())),yield Promise.all(g.map(function(){var Ut=(0,p.Z)(function*(yn){if(yn!==re)try{yield yn._remove(be)}catch{}});return function(yn){return Ut.apply(this,arguments)}}())),new me(re,h,b)):new me(re,h,b)})()}}function X(w){const h=w.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(Ie(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(ee(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(yt(h))return"Blackberry";if(pn(h))return"Webos";if(K(h))return"Safari";if((h.includes("chrome/")||J(h))&&!h.includes("edge/"))return"Chrome";if(at(h))return"Android";{const b=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===b?.length)return b[1]}return"Other"}function ee(w=(0,W.z$)()){return/firefox\//i.test(w)}function K(w=(0,W.z$)()){const h=w.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function J(w=(0,W.z$)()){return/crios\//i.test(w)}function Ie(w=(0,W.z$)()){return/iemobile/i.test(w)}function at(w=(0,W.z$)()){return/android/i.test(w)}function yt(w=(0,W.z$)()){return/blackberry/i.test(w)}function pn(w=(0,W.z$)()){return/webos/i.test(w)}function Mt(w=(0,W.z$)()){return/iphone|ipad|ipod/i.test(w)||/macintosh/i.test(w)&&/mobile/i.test(w)}function _n(w=(0,W.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}function Ni(w=(0,W.z$)()){return Mt(w)||at(w)||pn(w)||yt(w)||/windows phone/i.test(w)||Ie(w)}function ts(w,h=[]){let g;switch(w){case"Browser":g=X((0,W.z$)());break;case"Worker":g=`${X((0,W.z$)())}-${w}`;break;default:g=w}const b=h.length?h.join(","):"FirebaseCore-web";return`${g}/JsCore/${ae.SDK_VERSION}/${b}`}function Re(){return(Re=(0,p.Z)(function*(w){return(yield Je(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ut(w,h){return kt.apply(this,arguments)}function kt(){return(kt=(0,p.Z)(function*(w,h){return Je(w,"GET","/v2/recaptchaConfig",Be(w,h))})).apply(this,arguments)}function wt(w){return void 0!==w&&void 0!==w.getResponse}function mn(w){return void 0!==w&&void 0!==w.enterprise}class En{constructor(h){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===h.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=h.recaptchaKey.split("/")[3],this.emailPasswordEnabled=h.recaptchaEnforcementState.some(g=>"EMAIL_PASSWORD_PROVIDER"===g.provider&&"OFF"!==g.enforcementState)}}function hr(w){return new Promise((h,g)=>{const b=document.createElement("script");b.setAttribute("src",w),b.onload=h,b.onerror=$=>{const re=Ve("internal-error");re.customData=$,g(re)},b.type="text/javascript",b.charset="UTF-8",function Tr(){var w,h;return null!==(h=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==h?h:document}().appendChild(b)})}function Rr(w){return`__${w}${Math.floor(1e6*Math.random())}`}class Rs{constructor(h){this.type="recaptcha-enterprise",this.auth=Lr(h)}verify(h="verify",g=!1){var b=this;return(0,p.Z)(function*(){function re(){return re=(0,p.Z)(function*(Ye){if(!g){if(null==Ye.tenantId&&null!=Ye._agentRecaptchaConfig)return Ye._agentRecaptchaConfig.siteKey;if(null!=Ye.tenantId&&void 0!==Ye._tenantRecaptchaConfigs[Ye.tenantId])return Ye._tenantRecaptchaConfigs[Ye.tenantId].siteKey}return new Promise(function(){var Nt=(0,p.Z)(function*(Ut,yn){ut(Ye,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(wr=>{if(void 0!==wr.recaptchaKey){const Vo=new En(wr);return null==Ye.tenantId?Ye._agentRecaptchaConfig=Vo:Ye._tenantRecaptchaConfigs[Ye.tenantId]=Vo,Ut(Vo.siteKey)}yn(new Error("recaptcha Enterprise site key undefined"))}).catch(wr=>{yn(wr)})});return function(Ut,yn){return Nt.apply(this,arguments)}}())}),re.apply(this,arguments)}function be(Ye,Nt,Ut){const yn=window.grecaptcha;mn(yn)?yn.enterprise.ready(()=>{yn.enterprise.execute(Ye,{action:h}).then(wr=>{Nt(wr)}).catch(()=>{Nt("NO_RECAPTCHA")})}):Ut(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((Ye,Nt)=>{(function $(Ye){return re.apply(this,arguments)})(b.auth).then(Ut=>{if(!g&&mn(window.grecaptcha))be(Ut,Ye,Nt);else{if(typeof window>"u")return void Nt(new Error("RecaptchaVerifier is only supported in browser"));hr("https://www.google.com/recaptcha/enterprise.js?render="+Ut).then(()=>{be(Ut,Ye,Nt)}).catch(yn=>{Nt(yn)})}}).catch(Ut=>{Nt(Ut)})})})()}}function oi(w,h,g){return Os.apply(this,arguments)}function Os(){return(Os=(0,p.Z)(function*(w,h,g,b=!1){const $=new Rs(w);let re;try{re=yield $.verify(g)}catch{re=yield $.verify(g,!0)}const be=Object.assign({},h);return Object.assign(be,b?{captchaResp:re}:{captchaResponse:re}),Object.assign(be,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(be,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),be})).apply(this,arguments)}class To{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,g){const b=re=>new Promise((be,Ye)=>{try{be(h(re))}catch(Nt){Ye(Nt)}});b.onAbort=g,this.queue.push(b);const $=this.queue.length-1;return()=>{this.queue[$]=()=>Promise.resolve()}}runMiddleware(h){var g=this;return(0,p.Z)(function*(){if(g.auth.currentUser===h)return;const b=[];try{for(const $ of g.queue)yield $(h),$.onAbort&&b.push($.onAbort)}catch($){b.reverse();for(const re of b)try{re()}catch{}throw g.auth._errorFactory.create("login-blocked",{originalMessage:$?.message})}})()}}class Ts{constructor(h,g,b,$){this.app=h,this.heartbeatServiceProvider=g,this.appCheckServiceProvider=b,this.config=$,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ns(this),this.idTokenSubscription=new ns(this),this.beforeStateQueue=new To(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ht,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=$.sdkClientVersion}_initializeWithPersistence(h,g){var b=this;return g&&(this._popupRedirectResolver=Zn(g)),this._initializationPromise=this.queue((0,p.Z)(function*(){var $,re;if(!b._deleted&&(b.persistenceManager=yield me.create(b,h),!b._deleted)){if(null!==($=b._popupRedirectResolver)&&void 0!==$&&$._shouldInitProactively)try{yield b._popupRedirectResolver._initialize(b)}catch{}yield b.initializeCurrentUser(g),b.lastNotifiedUid=(null===(re=b.currentUser)||void 0===re?void 0:re.uid)||null,!b._deleted&&(b._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,p.Z)(function*(){if(h._deleted)return;const g=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||g){if(h.currentUser&&g&&h.currentUser.uid===g.uid)return h._currentUser._assign(g),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(g,!0)}})()}initializeCurrentUser(h){var g=this;return(0,p.Z)(function*(){var b;const $=yield g.assertedPersistence.getCurrentUser();let re=$,be=!1;if(h&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const Ye=null===(b=g.redirectUser)||void 0===b?void 0:b._redirectEventId,Nt=re?._redirectEventId,Ut=yield g.tryRedirectSignIn(h);(!Ye||Ye===Nt)&&Ut?.user&&(re=Ut.user,be=!0)}if(!re)return g.directlySetCurrentUser(null);if(!re._redirectEventId){if(be)try{yield g.beforeStateQueue.runMiddleware(re)}catch(Ye){re=$,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(Ye))}return re?g.reloadAndSetCurrentUserOrClear(re):g.directlySetCurrentUser(null)}return Se(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===re._redirectEventId?g.directlySetCurrentUser(re):g.reloadAndSetCurrentUserOrClear(re)})()}tryRedirectSignIn(h){var g=this;return(0,p.Z)(function*(){let b=null;try{b=yield g._popupRedirectResolver._completeRedirectFn(g,h,!0)}catch{yield g._setRedirectUser(null)}return b})()}reloadAndSetCurrentUserOrClear(h){var g=this;return(0,p.Z)(function*(){try{yield Mi(h)}catch(b){if("auth/network-request-failed"!==b?.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function br(){if(typeof navigator>"u")return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var h=this;return(0,p.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var g=this;return(0,p.Z)(function*(){const b=h?(0,W.m9)(h):null;return b&&Se(b.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(b&&b._clone(g))})()}_updateCurrentUser(h,g=!1){var b=this;return(0,p.Z)(function*(){if(!b._deleted)return h&&Se(b.tenantId===h.tenantId,b,"tenant-id-mismatch"),g||(yield b.beforeStateQueue.runMiddleware(h)),b.queue((0,p.Z)(function*(){yield b.directlySetCurrentUser(h),b.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,p.Z)(function*(){return yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0)})()}setPersistence(h){var g=this;return this.queue((0,p.Z)(function*(){yield g.assertedPersistence.setPersistence(Zn(h))}))}initializeRecaptchaConfig(){var h=this;return(0,p.Z)(function*(){const g=yield ut(h,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),b=new En(g);null==h.tenantId?h._agentRecaptchaConfig=b:h._tenantRecaptchaConfigs[h.tenantId]=b,b.emailPasswordEnabled&&new Rs(h).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new W.LL("auth","Firebase",h())}onAuthStateChanged(h,g,b){return this.registerStateListener(this.authStateSubscription,h,g,b)}beforeAuthStateChanged(h,g){return this.beforeStateQueue.pushCallback(h,g)}onIdTokenChanged(h,g,b){return this.registerStateListener(this.idTokenSubscription,h,g,b)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,g){var b=this;return(0,p.Z)(function*(){const $=yield b.getOrInitRedirectPersistenceManager(g);return null===h?$.removeCurrentUser():$.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var g=this;return(0,p.Z)(function*(){if(!g.redirectPersistenceManager){const b=h&&Zn(h)||g._popupRedirectResolver;Se(b,g,"argument-error"),g.redirectPersistenceManager=yield me.create(g,[Zn(b._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(h){var g=this;return(0,p.Z)(function*(){var b,$;return g._isInitialized&&(yield g.queue((0,p.Z)(function*(){}))),(null===(b=g._currentUser)||void 0===b?void 0:b._redirectEventId)===h?g._currentUser:(null===($=g.redirectUser)||void 0===$?void 0:$._redirectEventId)===h?g.redirectUser:null})()}_persistUserIfCurrent(h){var g=this;return(0,p.Z)(function*(){if(h===g.currentUser)return g.queue((0,p.Z)(function*(){return g.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const b=null!==(g=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==b&&(this.lastNotifiedUid=b,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,g,b,$){if(this._deleted)return()=>{};const re="function"==typeof g?g:g.next.bind(g),be=this._isInitialized?Promise.resolve():this._initializationPromise;return Se(be,this,"internal-error"),be.then(()=>re(this.currentUser)),"function"==typeof g?h.addObserver(g,b,$):h.addObserver(g)}directlySetCurrentUser(h){var g=this;return(0,p.Z)(function*(){g.currentUser&&g.currentUser!==h&&g._currentUser._stopProactiveRefresh(),h&&g.isProactiveRefreshEnabled&&h._startProactiveRefresh(),g.currentUser=h,h?yield g.assertedPersistence.setCurrentUser(h):yield g.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=ts(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,p.Z)(function*(){var g;const b={"X-Client-Version":h.clientVersion};h.app.options.appId&&(b["X-Firebase-gmpid"]=h.app.options.appId);const $=yield null===(g=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();$&&(b["X-Firebase-Client"]=$);const re=yield h._getAppCheckToken();return re&&(b["X-Firebase-AppCheck"]=re),b})()}_getAppCheckToken(){var h=this;return(0,p.Z)(function*(){var g;const b=yield null===(g=h.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getToken();return b?.error&&function Mn(w,...h){Rt.logLevel<=fe.in.WARN&&Rt.warn(`Auth (${ae.SDK_VERSION}): ${w}`,...h)}(`Error while retrieving App Check token: ${b.error}`),b?.token})()}}function Lr(w){return(0,W.m9)(w)}class ns{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,W.ne)(g=>this.observer=g)}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function yo(w,h,g){const b=Lr(w);Se(b._canInitEmulator,b,"emulator-config-failed"),Se(/^https?:\/\//.test(h),b,"invalid-emulator-scheme");const $=!!g?.disableWarnings,re=De(h),{host:be,port:Ye}=function we(w){const h=De(w),g=/(\/\/)?([^?#/]+)/.exec(w.substr(h.length));if(!g)return{host:"",port:null};const b=g[2].split("@").pop()||"",$=/^(\[[^\]]+\])(:|$)/.exec(b);if($){const re=$[1];return{host:re,port:Ne(b.substr(re.length+1))}}{const[re,be]=b.split(":");return{host:re,port:Ne(be)}}}(h);b.config.emulator={url:`${re}//${be}${null===Ye?"":`:${Ye}`}/`},b.settings.appVerificationDisabledForTesting=!0,b.emulatorConfig=Object.freeze({host:be,port:Ye,protocol:re.replace(":",""),options:Object.freeze({disableWarnings:$})}),$||function nt(){function w(){const h=document.createElement("p"),g=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}function De(w){const h=w.indexOf(":");return h<0?"":w.substr(0,h+1)}function Ne(w){if(!w)return null;const h=Number(w);return isNaN(h)?null:h}class vt{constructor(h,g){this.providerId=h,this.signInMethod=g}toJSON(){return ln("not implemented")}_getIdTokenResponse(h){return ln("not implemented")}_linkToIdToken(h,g){return ln("not implemented")}_getReauthenticationResolver(h){return ln("not implemented")}}function Zt(w,h){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,p.Z)(function*(w,h){return Je(w,"POST","/v1/accounts:resetPassword",Be(w,h))})).apply(this,arguments)}function Dn(w,h){return $n.apply(this,arguments)}function $n(){return($n=(0,p.Z)(function*(w,h){return Je(w,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Ri(){return(Ri=(0,p.Z)(function*(w,h){return Je(w,"POST","/v1/accounts:update",Be(w,h))})).apply(this,arguments)}function $i(w,h){return pi.apply(this,arguments)}function pi(){return(pi=(0,p.Z)(function*(w,h){return Wn(w,"POST","/v1/accounts:signInWithPassword",Be(w,h))})).apply(this,arguments)}function Jo(w,h){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,p.Z)(function*(w,h){return Je(w,"POST","/v1/accounts:sendOobCode",Be(w,h))})).apply(this,arguments)}function Ss(){return(Ss=(0,p.Z)(function*(w,h){return Jo(w,h)})).apply(this,arguments)}function so(w,h){return vo.apply(this,arguments)}function vo(){return(vo=(0,p.Z)(function*(w,h){return Jo(w,h)})).apply(this,arguments)}function Uo(w,h){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,p.Z)(function*(w,h){return Jo(w,h)})).apply(this,arguments)}function Ci(){return(Ci=(0,p.Z)(function*(w,h){return Jo(w,h)})).apply(this,arguments)}function Vr(){return(Vr=(0,p.Z)(function*(w,h){return Wn(w,"POST","/v1/accounts:signInWithEmailLink",Be(w,h))})).apply(this,arguments)}function _o(){return(_o=(0,p.Z)(function*(w,h){return Wn(w,"POST","/v1/accounts:signInWithEmailLink",Be(w,h))})).apply(this,arguments)}class As extends vt{constructor(h,g,b,$=null){super("password",b),this._email=h,this._password=g,this._tenantId=$}static _fromEmailAndPassword(h,g){return new As(h,g,"password")}static _fromEmailAndCode(h,g,b=null){return new As(h,g,"emailLink",b)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h;if(g?.email&&g?.password){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(h){var g=this;return(0,p.Z)(function*(){var b;switch(g.signInMethod){case"password":const $={returnSecureToken:!0,email:g._email,password:g._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(b=h._getRecaptchaConfig())&&void 0!==b&&b.emailPasswordEnabled){const re=yield oi(h,$,"signInWithPassword");return $i(h,re)}return $i(h,$).catch(function(){var re=(0,p.Z)(function*(be){if("auth/missing-recaptcha-token"===be.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Ye=yield oi(h,$,"signInWithPassword");return $i(h,Ye)}return Promise.reject(be)});return function(be){return re.apply(this,arguments)}}());case"emailLink":return function vs(w,h){return Vr.apply(this,arguments)}(h,{email:g._email,oobCode:g._password});default:le(h,"internal-error")}})()}_linkToIdToken(h,g){var b=this;return(0,p.Z)(function*(){switch(b.signInMethod){case"password":return Dn(h,{idToken:g,returnSecureToken:!0,email:b._email,password:b._password});case"emailLink":return function Ws(w,h){return _o.apply(this,arguments)}(h,{idToken:g,email:b._email,oobCode:b._password});default:le(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function Jn(w,h){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,p.Z)(function*(w,h){return Wn(w,"POST","/v1/accounts:signInWithIdp",Be(w,h))})).apply(this,arguments)}class It extends vt{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const g=new It(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(g.idToken=h.idToken),h.accessToken&&(g.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(g.nonce=h.nonce),h.pendingToken&&(g.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(g.accessToken=h.oauthToken,g.secret=h.oauthTokenSecret):le("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h,{providerId:b,signInMethod:$}=g,re=(0,he._T)(g,["providerId","signInMethod"]);if(!b||!$)return null;const be=new It(b,$);return be.idToken=re.idToken||void 0,be.accessToken=re.accessToken||void 0,be.secret=re.secret,be.nonce=re.nonce,be.pendingToken=re.pendingToken||null,be}_getIdTokenResponse(h){return Jn(h,this.buildRequest())}_linkToIdToken(h,g){const b=this.buildRequest();return b.idToken=g,Jn(h,b)}_getReauthenticationResolver(h){const g=this.buildRequest();return g.autoCreate=!1,Jn(h,g)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),h.postBody=(0,W.xO)(g)}return h}}function Er(){return(Er=(0,p.Z)(function*(w,h){return Je(w,"POST","/v1/accounts:sendVerificationCode",Be(w,h))})).apply(this,arguments)}function ks(){return(ks=(0,p.Z)(function*(w,h){return Wn(w,"POST","/v1/accounts:signInWithPhoneNumber",Be(w,h))})).apply(this,arguments)}function Ms(){return(Ms=(0,p.Z)(function*(w,h){const g=yield Wn(w,"POST","/v1/accounts:signInWithPhoneNumber",Be(w,h));if(g.temporaryProof)throw Kn(w,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const Sr={USER_NOT_FOUND:"user-not-found"};function ui(){return(ui=(0,p.Z)(function*(w,h){return Wn(w,"POST","/v1/accounts:signInWithPhoneNumber",Be(w,Object.assign(Object.assign({},h),{operation:"REAUTH"})),Sr)})).apply(this,arguments)}class nn extends vt{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,g){return new nn({verificationId:h,verificationCode:g})}static _fromTokenResponse(h,g){return new nn({phoneNumber:h,temporaryProof:g})}_getIdTokenResponse(h){return function ai(w,h){return ks.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,g){return function Pi(w,h){return Ms.apply(this,arguments)}(h,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function gi(w,h){return ui.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:g,verificationId:b,verificationCode:$}=this.params;return h&&g?{temporaryProof:h,phoneNumber:g}:{sessionInfo:b,code:$}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:g,verificationCode:b,phoneNumber:$,temporaryProof:re}=h;return b||g||$||re?new nn({verificationId:g,verificationCode:b,phoneNumber:$,temporaryProof:re}):null}}class Fs{constructor(h){var g,b,$,re,be,Ye;const Nt=(0,W.zd)((0,W.pd)(h)),Ut=null!==(g=Nt.apiKey)&&void 0!==g?g:null,yn=null!==(b=Nt.oobCode)&&void 0!==b?b:null,wr=function bi(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==($=Nt.mode)&&void 0!==$?$:null);Se(Ut&&yn&&wr,"argument-error"),this.apiKey=Ut,this.operation=wr,this.code=yn,this.continueUrl=null!==(re=Nt.continueUrl)&&void 0!==re?re:null,this.languageCode=null!==(be=Nt.languageCode)&&void 0!==be?be:null,this.tenantId=null!==(Ye=Nt.tenantId)&&void 0!==Ye?Ye:null}static parseLink(h){const g=function rs(w){const h=(0,W.zd)((0,W.pd)(w)).link,g=h?(0,W.zd)((0,W.pd)(h)).deep_link_id:null,b=(0,W.zd)((0,W.pd)(w)).deep_link_id;return(b?(0,W.zd)((0,W.pd)(b)).link:null)||b||g||h||w}(h);try{return new Fs(g)}catch{return null}}}let Ns=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(g,b){return As._fromEmailAndPassword(g,b)}static credentialWithLink(g,b){const $=Fs.parseLink(b);return Se($,"argument-error"),As._fromEmailAndCode(g,$.code,$.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class is{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class mi extends is{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class Yi extends mi{static credentialFromJSON(h){const g="string"==typeof h?JSON.parse(h):h;return Se("providerId"in g&&"signInMethod"in g,"argument-error"),It._fromParams(g)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return Se(h.idToken||h.accessToken,"argument-error"),It._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return Yi.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return Yi.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:g,oauthAccessToken:b,oauthTokenSecret:$,pendingToken:re,nonce:be,providerId:Ye}=h;if(!b&&!$&&!g&&!re||!Ye)return null;try{return new Yi(Ye)._credential({idToken:g,accessToken:b,nonce:be,pendingToken:re})}catch{return null}}}let Ao=(()=>{class w extends mi{constructor(){super("facebook.com")}static credential(g){return It._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return w.credentialFromTaggedObject(g)}static credentialFromError(g){return w.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return w.credential(g.oauthAccessToken)}catch{return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),ss=(()=>{class w extends mi{constructor(){super("google.com"),this.addScope("profile")}static credential(g,b){return It._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:b})}static credentialFromResult(g){return w.credentialFromTaggedObject(g)}static credentialFromError(g){return w.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:b,oauthAccessToken:$}=g;if(!b&&!$)return null;try{return w.credential(b,$)}catch{return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),Hi=(()=>{class w extends mi{constructor(){super("github.com")}static credential(g){return It._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return w.credentialFromTaggedObject(g)}static credentialFromError(g){return w.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return w.credential(g.oauthAccessToken)}catch{return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class Hr extends vt{constructor(h,g){super(h,h),this.pendingToken=g}_getIdTokenResponse(h){return Jn(h,this.buildRequest())}_linkToIdToken(h,g){const b=this.buildRequest();return b.idToken=g,Jn(h,b)}_getReauthenticationResolver(h){const g=this.buildRequest();return g.autoCreate=!1,Jn(h,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h,{providerId:b,signInMethod:$,pendingToken:re}=g;return b&&$&&re&&b===$?new Hr(b,re):null}static _create(h,g){return new Hr(h,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ea extends is{constructor(h){Se(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return ea.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return ea.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const g=Hr.fromJSON(h);return Se(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:g,providerId:b}=h;if(!g||!b)return null;try{return Hr._create(b,g)}catch{return null}}}let ta=(()=>{class w extends mi{constructor(){super("twitter.com")}static credential(g,b){return It._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:b})}static credentialFromResult(g){return w.credentialFromTaggedObject(g)}static credentialFromError(g){return w.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:b,oauthTokenSecret:$}=g;if(!b||!$)return null;try{return w.credential(b,$)}catch{return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function qs(w,h){return ci.apply(this,arguments)}function ci(){return(ci=(0,p.Z)(function*(w,h){return Wn(w,"POST","/v1/accounts:signUp",Be(w,h))})).apply(this,arguments)}class ni{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,g,b,$=!1){return(0,p.Z)(function*(){const re=yield xr._fromIdTokenResponse(h,b,$),be=as(b);return new ni({user:re,providerId:be,_tokenResponse:b,operationType:g})})()}static _forOperation(h,g,b){return(0,p.Z)(function*(){yield h._updateTokensIfNecessary(b,!0);const $=as(b);return new ni({user:h,providerId:$,_tokenResponse:b,operationType:g})})()}}function as(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function oo(w){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,p.Z)(function*(w){var h;const g=Lr(w);if(yield g._initializationPromise,null!==(h=g.currentUser)&&void 0!==h&&h.isAnonymous)return new ni({user:g.currentUser,providerId:null,operationType:"signIn"});const b=yield qs(g,{returnSecureToken:!0}),$=yield ni._fromIdTokenResponse(g,"signIn",b,!0);return yield g._updateCurrentUser($.user),$})).apply(this,arguments)}class ao extends W.ZR{constructor(h,g,b,$){var re;super(g.code,g.message),this.operationType=b,this.user=$,Object.setPrototypeOf(this,ao.prototype),this.customData={appName:h.name,tenantId:null!==(re=h.tenantId)&&void 0!==re?re:void 0,_serverResponse:g.customData._serverResponse,operationType:b}}static _fromErrorAndOperation(h,g,b,$){return new ao(h,g,b,$)}}function ki(w,h,g,b){return("reauthenticate"===h?g._getReauthenticationResolver(w):g._getIdTokenResponse(w)).catch(re=>{throw"auth/multi-factor-auth-required"===re.code?ao._fromErrorAndOperation(w,re,h,b):re})}function zn(w){return new Set(w.map(({providerId:h})=>h).filter(h=>!!h))}function zi(w,h){return _s.apply(this,arguments)}function _s(){return _s=(0,p.Z)(function*(w,h){const g=(0,W.m9)(w);yield Eo(!0,g,h);const{providerUserInfo:b}=yield function er(w,h){return Vt.apply(this,arguments)}(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[h]}),$=zn(b||[]);return g.providerData=g.providerData.filter(re=>$.has(re.providerId)),$.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g}),_s.apply(this,arguments)}function Ti(w,h){return Es.apply(this,arguments)}function Es(){return(Es=(0,p.Z)(function*(w,h,g=!1){const b=yield vn(w,h._linkToIdToken(w.auth,yield w.getIdToken()),g);return ni._forOperation(w,"link",b)})).apply(this,arguments)}function Eo(w,h,g){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,p.Z)(function*(w,h,g){yield Mi(h);const $=!1===w?"provider-already-linked":"no-such-provider";Se(zn(h.providerData).has(g)===w,h.auth,$)})).apply(this,arguments)}function wo(w,h){return uo.apply(this,arguments)}function uo(){return(uo=(0,p.Z)(function*(w,h,g=!1){const{auth:b}=w,$="reauthenticate";try{const re=yield vn(w,ki(b,$,h,w),g);Se(re.idToken,b,"internal-error");const be=gn(re.idToken);Se(be,b,"internal-error");const{sub:Ye}=be;return Se(w.uid===Ye,b,"user-mismatch"),ni._forOperation(w,$,re)}catch(re){throw"auth/user-not-found"===re?.code&&le(b,"user-mismatch"),re}})).apply(this,arguments)}function da(w,h){return us.apply(this,arguments)}function us(){return(us=(0,p.Z)(function*(w,h,g=!1){const b="signIn",$=yield ki(w,b,h),re=yield ni._fromIdTokenResponse(w,b,$);return g||(yield w._updateCurrentUser(re.user)),re})).apply(this,arguments)}function co(w,h){return jo.apply(this,arguments)}function jo(){return(jo=(0,p.Z)(function*(w,h){return da(Lr(w),h)})).apply(this,arguments)}function $a(w,h){return xa.apply(this,arguments)}function xa(){return(xa=(0,p.Z)(function*(w,h){const g=(0,W.m9)(w);return yield Eo(!1,g,h.providerId),Ti(g,h)})).apply(this,arguments)}function mr(w,h){return No.apply(this,arguments)}function No(){return(No=(0,p.Z)(function*(w,h){return wo((0,W.m9)(w),h)})).apply(this,arguments)}function L(){return(L=(0,p.Z)(function*(w,h){return Wn(w,"POST","/v1/accounts:signInWithCustomToken",Be(w,h))})).apply(this,arguments)}function U(w,h){return x.apply(this,arguments)}function x(){return x=(0,p.Z)(function*(w,h){const g=Lr(w),b=yield function Ha(w,h){return L.apply(this,arguments)}(g,{token:h,returnSecureToken:!0}),$=yield ni._fromIdTokenResponse(g,"signIn",b);return yield g._updateCurrentUser($.user),$}),x.apply(this,arguments)}class te{constructor(h,g){this.factorId=h,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(h,g){return"phoneInfo"in g?_e._fromServerResponse(h,g):"totpInfo"in g?qt._fromServerResponse(h,g):le(h,"internal-error")}}class _e extends te{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,g){return new _e(g)}}class qt extends te{constructor(h){super("totp",h)}static _fromServerResponse(h,g){return new qt(g)}}function cn(w,h,g){var b;Se((null===(b=g.url)||void 0===b?void 0:b.length)>0,w,"invalid-continue-uri"),Se(typeof g.dynamicLinkDomain>"u"||g.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),h.continueUrl=g.url,h.dynamicLinkDomain=g.dynamicLinkDomain,h.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(Se(g.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),h.iOSBundleId=g.iOS.bundleId),g.android&&(Se(g.android.packageName.length>0,w,"missing-android-pkg-name"),h.androidInstallApp=g.android.installApp,h.androidMinimumVersionCode=g.android.minimumVersion,h.androidPackageName=g.android.packageName)}function Li(w,h,g){return ws.apply(this,arguments)}function ws(){return ws=(0,p.Z)(function*(w,h,g){var b;const $=Lr(w),re={requestType:"PASSWORD_RESET",email:h,clientType:"CLIENT_TYPE_WEB"};if(null!==(b=$._getRecaptchaConfig())&&void 0!==b&&b.emailPasswordEnabled){const be=yield oi($,re,"getOobCode",!0);g&&cn($,be,g),yield so($,be)}else g&&cn($,re,g),yield so($,re).catch(function(){var be=(0,p.Z)(function*(Ye){if("auth/missing-recaptcha-token"!==Ye.code)return Promise.reject(Ye);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Nt=yield oi($,re,"getOobCode",!0);g&&cn($,Nt,g),yield so($,Nt)}});return function(Ye){return be.apply(this,arguments)}}())}),ws.apply(this,arguments)}function yi(w,h,g){return cs.apply(this,arguments)}function cs(){return(cs=(0,p.Z)(function*(w,h,g){yield Zt((0,W.m9)(w),{oobCode:h,newPassword:g})})).apply(this,arguments)}function Gi(w,h){return Io.apply(this,arguments)}function Io(){return Io=(0,p.Z)(function*(w,h){yield function Ps(w,h){return Ri.apply(this,arguments)}((0,W.m9)(w),{oobCode:h})}),Io.apply(this,arguments)}function Ks(w,h){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,p.Z)(function*(w,h){const g=(0,W.m9)(w),b=yield Zt(g,{oobCode:h}),$=b.requestType;switch(Se($,g,"internal-error"),$){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Se(b.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Se(b.mfaInfo,g,"internal-error");default:Se(b.email,g,"internal-error")}let re=null;return b.mfaInfo&&(re=te._fromServerResponse(Lr(g),b.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.newEmail:b.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.email:b.newEmail)||null,multiFactorInfo:re},operation:$}})).apply(this,arguments)}function ha(w,h){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,p.Z)(function*(w,h){const{data:g}=yield Ks((0,W.m9)(w),h);return g.email})).apply(this,arguments)}function na(w,h,g){return fa.apply(this,arguments)}function fa(){return fa=(0,p.Z)(function*(w,h,g){var b;const $=Lr(w),re={returnSecureToken:!0,email:h,password:g,clientType:"CLIENT_TYPE_WEB"};let be;if(null!==(b=$._getRecaptchaConfig())&&void 0!==b&&b.emailPasswordEnabled){const Ut=yield oi($,re,"signUpPassword");be=qs($,Ut)}else be=qs($,re).catch(function(){var Ut=(0,p.Z)(function*(yn){if("auth/missing-recaptcha-token"===yn.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const wr=yield oi($,re,"signUpPassword");return qs($,wr)}return Promise.reject(yn)});return function(yn){return Ut.apply(this,arguments)}}());const Ye=yield be.catch(Ut=>Promise.reject(Ut)),Nt=yield ni._fromIdTokenResponse($,"signIn",Ye);return yield $._updateCurrentUser(Nt.user),Nt}),fa.apply(this,arguments)}function ra(w,h,g){return co((0,W.m9)(w),Ns.credential(h,g))}function xs(w,h,g){return Zs.apply(this,arguments)}function Zs(){return Zs=(0,p.Z)(function*(w,h,g){var b;const $=Lr(w),re={requestType:"EMAIL_SIGNIN",email:h,clientType:"CLIENT_TYPE_WEB"};function be(Ye,Nt){Se(Nt.handleCodeInApp,$,"argument-error"),Nt&&cn($,Ye,Nt)}if(null!==(b=$._getRecaptchaConfig())&&void 0!==b&&b.emailPasswordEnabled){const Ye=yield oi($,re,"getOobCode",!0);be(Ye,g),yield Uo($,Ye)}else be(re,g),yield Uo($,re).catch(function(){var Ye=(0,p.Z)(function*(Nt){if("auth/missing-recaptcha-token"!==Nt.code)return Promise.reject(Nt);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Ut=yield oi($,re,"getOobCode",!0);be(Ut,g),yield Uo($,Ut)}});return function(Nt){return Ye.apply(this,arguments)}}())}),Zs.apply(this,arguments)}function pa(w,h){const g=Fs.parseLink(h);return"EMAIL_SIGNIN"===g?.operation}function Ys(w,h,g){return vi.apply(this,arguments)}function vi(){return(vi=(0,p.Z)(function*(w,h,g){const b=(0,W.m9)(w),$=Ns.credentialWithLink(h,g||Nn());return Se($._tenantId===(b.tenantId||null),b,"tenant-id-mismatch"),co(b,$)})).apply(this,arguments)}function $o(){return($o=(0,p.Z)(function*(w,h){return Je(w,"POST","/v1/accounts:createAuthUri",Be(w,h))})).apply(this,arguments)}function Ar(w,h){return Ls.apply(this,arguments)}function Ls(){return Ls=(0,p.Z)(function*(w,h){const b={identifier:h,continueUri:dn()?Nn():"http://localhost"},{signinMethods:$}=yield function Qs(w,h){return $o.apply(this,arguments)}((0,W.m9)(w),b);return $||[]}),Ls.apply(this,arguments)}function Xs(w,h){return _i.apply(this,arguments)}function _i(){return _i=(0,p.Z)(function*(w,h){const g=(0,W.m9)(w),$={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};h&&cn(g.auth,$,h);const{email:re}=yield function So(w,h){return Ss.apply(this,arguments)}(g.auth,$);re!==w.email&&(yield w.reload())}),_i.apply(this,arguments)}function ga(w,h,g){return xo.apply(this,arguments)}function xo(){return xo=(0,p.Z)(function*(w,h,g){const b=(0,W.m9)(w),re={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:h};g&&cn(b.auth,re,g);const{email:be}=yield function ti(w,h){return Ci.apply(this,arguments)}(b.auth,re);be!==w.email&&(yield w.reload())}),xo.apply(this,arguments)}function Ra(){return(Ra=(0,p.Z)(function*(w,h){return Je(w,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function wu(w,h){return ls.apply(this,arguments)}function ls(){return ls=(0,p.Z)(function*(w,{displayName:h,photoURL:g}){if(void 0===h&&void 0===g)return;const b=(0,W.m9)(w),re={idToken:yield b.getIdToken(),displayName:h,photoUrl:g,returnSecureToken:!0},be=yield vn(b,function Ro(w,h){return Ra.apply(this,arguments)}(b.auth,re));b.displayName=be.displayName||null,b.photoURL=be.photoUrl||null;const Ye=b.providerData.find(({providerId:Nt})=>"password"===Nt);Ye&&(Ye.displayName=b.displayName,Ye.photoURL=b.photoURL),yield b._updateTokensIfNecessary(be)}),ls.apply(this,arguments)}function Vs(w,h){return Oo((0,W.m9)(w),h,null)}function Vi(w,h){return Oo((0,W.m9)(w),null,h)}function Oo(w,h,g){return ma.apply(this,arguments)}function ma(){return(ma=(0,p.Z)(function*(w,h,g){const{auth:b}=w,re={idToken:yield w.getIdToken(),returnSecureToken:!0};h&&(re.email=h),g&&(re.password=g);const be=yield vn(w,Dn(b,re));yield w._updateTokensIfNecessary(be,!0)})).apply(this,arguments)}class ko{constructor(h,g,b={}){this.isNewUser=h,this.providerId=g,this.profile=b}}class za extends ko{constructor(h,g,b,$){super(h,g,b),this.username=$}}class Ho extends ko{constructor(h,g){super(h,"facebook.com",g)}}class Ga extends za{constructor(h,g){super(h,"github.com",g,"string"==typeof g?.login?g?.login:null)}}class C extends ko{constructor(h,g){super(h,"google.com",g)}}class q extends za{constructor(h,g,b){super(h,"twitter.com",g,b)}}function O(w){const{user:h,_tokenResponse:g}=w;return h.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function Po(w){var h,g;if(!w)return null;const{providerId:b}=w,$=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},re=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!b&&w?.idToken){const be=null===(g=null===(h=gn(w.idToken))||void 0===h?void 0:h.firebase)||void 0===g?void 0:g.sign_in_provider;if(be)return new ko(re,"anonymous"!==be&&"custom"!==be?be:null)}if(!b)return null;switch(b){case"facebook.com":return new Ho(re,$);case"github.com":return new Ga(re,$);case"google.com":return new C(re,$);case"twitter.com":return new q(re,$,w.screenName||null);case"custom":case"anonymous":return new ko(re,null);default:return new ko(re,b,$)}}(g)}function Ke(w,h,g,b){return(0,W.m9)(w).onIdTokenChanged(h,g,b)}function ir(w){return(0,W.m9)(w).signOut()}class Gn{constructor(h,g,b){this.type=h,this.credential=g,this.auth=b}static _fromIdtoken(h,g){return new Gn("enroll",h,g)}static _fromMfaPendingCredential(h){return new Gn("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var g,b;if(h?.multiFactorSession){if(null!==(g=h.multiFactorSession)&&void 0!==g&&g.pendingCredential)return Gn._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null!==(b=h.multiFactorSession)&&void 0!==b&&b.idToken)return Gn._fromIdtoken(h.multiFactorSession.idToken)}return null}}class qr{constructor(h,g,b){this.session=h,this.hints=g,this.signInResolver=b}static _fromError(h,g){const b=Lr(h),$=g.customData._serverResponse,re=($.mfaInfo||[]).map(Ye=>te._fromServerResponse(b,Ye));Se($.mfaPendingCredential,b,"internal-error");const be=Gn._fromMfaPendingCredential($.mfaPendingCredential);return new qr(be,re,function(){var Ye=(0,p.Z)(function*(Nt){const Ut=yield Nt._process(b,be);delete $.mfaInfo,delete $.mfaPendingCredential;const yn=Object.assign(Object.assign({},$),{idToken:Ut.idToken,refreshToken:Ut.refreshToken});switch(g.operationType){case"signIn":const wr=yield ni._fromIdTokenResponse(b,g.operationType,yn);return yield b._updateCurrentUser(wr.user),wr;case"reauthenticate":return Se(g.user,b,"internal-error"),ni._forOperation(g.user,g.operationType,yn);default:le(b,"internal-error")}});return function(Nt){return Ye.apply(this,arguments)}}())}resolveSignIn(h){var g=this;return(0,p.Z)(function*(){return g.signInResolver(h)})()}}function Js(w,h){var g;const b=(0,W.m9)(w),$=h;return Se(h.customData.operationType,b,"argument-error"),Se(null===(g=$.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,b,"argument-error"),qr._fromError(b,$)}class zt{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(b=>te._fromServerResponse(h.auth,b)))})}static _fromUser(h){return new zt(h)}getSession(){var h=this;return(0,p.Z)(function*(){return Gn._fromIdtoken(yield h.user.getIdToken(),h.user.auth)})()}enroll(h,g){var b=this;return(0,p.Z)(function*(){const $=h,re=yield b.getSession(),be=yield vn(b.user,$._process(b.user.auth,re,g));return yield b.user._updateTokensIfNecessary(be),b.user.reload()})()}unenroll(h){var g=this;return(0,p.Z)(function*(){const b="string"==typeof h?h:h.uid,$=yield g.user.getIdToken();try{const re=yield vn(g.user,function Bt(w,h){return Je(w,"POST","/v2/accounts/mfaEnrollment:withdraw",Be(w,h))}(g.user.auth,{idToken:$,mfaEnrollmentId:b}));g.enrolledFactors=g.enrolledFactors.filter(({uid:be})=>be!==b),yield g.user._updateTokensIfNecessary(re),yield g.user.reload()}catch(re){throw re}})()}}const Ur=new WeakMap;function Ft(w){const h=(0,W.m9)(w);return Ur.has(h)||Ur.set(h,zt._fromUser(h)),Ur.get(h)}const Ue="__sak";class ot{constructor(h,g){this.storageRetriever=h,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(Ue,"1"),this.storage.removeItem(Ue),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(h,g){return this.storage.setItem(h,JSON.stringify(g)),Promise.resolve()}_get(h){const g=this.storage.getItem(h);return Promise.resolve(g?JSON.parse(g):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const eo=(()=>{class w extends ot{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,b)=>this.onStorageEvent(g,b),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Xi(){const w=(0,W.z$)();return K(w)||Mt(w)}()&&function ms(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Ni(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const b of Object.keys(this.listeners)){const $=this.storage.getItem(b),re=this.localCache[b];$!==re&&g(b,re,$)}}onStorageEvent(g,b=!1){if(!g.key)return void this.forAllChangedKeys((Ye,Nt,Ut)=>{this.notifyListeners(Ye,Ut)});const $=g.key;if(b?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Ye=this.storage.getItem($);if(g.newValue!==Ye)null!==g.newValue?this.storage.setItem($,g.newValue):this.storage.removeItem($);else if(this.localCache[$]===g.newValue&&!b)return}const re=()=>{const Ye=this.storage.getItem($);!b&&this.localCache[$]===Ye||this.notifyListeners($,Ye)},be=this.storage.getItem($);!function dr(){return(0,W.w1)()&&10===document.documentMode}()||be===g.newValue||g.newValue===g.oldValue?re():setTimeout(re,10)}notifyListeners(g,b){this.localCache[g]=b;const $=this.listeners[g];if($)for(const re of Array.from($))re(b&&JSON.parse(b))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,b,$)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:b,newValue:$}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,b){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(b)}_removeListener(g,b){this.listeners[g]&&(this.listeners[g].delete(b),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,b){var $=()=>super._set,re=this;return(0,p.Z)(function*(){yield $().call(re,g,b),re.localCache[g]=JSON.stringify(b)})()}_get(g){var b=()=>super._get,$=this;return(0,p.Z)(function*(){const re=yield b().call($,g);return $.localCache[g]=JSON.stringify(re),re})()}_remove(g){var b=()=>super._remove,$=this;return(0,p.Z)(function*(){yield b().call($,g),delete $.localCache[g]})()}}return w.type="LOCAL",w})(),lu=(()=>{class w extends ot{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,b){}_removeListener(g,b){}}return w.type="SESSION",w})();let gc=(()=>{class w{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const b=this.receivers.find(re=>re.isListeningto(g));if(b)return b;const $=new w(g);return this.receivers.push($),$}isListeningto(g){return this.eventTarget===g}handleEvent(g){var b=this;return(0,p.Z)(function*(){const $=g,{eventId:re,eventType:be,data:Ye}=$.data,Nt=b.handlersMap[be];if(!Nt?.size)return;$.ports[0].postMessage({status:"ack",eventId:re,eventType:be});const Ut=Array.from(Nt).map(function(){var wr=(0,p.Z)(function*(Vo){return Vo($.origin,Ye)});return function(Vo){return wr.apply(this,arguments)}}()),yn=yield function Fo(w){return Promise.all(w.map(function(){var h=(0,p.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(b){return{fulfilled:!1,reason:b}}});return function(g){return h.apply(this,arguments)}}()))}(Ut);$.ports[0].postMessage({status:"done",eventId:re,eventType:be,response:yn})})()}_subscribe(g,b){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(b)}_unsubscribe(g,b){this.handlersMap[g]&&b&&this.handlersMap[g].delete(b),(!b||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function Wa(w="",h=10){let g="";for(let b=0;b<h;b++)g+=Math.floor(10*Math.random());return w+g}class Ku{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,g,b=50){var $=this;return(0,p.Z)(function*(){const re=typeof MessageChannel<"u"?new MessageChannel:null;if(!re)throw new Error("connection_unavailable");let be,Ye;return new Promise((Nt,Ut)=>{const yn=Wa("",20);re.port1.start();const wr=setTimeout(()=>{Ut(new Error("unsupported_event"))},b);Ye={messageChannel:re,onMessage(Vo){const ro=Vo;if(ro.data.eventId===yn)switch(ro.data.status){case"ack":clearTimeout(wr),be=setTimeout(()=>{Ut(new Error("timeout"))},3e3);break;case"done":clearTimeout(be),Nt(ro.data.response);break;default:clearTimeout(wr),clearTimeout(be),Ut(new Error("invalid_response"))}}},$.handlers.add(Ye),re.port1.addEventListener("message",Ye.onMessage),$.target.postMessage({eventType:h,eventId:yn,data:g},[re.port2])}).finally(()=>{Ye&&$.removeMessageHandler(Ye)})})()}}function Wi(){return window}function ya(){return typeof Wi().WorkerGlobalScope<"u"&&"function"==typeof Wi().importScripts}function Kr(){return(Kr=(0,p.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const on="firebaseLocalStorageDb",tr="firebaseLocalStorage",Ot="fbase_key";class _a{constructor(h){this.request=h}toPromise(){return new Promise((h,g)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function Pa(w,h){return w.transaction([tr],h?"readwrite":"readonly").objectStore(tr)}function Xa(){const w=indexedDB.open(on,1);return new Promise((h,g)=>{w.addEventListener("error",()=>{g(w.error)}),w.addEventListener("upgradeneeded",()=>{const b=w.result;try{b.createObjectStore(tr,{keyPath:Ot})}catch($){g($)}}),w.addEventListener("success",(0,p.Z)(function*(){const b=w.result;b.objectStoreNames.contains(tr)?h(b):(b.close(),yield function Ea(){const w=indexedDB.deleteDatabase(on);return new _a(w).toPromise()}(),h(yield Xa()))}))})}function Ja(w,h,g){return lt.apply(this,arguments)}function lt(){return(lt=(0,p.Z)(function*(w,h,g){const b=Pa(w,!0).put({[Ot]:h,value:g});return new _a(b).toPromise()})).apply(this,arguments)}function zo(){return(zo=(0,p.Z)(function*(w,h){const g=Pa(w,!1).get(h),b=yield new _a(g).toPromise();return void 0===b?null:b.value})).apply(this,arguments)}function H(w,h){const g=Pa(w,!0).delete(h);return new _a(g).toPromise()}const G=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,p.Z)(function*(){return g.db||(g.db=yield Xa()),g.db})()}_withRetries(g){var b=this;return(0,p.Z)(function*(){let $=0;for(;;)try{const re=yield b._openDb();return yield g(re)}catch(re){if($++>3)throw re;b.db&&(b.db.close(),b.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,p.Z)(function*(){return ya()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,p.Z)(function*(){g.receiver=gc._getInstance(function va(){return ya()?self:null}()),g.receiver._subscribe("keyChanged",function(){var b=(0,p.Z)(function*($,re){return{keyProcessed:(yield g._poll()).includes(re.key)}});return function($,re){return b.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var b=(0,p.Z)(function*($,re){return["keyChanged"]});return function($,re){return b.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,p.Z)(function*(){var b,$;if(g.activeServiceWorker=yield function bn(){return Kr.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new Ku(g.activeServiceWorker);const re=yield g.sender._send("ping",{},800);re&&null!==(b=re[0])&&void 0!==b&&b.fulfilled&&null!==($=re[0])&&void 0!==$&&$.value.includes("keyChanged")&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var b=this;return(0,p.Z)(function*(){if(b.sender&&b.activeServiceWorker&&function hn(){var w;return(null===(w=navigator?.serviceWorker)||void 0===w?void 0:w.controller)||null}()===b.activeServiceWorker)try{yield b.sender._send("keyChanged",{key:g},b.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,p.Z)(function*(){try{if(!indexedDB)return!1;const g=yield Xa();return yield Ja(g,Ue,"1"),yield H(g,Ue),!0}catch{}return!1})()}_withPendingWrite(g){var b=this;return(0,p.Z)(function*(){b.pendingWrites++;try{yield g()}finally{b.pendingWrites--}})()}_set(g,b){var $=this;return(0,p.Z)(function*(){return $._withPendingWrite((0,p.Z)(function*(){return yield $._withRetries(re=>Ja(re,g,b)),$.localCache[g]=b,$.notifyServiceWorker(g)}))})()}_get(g){var b=this;return(0,p.Z)(function*(){const $=yield b._withRetries(re=>function sr(w,h){return zo.apply(this,arguments)}(re,g));return b.localCache[g]=$,$})()}_remove(g){var b=this;return(0,p.Z)(function*(){return b._withPendingWrite((0,p.Z)(function*(){return yield b._withRetries($=>H($,g)),delete b.localCache[g],b.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,p.Z)(function*(){const b=yield g._withRetries(be=>{const Ye=Pa(be,!1).getAll();return new _a(Ye).toPromise()});if(!b)return[];if(0!==g.pendingWrites)return[];const $=[],re=new Set;for(const{fbase_key:be,value:Ye}of b)re.add(be),JSON.stringify(g.localCache[be])!==JSON.stringify(Ye)&&(g.notifyListeners(be,Ye),$.push(be));for(const be of Object.keys(g.localCache))g.localCache[be]&&!re.has(be)&&(g.notifyListeners(be,null),$.push(be));return $})()}notifyListeners(g,b){this.localCache[g]=b;const $=this.listeners[g];if($)for(const re of Array.from($))re(b)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,p.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,b){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(b)}_removeListener(g,b){this.listeners[g]&&(this.listeners[g].delete(b),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})(),Dt=1e12;class Pt{constructor(h){this.auth=h,this.counter=Dt,this._widgets=new Map}render(h,g){const b=this.counter;return this._widgets.set(b,new Un(h,this.auth.name,g||{})),this.counter++,b}reset(h){var g;const b=h||Dt;null===(g=this._widgets.get(b))||void 0===g||g.delete(),this._widgets.delete(b)}getResponse(h){var g;return(null===(g=this._widgets.get(h||Dt))||void 0===g?void 0:g.getResponse())||""}execute(h){var g=this;return(0,p.Z)(function*(){var b;return null===(b=g._widgets.get(h||Dt))||void 0===b||b.execute(),""})()}}class Un{constructor(h,g,b){this.params=b,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const $="string"==typeof h?document.getElementById(h):h;Se($,"argument-error",{appName:g}),this.container=$,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Tn(w){const h=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let b=0;b<w;b++)h.push(g.charAt(Math.floor(62*Math.random())));return h.join("")}(50);const{callback:h,"expired-callback":g}=this.params;if(h)try{h(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Kt=Rr("rcb"),Fn=new Cr(3e4,6e4);class Bi{constructor(){var h;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(h=Wi().grecaptcha)||void 0===h||!h.render)}load(h,g=""){return Se(function ds(w){return w.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w)}(g),h,"argument-error"),this.shouldResolveImmediately(g)&&wt(Wi().grecaptcha)?Promise.resolve(Wi().grecaptcha):new Promise((b,$)=>{const re=Wi().setTimeout(()=>{$(Ve(h,"network-request-failed"))},Fn.get());Wi()[Kt]=()=>{Wi().clearTimeout(re),delete Wi()[Kt];const Ye=Wi().grecaptcha;if(!Ye||!wt(Ye))return void $(Ve(h,"internal-error"));const Nt=Ye.render;Ye.render=(Ut,yn)=>{const wr=Nt(Ut,yn);return this.counter++,wr},this.hostLanguage=g,b(Ye)},hr(`https://www.google.com/recaptcha/api.js??${(0,W.xO)({onload:Kt,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(re),$(Ve(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){var g;return!(null===(g=Wi().grecaptcha)||void 0===g||!g.render)&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Pr{load(h){return(0,p.Z)(function*(){return new Pt(h)})()}clearedOneInstance(){}}const Ei="recaptcha",lo={theme:"light",type:"image"};class ho{constructor(h,g=Object.assign({},lo),b){this.parameters=g,this.type=Ei,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Lr(b),this.isInvisible="invisible"===this.parameters.size,Se(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const $="string"==typeof h?document.getElementById(h):h;Se($,this.auth,"argument-error"),this.container=$,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Pr:new Bi,this.validateStartingState()}verify(){var h=this;return(0,p.Z)(function*(){h.assertNotDestroyed();const g=yield h.render(),b=h.getAssertedRecaptcha();return b.getResponse(g)||new Promise(re=>{const be=Ye=>{Ye&&(h.tokenChangeListeners.delete(be),re(Ye))};h.tokenChangeListeners.add(be),h.isInvisible&&b.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){Se(!this.parameters.sitekey,this.auth,"argument-error"),Se(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Se(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return g=>{if(this.tokenChangeListeners.forEach(b=>b(g)),"function"==typeof h)h(g);else if("string"==typeof h){const b=Wi()[h];"function"==typeof b&&b(g)}}}assertNotDestroyed(){Se(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,p.Z)(function*(){if(yield h.init(),!h.widgetId){let g=h.container;if(!h.isInvisible){const b=document.createElement("div");g.appendChild(b),g=b}h.widgetId=h.getAssertedRecaptcha().render(g,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,p.Z)(function*(){Se(dn()&&!ya(),h.auth,"internal-error"),yield function _(){let w=null;return new Promise(h=>{"complete"!==document.readyState?(w=()=>h(),window.addEventListener("load",w)):h()}).catch(h=>{throw w&&window.removeEventListener("load",w),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const g=yield function We(w){return Re.apply(this,arguments)}(h.auth);Se(g,h.auth,"internal-error"),h.parameters.sitekey=g})()}getAssertedRecaptcha(){return Se(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class S{constructor(h,g){this.verificationId=h,this.onConfirmation=g}confirm(h){const g=nn._fromVerification(this.verificationId,h);return this.onConfirmation(g)}}function v(w,h,g){return A.apply(this,arguments)}function A(){return(A=(0,p.Z)(function*(w,h,g){const b=Lr(w),$=yield Fe(b,h,(0,W.m9)(g));return new S($,re=>co(b,re))})).apply(this,arguments)}function k(w,h,g){return Z.apply(this,arguments)}function Z(){return(Z=(0,p.Z)(function*(w,h,g){const b=(0,W.m9)(w);yield Eo(!1,b,"phone");const $=yield Fe(b.auth,h,(0,W.m9)(g));return new S($,re=>$a(b,re))})).apply(this,arguments)}function ce(w,h,g){return $e.apply(this,arguments)}function $e(){return($e=(0,p.Z)(function*(w,h,g){const b=(0,W.m9)(w),$=yield Fe(b.auth,h,(0,W.m9)(g));return new S($,re=>mr(b,re))})).apply(this,arguments)}function Fe(w,h,g){return Xe.apply(this,arguments)}function Xe(){return Xe=(0,p.Z)(function*(w,h,g){var b;const $=yield g.verify();try{let re;if(Se("string"==typeof $,w,"argument-error"),Se(g.type===Ei,w,"argument-error"),re="string"==typeof h?{phoneNumber:h}:h,"session"in re){const be=re.session;if("phoneNumber"in re)return Se("enroll"===be.type,w,"internal-error"),(yield function dt(w,h){return Je(w,"POST","/v2/accounts/mfaEnrollment:start",Be(w,h))}(w,{idToken:be.credential,phoneEnrollmentInfo:{phoneNumber:re.phoneNumber,recaptchaToken:$}})).phoneSessionInfo.sessionInfo;{Se("signin"===be.type,w,"internal-error");const Ye=(null===(b=re.multiFactorHint)||void 0===b?void 0:b.uid)||re.multiFactorUid;return Se(Ye,w,"missing-multi-factor-info"),(yield function ie(w,h){return Je(w,"POST","/v2/accounts/mfaSignIn:start",Be(w,h))}(w,{mfaPendingCredential:be.credential,mfaEnrollmentId:Ye,phoneSignInInfo:{recaptchaToken:$}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:be}=yield function Cn(w,h){return Er.apply(this,arguments)}(w,{phoneNumber:re.phoneNumber,recaptchaToken:$});return be}}finally{g._reset()}}),Xe.apply(this,arguments)}function ft(w,h){return xt.apply(this,arguments)}function xt(){return(xt=(0,p.Z)(function*(w,h){yield Ti((0,W.m9)(w),h)})).apply(this,arguments)}let At=(()=>{class w{constructor(g){this.providerId=w.PROVIDER_ID,this.auth=Lr(g)}verifyPhoneNumber(g,b){return Fe(this.auth,g,(0,W.m9)(b))}static credential(g,b){return nn._fromVerification(g,b)}static credentialFromResult(g){return w.credentialFromTaggedObject(g)}static credentialFromError(g){return w.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:b,temporaryProof:$}=g;return b&&$?nn._fromTokenResponse(b,$):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function fr(w,h){return h?Zn(h):(Se(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class Is extends vt{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return Jn(h,this._buildIdpRequest())}_linkToIdToken(h,g){return Jn(h,this._buildIdpRequest(g))}_getReauthenticationResolver(h){return Jn(h,this._buildIdpRequest())}_buildIdpRequest(h){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(g.idToken=h),g}}function Qr(w){return da(w.auth,new Is(w),w.bypassAuthState)}function Do(w){const{auth:h,user:g}=w;return Se(g,h,"internal-error"),wo(g,new Is(w),w.bypassAuthState)}function kr(w){return ia.apply(this,arguments)}function ia(){return(ia=(0,p.Z)(function*(w){const{auth:h,user:g}=w;return Se(g,h,"internal-error"),Ti(g,new Is(w),w.bypassAuthState)})).apply(this,arguments)}class eu{constructor(h,g,b,$,re=!1){this.auth=h,this.resolver=b,this.user=$,this.bypassAuthState=re,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var h=this;return new Promise(function(){var g=(0,p.Z)(function*(b,$){h.pendingPromise={resolve:b,reject:$};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(re){h.reject(re)}});return function(b,$){return g.apply(this,arguments)}}())}onAuthEvent(h){var g=this;return(0,p.Z)(function*(){const{urlResponse:b,sessionId:$,postBody:re,tenantId:be,error:Ye,type:Nt}=h;if(Ye)return void g.reject(Ye);const Ut={auth:g.auth,requestUri:b,sessionId:$,tenantId:be||void 0,postBody:re||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Nt)(Ut))}catch(yn){g.reject(yn)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return Qr;case"linkViaPopup":case"linkViaRedirect":return kr;case"reauthViaPopup":case"reauthViaRedirect":return Do;default:le(this.auth,"internal-error")}}resolve(h){en(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){en(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ai=new Cr(2e3,1e4);function Us(w,h,g){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,p.Z)(function*(w,h,g){const b=Lr(w);Ze(w,h,is);const $=fr(b,g);return new Du(b,"signInViaPopup",h,$).executeNotNull()})).apply(this,arguments)}function tu(w,h,g){return wa.apply(this,arguments)}function wa(){return(wa=(0,p.Z)(function*(w,h,g){const b=(0,W.m9)(w);Ze(b.auth,h,is);const $=fr(b.auth,g);return new Du(b.auth,"reauthViaPopup",h,$,b).executeNotNull()})).apply(this,arguments)}function yc(w,h,g){return zc.apply(this,arguments)}function zc(){return(zc=(0,p.Z)(function*(w,h,g){const b=(0,W.m9)(w);Ze(b.auth,h,is);const $=fr(b.auth,g);return new Du(b.auth,"linkViaPopup",h,$,b).executeNotNull()})).apply(this,arguments)}let Du=(()=>{class w extends eu{constructor(g,b,$,re,be){super(g,b,re,be),this.provider=$,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var g=this;return(0,p.Z)(function*(){const b=yield g.execute();return Se(b,g.auth,"internal-error"),b})()}onExecution(){var g=this;return(0,p.Z)(function*(){en(1===g.filter.length,"Popup operations only handle one event");const b=Wa();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],b),g.authWindow.associatedEvent=b,g.resolver._originValidation(g.auth).catch($=>{g.reject($)}),g.resolver._isIframeWebStorageSupported(g.auth,$=>{$||g.reject(Ve(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(Ve(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const g=()=>{var b,$;this.pollId=null!==($=null===(b=this.authWindow)||void 0===b?void 0:b.window)&&void 0!==$&&$.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ve(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(g,Ai.get())};g()}}return w.currentPopupAction=null,w})();const js="pendingRedirect",Go=new Map;class Ia extends eu{constructor(h,g,b=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,b),this.eventId=null}execute(){var h=()=>super.execute,g=this;return(0,p.Z)(function*(){let b=Go.get(g.auth._key());if(!b){try{const re=(yield function gd(w,h){return ri.apply(this,arguments)}(g.resolver,g.auth))?yield h().call(g):null;b=()=>Promise.resolve(re)}catch($){b=()=>Promise.reject($)}Go.set(g.auth._key(),b)}return g.bypassAuthState||Go.set(g.auth._key(),()=>Promise.resolve(null)),b()})()}onAuthEvent(h){var g=()=>super.onAuthEvent,b=this;return(0,p.Z)(function*(){if("signInViaRedirect"===h.type)return g().call(b,h);if("unknown"!==h.type){if(h.eventId){const $=yield b.auth._redirectUserForId(h.eventId);if($)return b.user=$,g().call(b,h);b.resolve(null)}}else b.resolve(null)})()}onExecution(){return(0,p.Z)(function*(){})()}cleanUp(){}}function ri(){return(ri=(0,p.Z)(function*(w,h){const g=Wo(h),b=Cu(w);if(!(yield b._isAvailable()))return!1;const $="true"===(yield b._get(g));return yield b._remove(g),$})).apply(this,arguments)}function du(w,h){return to.apply(this,arguments)}function to(){return(to=(0,p.Z)(function*(w,h){return Cu(w)._set(Wo(h),"true")})).apply(this,arguments)}function Ui(){Go.clear()}function Al(w,h){Go.set(w._key(),h)}function Cu(w){return Zn(w._redirectPersistence)}function Wo(w){return Yn(js,w.config.apiKey,w.name)}function Zu(w,h,g){return function bu(w,h,g){return hs.apply(this,arguments)}(w,h,g)}function hs(){return(hs=(0,p.Z)(function*(w,h,g){const b=Lr(w);Ze(w,h,is),yield b._initializationPromise;const $=fr(b,g);return yield du($,b),$._openRedirect(b,h,"signInViaRedirect")})).apply(this,arguments)}function Yu(w,h,g){return function ka(w,h,g){return wi.apply(this,arguments)}(w,h,g)}function wi(){return(wi=(0,p.Z)(function*(w,h,g){const b=(0,W.m9)(w);Ze(b.auth,h,is),yield b.auth._initializationPromise;const $=fr(b.auth,g);yield du($,b.auth);const re=yield ru(b);return $._openRedirect(b.auth,h,"reauthViaRedirect",re)})).apply(this,arguments)}function nu(w,h,g){return function Qu(w,h,g){return Tu.apply(this,arguments)}(w,h,g)}function Tu(){return(Tu=(0,p.Z)(function*(w,h,g){const b=(0,W.m9)(w);Ze(b.auth,h,is),yield b.auth._initializationPromise;const $=fr(b.auth,g);yield Eo(!1,b,h.providerId),yield du($,b.auth);const re=yield ru(b);return $._openRedirect(b.auth,h,"linkViaRedirect",re)})).apply(this,arguments)}function Xu(w,h){return qo.apply(this,arguments)}function qo(){return(qo=(0,p.Z)(function*(w,h){return yield Lr(w)._initializationPromise,Fa(w,h,!1)})).apply(this,arguments)}function Fa(w,h){return Lo.apply(this,arguments)}function Lo(){return(Lo=(0,p.Z)(function*(w,h,g=!1){const b=Lr(w),$=fr(b,h),be=yield new Ia(b,$,g).execute();return be&&!g&&(delete be.user._redirectEventId,yield b._persistUserIfCurrent(be.user),yield b._setRedirectUser(null,h)),be})).apply(this,arguments)}function ru(w){return Da.apply(this,arguments)}function Da(){return(Da=(0,p.Z)(function*(w){const h=Wa(`${w.uid}:::`);return w._redirectEventId=h,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),h})).apply(this,arguments)}class La{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let g=!1;return this.consumers.forEach(b=>{this.isEventForConsumer(h,b)&&(g=!0,this.sendToConsumer(h,b),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function qa(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Su(w);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=h,g=!0)),g}sendToConsumer(h,g){var b;if(h.error&&!Su(h)){const $=(null===(b=h.error.code)||void 0===b?void 0:b.split("auth/")[1])||"internal-error";g.onError(Ve(this.auth,$))}else g.onAuthEvent(h)}isEventForConsumer(h,g){const b=null===g.eventId||!!h.eventId&&h.eventId===g.eventId;return g.filter.includes(h.type)&&b}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ca(h))}saveEventToCache(h){this.cachedEventUids.add(Ca(h)),this.lastProcessedEventTime=Date.now()}}function Ca(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(h=>h).join("-")}function Su({type:w,error:h}){return"unknown"===w&&"auth/no-auth-event"===h?.code}function hu(w){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,p.Z)(function*(w,h={}){return Je(w,"GET","/v1/projects",h)})).apply(this,arguments)}const Au=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ju=/^https?/;function vc(){return(vc=(0,p.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:h}=yield hu(w);for(const g of h)try{if(Gc(g))return}catch{}le(w,"unauthorized-domain")})).apply(this,arguments)}function Gc(w){const h=Nn(),{protocol:g,hostname:b}=new URL(h);if(w.startsWith("chrome-extension://")){const be=new URL(w);return""===be.hostname&&""===b?"chrome-extension:"===g&&w.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===g&&be.hostname===b}if(!Ju.test(g))return!1;if(Au.test(w))return b===w;const $=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+$+"|"+$+")$","i").test(b)}const Ba=new Cr(3e4,6e4);function ba(){const w=Wi().___jsl;if(w?.H)for(const h of Object.keys(w.H))if(w.H[h].r=w.H[h].r||[],w.H[h].L=w.H[h].L||[],w.H[h].r=[...w.H[h].L],w.CP)for(let g=0;g<w.CP.length;g++)w.CP[g]=null}let $s=null;const Wc=new Cr(5e3,15e3),Ua="__/auth/iframe",fo="emulator/auth/iframe",Nl={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},li=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ko(w){const h=w.config;Se(h.authDomain,w,"auth-domain-config-required");const g=h.emulator?vr(h,fo):`https://${w.config.authDomain}/${Ua}`,b={apiKey:h.apiKey,appName:w.name,v:ae.SDK_VERSION},$=li.get(w.config.apiHost);$&&(b.eid=$);const re=w._getFrameworks();return re.length&&(b.fw=re.join(",")),`${g}?${(0,W.xO)(b).slice(1)}`}function Za(){return Za=(0,p.Z)(function*(w){const h=yield function fu(w){return $s=$s||function Ml(w){return new Promise((h,g)=>{var b,$,re;function be(){ba(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{ba(),g(Ve(w,"network-request-failed"))},timeout:Ba.get()})}if(null!==($=null===(b=Wi().gapi)||void 0===b?void 0:b.iframes)&&void 0!==$&&$.Iframe)h(gapi.iframes.getContext());else{if(null===(re=Wi().gapi)||void 0===re||!re.load){const Ye=Rr("iframefcb");return Wi()[Ye]=()=>{gapi.load?be():g(Ve(w,"network-request-failed"))},hr(`https://apis.google.com/js/api.js?onload=${Ye}`).catch(Nt=>g(Nt))}be()}}).catch(h=>{throw $s=null,h})}(w),$s}(w),g=Wi().gapi;return Se(g,w,"internal-error"),h.open({where:document.body,url:Ko(w),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Nl,dontclear:!0},b=>new Promise(function(){var $=(0,p.Z)(function*(re,be){yield b.restyle({setHideOnLeave:!1});const Ye=Ve(w,"network-request-failed"),Nt=Wi().setTimeout(()=>{be(Ye)},Wc.get());function Ut(){Wi().clearTimeout(Nt),re(b)}b.ping(Ut).then(Ut,()=>{be(Ye)})});return function(re,be){return $.apply(this,arguments)}}()))}),Za.apply(this,arguments)}const D={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ae{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Lt="__/auth/handler",an="emulator/auth/handler",qn=encodeURIComponent("fac");function Sn(w,h,g,b,$,re){return bo.apply(this,arguments)}function bo(){return(bo=(0,p.Z)(function*(w,h,g,b,$,re){Se(w.config.authDomain,w,"auth-domain-config-required"),Se(w.config.apiKey,w,"invalid-api-key");const be={apiKey:w.config.apiKey,appName:w.name,authType:g,redirectUrl:b,v:ae.SDK_VERSION,eventId:$};if(h instanceof is){h.setDefaultLanguage(w.languageCode),be.providerId=h.providerId||"",(0,W.xb)(h.getCustomParameters())||(be.customParameters=JSON.stringify(h.getCustomParameters()));for(const[yn,wr]of Object.entries(re||{}))be[yn]=wr}if(h instanceof mi){const yn=h.getScopes().filter(wr=>""!==wr);yn.length>0&&(be.scopes=yn.join(","))}w.tenantId&&(be.tid=w.tenantId);const Ye=be;for(const yn of Object.keys(Ye))void 0===Ye[yn]&&delete Ye[yn];const Nt=yield w._getAppCheckToken(),Ut=Nt?`#${qn}=${encodeURIComponent(Nt)}`:"";return`${function no({config:w}){return w.emulator?vr(w,an):`https://${w.authDomain}/${Lt}`}(w)}?${(0,W.xO)(Ye).slice(1)}${Ut}`})).apply(this,arguments)}const ji="webStorageSupport",Ta=class qc{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=lu,this._completeRedirectFn=Fa,this._overrideRedirectResult=Al}_openPopup(h,g,b,$){var re=this;return(0,p.Z)(function*(){var be;en(null===(be=re.eventManagers[h._key()])||void 0===be?void 0:be.manager,"_initialize() not called before _openPopup()");const Ye=yield Sn(h,g,b,Nn(),$);return function tt(w,h,g,b=500,$=600){const re=Math.max((window.screen.availHeight-$)/2,0).toString(),be=Math.max((window.screen.availWidth-b)/2,0).toString();let Ye="";const Nt=Object.assign(Object.assign({},D),{width:b.toString(),height:$.toString(),top:re,left:be}),Ut=(0,W.z$)().toLowerCase();g&&(Ye=J(Ut)?"_blank":g),ee(Ut)&&(h=h||"http://localhost",Nt.scrollbars="yes");const yn=Object.entries(Nt).reduce((Vo,[ro,Yc])=>`${Vo}${ro}=${Yc},`,"");if(function In(w=(0,W.z$)()){var h;return Mt(w)&&!(null===(h=window.navigator)||void 0===h||!h.standalone)}(Ut)&&"_self"!==Ye)return function jt(w,h){const g=document.createElement("a");g.href=w,g.target=h;const b=document.createEvent("MouseEvent");b.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(b)}(h||"",Ye),new Ae(null);const wr=window.open(h||"",Ye,yn);Se(wr,w,"popup-blocked");try{wr.focus()}catch{}return new Ae(wr)}(h,Ye,Wa())})()}_openRedirect(h,g,b,$){var re=this;return(0,p.Z)(function*(){return yield re._originValidation(h),function On(w){Wi().location.href=w}(yield Sn(h,g,b,Nn(),$)),new Promise(()=>{})})()}_initialize(h){const g=h._key();if(this.eventManagers[g]){const{manager:$,promise:re}=this.eventManagers[g];return $?Promise.resolve($):(en(re,"If manager is not set, promise should be"),re)}const b=this.initAndGetManager(h);return this.eventManagers[g]={promise:b},b.catch(()=>{delete this.eventManagers[g]}),b}initAndGetManager(h){var g=this;return(0,p.Z)(function*(){const b=yield function pu(w){return Za.apply(this,arguments)}(h),$=new La(h);return b.register("authEvent",re=>(Se(re?.authEvent,h,"invalid-auth-event"),{status:$.onEvent(re.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[h._key()]={manager:$},g.iframes[h._key()]=b,$})()}_isIframeWebStorageSupported(h,g){this.iframes[h._key()].send(ji,{type:ji},$=>{var re;const be=null===(re=$?.[0])||void 0===re?void 0:re[ji];void 0!==be&&g(!!be),le(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const g=h._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Va(w){return vc.apply(this,arguments)}(h)),this.originValidationPromises[g]}get _shouldInitProactively(){return Ni()||K()||Mt()}};class Sa{constructor(h){this.factorId=h}_process(h,g,b){switch(g.type){case"enroll":return this._finalizeEnroll(h,g.credential,b);case"signin":return this._finalizeSignIn(h,g.credential);default:return ln("unexpected MultiFactorSessionType")}}}class es extends Sa{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new es(h)}_finalizeEnroll(h,g,b){return function Mr(w,h){return Je(w,"POST","/v2/accounts/mfaEnrollment:finalize",Be(w,h))}(h,{idToken:g,displayName:b,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,g){return function ve(w,h){return Je(w,"POST","/v2/accounts/mfaSignIn:finalize",Be(w,h))}(h,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let gu=(()=>{class w{constructor(){}static assertion(g){return es._fromCredential(g)}}return w.FACTOR_ID="phone",w})();var Kc="@firebase/auth";class md{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var g=this;return(0,p.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const g=this.auth.onIdTokenChanged(b=>{h(b?.stsTokenManager.accessToken||null)});this.internalListeners.set(h,g),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const g=this.internalListeners.get(h);g&&(this.internalListeners.delete(h),g(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Uf=(0,W.Pz)("authIdTokenMaxAge")||300;let Nu=null;const Sh=w=>function(){var h=(0,p.Z)(function*(g){const b=g&&(yield g.getIdTokenResult()),$=b&&((new Date).getTime()-Date.parse(b.issuedAtTime))/1e3;if($&&$>Uf)return;const re=b?.token;Nu!==re&&(Nu=re,yield fetch(w,{method:re?"POST":"DELETE",headers:re?{Authorization:`Bearer ${re}`}:{}}))});return function(g){return h.apply(this,arguments)}}();function yd(w=(0,ae.getApp)()){const h=(0,ae._getProvider)(w,"auth");if(h.isInitialized())return h.getImmediate();const g=function Zi(w,h){const g=(0,ae._getProvider)(w,"auth");if(g.isInitialized()){const $=g.getImmediate(),re=g.getOptions();if((0,W.vZ)(re,h??{}))return $;le($,"already-initialized")}return g.initialize({options:h})}(w,{popupRedirectResolver:Ta,persistence:[G,eo,lu]}),b=(0,W.Pz)("authTokenSyncURL");if(b){const re=Sh(b);(function st(w,h,g){(0,W.m9)(w).beforeAuthStateChanged(h,g)})(g,re,()=>re(g.currentUser)),Ke(g,be=>re(be))}const $=(0,W.q4)("auth");return $&&yo(g,`http://${$}`),g}!function xl(w){(0,ae._registerComponent)(new xe.wA("auth",(h,{options:g})=>{const b=h.getProvider("app").getImmediate(),$=h.getProvider("heartbeat"),re=h.getProvider("app-check-internal"),{apiKey:be,authDomain:Ye}=b.options;Se(be&&!be.includes(":"),"invalid-api-key",{appName:b.name});const Nt={apiKey:be,authDomain:Ye,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ts(w)},Ut=new Ts(b,$,re,Nt);return function mo(w,h){const g=h?.persistence||[],b=(Array.isArray(g)?g:[g]).map(Zn);h?.errorMap&&w._updateErrorMap(h.errorMap),w._initializeWithPersistence(b,h?.popupRedirectResolver)}(Ut,g),Ut},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,g,b)=>{h.getProvider("auth-internal").initialize()})),(0,ae._registerComponent)(new xe.wA("auth-internal",h=>{const g=Lr(h.getProvider("auth").getImmediate());return new md(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ae.registerVersion)(Kc,"0.23.2",function sa(w){switch(w){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(w)),(0,ae.registerVersion)(Kc,"0.23.2","esm2017")}("Browser")},5776:($t,Ge,z)=>{z.d(Ge,{u7:()=>vg,Jj:()=>Uc,IX:()=>py,my:()=>bs,xU:()=>_u,Lz:()=>cc,WA:()=>ot,F8:()=>yl,$q:()=>Dh,W:()=>bl,EK:()=>Kr,PU:()=>Nf,l7:()=>Fa,Ky:()=>Ot,Xb:()=>tr,Cf:()=>jr,K9:()=>Ur,Me:()=>bu,yq:()=>Si,Wi:()=>Jv,ET:()=>C_,Ab:()=>Mg,vr:()=>$y,Fc:()=>n_,hJ:()=>e_,B$:()=>Df,at:()=>dy,oe:()=>D_,AK:()=>jy,TF:()=>i_,JU:()=>id,ST:()=>t_,fH:()=>my,Ix:()=>yh,Wu:()=>p_,Lx:()=>FE,qY:()=>Hs,GL:()=>Tl,QT:()=>Eg,kl:()=>Af,Xk:()=>LE,PL:()=>E_,UQ:()=>w_,zN:()=>wg,ad:()=>gy,nP:()=>Hy,b9:()=>Ay,vh:()=>My,Pb:()=>s_,L$:()=>o_,cf:()=>Ly,sc:()=>Vy,Xo:()=>Sy,IO:()=>ld,iE:()=>sd,Eo:()=>hy,i3:()=>R_,Bt:()=>Ag,pl:()=>I_,Ub:()=>Js,qK:()=>__,TQ:()=>f_,e0:()=>mg,r7:()=>Fy,Mx:()=>r_,ar:()=>dd});var Ee,p=z(5861),W=z(534),ae=z(4537),he=z(7879),fe=z(9058),xe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Me={},ze=ze||{},oe=xe||self;function pe(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function Te(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var rt="closure_uid_"+(1e9*Math.random()>>>0),mt=0;function ht(i,e,n){return i.call.apply(i.bind,arguments)}function Qt(i,e,n){if(!i)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var u=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(u,o),i.apply(e,u)}}return function(){return i.apply(e,arguments)}}function Rt(i,e,n){return(Rt=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ht:Qt).apply(null,arguments)}function Mn(i,e){var n=Array.prototype.slice.call(arguments,1);return function(){var o=n.slice();return o.push.apply(o,arguments),i.apply(this,o)}}function bt(i,e){function n(){}n.prototype=e.prototype,i.$=e.prototype,i.prototype=new n,i.prototype.constructor=i,i.ac=function(o,u,l){for(var f=Array(arguments.length-2),T=2;T<arguments.length;T++)f[T-2]=arguments[T];return e.prototype[u].apply(o,f)}}function le(){this.s=this.s,this.o=this.o}le.prototype.s=!1,le.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function et(i){Object.prototype.hasOwnProperty.call(i,rt)&&i[rt]||(i[rt]=++mt)}(this)},le.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Oe=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let n=0;n<i.length;n++)if(n in i&&i[n]===e)return n;return-1};function Ze(i){const e=i.length;if(0<e){const n=Array(e);for(let o=0;o<e;o++)n[o]=i[o];return n}return[]}function pt(i,e){for(let n=1;n<arguments.length;n++){const o=arguments[n];if(pe(o)){const u=i.length||0,l=o.length||0;i.length=u+l;for(let f=0;f<l;f++)i[u+f]=o[f]}else i.push(o)}}function Se(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}Se.prototype.h=function(){this.defaultPrevented=!0};var ln=function(){if(!oe.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{oe.addEventListener("test",()=>{},e),oe.removeEventListener("test",()=>{},e)}catch{}return i}();function en(i){return/^[\s\xa0]*$/.test(i)}function Nn(){var i=oe.navigator;return i&&(i=i.userAgent)?i:""}function dn(i){return-1!=Nn().indexOf(i)}function Dr(i){return Dr[" "](i),i}Dr[" "]=function(){};var Je,i,br=dn("Opera"),Cr=dn("Trident")||dn("MSIE"),vr=dn("Edge"),ke=vr||Cr,He=dn("Gecko")&&!(-1!=Nn().toLowerCase().indexOf("webkit")&&!dn("Edge"))&&!(dn("Trident")||dn("MSIE"))&&!dn("Edge"),qe=-1!=Nn().toLowerCase().indexOf("webkit")&&!dn("Edge");function Be(){var i=oe.document;return i?i.documentMode:void 0}e:{var gt="",Tt=(i=Nn(),He?/rv:([^\);]+)(\)|;)/.exec(i):vr?/Edge\/([\d\.]+)/.exec(i):Cr?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):qe?/WebKit\/(\S+)/.exec(i):br?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(Tt&&(gt=Tt?Tt[1]:""),Cr){var Et=Be();if(null!=Et&&Et>parseFloat(gt)){Je=String(Et);break e}}Je=gt}var xn=oe.document&&Cr&&(Be()||parseInt(Je,10))||void 0;function Ht(i,e){if(Se.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var n=this.type=i.type,o=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(He){e:{try{Dr(e.nodeName);var u=!0;break e}catch{}u=!1}u||(e=null)}}else"mouseover"==n?e=i.fromElement:"mouseout"==n&&(e=i.toElement);this.relatedTarget=e,o?(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:Kn[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&Ht.$.h.call(this)}}bt(Ht,Se);var Kn={2:"touch",3:"pen",4:"mouse"};Ht.prototype.h=function(){Ht.$.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var lr="closure_listenable_"+(1e6*Math.random()|0),Qn=0;function er(i,e,n,o,u){this.listener=i,this.proxy=null,this.src=e,this.type=n,this.capture=!!o,this.la=u,this.key=++Qn,this.fa=this.ia=!1}function Vt(i){i.fa=!0,i.listener=null,i.proxy=null,i.src=null,i.la=null}function Nr(i,e,n){for(const o in i)e.call(n,i[o],o,i)}function Ln(i){const e={};for(const n in i)e[n]=i[n];return e}const $r="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function si(i,e){let n,o;for(let u=1;u<arguments.length;u++){for(n in o=arguments[u],o)i[n]=o[n];for(let l=0;l<$r.length;l++)n=$r[l],Object.prototype.hasOwnProperty.call(o,n)&&(i[n]=o[n])}}function nr(i){this.src=i,this.g={},this.h=0}function Xt(i,e){var n=e.type;if(n in i.g){var l,o=i.g[n],u=Oe(o,e);(l=0<=u)&&Array.prototype.splice.call(o,u,1),l&&(Vt(e),0==i.g[n].length&&(delete i.g[n],i.h--))}}function gn(i,e,n,o){for(var u=0;u<i.length;++u){var l=i[u];if(!l.fa&&l.listener==e&&l.capture==!!n&&l.la==o)return u}return-1}nr.prototype.add=function(i,e,n,o,u){var l=i.toString();(i=this.g[l])||(i=this.g[l]=[],this.h++);var f=gn(i,e,o,u);return-1<f?(e=i[f],n||(e.ia=!1)):((e=new er(e,this.src,l,!!o,u)).ia=n,i.push(e)),e};var tn="closure_lm_"+(1e6*Math.random()|0),vn={};function _r(i,e,n,o,u){if(o&&o.once)return pr(i,e,n,o,u);if(Array.isArray(e)){for(var l=0;l<e.length;l++)_r(i,e[l],n,o,u);return null}return n=ei(n),i&&i[lr]?i.O(e,n,Te(o)?!!o.capture:!!o,u):di(i,e,n,!1,o,u)}function di(i,e,n,o,u,l){if(!e)throw Error("Invalid event type");var f=Te(u)?!!u.capture:!!u,T=gr(i);if(T||(i[tn]=T=new nr(i)),(n=T.add(e,n,o,f,l)).proxy)return n;if(o=function Vn(){const e=fn;return function i(n){return e.call(i.src,i.listener,n)}}(),n.proxy=o,o.src=i,o.listener=n,i.addEventListener)ln||(u=f),void 0===u&&(u=!1),i.addEventListener(e.toString(),o,u);else if(i.attachEvent)i.attachEvent(Di(e.toString()),o);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(o)}return n}function pr(i,e,n,o,u){if(Array.isArray(e)){for(var l=0;l<e.length;l++)pr(i,e[l],n,o,u);return null}return n=ei(n),i&&i[lr]?i.P(e,n,Te(o)?!!o.capture:!!o,u):di(i,e,n,!0,o,u)}function Mi(i,e,n,o,u){if(Array.isArray(e))for(var l=0;l<e.length;l++)Mi(i,e[l],n,o,u);else o=Te(o)?!!o.capture:!!o,n=ei(n),i&&i[lr]?(i=i.i,(e=String(e).toString())in i.g&&-1<(n=gn(l=i.g[e],n,o,u))&&(Vt(l[n]),Array.prototype.splice.call(l,n,1),0==l.length&&(delete i.g[e],i.h--))):i&&(i=gr(i))&&(e=i.g[e.toString()],i=-1,e&&(i=gn(e,n,o,u)),(n=-1<i?e[i]:null)&&jn(n))}function jn(i){if("number"!=typeof i&&i&&!i.fa){var e=i.src;if(e&&e[lr])Xt(e.i,i);else{var n=i.type,o=i.proxy;e.removeEventListener?e.removeEventListener(n,o,i.capture):e.detachEvent?e.detachEvent(Di(n),o):e.addListener&&e.removeListener&&e.removeListener(o),(n=gr(e))?(Xt(n,i),0==n.h&&(n.src=null,e[tn]=null)):Vt(i)}}}function Di(i){return i in vn?vn[i]:vn[i]="on"+i}function fn(i,e){if(i.fa)i=!0;else{e=new Ht(e,this);var n=i.listener,o=i.la||i.src;i.ia&&jn(i),i=n.call(o,e)}return i}function gr(i){return(i=i[tn])instanceof nr?i:null}var Pn="__closure_events_fn_"+(1e9*Math.random()>>>0);function ei(i){return"function"==typeof i?i:(i[Pn]||(i[Pn]=function(e){return i.handleEvent(e)}),i[Pn])}function Xn(){le.call(this),this.i=new nr(this),this.S=this,this.J=null}function kn(i,e){var n,o=i.J;if(o)for(n=[];o;o=o.J)n.push(o);if(i=i.S,o=e.type||e,"string"==typeof e)e=new Se(e,i);else if(e instanceof Se)e.target=e.target||i;else{var u=e;si(e=new Se(o,i),u)}if(u=!0,n)for(var l=n.length-1;0<=l;l--){var f=e.g=n[l];u=zr(f,o,!0,e)&&u}if(u=zr(f=e.g=i,o,!0,e)&&u,u=zr(f,o,!1,e)&&u,n)for(l=0;l<n.length;l++)u=zr(f=e.g=n[l],o,!1,e)&&u}function zr(i,e,n,o){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var u=!0,l=0;l<e.length;++l){var f=e[l];if(f&&!f.fa&&f.capture==n){var T=f.listener,P=f.la||f.src;f.ia&&Xt(i.i,f),u=!1!==T.call(P,o)&&u}}return u&&!o.defaultPrevented}bt(Xn,le),Xn.prototype[lr]=!0,Xn.prototype.removeEventListener=function(i,e,n,o){Mi(this,i,e,n,o)},Xn.prototype.N=function(){if(Xn.$.N.call(this),this.i){var e,i=this.i;for(e in i.g){for(var n=i.g[e],o=0;o<n.length;o++)Vt(n[o]);delete i.g[e],i.h--}}this.J=null},Xn.prototype.O=function(i,e,n,o){return this.i.add(String(i),e,!1,n,o)},Xn.prototype.P=function(i,e,n,o){return this.i.add(String(i),e,!0,n,o)};var xr=oe.JSON.stringify;function Zn(){var i=J;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var Jt=new class hi{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new Yn,i=>i.reset());class Yn{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function me(i){var e=1;i=i.split(":");const n=[];for(;0<e&&i.length;)n.push(i.shift()),e--;return i.length&&n.push(i.join(":")),n}function X(i){oe.setTimeout(()=>{throw i},0)}let ee,K=!1,J=new class wn{constructor(){this.h=this.g=null}add(e,n){const o=Jt.get();o.set(e,n),this.h?this.h.next=o:this.g=o,this.h=o}},Ie=()=>{const i=oe.Promise.resolve(void 0);ee=()=>{i.then(at)}};var at=()=>{for(var i;i=Zn();){try{i.h.call(i.g)}catch(n){X(n)}var e=Jt;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}K=!1};function yt(i,e){Xn.call(this),this.h=i||1,this.g=e||oe,this.j=Rt(this.qb,this),this.l=Date.now()}function pn(i){i.ga=!1,i.T&&(i.g.clearTimeout(i.T),i.T=null)}function Mt(i,e,n){if("function"==typeof i)n&&(i=Rt(i,n));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=Rt(i.handleEvent,i)}return 2147483647<Number(e)?-1:oe.setTimeout(i,e||0)}function _n(i){i.g=Mt(()=>{i.g=null,i.i&&(i.i=!1,_n(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}bt(yt,Xn),(Ee=yt.prototype).ga=!1,Ee.T=null,Ee.qb=function(){if(this.ga){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-i):(this.T&&(this.g.clearTimeout(this.T),this.T=null),kn(this,"tick"),this.ga&&(pn(this),this.start()))}},Ee.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ee.N=function(){yt.$.N.call(this),pn(this),delete this.g};class In extends le{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:_n(this)}N(){super.N(),this.g&&(oe.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function dr(i){le.call(this),this.h=i,this.g={}}bt(dr,le);var Ni=[];function ms(i,e,n,o){Array.isArray(n)||(n&&(Ni[0]=n.toString()),n=Ni);for(var u=0;u<n.length;u++){var l=_r(e,n[u],o||i.handleEvent,!1,i.h||i);if(!l)break;i.g[l.key]=l}}function ts(i){Nr(i.g,function(e,n){this.g.hasOwnProperty(n)&&jn(e)},i),i.g={}}function We(){this.g=!0}function kt(i,e,n,o){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function mn(i,e){if(!i.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(i=0;i<n.length;i++)if(Array.isArray(n[i])){var o=n[i];if(!(2>o.length)){var u=o[1];if(Array.isArray(u)&&!(1>u.length)){var l=u[0];if("noop"!=l&&"stop"!=l&&"close"!=l)for(var f=1;f<u.length;f++)u[f]=""}}}return xr(n)}catch{return e}}(i,n)+(o?" "+o:"")})}dr.prototype.N=function(){dr.$.N.call(this),ts(this)},dr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},We.prototype.Ea=function(){this.g=!1},We.prototype.info=function(){};var En={},Tr=null;function hr(){return Tr=Tr||new Xn}function Rr(i){Se.call(this,En.Ta,i)}function xi(i){const e=hr();kn(e,new Rr(e))}function ys(i,e){Se.call(this,En.STAT_EVENT,i),this.stat=e}function fi(i){const e=hr();kn(e,new ys(e,i))}function Rs(i,e){Se.call(this,En.Ua,i),this.size=e}function oi(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return oe.setTimeout(function(){i()},e)}En.Ta="serverreachability",bt(Rr,Se),En.STAT_EVENT="statevent",bt(ys,Se),En.Ua="timingevent",bt(Rs,Se);var Os={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},To={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Ts(){}function ns(){}Ts.prototype.h=null;var De,Zi={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function mo(){Se.call(this,"d")}function yo(){Se.call(this,"c")}function we(){}function Ne(i,e,n,o){this.l=i,this.j=e,this.m=n,this.W=o||1,this.U=new dr(this),this.P=vt,this.V=new yt(i=ke?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new nt}function nt(){this.i=null,this.g="",this.h=!1}bt(mo,Se),bt(yo,Se),bt(we,Ts),we.prototype.g=function(){return new XMLHttpRequest},we.prototype.i=function(){return{}},De=new we;var vt=45e3,Zt={},Bn={};function Dn(i,e,n){i.L=1,i.v=Oi(Vr(e)),i.s=n,i.S=!0,$n(i,null)}function $n(i,e){i.G=Date.now(),pi(i),i.A=Vr(i.v);var n=i.A,o=i.W;Array.isArray(o)||(o=[String(o)]),bi(n.i,"t",o),i.C=0,n=i.l.J,i.h=new nt,i.g=na(i.l,n?e:null,!i.s),0<i.O&&(i.M=new In(Rt(i.Pa,i,i.g),i.O)),ms(i.U,i.g,"readystatechange",i.nb),e=i.I?Ln(i.I):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.ha(i.A,i.u,i.s,e)):(i.u="GET",i.g.ha(i.A,i.u,null,e)),xi(),function Re(i,e,n,o,u,l){i.info(function(){if(i.g)if(l)for(var f="",T=l.split("&"),P=0;P<T.length;P++){var V=T[P].split("=");if(1<V.length){var ne=V[0];V=V[1];var ge=ne.split("_");f=2<=ge.length&&"type"==ge[1]?f+(ne+"=")+V+"&":f+(ne+"=redacted&")}}else f=null;else f=l;return"XMLHTTP REQ ("+o+") [attempt "+u+"]: "+e+"\n"+n+"\n"+f})}(i.j,i.u,i.A,i.m,i.W,i.s)}function Ps(i){return!!i.g&&"GET"==i.u&&2!=i.L&&i.l.Ha}function Ri(i,e,n){let u,o=!0;for(;!i.J&&i.C<n.length;){if(u=$i(i,n),u==Bn){4==e&&(i.o=4,fi(14),o=!1),kt(i.j,i.m,null,"[Incomplete Response]");break}if(u==Zt){i.o=4,fi(15),kt(i.j,i.m,n,"[Invalid Chunk]"),o=!1;break}kt(i.j,i.m,u,null),so(i,u)}Ps(i)&&u!=Bn&&u!=Zt&&(i.h.g="",i.C=0),4!=e||0!=n.length||i.h.h||(i.o=1,fi(16),o=!1),i.i=i.i&&o,o?0<n.length&&!i.ba&&(i.ba=!0,(e=i.l).g==i&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),yi(e),e.M=!0,fi(11))):(kt(i.j,i.m,n,"[Invalid Chunked Response]"),Ss(i),So(i))}function $i(i,e){var n=i.C,o=e.indexOf("\n",n);return-1==o?Bn:(n=Number(e.substring(n,o)),isNaN(n)?Zt:(o+=1)+n>e.length?Bn:(e=e.slice(o,o+n),i.C=o+n,e))}function pi(i){i.Y=Date.now()+i.P,Jo(i,i.P)}function Jo(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=oi(Rt(i.lb,i),e)}function Gs(i){i.B&&(oe.clearTimeout(i.B),i.B=null)}function So(i){0==i.l.H||i.J||Io(i.l,i)}function Ss(i){Gs(i);var e=i.M;e&&"function"==typeof e.sa&&e.sa(),i.M=null,pn(i.V),ts(i.U),i.g&&(e=i.g,i.g=null,e.abort(),e.sa())}function so(i,e){try{var n=i.l;if(0!=n.H&&(n.g==i||Ao(n.i,i)))if(!i.K&&Ao(n.i,i)&&3==n.H){try{var o=n.Ja.g.parse(e)}catch{o=null}if(Array.isArray(o)&&3==o.length){var u=o;if(0==u[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<i.G))break e;Gi(n),L(n)}ws(n),fi(18)}}else n.Fa=u[1],0<n.Fa-n.V&&37500>u[2]&&n.G&&0==n.A&&!n.v&&(n.v=oi(Rt(n.ib,n),6e3));if(1>=Yi(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Wr(n,11)}else if((i.K||n.g==i)&&Gi(n),!en(e))for(u=n.Ja.g.parse(e),e=0;e<u.length;e++){let V=u[e];if(n.V=V[0],V=V[1],2==n.H)if("c"==V[0]){n.K=V[1],n.pa=V[2];const ne=V[3];null!=ne&&(n.ra=ne,n.l.info("VER="+n.ra));const ge=V[4];null!=ge&&(n.Ga=ge,n.l.info("SVER="+n.Ga));const Le=V[5];null!=Le&&"number"==typeof Le&&0<Le&&(n.L=o=1.5*Le,n.l.info("backChannelRequestTimeoutMs_="+o)),o=n;const it=i.g;if(it){const St=it.g?it.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(St){var l=o.i;l.g||-1==St.indexOf("spdy")&&-1==St.indexOf("quic")&&-1==St.indexOf("h2")||(l.j=l.l,l.g=new Set,l.h&&(ss(l,l.h),l.h=null))}if(o.F){const Gt=it.g?it.g.getResponseHeader("X-HTTP-Session-Id"):null;Gt&&(o.Da=Gt,Jn(o.I,o.F,Gt))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-i.G,n.l.info("Handshake RTT: "+n.S+"ms"));var f=i;if((o=n).wa=Qi(o,o.J?o.pa:null,o.Y),f.K){Hi(o.i,f);var T=f,P=o.L;P&&T.setTimeout(P),T.B&&(Gs(T),pi(T)),o.g=f}else Li(o);0<n.j.length&&x(n)}else"stop"!=V[0]&&"close"!=V[0]||Wr(n,7);else 3==n.H&&("stop"==V[0]||"close"==V[0]?"stop"==V[0]?Wr(n,7):Ha(n):"noop"!=V[0]&&n.h&&n.h.Aa(V),n.A=0)}xi()}catch{}}function Hn(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(pe(i)||"string"==typeof i)Array.prototype.forEach.call(i,e,void 0);else for(var n=function Uo(i){if(i.ta&&"function"==typeof i.ta)return i.ta();if(!i.Z||"function"!=typeof i.Z){if(typeof Map<"u"&&i instanceof Map)return Array.from(i.keys());if(!(typeof Set<"u"&&i instanceof Set)){if(pe(i)||"string"==typeof i){var e=[];i=i.length;for(var n=0;n<i;n++)e.push(n);return e}e=[],n=0;for(const o in i)e[n++]=o;return e}}}(i),o=function vo(i){if(i.Z&&"function"==typeof i.Z)return i.Z();if(typeof Map<"u"&&i instanceof Map||typeof Set<"u"&&i instanceof Set)return Array.from(i.values());if("string"==typeof i)return i.split("");if(pe(i)){for(var e=[],n=i.length,o=0;o<n;o++)e.push(i[o]);return e}for(o in e=[],n=0,i)e[n++]=i[o];return e}(i),u=o.length,l=0;l<u;l++)e.call(void 0,o[l],n&&n[l],i)}(Ee=Ne.prototype).setTimeout=function(i){this.P=i},Ee.nb=function(i){i=i.target;const e=this.M;e&&3==us(i)?e.l():this.Pa(i)},Ee.Pa=function(i){try{if(i==this.g)e:{const ne=us(this.g);var e=this.g.Ia();if(this.g.da(),!(3>ne)&&(3!=ne||ke||this.g&&(this.h.h||this.g.ja()||co(this.g)))){this.J||4!=ne||7==e||xi(),Gs(this);var n=this.g.da();this.ca=n;t:if(Ps(this)){var o=co(this.g);i="";var u=o.length,l=4==us(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Ss(this),So(this);var f="";break t}this.h.i=new oe.TextDecoder}for(e=0;e<u;e++)this.h.h=!0,i+=this.h.i.decode(o[e],{stream:l&&e==u-1});o.splice(0,u),this.h.g+=i,this.C=0,f=this.h.g}else f=this.g.ja();if(this.i=200==n,function ut(i,e,n,o,u,l,f){i.info(function(){return"XMLHTTP RESP ("+o+") [ attempt "+u+"]: "+e+"\n"+n+"\n"+l+" "+f})}(this.j,this.u,this.A,this.m,this.W,ne,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var T,P=this.g;if((T=P.g?P.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!en(T)){var V=T;break t}}V=null}if(!(n=V)){this.i=!1,this.o=3,fi(12),Ss(this),So(this);break e}kt(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,so(this,n)}this.S?(Ri(this,ne,f),ke&&this.i&&3==ne&&(ms(this.U,this.V,"tick",this.mb),this.V.start())):(kt(this.j,this.m,f,null),so(this,f)),4==ne&&Ss(this),this.i&&!this.J&&(4==ne?Io(this.l,this):(this.i=!1,pi(this)))}else(function jo(i){const e={};i=(i.g&&2<=us(i)&&i.g.getAllResponseHeaders()||"").split("\r\n");for(let o=0;o<i.length;o++){if(en(i[o]))continue;var n=me(i[o]);const u=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const l=e[u]||[];e[u]=l,l.push(n)}!function Ki(i,e){for(const n in i)e.call(void 0,i[n],n,i)}(e,function(o){return o.join(", ")})})(this.g),400==n&&0<f.indexOf("Unknown SID")?(this.o=3,fi(12)):(this.o=0,fi(13)),Ss(this),So(this)}}}catch{}},Ee.mb=function(){if(this.g){var i=us(this.g),e=this.g.ja();this.C<e.length&&(Gs(this),Ri(this,i,e),this.i&&4!=i&&pi(this))}},Ee.cancel=function(){this.J=!0,Ss(this)},Ee.lb=function(){this.B=null;const i=Date.now();0<=i-this.Y?(function wt(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(xi(),fi(17)),Ss(this),this.o=2,So(this)):Jo(this,this.Y-i)};var ti=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function vs(i){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,i instanceof vs){this.h=i.h,Ws(this,i.j),this.s=i.s,this.g=i.g,_o(this,i.m),this.l=i.l;var e=i.i,n=new Sr;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),As(this,n),this.o=i.o}else i&&(e=String(i).match(ti))?(this.h=!1,Ws(this,e[1]||"",!0),this.s=ar(e[2]||""),this.g=ar(e[3]||"",!0),_o(this,e[4]),this.l=ar(e[5]||"",!0),As(this,e[6]||"",!0),this.o=ar(e[7]||"")):(this.h=!1,this.i=new Sr(null,this.h))}function Vr(i){return new vs(i)}function Ws(i,e,n){i.j=n?ar(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function _o(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function As(i,e,n){e instanceof Sr?(i.i=e,function Fs(i,e){e&&!i.j&&(gi(i),i.i=null,i.g.forEach(function(n,o){var u=o.toLowerCase();o!=u&&(ui(this,o),bi(this,u,n))},i)),i.j=e}(i.i,i.h)):(n||(e=It(e,Pi)),i.i=new Sr(e,i.h))}function Jn(i,e,n){i.i.set(e,n)}function Oi(i){return Jn(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function ar(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function It(i,e,n){return"string"==typeof i?(i=encodeURI(i).replace(e,Cn),n&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function Cn(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}vs.prototype.toString=function(){var i=[],e=this.j;e&&i.push(It(e,Er,!0),":");var n=this.g;return(n||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(It(e,Er,!0),"@"),i.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&i.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&i.push("/"),i.push(It(n,"/"==n.charAt(0)?ks:ai,!0))),(n=this.i.toString())&&i.push("?",n),(n=this.o)&&i.push("#",It(n,Ms)),i.join("")};var Er=/[#\/\?@]/g,ai=/[#\?:]/g,ks=/[#\?]/g,Pi=/[#\?@]/g,Ms=/#/g;function Sr(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function gi(i){i.g||(i.g=new Map,i.h=0,i.i&&function Ci(i,e){if(i){i=i.split("&");for(var n=0;n<i.length;n++){var o=i[n].indexOf("="),u=null;if(0<=o){var l=i[n].substring(0,o);u=i[n].substring(o+1)}else l=i[n];e(l,u?decodeURIComponent(u.replace(/\+/g," ")):"")}}}(i.i,function(e,n){i.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function ui(i,e){gi(i),e=rs(i,e),i.g.has(e)&&(i.i=null,i.h-=i.g.get(e).length,i.g.delete(e))}function nn(i,e){return gi(i),e=rs(i,e),i.g.has(e)}function bi(i,e,n){ui(i,e),0<n.length&&(i.i=null,i.g.set(rs(i,e),Ze(n)),i.h+=n.length)}function rs(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function Ns(i){this.l=i||is,i=oe.PerformanceNavigationTiming?0<(i=oe.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(oe.g&&oe.g.Ka&&oe.g.Ka()&&oe.g.Ka().ec),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Ee=Sr.prototype).add=function(i,e){gi(this),this.i=null,i=rs(this,i);var n=this.g.get(i);return n||this.g.set(i,n=[]),n.push(e),this.h+=1,this},Ee.forEach=function(i,e){gi(this),this.g.forEach(function(n,o){n.forEach(function(u){i.call(e,u,o,this)},this)},this)},Ee.ta=function(){gi(this);const i=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let o=0;o<e.length;o++){const u=i[o];for(let l=0;l<u.length;l++)n.push(e[o])}return n},Ee.Z=function(i){gi(this);let e=[];if("string"==typeof i)nn(this,i)&&(e=e.concat(this.g.get(rs(this,i))));else{i=Array.from(this.g.values());for(let n=0;n<i.length;n++)e=e.concat(i[n])}return e},Ee.set=function(i,e){return gi(this),this.i=null,nn(this,i=rs(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},Ee.get=function(i,e){return i&&0<(i=this.Z(i)).length?String(i[0]):e},Ee.toString=function(){if(this.i)return this.i;if(!this.g)return"";const i=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var o=e[n];const l=encodeURIComponent(String(o)),f=this.Z(o);for(o=0;o<f.length;o++){var u=l;""!==f[o]&&(u+="="+encodeURIComponent(String(f[o]))),i.push(u)}}return this.i=i.join("&")};var is=10;function mi(i){return!!i.h||!!i.g&&i.g.size>=i.j}function Yi(i){return i.h?1:i.g?i.g.size:0}function Ao(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function ss(i,e){i.g?i.g.add(e):i.h=e}function Hi(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function os(i){if(null!=i.h)return i.i.concat(i.h.F);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const n of i.g.values())e=e.concat(n.F);return e}return Ze(i.i)}Ns.prototype.cancel=function(){if(this.i=os(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}};var Hr=class{stringify(i){return oe.JSON.stringify(i,void 0)}parse(i){return oe.JSON.parse(i,void 0)}};function Rn(){this.g=new Hr}function ea(i,e,n){const o=n||"";try{Hn(i,function(u,l){let f=u;Te(u)&&(f=xr(u)),e.push(o+l+"="+encodeURIComponent(f))})}catch(u){throw e.push(o+"type="+encodeURIComponent("_badmap")),u}}function qs(i,e,n,o,u){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,u(o)}catch{}}function ci(i){this.l=i.fc||null,this.j=i.ob||!1}function ni(i,e){Xn.call(this),this.F=i,this.u=e,this.m=void 0,this.readyState=as,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}bt(ci,Ts),ci.prototype.g=function(){return new ni(this.l,this.j)},ci.prototype.i=function(i){return function(){return i}}({}),bt(ni,Xn);var as=0;function oo(i){i.j.read().then(i.Xa.bind(i)).catch(i.ka.bind(i))}function Gr(i){i.readyState=4,i.l=null,i.j=null,i.A=null,ao(i)}function ao(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(Ee=ni.prototype).open=function(i,e){if(this.readyState!=as)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,ao(this)},Ee.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.F||oe).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},Ee.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Gr(this)),this.readyState=as},Ee.$a=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,ao(this)),this.g&&(this.readyState=3,ao(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof oe.ReadableStream<"u"&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;oo(this)}else i.text().then(this.Za.bind(this),this.ka.bind(this))},Ee.Xa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?Gr(this):ao(this),3==this.readyState&&oo(this)}},Ee.Za=function(i){this.g&&(this.response=this.responseText=i,Gr(this))},Ee.Ya=function(i){this.g&&(this.response=i,Gr(this))},Ee.ka=function(){this.g&&Gr(this)},Ee.setRequestHeader=function(i,e){this.v.append(i,e)},Ee.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},Ee.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var n=e.next();!n.done;)i.push((n=n.value)[0]+": "+n[1]),n=e.next();return i.join("\r\n")},Object.defineProperty(ni.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var ki=oe.JSON.parse;function zn(i){Xn.call(this),this.headers=new Map,this.u=i||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=zi,this.L=this.M=!1}bt(zn,Xn);var zi="",_s=/^https?$/i,Ti=["POST","PUT"];function Eo(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,Mo(i),uo(i)}function Mo(i){i.F||(i.F=!0,kn(i,"complete"),kn(i,"error"))}function wo(i){if(i.h&&typeof ze<"u"&&(!i.C[1]||4!=us(i)||2!=i.da()))if(i.v&&4==us(i))Mt(i.La,0,i);else if(kn(i,"readystatechange"),4==us(i)){i.h=!1;try{const f=i.da();e:switch(f){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var o;if(o=0===f){var u=String(i.I).match(ti)[1]||null;!u&&oe.self&&oe.self.location&&(u=oe.self.location.protocol.slice(0,-1)),o=!_s.test(u?u.toLowerCase():"")}n=o}if(n)kn(i,"complete"),kn(i,"success");else{i.m=6;try{var l=2<us(i)?i.g.statusText:""}catch{l=""}i.j=l+" ["+i.da()+"]",Mo(i)}}finally{uo(i)}}}function uo(i,e){if(i.g){da(i);const n=i.g,o=i.C[0]?()=>{}:null;i.g=null,i.C=null,e||kn(i,"ready");try{n.onreadystatechange=o}catch{}}}function da(i){i.g&&i.L&&(i.g.ontimeout=null),i.A&&(oe.clearTimeout(i.A),i.A=null)}function us(i){return i.g?i.g.readyState:0}function co(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.K){case zi:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch{return null}}function $a(i){let e="";return Nr(i,function(n,o){e+=o,e+=":",e+=n,e+="\r\n"}),e}function xa(i,e,n){e:{for(o in n){var o=!1;break e}o=!0}o||(n=$a(n),"string"==typeof i?null!=n&&encodeURIComponent(String(n)):Jn(i,e,n))}function mr(i,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[i]||e}function No(i){this.Ga=0,this.j=[],this.l=new We,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=mr("failFast",!1,i),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=mr("baseRetryDelayMs",5e3,i),this.hb=mr("retryDelaySeedMs",1e4,i),this.eb=mr("forwardChannelMaxRetries",2,i),this.xa=mr("forwardChannelRequestTimeoutMs",2e4,i),this.va=i&&i.xmlHttpFactory||void 0,this.Ha=i&&i.dc||!1,this.L=void 0,this.J=i&&i.supportsCrossDomainXhr||!1,this.K="",this.i=new Ns(i&&i.concurrentRequestLimit),this.Ja=new Rn,this.P=i&&i.fastHandshake||!1,this.O=i&&i.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=i&&i.bc||!1,i&&i.Ea&&this.l.Ea(),i&&i.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&i&&i.detectBufferingProxy||!1,this.qa=void 0,i&&i.longPollingTimeout&&0<i.longPollingTimeout&&(this.qa=i.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Ha(i){if(U(i),3==i.H){var e=i.W++,n=Vr(i.I);if(Jn(n,"SID",i.K),Jn(n,"RID",e),Jn(n,"TYPE","terminate"),qt(i,n),(e=new Ne(i,i.l,e)).L=2,e.v=Oi(Vr(n)),n=!1,oe.navigator&&oe.navigator.sendBeacon)try{n=oe.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&oe.Image&&((new Image).src=e.v,n=!0),n||(e.g=na(e.l,null),e.g.ha(e.v)),e.G=Date.now(),pi(e)}ha(i)}function L(i){i.g&&(yi(i),i.g.cancel(),i.g=null)}function U(i){L(i),i.u&&(oe.clearTimeout(i.u),i.u=null),Gi(i),i.i.cancel(),i.m&&("number"==typeof i.m&&oe.clearTimeout(i.m),i.m=null)}function x(i){if(!mi(i.i)&&!i.m){i.m=!0;var e=i.Na;ee||Ie(),K||(ee(),K=!0),J.add(e,i),i.C=0}}function _e(i,e){var n;n=e?e.m:i.W++;const o=Vr(i.I);Jn(o,"SID",i.K),Jn(o,"RID",n),Jn(o,"AID",i.V),qt(i,o),i.o&&i.s&&xa(o,i.o,i.s),n=new Ne(i,i.l,n,i.C+1),null===i.o&&(n.I=i.s),e&&(i.j=e.F.concat(i.j)),e=cn(i,n,1e3),n.setTimeout(Math.round(.5*i.xa)+Math.round(.5*i.xa*Math.random())),ss(i.i,n),Dn(n,o,e)}function qt(i,e){i.na&&Nr(i.na,function(n,o){Jn(e,o,n)}),i.h&&Hn({},function(n,o){Jn(e,o,n)})}function cn(i,e,n){n=Math.min(i.j.length,n);var o=i.h?Rt(i.h.Va,i.h,i):null;e:{var u=i.j;let l=-1;for(;;){const f=["count="+n];-1==l?0<n?(l=u[0].g,f.push("ofs="+l)):l=0:f.push("ofs="+l);let T=!0;for(let P=0;P<n;P++){let V=u[P].g;const ne=u[P].map;if(V-=l,0>V)l=Math.max(0,u[P].g-100),T=!1;else try{ea(ne,f,"req"+V+"_")}catch{o&&o(ne)}}if(T){o=f.join("&");break e}}}return i=i.j.splice(0,n),e.F=i,o}function Li(i){if(!i.g&&!i.u){i.ba=1;var e=i.Ma;ee||Ie(),K||(ee(),K=!0),J.add(e,i),i.A=0}}function ws(i){return!(i.g||i.u||3<=i.A||(i.ba++,i.u=oi(Rt(i.Ma,i),Ks(i,i.A)),i.A++,0))}function yi(i){null!=i.B&&(oe.clearTimeout(i.B),i.B=null)}function cs(i){i.g=new Ne(i,i.l,"rpc",i.ba),null===i.o&&(i.g.I=i.s),i.g.O=0;var e=Vr(i.wa);Jn(e,"RID","rpc"),Jn(e,"SID",i.K),Jn(e,"AID",i.V),Jn(e,"CI",i.G?"0":"1"),!i.G&&i.qa&&Jn(e,"TO",i.qa),Jn(e,"TYPE","xmlhttp"),qt(i,e),i.o&&i.s&&xa(e,i.o,i.s),i.L&&i.g.setTimeout(i.L);var n=i.g;i=i.pa,n.L=1,n.v=Oi(Vr(e)),n.s=null,n.S=!0,$n(n,i)}function Gi(i){null!=i.v&&(oe.clearTimeout(i.v),i.v=null)}function Io(i,e){var n=null;if(i.g==e){Gi(i),yi(i),i.g=null;var o=2}else{if(!Ao(i.i,e))return;n=e.F,Hi(i.i,e),o=1}if(0!=i.H)if(e.i)if(1==o){n=e.s?e.s.length:0,e=Date.now()-e.G;var u=i.C;kn(o=hr(),new Rs(o,n)),x(i)}else Li(i);else if(3==(u=e.o)||0==u&&0<e.ca||!(1==o&&function te(i,e){return!(Yi(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.j=e.F.concat(i.j),0):1==i.H||2==i.H||i.C>=(i.cb?0:i.eb)||(i.m=oi(Rt(i.Na,i,e),Ks(i,i.C)),i.C++,0)))}(i,e)||2==o&&ws(i)))switch(n&&0<n.length&&(e=i.i,e.i=e.i.concat(n)),u){case 1:Wr(i,5);break;case 4:Wr(i,10);break;case 3:Wr(i,6);break;default:Wr(i,2)}}function Ks(i,e){let n=i.ab+Math.floor(Math.random()*i.hb);return i.isActive()||(n*=2),n*e}function Wr(i,e){if(i.l.info("Error code "+e),2==e){var n=null;i.h&&(n=null);var o=Rt(i.pb,i);n||(n=new vs("//www.google.com/images/cleardot.gif"),oe.location&&"http"==oe.location.protocol||Ws(n,"https"),Oi(n)),function ta(i,e){const n=new We;if(oe.Image){const o=new Image;o.onload=Mn(qs,n,o,"TestLoadImage: loaded",!0,e),o.onerror=Mn(qs,n,o,"TestLoadImage: error",!1,e),o.onabort=Mn(qs,n,o,"TestLoadImage: abort",!1,e),o.ontimeout=Mn(qs,n,o,"TestLoadImage: timeout",!1,e),oe.setTimeout(function(){o.ontimeout&&o.ontimeout()},1e4),o.src=i}else e(!1)}(n.toString(),o)}else fi(2);i.H=0,i.h&&i.h.za(e),ha(i),U(i)}function ha(i){if(i.H=0,i.ma=[],i.h){const e=os(i.i);(0!=e.length||0!=i.j.length)&&(pt(i.ma,e),pt(i.ma,i.j),i.i.i.length=0,Ze(i.j),i.j.length=0),i.h.ya()}}function Qi(i,e,n){var o=n instanceof vs?Vr(n):new vs(n);if(""!=o.g)e&&(o.g=e+"."+o.g),_o(o,o.m);else{var u=oe.location;o=u.protocol,e=e?e+"."+u.hostname:u.hostname,u=+u.port;var l=new vs(null);o&&Ws(l,o),e&&(l.g=e),u&&_o(l,u),n&&(l.l=n),o=l}return e=i.Da,(n=i.F)&&e&&Jn(o,n,e),Jn(o,"VER",i.ra),qt(i,o),o}function na(i,e,n){if(e&&!i.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new zn(n&&i.Ha&&!i.va?new ci({ob:!0}):i.va)).Oa(i.J),e}function fa(){}function ra(){if(Cr&&!(10<=Number(xn)))throw Error("Environmental error: no available transport.")}function xs(i,e){Xn.call(this),this.g=new No(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(i?i["X-WebChannel-Client-Profile"]=e.Ca:i={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=i,(i=e&&e.cc)&&!en(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!en(e)&&(this.g.F=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new Ys(this)}function Zs(i){mo.call(this),i.__headers__&&(this.headers=i.__headers__,this.statusCode=i.__status__,delete i.__headers__,delete i.__status__);var e=i.__sm__;if(e){e:{for(const n in e){i=n;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function pa(){yo.call(this),this.status=1}function Ys(i){this.g=i}function Qs(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function $o(i,e,n){n||(n=0);var o=Array(16);if("string"==typeof e)for(var u=0;16>u;++u)o[u]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(u=0;16>u;++u)o[u]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;var l=i.g[3],f=(e=i.g[0])+(l^(n=i.g[1])&((u=i.g[2])^l))+o[0]+3614090360&4294967295;f=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=n+(f<<7&4294967295|f>>>25))+((f=l+(u^e&(n^u))+o[1]+3905402710&4294967295)<<12&4294967295|f>>>20))+((f=u+(n^l&(e^n))+o[2]+606105819&4294967295)<<17&4294967295|f>>>15))+((f=n+(e^u&(l^e))+o[3]+3250441966&4294967295)<<22&4294967295|f>>>10))+((f=e+(l^n&(u^l))+o[4]+4118548399&4294967295)<<7&4294967295|f>>>25))+((f=l+(u^e&(n^u))+o[5]+1200080426&4294967295)<<12&4294967295|f>>>20))+((f=u+(n^l&(e^n))+o[6]+2821735955&4294967295)<<17&4294967295|f>>>15))+((f=n+(e^u&(l^e))+o[7]+4249261313&4294967295)<<22&4294967295|f>>>10))+((f=e+(l^n&(u^l))+o[8]+1770035416&4294967295)<<7&4294967295|f>>>25))+((f=l+(u^e&(n^u))+o[9]+2336552879&4294967295)<<12&4294967295|f>>>20))+((f=u+(n^l&(e^n))+o[10]+4294925233&4294967295)<<17&4294967295|f>>>15))+((f=n+(e^u&(l^e))+o[11]+2304563134&4294967295)<<22&4294967295|f>>>10))+((f=e+(l^n&(u^l))+o[12]+1804603682&4294967295)<<7&4294967295|f>>>25))+((f=l+(u^e&(n^u))+o[13]+4254626195&4294967295)<<12&4294967295|f>>>20))+((f=u+(n^l&(e^n))+o[14]+2792965006&4294967295)<<17&4294967295|f>>>15))+((f=n+(e^u&(l^e))+o[15]+1236535329&4294967295)<<22&4294967295|f>>>10))+((f=e+(u^l&(n^u))+o[1]+4129170786&4294967295)<<5&4294967295|f>>>27))+((f=l+(n^u&(e^n))+o[6]+3225465664&4294967295)<<9&4294967295|f>>>23))+((f=u+(e^n&(l^e))+o[11]+643717713&4294967295)<<14&4294967295|f>>>18))+((f=n+(l^e&(u^l))+o[0]+3921069994&4294967295)<<20&4294967295|f>>>12))+((f=e+(u^l&(n^u))+o[5]+3593408605&4294967295)<<5&4294967295|f>>>27))+((f=l+(n^u&(e^n))+o[10]+38016083&4294967295)<<9&4294967295|f>>>23))+((f=u+(e^n&(l^e))+o[15]+3634488961&4294967295)<<14&4294967295|f>>>18))+((f=n+(l^e&(u^l))+o[4]+3889429448&4294967295)<<20&4294967295|f>>>12))+((f=e+(u^l&(n^u))+o[9]+568446438&4294967295)<<5&4294967295|f>>>27))+((f=l+(n^u&(e^n))+o[14]+3275163606&4294967295)<<9&4294967295|f>>>23))+((f=u+(e^n&(l^e))+o[3]+4107603335&4294967295)<<14&4294967295|f>>>18))+((f=n+(l^e&(u^l))+o[8]+1163531501&4294967295)<<20&4294967295|f>>>12))+((f=e+(u^l&(n^u))+o[13]+2850285829&4294967295)<<5&4294967295|f>>>27))+((f=l+(n^u&(e^n))+o[2]+4243563512&4294967295)<<9&4294967295|f>>>23))+((f=u+(e^n&(l^e))+o[7]+1735328473&4294967295)<<14&4294967295|f>>>18))+((f=n+(l^e&(u^l))+o[12]+2368359562&4294967295)<<20&4294967295|f>>>12))+((f=e+(n^u^l)+o[5]+4294588738&4294967295)<<4&4294967295|f>>>28))+((f=l+(e^n^u)+o[8]+2272392833&4294967295)<<11&4294967295|f>>>21))+((f=u+(l^e^n)+o[11]+1839030562&4294967295)<<16&4294967295|f>>>16))+((f=n+(u^l^e)+o[14]+4259657740&4294967295)<<23&4294967295|f>>>9))+((f=e+(n^u^l)+o[1]+2763975236&4294967295)<<4&4294967295|f>>>28))+((f=l+(e^n^u)+o[4]+1272893353&4294967295)<<11&4294967295|f>>>21))+((f=u+(l^e^n)+o[7]+4139469664&4294967295)<<16&4294967295|f>>>16))+((f=n+(u^l^e)+o[10]+3200236656&4294967295)<<23&4294967295|f>>>9))+((f=e+(n^u^l)+o[13]+681279174&4294967295)<<4&4294967295|f>>>28))+((f=l+(e^n^u)+o[0]+3936430074&4294967295)<<11&4294967295|f>>>21))+((f=u+(l^e^n)+o[3]+3572445317&4294967295)<<16&4294967295|f>>>16))+((f=n+(u^l^e)+o[6]+76029189&4294967295)<<23&4294967295|f>>>9))+((f=e+(n^u^l)+o[9]+3654602809&4294967295)<<4&4294967295|f>>>28))+((f=l+(e^n^u)+o[12]+3873151461&4294967295)<<11&4294967295|f>>>21))+((f=u+(l^e^n)+o[15]+530742520&4294967295)<<16&4294967295|f>>>16))+((f=n+(u^l^e)+o[2]+3299628645&4294967295)<<23&4294967295|f>>>9))+((f=e+(u^(n|~l))+o[0]+4096336452&4294967295)<<6&4294967295|f>>>26))+((f=l+(n^(e|~u))+o[7]+1126891415&4294967295)<<10&4294967295|f>>>22))+((f=u+(e^(l|~n))+o[14]+2878612391&4294967295)<<15&4294967295|f>>>17))+((f=n+(l^(u|~e))+o[5]+4237533241&4294967295)<<21&4294967295|f>>>11))+((f=e+(u^(n|~l))+o[12]+1700485571&4294967295)<<6&4294967295|f>>>26))+((f=l+(n^(e|~u))+o[3]+2399980690&4294967295)<<10&4294967295|f>>>22))+((f=u+(e^(l|~n))+o[10]+4293915773&4294967295)<<15&4294967295|f>>>17))+((f=n+(l^(u|~e))+o[1]+2240044497&4294967295)<<21&4294967295|f>>>11))+((f=e+(u^(n|~l))+o[8]+1873313359&4294967295)<<6&4294967295|f>>>26))+((f=l+(n^(e|~u))+o[15]+4264355552&4294967295)<<10&4294967295|f>>>22))+((f=u+(e^(l|~n))+o[6]+2734768916&4294967295)<<15&4294967295|f>>>17))+((f=n+(l^(u|~e))+o[13]+1309151649&4294967295)<<21&4294967295|f>>>11))+((l=(e=n+((f=e+(u^(n|~l))+o[4]+4149444226&4294967295)<<6&4294967295|f>>>26))+((f=l+(n^(e|~u))+o[11]+3174756917&4294967295)<<10&4294967295|f>>>22))^((u=l+((f=u+(e^(l|~n))+o[2]+718787259&4294967295)<<15&4294967295|f>>>17))|~e))+o[9]+3951481745&4294967295,i.g[0]=i.g[0]+e&4294967295,i.g[1]=i.g[1]+(u+(f<<21&4294967295|f>>>11))&4294967295,i.g[2]=i.g[2]+u&4294967295,i.g[3]=i.g[3]+l&4294967295}function Ar(i,e){this.h=e;for(var n=[],o=!0,u=i.length-1;0<=u;u--){var l=0|i[u];o&&l==e||(n[u]=l,o=!1)}this.g=n}(Ee=zn.prototype).Oa=function(i){this.M=i},Ee.ha=function(i,e,n,o){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+i);e=e?e.toUpperCase():"GET",this.I=i,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():De.g(),this.C=function Lr(i){return i.h||(i.h=i.i())}(this.u?this.u:De),this.g.onreadystatechange=Rt(this.La,this);try{this.G=!0,this.g.open(e,String(i),!0),this.G=!1}catch(l){return void Eo(this,l)}if(i=n||"",n=new Map(this.headers),o)if(Object.getPrototypeOf(o)===Object.prototype)for(var u in o)n.set(u,o[u]);else{if("function"!=typeof o.keys||"function"!=typeof o.get)throw Error("Unknown input type for opt_headers: "+String(o));for(const l of o.keys())n.set(l,o.get(l))}o=Array.from(n.keys()).find(l=>"content-type"==l.toLowerCase()),u=oe.FormData&&i instanceof oe.FormData,!(0<=Oe(Ti,e))||o||u||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[l,f]of n)this.g.setRequestHeader(l,f);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{da(this),0<this.B&&((this.L=function Es(i){return Cr&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Rt(this.ua,this)):this.A=Mt(this.ua,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(l){Eo(this,l)}},Ee.ua=function(){typeof ze<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,kn(this,"timeout"),this.abort(8))},Ee.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,kn(this,"complete"),kn(this,"abort"),uo(this))},Ee.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),uo(this,!0)),zn.$.N.call(this)},Ee.La=function(){this.s||(this.G||this.v||this.l?wo(this):this.kb())},Ee.kb=function(){wo(this)},Ee.isActive=function(){return!!this.g},Ee.da=function(){try{return 2<us(this)?this.g.status:-1}catch{return-1}},Ee.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},Ee.Wa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),ki(e)}},Ee.Ia=function(){return this.m},Ee.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ee=No.prototype).ra=8,Ee.H=1,Ee.Na=function(i){if(this.m)if(this.m=null,1==this.H){if(!i){this.W=Math.floor(1e5*Math.random()),i=this.W++;const u=new Ne(this,this.l,i);let l=this.s;if(this.U&&(l?(l=Ln(l),si(l,this.U)):l=this.U),null!==this.o||this.O||(u.I=l,l=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){var o=this.j[n];if(void 0===(o="__data__"in o.map&&"string"==typeof(o=o.map.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=n;break e}if(4096===e||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=cn(this,u,e),Jn(n=Vr(this.I),"RID",i),Jn(n,"CVER",22),this.F&&Jn(n,"X-HTTP-Session-Id",this.F),qt(this,n),l&&(this.O?e="headers="+encodeURIComponent(String($a(l)))+"&"+e:this.o&&xa(n,this.o,l)),ss(this.i,u),this.bb&&Jn(n,"TYPE","init"),this.P?(Jn(n,"$req",e),Jn(n,"SID","null"),u.aa=!0,Dn(u,n,null)):Dn(u,n,e),this.H=2}}else 3==this.H&&(i?_e(this,i):0==this.j.length||mi(this.i)||_e(this))},Ee.Ma=function(){if(this.u=null,cs(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var i=2*this.S;this.l.info("BP detection timer enabled: "+i),this.B=oi(Rt(this.jb,this),i)}},Ee.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,fi(10),L(this),cs(this))},Ee.ib=function(){null!=this.v&&(this.v=null,L(this),ws(this),fi(19))},Ee.pb=function(i){i?(this.l.info("Successfully pinged google.com"),fi(2)):(this.l.info("Failed to ping google.com"),fi(1))},Ee.isActive=function(){return!!this.h&&this.h.isActive(this)},(Ee=fa.prototype).Ba=function(){},Ee.Aa=function(){},Ee.za=function(){},Ee.ya=function(){},Ee.isActive=function(){return!0},Ee.Va=function(){},ra.prototype.g=function(i,e){return new xs(i,e)},bt(xs,Xn),xs.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var i=this.g,e=this.l,n=this.h||void 0;fi(0),i.Y=e,i.na=n||{},i.G=i.aa,i.I=Qi(i,null,i.Y),x(i)},xs.prototype.close=function(){Ha(this.g)},xs.prototype.u=function(i){var e=this.g;if("string"==typeof i){var n={};n.__data__=i,i=n}else this.v&&((n={}).__data__=xr(i),i=n);e.j.push(new class{constructor(i,e){this.g=i,this.map=e}}(e.fb++,i)),3==e.H&&x(e)},xs.prototype.N=function(){this.g.h=null,delete this.j,Ha(this.g),delete this.g,xs.$.N.call(this)},bt(Zs,mo),bt(pa,yo),bt(Ys,fa),Ys.prototype.Ba=function(){kn(this.g,"a")},Ys.prototype.Aa=function(i){kn(this.g,new Zs(i))},Ys.prototype.za=function(i){kn(this.g,new pa)},Ys.prototype.ya=function(){kn(this.g,"b")},bt(Qs,function vi(){this.blockSize=-1}),Qs.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Qs.prototype.j=function(i,e){void 0===e&&(e=i.length);for(var n=e-this.blockSize,o=this.m,u=this.h,l=0;l<e;){if(0==u)for(;l<=n;)$o(this,i,l),l+=this.blockSize;if("string"==typeof i){for(;l<e;)if(o[u++]=i.charCodeAt(l++),u==this.blockSize){$o(this,o),u=0;break}}else for(;l<e;)if(o[u++]=i[l++],u==this.blockSize){$o(this,o),u=0;break}}this.h=u,this.i+=e},Qs.prototype.l=function(){var i=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);i[0]=128;for(var e=1;e<i.length-8;++e)i[e]=0;var n=8*this.i;for(e=i.length-8;e<i.length;++e)i[e]=255&n,n/=256;for(this.j(i),i=Array(16),e=n=0;4>e;++e)for(var o=0;32>o;o+=8)i[n++]=this.g[e]>>>o&255;return i};var Ls={};function Xs(i){return-128<=i&&128>i?function ii(i,e){var n=Ls;return Object.prototype.hasOwnProperty.call(n,i)?n[i]:n[i]=e(i)}(i,function(e){return new Ar([0|e],0>e?-1:0)}):new Ar([0|i],0>i?-1:0)}function _i(i){if(isNaN(i)||!isFinite(i))return Ro;if(0>i)return Vi(_i(-i));for(var e=[],n=1,o=0;i>=n;o++)e[o]=i/n|0,n*=xo;return new Ar(e,0)}var xo=4294967296,Ro=Xs(0),Ra=Xs(1),wu=Xs(16777216);function ls(i){if(0!=i.h)return!1;for(var e=0;e<i.g.length;e++)if(0!=i.g[e])return!1;return!0}function Vs(i){return-1==i.h}function Vi(i){for(var e=i.g.length,n=[],o=0;o<e;o++)n[o]=~i.g[o];return new Ar(n,~i.h).add(Ra)}function Oo(i,e){return i.add(Vi(e))}function ma(i,e){for(;(65535&i[e])!=i[e];)i[e+1]+=i[e]>>>16,i[e]&=65535,e++}function Po(i,e){this.g=i,this.h=e}function ko(i,e){if(ls(e))throw Error("division by zero");if(ls(i))return new Po(Ro,Ro);if(Vs(i))return e=ko(Vi(i),e),new Po(Vi(e.g),Vi(e.h));if(Vs(e))return e=ko(i,Vi(e)),new Po(Vi(e.g),e.h);if(30<i.g.length){if(Vs(i)||Vs(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Ra,o=e;0>=o.X(i);)n=za(n),o=za(o);var u=Ho(n,1),l=Ho(o,1);for(o=Ho(o,2),n=Ho(n,2);!ls(o);){var f=l.add(o);0>=f.X(i)&&(u=u.add(n),l=f),o=Ho(o,1),n=Ho(n,1)}return e=Oo(i,u.R(e)),new Po(u,e)}for(u=Ro;0<=i.X(e);){for(n=Math.max(1,Math.floor(i.ea()/e.ea())),o=48>=(o=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,o-48),f=(l=_i(n)).R(e);Vs(f)||0<f.X(i);)f=(l=_i(n-=o)).R(e);ls(l)&&(l=Ra),u=u.add(l),i=Oo(i,f)}return new Po(u,i)}function za(i){for(var e=i.g.length+1,n=[],o=0;o<e;o++)n[o]=i.D(o)<<1|i.D(o-1)>>>31;return new Ar(n,i.h)}function Ho(i,e){var n=e>>5;e%=32;for(var o=i.g.length-n,u=[],l=0;l<o;l++)u[l]=0<e?i.D(l+n)>>>e|i.D(l+n+1)<<32-e:i.D(l+n);return new Ar(u,i.h)}(Ee=Ar.prototype).ea=function(){if(Vs(this))return-Vi(this).ea();for(var i=0,e=1,n=0;n<this.g.length;n++){var o=this.D(n);i+=(0<=o?o:xo+o)*e,e*=xo}return i},Ee.toString=function(i){if(2>(i=i||10)||36<i)throw Error("radix out of range: "+i);if(ls(this))return"0";if(Vs(this))return"-"+Vi(this).toString(i);for(var e=_i(Math.pow(i,6)),n=this,o="";;){var u=ko(n,e).g,l=((0<(n=Oo(n,u.R(e))).g.length?n.g[0]:n.h)>>>0).toString(i);if(ls(n=u))return l+o;for(;6>l.length;)l="0"+l;o=l+o}},Ee.D=function(i){return 0>i?0:i<this.g.length?this.g[i]:this.h},Ee.X=function(i){return Vs(i=Oo(this,i))?-1:ls(i)?0:1},Ee.abs=function(){return Vs(this)?Vi(this):this},Ee.add=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],o=0,u=0;u<=e;u++){var l=o+(65535&this.D(u))+(65535&i.D(u)),f=(l>>>16)+(this.D(u)>>>16)+(i.D(u)>>>16);o=f>>>16,n[u]=(f&=65535)<<16|(l&=65535)}return new Ar(n,-2147483648&n[n.length-1]?-1:0)},Ee.R=function(i){if(ls(this)||ls(i))return Ro;if(Vs(this))return Vs(i)?Vi(this).R(Vi(i)):Vi(Vi(this).R(i));if(Vs(i))return Vi(this.R(Vi(i)));if(0>this.X(wu)&&0>i.X(wu))return _i(this.ea()*i.ea());for(var e=this.g.length+i.g.length,n=[],o=0;o<2*e;o++)n[o]=0;for(o=0;o<this.g.length;o++)for(var u=0;u<i.g.length;u++){var l=this.D(o)>>>16,f=65535&this.D(o),T=i.D(u)>>>16,P=65535&i.D(u);n[2*o+2*u]+=f*P,ma(n,2*o+2*u),n[2*o+2*u+1]+=l*P,ma(n,2*o+2*u+1),n[2*o+2*u+1]+=f*T,ma(n,2*o+2*u+1),n[2*o+2*u+2]+=l*T,ma(n,2*o+2*u+2)}for(o=0;o<e;o++)n[o]=n[2*o+1]<<16|n[2*o];for(o=e;o<2*e;o++)n[o]=0;return new Ar(n,0)},Ee.gb=function(i){return ko(this,i).h},Ee.and=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],o=0;o<e;o++)n[o]=this.D(o)&i.D(o);return new Ar(n,this.h&i.h)},Ee.or=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],o=0;o<e;o++)n[o]=this.D(o)|i.D(o);return new Ar(n,this.h|i.h)},Ee.xor=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],o=0;o<e;o++)n[o]=this.D(o)^i.D(o);return new Ar(n,this.h^i.h)},ra.prototype.createWebChannel=ra.prototype.g,xs.prototype.send=xs.prototype.u,xs.prototype.open=xs.prototype.m,xs.prototype.close=xs.prototype.close,Os.NO_ERROR=0,Os.TIMEOUT=8,Os.HTTP_ERROR=6,To.COMPLETE="complete",ns.EventType=Zi,Zi.OPEN="a",Zi.CLOSE="b",Zi.ERROR="c",Zi.MESSAGE="d",Xn.prototype.listen=Xn.prototype.O,zn.prototype.listenOnce=zn.prototype.P,zn.prototype.getLastError=zn.prototype.Sa,zn.prototype.getLastErrorCode=zn.prototype.Ia,zn.prototype.getStatus=zn.prototype.da,zn.prototype.getResponseJson=zn.prototype.Wa,zn.prototype.getResponseText=zn.prototype.ja,zn.prototype.send=zn.prototype.ha,zn.prototype.setWithCredentials=zn.prototype.Oa,Qs.prototype.digest=Qs.prototype.l,Qs.prototype.reset=Qs.prototype.reset,Qs.prototype.update=Qs.prototype.j,Ar.prototype.add=Ar.prototype.add,Ar.prototype.multiply=Ar.prototype.R,Ar.prototype.modulo=Ar.prototype.gb,Ar.prototype.compare=Ar.prototype.X,Ar.prototype.toNumber=Ar.prototype.ea,Ar.prototype.toString=Ar.prototype.toString,Ar.prototype.getBits=Ar.prototype.D,Ar.fromNumber=_i,Ar.fromString=function ga(i,e){if(0==i.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==i.charAt(0))return Vi(ga(i.substring(1),e));if(0<=i.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=_i(Math.pow(e,8)),o=Ro,u=0;u<i.length;u+=8){var l=Math.min(8,i.length-u),f=parseInt(i.substring(u,u+l),e);8>l?(l=_i(Math.pow(e,l)),o=o.R(l).add(_i(f))):o=(o=o.R(n)).add(_i(f))}return o};var Ga=Me.createWebChannelTransport=function(){return new ra},C=Me.getStatEventTarget=function(){return hr()},q=Me.ErrorCode=Os,O=Me.EventType=To,j=Me.Event=En,de=Me.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Ke=Me.FetchXmlHttpFactory=ci,st=Me.WebChannel=ns,sn=Me.XhrIo=zn,Or=Me.Md5=Qs,rr=Me.Integer=Ar;const ir="@firebase/firestore";class un{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}un.UNAUTHENTICATED=new un(null),un.GOOGLE_CREDENTIALS=new un("google-credentials-uid"),un.FIRST_PARTY=new un("first-party-uid"),un.MOCK_USER=new un("mock-user");let Br="9.23.0";const Gn=new he.Yd("@firebase/firestore");function qr(){return Gn.logLevel}function Js(i){Gn.setLogLevel(i)}function dt(i,...e){if(Gn.logLevel<=he.in.DEBUG){const n=e.map(Fi);Gn.debug(`Firestore (${Br}): ${i}`,...n)}}function Mr(i,...e){if(Gn.logLevel<=he.in.ERROR){const n=e.map(Fi);Gn.error(`Firestore (${Br}): ${i}`,...n)}}function Si(i,...e){if(Gn.logLevel<=he.in.WARN){const n=e.map(Fi);Gn.warn(`Firestore (${Br}): ${i}`,...n)}}function Fi(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch{return i}}function Bt(i="Unexpected state"){const e=`FIRESTORE (${Br}) INTERNAL ASSERTION FAILED: `+i;throw Mr(e),new Error(e)}function zt(i,e){i||Bt()}function Ur(i,e){i||Bt()}function Ft(i,e){return i}const Ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ot extends fe.ZR{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Xi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class Iu{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Oa{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(un.UNAUTHENTICATED))}shutdown(){}}class Bs{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class eo{constructor(e){this.t=e,this.currentUser=un.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var o=this;let u=this.i;const l=V=>this.i!==u?(u=this.i,n(V)):Promise.resolve();let f=new Xi;this.o=()=>{this.i++,this.currentUser=this.u(),f.resolve(),f=new Xi,e.enqueueRetryable(()=>l(this.currentUser))};const T=()=>{const V=f;e.enqueueRetryable((0,p.Z)(function*(){yield V.promise,yield l(o.currentUser)}))},P=V=>{dt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=V,this.auth.addAuthTokenListener(this.o),T()};this.t.onInit(V=>P(V)),setTimeout(()=>{if(!this.auth){const V=this.t.getImmediate({optional:!0});V?P(V):(dt("FirebaseAuthCredentialsProvider","Auth not yet detected"),f.resolve(),f=new Xi)}},0),T()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(o=>this.i!==e?(dt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(zt("string"==typeof o.accessToken),new Iu(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return zt(null===e||"string"==typeof e),new un(e)}}class qu{constructor(e,n,o){this.h=e,this.l=n,this.m=o,this.type="FirstParty",this.user=un.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class lu{constructor(e,n,o){this.h=e,this.l=n,this.m=o}getToken(){return Promise.resolve(new qu(this.h,this.l,this.m))}start(e,n){e.enqueueRetryable(()=>n(un.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Fo{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class gc{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,n){const o=l=>{null!=l.error&&dt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const f=l.token!==this.T;return this.T=l.token,dt("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>o(l))};const u=l=>{dt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.appCheck.addTokenListener(this.o)};this.I.onInit(l=>u(l)),setTimeout(()=>{if(!this.appCheck){const l=this.I.getImmediate({optional:!0});l?u(l):dt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(zt("string"==typeof n.token),this.T=n.token,new Fo(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Ku(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let o=0;o<i;o++)n[o]=Math.floor(256*Math.random());return n}class Wi{static A(){const n=62*Math.floor(256/62);let o="";for(;o.length<20;){const u=Ku(40);for(let l=0;l<u.length;++l)o.length<20&&u[l]<n&&(o+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(u[l]%62))}return o}}function On(i,e){return i<e?-1:i>e?1:0}function ya(i,e,n){return i.length===e.length&&i.every((o,u)=>n(o,e[u]))}function bn(i){return i+"\0"}class Kr{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ot(Ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ot(Ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ot(Ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ot(Ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Kr.fromMillis(Date.now())}static fromDate(e){return Kr.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),o=Math.floor(1e6*(e-1e3*n));return new Kr(n,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?On(this.nanoseconds,e.nanoseconds):On(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class hn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new hn(e)}static min(){return new hn(new Kr(0,0))}static max(){return new hn(new Kr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class va{constructor(e,n,o){void 0===n?n=0:n>e.length&&Bt(),void 0===o?o=e.length-n:o>e.length-n&&Bt(),this.segments=e,this.offset=n,this.len=o}get length(){return this.len}isEqual(e){return 0===va.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof va?e.forEach(o=>{n.push(o)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,o=this.limit();n<o;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const o=Math.min(e.length,n.length);for(let u=0;u<o;u++){const l=e.get(u),f=n.get(u);if(l<f)return-1;if(l>f)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class on extends va{construct(e,n,o){return new on(e,n,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const o of e){if(o.indexOf("//")>=0)throw new ot(Ue.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);n.push(...o.split("/").filter(u=>u.length>0))}return new on(n)}static emptyPath(){return new on([])}}const mc=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class tr extends va{construct(e,n,o){return new tr(e,n,o)}static isValidIdentifier(e){return mc.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),tr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new tr(["__name__"])}static fromServerFormat(e){const n=[];let o="",u=0;const l=()=>{if(0===o.length)throw new ot(Ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(o),o=""};let f=!1;for(;u<e.length;){const T=e[u];if("\\"===T){if(u+1===e.length)throw new ot(Ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const P=e[u+1];if("\\"!==P&&"."!==P&&"`"!==P)throw new ot(Ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=P,u+=2}else"`"===T?(f=!f,u++):"."!==T||f?(o+=T,u++):(l(),u++)}if(l(),f)throw new ot(Ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new tr(n)}static emptyPath(){return new tr([])}}class Ot{constructor(e){this.path=e}static fromPath(e){return new Ot(on.fromString(e))}static fromName(e){return new Ot(on.fromString(e).popFirst(5))}static empty(){return new Ot(on.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===on.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return on.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ot(new on(e.slice()))}}class _a{constructor(e,n,o,u){this.indexId=e,this.collectionGroup=n,this.fields=o,this.indexState=u}}function Pa(i){return i.fields.find(e=>2===e.kind)}function Ea(i){return i.fields.filter(e=>2!==e.kind)}_a.UNKNOWN_ID=-1;class Ja{constructor(e,n){this.fieldPath=e,this.kind=n}}class sr{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new sr(0,y.min())}}function zo(i,e){const n=i.toTimestamp().seconds,o=i.toTimestamp().nanoseconds+1,u=hn.fromTimestamp(1e9===o?new Kr(n+1,0):new Kr(n,o));return new y(u,Ot.empty(),e)}function H(i){return new y(i.readTime,i.key,-1)}class y{constructor(e,n,o){this.readTime=e,this.documentKey=n,this.largestBatchId=o}static min(){return new y(hn.min(),Ot.empty(),-1)}static max(){return new y(hn.max(),Ot.empty(),-1)}}function I(i,e){let n=i.readTime.compareTo(e.readTime);return 0!==n?n:(n=Ot.comparator(i.documentKey,e.documentKey),0!==n?n:On(i.largestBatchId,e.largestBatchId))}const R="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class G{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ie(i){return ve.apply(this,arguments)}function ve(){return ve=(0,p.Z)(function*(i){if(i.code!==Ue.FAILED_PRECONDITION||i.message!==R)throw i;dt("LocalStore","Unexpectedly lost primary lease")}),ve.apply(this,arguments)}class Q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Bt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Q((o,u)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(o,u)},this.catchCallback=l=>{this.wrapFailure(n,l).next(o,u)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Q?n:Q.resolve(n)}catch(n){return Q.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Q.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Q.reject(n)}static resolve(e){return new Q((n,o)=>{n(e)})}static reject(e){return new Q((n,o)=>{o(e)})}static waitFor(e){return new Q((n,o)=>{let u=0,l=0,f=!1;e.forEach(T=>{++u,T.next(()=>{++l,f&&l===u&&n()},P=>o(P))}),f=!0,l===u&&n()})}static or(e){let n=Q.resolve(!1);for(const o of e)n=n.next(u=>u?Q.resolve(u):o());return n}static forEach(e,n){const o=[];return e.forEach((u,l)=>{o.push(n.call(this,u,l))}),this.waitFor(o)}static mapArray(e,n){return new Q((o,u)=>{const l=e.length,f=new Array(l);let T=0;for(let P=0;P<l;P++){const V=P;n(e[V]).next(ne=>{f[V]=ne,++T,T===l&&o(f)},ne=>u(ne))}})}static doWhile(e,n){return new Q((o,u)=>{const l=()=>{!0===e()?n().next(()=>{l()},u):o()};l()})}}class je{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.v=new Xi,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{n.error?this.v.reject(new Pt(e,n.error)):this.v.resolve()},this.transaction.onerror=o=>{const u=Zr(o.target.error);this.v.reject(new Pt(e,u))}}static open(e,n,o,u){try{return new je(n,e.transaction(u,o))}catch(l){throw new Pt(n,l)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(dt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const n=this.transaction.objectStore(e);return new Tn(n)}}class Qe{constructor(e,n,o){this.name=e,this.version=n,this.V=o,12.2===Qe.S((0,fe.z$)())&&Mr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return dt("SimpleDb","Removing database:",e),Kt(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,fe.hl)())return!1;if(Qe.C())return!0;const e=(0,fe.z$)(),n=Qe.S(e),o=0<n&&n<10,u=Qe.N(e),l=0<u&&u<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||o||l)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(o)}static N(e){const n=e.match(/Android ([\d.]+)/i),o=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(o)}$(e){var n=this;return(0,p.Z)(function*(){return n.db||(dt("SimpleDb","Opening database:",n.name),n.db=yield new Promise((o,u)=>{const l=indexedDB.open(n.name,n.version);l.onsuccess=f=>{o(f.target.result)},l.onblocked=()=>{u(new Pt(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=f=>{const T=f.target.error;u("VersionError"===T.name?new ot(Ue.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===T.name?new ot(Ue.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+T):new Pt(e,T))},l.onupgradeneeded=f=>{dt("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',f.oldVersion),n.V.O(f.target.result,l.transaction,f.oldVersion,n.version).next(()=>{dt("SimpleDb","Database upgrade to version "+n.version+" complete")})}})),n.F&&(n.db.onversionchange=o=>n.F(o)),n.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,o,u){var l=this;return(0,p.Z)(function*(){const f="readonly"===n;let T=0;for(;;){++T;try{l.db=yield l.$(e);const P=je.open(l.db,e,f?"readonly":"readwrite",o),V=u(P).next(ne=>(P.P(),ne)).catch(ne=>(P.abort(ne),Q.reject(ne))).toPromise();return V.catch(()=>{}),yield P.R,V}catch(P){const V=P,ne="FirebaseError"!==V.name&&T<3;if(dt("SimpleDb","Transaction failed with error:",V.message,"Retrying:",ne),l.close(),!ne)return Promise.reject(V)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Dt{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return Kt(this.L.delete())}}class Pt extends ot{constructor(e,n){super(Ue.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Un(i){return"IndexedDbTransactionError"===i.name}class Tn{constructor(e){this.store=e}put(e,n){let o;return void 0!==n?(dt("SimpleDb","PUT",this.store.name,e,n),o=this.store.put(n,e)):(dt("SimpleDb","PUT",this.store.name,"<auto-key>",e),o=this.store.put(e)),Kt(o)}add(e){return dt("SimpleDb","ADD",this.store.name,e,e),Kt(this.store.add(e))}get(e){return Kt(this.store.get(e)).next(n=>(void 0===n&&(n=null),dt("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return dt("SimpleDb","DELETE",this.store.name,e),Kt(this.store.delete(e))}count(){return dt("SimpleDb","COUNT",this.store.name),Kt(this.store.count())}j(e,n){const o=this.options(e,n);if(o.index||"function"!=typeof this.store.getAll){const u=this.cursor(o),l=[];return this.W(u,(f,T)=>{l.push(T)}).next(()=>l)}{const u=this.store.getAll(o.range);return new Q((l,f)=>{u.onerror=T=>{f(T.target.error)},u.onsuccess=T=>{l(T.target.result)}})}}H(e,n){const o=this.store.getAll(e,null===n?void 0:n);return new Q((u,l)=>{o.onerror=f=>{l(f.target.error)},o.onsuccess=f=>{u(f.target.result)}})}J(e,n){dt("SimpleDb","DELETE ALL",this.store.name);const o=this.options(e,n);o.Y=!1;const u=this.cursor(o);return this.W(u,(l,f,T)=>T.delete())}X(e,n){let o;n?o=e:(o={},n=e);const u=this.cursor(o);return this.W(u,n)}Z(e){const n=this.cursor({});return new Q((o,u)=>{n.onerror=l=>{const f=Zr(l.target.error);u(f)},n.onsuccess=l=>{const f=l.target.result;f?e(f.primaryKey,f.value).next(T=>{T?f.continue():o()}):o()}})}W(e,n){const o=[];return new Q((u,l)=>{e.onerror=f=>{l(f.target.error)},e.onsuccess=f=>{const T=f.target.result;if(!T)return void u();const P=new Dt(T),V=n(T.primaryKey,T.value,P);if(V instanceof Q){const ne=V.catch(ge=>(P.done(),Q.reject(ge)));o.push(ne)}P.isDone?u():null===P.K?T.continue():T.continue(P.K)}}).next(()=>Q.waitFor(o))}options(e,n){let o;return void 0!==e&&("string"==typeof e?o=e:n=e),{index:o,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const o=this.store.index(e.index);return e.Y?o.openKeyCursor(e.range,n):o.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Kt(i){return new Q((e,n)=>{i.onsuccess=o=>{e(o.target.result)},i.onerror=o=>{const u=Zr(o.target.error);n(u)}})}let Fn=!1;function Zr(i){const e=Qe.S((0,fe.z$)());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(n)>=0){const o=new ot("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Fn||(Fn=!0,setTimeout(()=>{throw o},0)),o}}return i}class Bi{constructor(e,n){this.asyncQueue=e,this.tt=n,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var n=this;dt("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,p.Z)(function*(){n.task=null;try{dt("IndexBackiller",`Documents written: ${yield n.tt.nt()}`)}catch(o){Un(o)?dt("IndexBackiller","Ignoring IndexedDB error during index backfill: ",o):yield ie(o)}yield n.et(6e4)}))}}class ds{constructor(e,n){this.localStore=e,this.persistence=n}nt(e=50){var n=this;return(0,p.Z)(function*(){return n.persistence.runTransaction("Backfill Indexes","readwrite-primary",o=>n.st(o,e))})()}st(e,n){const o=new Set;let u=n,l=!0;return Q.doWhile(()=>!0===l&&u>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(f=>{if(null!==f&&!o.has(f))return dt("IndexBackiller",`Processing collection: ${f}`),this.it(e,f,u).next(T=>{u-=T,o.add(f)});l=!1})).next(()=>n-u)}it(e,n,o){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(u=>this.localStore.localDocuments.getNextDocuments(e,n,u,o).next(l=>{const f=l.changes;return this.localStore.indexManager.updateIndexEntries(e,f).next(()=>this.rt(u,l)).next(T=>(dt("IndexBackiller",`Updating offset: ${T}`),this.localStore.indexManager.updateCollectionGroup(e,n,T))).next(()=>f.size)}))}rt(e,n){let o=e;return n.changes.forEach((u,l)=>{const f=H(l);I(f,o)>0&&(o=f)}),new y(o.readTime,o.documentKey,Math.max(n.batchId,e.largestBatchId))}}let Pr=(()=>{class i{constructor(n,o){this.previousValue=n,o&&(o.sequenceNumberHandler=u=>this.ot(u),this.ut=u=>o.writeSequenceNumber(u))}ot(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.ut&&this.ut(n),n}}return i.ct=-1,i})();function Ei(i){return null==i}function lo(i){return 0===i&&1/i==-1/0}function ho(i){return"number"==typeof i&&Number.isInteger(i)&&!lo(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}function _(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=v(e)),e=S(i.get(n),e);return v(e)}function S(i,e){let n=e;const o=i.length;for(let u=0;u<o;u++){const l=i.charAt(u);switch(l){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=l}}return n}function v(i){return i+"\x01\x01"}function A(i){const e=i.length;if(zt(e>=2),2===e)return zt("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),on.emptyPath();const n=e-2,o=[];let u="";for(let l=0;l<e;){const f=i.indexOf("\x01",l);switch((f<0||f>n)&&Bt(),i.charAt(f+1)){case"\x01":const T=i.substring(l,f);let P;0===u.length?P=T:(u+=T,P=u,u=""),o.push(P);break;case"\x10":u+=i.substring(l,f),u+="\0";break;case"\x11":u+=i.substring(l,f+1);break;default:Bt()}l=f+2}return new on(o)}const k=["userId","batchId"];function Z(i,e){return[i,_(e)]}function ce(i,e,n){return[i,_(e),n]}const $e={},Fe=["prefixPath","collectionGroup","readTime","documentId"],Xe=["prefixPath","collectionGroup","documentId"],ft=["collectionGroup","readTime","prefixPath","documentId"],xt=["canonicalId","targetId"],At=["targetId","path"],fr=["path","targetId"],Is=["collectionId","parent"],Qr=["indexId","uid"],Do=["uid","sequenceNumber"],kr=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],ia=["indexId","uid","orderedDocumentKey"],eu=["userId","collectionPath","documentId"],Ai=["userId","collectionPath","largestBatchId"],Us=["userId","collectionGroup","largestBatchId"],Ji=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],tu=[...Ji,"documentOverlays"],wa=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],yc=wa,zc=[...yc,"indexConfiguration","indexState","indexEntries"];class Du extends G{constructor(e,n){super(),this.ht=e,this.currentSequenceNumber=n}}function js(i,e){const n=Ft(i);return Qe.M(n.ht,e)}function Go(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function Ia(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function gd(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class ri{constructor(e,n){this.comparator=e,this.root=n||to.EMPTY}insert(e,n){return new ri(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,to.BLACK,null,null))}remove(e){return new ri(this.comparator,this.root.remove(e,this.comparator).copy(null,null,to.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const o=this.comparator(e,n.key);if(0===o)return n.value;o<0?n=n.left:o>0&&(n=n.right)}return null}indexOf(e){let n=0,o=this.root;for(;!o.isEmpty();){const u=this.comparator(e,o.key);if(0===u)return n+o.left.size;u<0?o=o.left:(n+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,o)=>(e(n,o),!1))}toString(){const e=[];return this.inorderTraversal((n,o)=>(e.push(`${n}:${o}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new du(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new du(this.root,e,this.comparator,!1)}getReverseIterator(){return new du(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new du(this.root,e,this.comparator,!0)}}class du{constructor(e,n,o,u){this.isReverse=u,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=n?o(e.key,n):1,n&&u&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(0===l){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class to{constructor(e,n,o,u,l){this.key=e,this.value=n,this.color=o??to.RED,this.left=u??to.EMPTY,this.right=l??to.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,o,u,l){return new to(e??this.key,n??this.value,o??this.color,u??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,o){let u=this;const l=o(e,u.key);return u=l<0?u.copy(null,null,null,u.left.insert(e,n,o),null):0===l?u.copy(null,n,null,null,null):u.copy(null,null,null,null,u.right.insert(e,n,o)),u.fixUp()}removeMin(){if(this.left.isEmpty())return to.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let o,u=this;if(n(e,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(e,n),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),0===n(e,u.key)){if(u.right.isEmpty())return to.EMPTY;o=u.right.min(),u=u.copy(o.key,o.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(e,n))}return u.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,to.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,to.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Bt();const e=this.left.check();if(e!==this.right.check())throw Bt();return e+(this.isRed()?0:1)}}to.EMPTY=null,to.RED=!0,to.BLACK=!1,to.EMPTY=new class{constructor(){this.size=0}get key(){throw Bt()}get value(){throw Bt()}get color(){throw Bt()}get left(){throw Bt()}get right(){throw Bt()}copy(i,e,n,o,u){return this}insert(i,e,n){return new to(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ui{constructor(e){this.comparator=e,this.data=new ri(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,o)=>(e(n),!1))}forEachInRange(e,n){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const u=o.getNext();if(this.comparator(u.key,e[1])>=0)return;n(u.key)}}forEachWhile(e,n){let o;for(o=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Al(this.data.getIterator())}getIteratorFrom(e){return new Al(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(o=>{n=n.add(o)}),n}isEqual(e){if(!(e instanceof Ui)||this.size!==e.size)return!1;const n=this.data.getIterator(),o=e.data.getIterator();for(;n.hasNext();){const u=n.getNext().key,l=o.getNext().key;if(0!==this.comparator(u,l))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ui(this.comparator);return n.data=e,n}}class Al{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Cu(i){return i.hasNext()?i.getNext():void 0}class Wo{constructor(e){this.fields=e,e.sort(tr.comparator)}static empty(){return new Wo([])}unionWith(e){let n=new Ui(tr.comparator);for(const o of this.fields)n=n.add(o);for(const o of e)n=n.add(o);return new Wo(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ya(this.fields,e.fields,(n,o)=>n.isEqual(o))}}class Zu extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}function bu(){return typeof atob<"u"}class hs{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new Zu("Invalid base64 string: "+u):u}}(e);return new hs(n)}static fromUint8Array(e){const n=function(o){let u="";for(let l=0;l<o.length;++l)u+=String.fromCharCode(o[l]);return u}(e);return new hs(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let o=0;o<e.length;o++)n[o]=e.charCodeAt(o);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return On(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}hs.EMPTY_BYTE_STRING=new hs("");const Yu=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ka(i){if(zt(!!i),"string"==typeof i){let e=0;const n=Yu.exec(i);if(zt(!!n),n[1]){let u=n[1];u=(u+"000000000").substr(0,9),e=Number(u)}const o=new Date(i);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:wi(i.seconds),nanos:wi(i.nanos)}}function wi(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function nu(i){return"string"==typeof i?hs.fromBase64String(i):hs.fromUint8Array(i)}function Qu(i){var e,n;return"server_timestamp"===(null===(n=((null===(e=i?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Tu(i){const e=i.mapValue.fields.__previous_value__;return Qu(e)?Tu(e):e}function Xu(i){const e=ka(i.mapValue.fields.__local_write_time__.timestampValue);return new Kr(e.seconds,e.nanos)}class qo{constructor(e,n,o,u,l,f,T,P,V){this.databaseId=e,this.appId=n,this.persistenceKey=o,this.host=u,this.ssl=l,this.forceLongPolling=f,this.autoDetectLongPolling=T,this.longPollingOptions=P,this.useFetchStreams=V}}class Fa{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Fa("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Fa&&e.projectId===this.projectId&&e.database===this.database}}const Lo={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ru={nullValue:"NULL_VALUE"};function Da(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Qu(i)?4:Ml(i)?9007199254740991:10:Bt()}function Co(i,e){if(i===e)return!0;const n=Da(i);if(n!==Da(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Xu(i).isEqual(Xu(e));case 3:return function(o,u){if("string"==typeof o.timestampValue&&"string"==typeof u.timestampValue&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const l=ka(o.timestampValue),f=ka(u.timestampValue);return l.seconds===f.seconds&&l.nanos===f.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return u=e,nu(i.bytesValue).isEqual(nu(u.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(o,u){return wi(o.geoPointValue.latitude)===wi(u.geoPointValue.latitude)&&wi(o.geoPointValue.longitude)===wi(u.geoPointValue.longitude)}(i,e);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return wi(o.integerValue)===wi(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const l=wi(o.doubleValue),f=wi(u.doubleValue);return l===f?lo(l)===lo(f):isNaN(l)&&isNaN(f)}return!1}(i,e);case 9:return ya(i.arrayValue.values||[],e.arrayValue.values||[],Co);case 10:return function(o,u){const l=o.mapValue.fields||{},f=u.mapValue.fields||{};if(Go(l)!==Go(f))return!1;for(const T in l)if(l.hasOwnProperty(T)&&(void 0===f[T]||!Co(l[T],f[T])))return!1;return!0}(i,e);default:return Bt()}var u}function La(i,e){return void 0!==(i.values||[]).find(n=>Co(n,e))}function Ca(i,e){if(i===e)return 0;const n=Da(i),o=Da(e);if(n!==o)return On(n,o);switch(n){case 0:case 9007199254740991:return 0;case 1:return On(i.booleanValue,e.booleanValue);case 2:return function(u,l){const f=wi(u.integerValue||u.doubleValue),T=wi(l.integerValue||l.doubleValue);return f<T?-1:f>T?1:f===T?0:isNaN(f)?isNaN(T)?0:-1:1}(i,e);case 3:return Su(i.timestampValue,e.timestampValue);case 4:return Su(Xu(i),Xu(e));case 5:return On(i.stringValue,e.stringValue);case 6:return function(u,l){const f=nu(u),T=nu(l);return f.compareTo(T)}(i.bytesValue,e.bytesValue);case 7:return function(u,l){const f=u.split("/"),T=l.split("/");for(let P=0;P<f.length&&P<T.length;P++){const V=On(f[P],T[P]);if(0!==V)return V}return On(f.length,T.length)}(i.referenceValue,e.referenceValue);case 8:return function(u,l){const f=On(wi(u.latitude),wi(l.latitude));return 0!==f?f:On(wi(u.longitude),wi(l.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(u,l){const f=u.values||[],T=l.values||[];for(let P=0;P<f.length&&P<T.length;++P){const V=Ca(f[P],T[P]);if(V)return V}return On(f.length,T.length)}(i.arrayValue,e.arrayValue);case 10:return function(u,l){if(u===Lo.mapValue&&l===Lo.mapValue)return 0;if(u===Lo.mapValue)return 1;if(l===Lo.mapValue)return-1;const f=u.fields||{},T=Object.keys(f),P=l.fields||{},V=Object.keys(P);T.sort(),V.sort();for(let ne=0;ne<T.length&&ne<V.length;++ne){const ge=On(T[ne],V[ne]);if(0!==ge)return ge;const Le=Ca(f[T[ne]],P[V[ne]]);if(0!==Le)return Le}return On(T.length,V.length)}(i.mapValue,e.mapValue);default:throw Bt()}}function Su(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return On(i,e);const n=ka(i),o=ka(e),u=On(n.seconds,o.seconds);return 0!==u?u:On(n.nanos,o.nanos)}function qa(i){return hu(i)}function hu(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(o){const u=ka(o);return`time(${u.seconds},${u.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?nu(i.bytesValue).toBase64():"referenceValue"in i?Ot.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(o){let u="[",l=!0;for(const f of o.values||[])l?l=!1:u+=",",u+=hu(f);return u+"]"}(i.arrayValue):"mapValue"in i?function(o){const u=Object.keys(o.fields||{}).sort();let l="{",f=!0;for(const T of u)f?f=!1:l+=",",l+=`${T}:${hu(o.fields[T])}`;return l+"}"}(i.mapValue):Bt();var e}function Au(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Ju(i){return!!i&&"integerValue"in i}function Va(i){return!!i&&"arrayValue"in i}function vc(i){return!!i&&"nullValue"in i}function Gc(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Ba(i){return!!i&&"mapValue"in i}function ba(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Ia(i.mapValue.fields,(n,o)=>e.mapValue.fields[n]=ba(o)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ba(i.arrayValue.values[n]);return e}return Object.assign({},i)}function Ml(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function $s(i){return"nullValue"in i?ru:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?Au(Fa.empty(),Ot.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:Bt()}function fu(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?Au(Fa.empty(),Ot.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?Lo:Bt()}function Wc(i,e){const n=Ca(i.value,e.value);return 0!==n?n:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function Ua(i,e){const n=Ca(i.value,e.value);return 0!==n?n:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class fo{constructor(e){this.value=e}static empty(){return new fo({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let o=0;o<e.length-1;++o)if(n=(n.mapValue.fields||{})[e.get(o)],!Ba(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ba(n)}setAll(e){let n=tr.emptyPath(),o={},u=[];e.forEach((f,T)=>{if(!n.isImmediateParentOf(T)){const P=this.getFieldsMap(n);this.applyChanges(P,o,u),o={},u=[],n=T.popLast()}f?o[T.lastSegment()]=ba(f):u.push(T.lastSegment())});const l=this.getFieldsMap(n);this.applyChanges(l,o,u)}delete(e){const n=this.field(e.popLast());Ba(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Co(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let o=0;o<e.length;++o){let u=n.mapValue.fields[e.get(o)];Ba(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},n.mapValue.fields[e.get(o)]=u),n=u}return n.mapValue.fields}applyChanges(e,n,o){Ia(n,(u,l)=>e[u]=l);for(const u of o)delete e[u]}clone(){return new fo(ba(this.value))}}function Nl(i){const e=[];return Ia(i.fields,(n,o)=>{const u=new tr([n]);if(Ba(o)){const l=Nl(o.mapValue).fields;if(0===l.length)e.push(u);else for(const f of l)e.push(u.child(f))}else e.push(u)}),new Wo(e)}class li{constructor(e,n,o,u,l,f,T){this.key=e,this.documentType=n,this.version=o,this.readTime=u,this.createTime=l,this.data=f,this.documentState=T}static newInvalidDocument(e){return new li(e,0,hn.min(),hn.min(),hn.min(),fo.empty(),0)}static newFoundDocument(e,n,o,u){return new li(e,1,n,hn.min(),o,u,0)}static newNoDocument(e,n){return new li(e,2,n,hn.min(),hn.min(),fo.empty(),0)}static newUnknownDocument(e,n){return new li(e,3,n,hn.min(),hn.min(),fo.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(hn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=fo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=fo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=hn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof li&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new li(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ko{constructor(e,n){this.position=e,this.inclusive=n}}function pu(i,e,n){let o=0;for(let u=0;u<i.position.length;u++){const l=e[u],f=i.position[u];if(o=l.field.isKeyField()?Ot.comparator(Ot.fromName(f.referenceValue),n.key):Ca(f,n.data.field(l.field)),"desc"===l.dir&&(o*=-1),0!==o)break}return o}function Za(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!Co(i.position[n],e.position[n]))return!1;return!0}class D{constructor(e,n="asc"){this.field=e,this.dir=n}}function N(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class B{}class se extends B{constructor(e,n,o){super(),this.field=e,this.op=n,this.value=o}static create(e,n,o){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,o):new no(e,n,o):"array-contains"===n?new Sa(e,o):"in"===n?new es(e,o):"not-in"===n?new gu(e,o):"array-contains-any"===n?new Bf(e,o):new se(e,n,o)}static createKeyFieldInFilter(e,n,o){return"in"===n?new ji(e,o):new qc(e,o)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.matchesComparison(Ca(n,this.value)):null!==n&&Da(this.value)===Da(n)&&this.matchesComparison(Ca(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Bt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class ye extends B{constructor(e,n){super(),this.filters=e,this.op=n,this.lt=null}static create(e,n){return new ye(e,n)}matches(e){return Ae(this)?void 0===this.filters.find(n=>!n.matches(e)):void 0!==this.filters.find(n=>n.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(n=>n.isInequality());return null!==e?e.field:null}ft(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function Ae(i){return"and"===i.op}function tt(i){return"or"===i.op}function jt(i){return Lt(i)&&Ae(i)}function Lt(i){for(const e of i.filters)if(e instanceof ye)return!1;return!0}function an(i){if(i instanceof se)return i.field.canonicalString()+i.op.toString()+qa(i.value);if(jt(i))return i.filters.map(e=>an(e)).join(",");{const e=i.filters.map(n=>an(n)).join(",");return`${i.op}(${e})`}}function qn(i,e){return i instanceof se?(n=i,(o=e)instanceof se&&n.op===o.op&&n.field.isEqual(o.field)&&Co(n.value,o.value)):i instanceof ye?function(n,o){return o instanceof ye&&n.op===o.op&&n.filters.length===o.filters.length&&n.filters.reduce((u,l,f)=>u&&qn(l,o.filters[f]),!0)}(i,e):void Bt();var n,o}function Sn(i,e){const n=i.filters.concat(e);return ye.create(n,i.op)}function bo(i){return i instanceof se?`${(e=i).field.canonicalString()} ${e.op} ${qa(e.value)}`:i instanceof ye?function(e){return e.op.toString()+" {"+e.getFilters().map(bo).join(" ,")+"}"}(i):"Filter";var e}class no extends se{constructor(e,n,o){super(e,n,o),this.key=Ot.fromName(o.referenceValue)}matches(e){const n=Ot.comparator(e.key,this.key);return this.matchesComparison(n)}}class ji extends se{constructor(e,n){super(e,"in",n),this.keys=Ta(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class qc extends se{constructor(e,n){super(e,"not-in",n),this.keys=Ta(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Ta(i,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(o=>Ot.fromName(o.referenceValue))}class Sa extends se{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Va(n)&&La(n.arrayValue,this.value)}}class es extends se{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&La(this.value.arrayValue,n)}}class gu extends se{constructor(e,n){super(e,"not-in",n)}matches(e){if(La(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!La(this.value.arrayValue,n)}}class Bf extends se{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Va(n)||!n.arrayValue.values)&&n.arrayValue.values.some(o=>La(this.value.arrayValue,o))}}class _c{constructor(e,n=null,o=[],u=[],l=null,f=null,T=null){this.path=e,this.collectionGroup=n,this.orderBy=o,this.filters=u,this.limit=l,this.startAt=f,this.endAt=T,this.dt=null}}function Mu(i,e=null,n=[],o=[],u=null,l=null,f=null){return new _c(i,e,n,o,u,l,f)}function iu(i){const e=Ft(i);if(null===e.dt){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(o=>an(o)).join(","),n+="|ob:",n+=e.orderBy.map(o=>{return(u=o).field.canonicalString()+u.dir;var u}).join(","),Ei(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(o=>qa(o)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(o=>qa(o)).join(",")),e.dt=n}return e.dt}function Kc(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!N(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!qn(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Za(i.startAt,e.startAt)&&Za(i.endAt,e.endAt)}function Zc(i){return Ot.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function md(i,e){return i.filters.filter(n=>n instanceof se&&n.field.isEqual(e))}function sa(i,e,n){let o=ru,u=!0;for(const l of md(i,e)){let f=ru,T=!0;switch(l.op){case"<":case"<=":f=$s(l.value);break;case"==":case"in":case">=":f=l.value;break;case">":f=l.value,T=!1;break;case"!=":case"not-in":f=ru}Wc({value:o,inclusive:u},{value:f,inclusive:T})<0&&(o=f,u=T)}if(null!==n)for(let l=0;l<i.orderBy.length;++l)if(i.orderBy[l].field.isEqual(e)){const f=n.position[l];Wc({value:o,inclusive:u},{value:f,inclusive:n.inclusive})<0&&(o=f,u=n.inclusive);break}return{value:o,inclusive:u}}function xl(i,e,n){let o=Lo,u=!0;for(const l of md(i,e)){let f=Lo,T=!0;switch(l.op){case">=":case">":f=fu(l.value),T=!1;break;case"==":case"in":case"<=":f=l.value;break;case"<":f=l.value,T=!1;break;case"!=":case"not-in":f=Lo}Ua({value:o,inclusive:u},{value:f,inclusive:T})>0&&(o=f,u=T)}if(null!==n)for(let l=0;l<i.orderBy.length;++l)if(i.orderBy[l].field.isEqual(e)){const f=n.position[l];Ua({value:o,inclusive:u},{value:f,inclusive:n.inclusive})>0&&(o=f,u=n.inclusive);break}return{value:o,inclusive:u}}class oa{constructor(e,n=null,o=[],u=[],l=null,f="F",T=null,P=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=o,this.filters=u,this.limit=l,this.limitType=f,this.startAt=T,this.endAt=P,this.wt=null,this._t=null}}function Uf(i,e,n,o,u,l,f,T){return new oa(i,e,n,o,u,l,f,T)}function Nu(i){return new oa(i)}function Sh(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}function yd(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function w(i){for(const e of i.filters){const n=e.getFirstInequalityField();if(null!==n)return n}return null}function h(i){return null!==i.collectionGroup}function g(i){const e=Ft(i);if(null===e.wt){e.wt=[];const n=w(e),o=yd(e);if(null!==n&&null===o)n.isKeyField()||e.wt.push(new D(n)),e.wt.push(new D(tr.keyField(),"asc"));else{let u=!1;for(const l of e.explicitOrderBy)e.wt.push(l),l.field.isKeyField()&&(u=!0);if(!u){const l=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new D(tr.keyField(),l))}}}return e.wt}function b(i){const e=Ft(i);if(!e._t)if("F"===e.limitType)e._t=Mu(e.path,e.collectionGroup,g(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const l of g(e))n.push(new D(l.field,"desc"===l.dir?"asc":"desc"));const o=e.endAt?new Ko(e.endAt.position,e.endAt.inclusive):null,u=e.startAt?new Ko(e.startAt.position,e.startAt.inclusive):null;e._t=Mu(e.path,e.collectionGroup,n,e.filters,e.limit,o,u)}return e._t}function $(i,e){e.getFirstInequalityField(),w(i);const n=i.filters.concat([e]);return new oa(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function re(i,e,n){return new oa(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function be(i,e){return Kc(b(i),b(e))&&i.limitType===e.limitType}function Ye(i){return`${iu(b(i))}|lt:${i.limitType}`}function Nt(i){return`Query(target=${function(e){let n=e.path.canonicalString();return null!==e.collectionGroup&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(o=>bo(o)).join(", ")}]`),Ei(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(o=>{return`${(u=o).field.canonicalString()} (${u.dir})`;var u}).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(o=>qa(o)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(o=>qa(o)).join(",")),`Target(${n})`}(b(i))}; limitType=${i.limitType})`}function Ut(i,e){return e.isFoundDocument()&&function(n,o){const u=o.key.path;return null!==n.collectionGroup?o.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(u):Ot.isDocumentKey(n.path)?n.path.isEqual(u):n.path.isImmediateParentOf(u)}(i,e)&&function(n,o){for(const u of g(n))if(!u.field.isKeyField()&&null===o.data.field(u.field))return!1;return!0}(i,e)&&function(n,o){for(const u of n.filters)if(!u.matches(o))return!1;return!0}(i,e)&&(o=e,!((n=i).startAt&&!function(u,l,f){const T=pu(u,l,f);return u.inclusive?T<=0:T<0}(n.startAt,g(n),o)||n.endAt&&!function(u,l,f){const T=pu(u,l,f);return u.inclusive?T>=0:T>0}(n.endAt,g(n),o)));var n,o}function yn(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function wr(i){return(e,n)=>{let o=!1;for(const u of g(i)){const l=Vo(u,e,n);if(0!==l)return l;o=o||u.field.isKeyField()}return 0}}function Vo(i,e,n){const o=i.field.isKeyField()?Ot.comparator(e.key,n.key):function(u,l,f){const T=l.data.field(u),P=f.data.field(u);return null!==T&&null!==P?Ca(T,P):Bt()}(i.field,e,n);switch(i.dir){case"asc":return o;case"desc":return-1*o;default:return Bt()}}class ro{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),o=this.inner[n];if(void 0!==o)for(const[u,l]of o)if(this.equalsFn(u,e))return l}has(e){return void 0!==this.get(e)}set(e,n){const o=this.mapKeyFn(e),u=this.inner[o];if(void 0===u)return this.inner[o]=[[e,n]],void this.innerSize++;for(let l=0;l<u.length;l++)if(this.equalsFn(u[l][0],e))return void(u[l]=[e,n]);u.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),o=this.inner[n];if(void 0===o)return!1;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return 1===o.length?delete this.inner[n]:o.splice(u,1),this.innerSize--,!0;return!1}forEach(e){Ia(this.inner,(n,o)=>{for(const[u,l]of o)e(u,l)})}isEmpty(){return gd(this.inner)}size(){return this.innerSize}}const Yc=new ri(Ot.comparator);function Zo(){return Yc}const Rl=new ri(Ot.comparator);function Ya(...i){let e=Rl;for(const n of i)e=e.insert(n.key,n);return e}function ec(i){let e=Rl;return i.forEach((n,o)=>e=e.insert(n,o.overlayedDocument)),e}function ja(){return tc()}function Ah(){return tc()}function tc(){return new ro(i=>i.toString(),(i,e)=>i.isEqual(e))}const vd=new ri(Ot.comparator),jf=new Ui(Ot.comparator);function ur(...i){let e=jf;for(const n of i)e=e.add(n);return e}const _d=new Ui(On);function Ed(){return _d}function wd(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:lo(e)?"-0":e}}function $f(i){return{integerValue:""+i}}function $g(i,e){return ho(e)?$f(e):wd(i,e)}class Id{constructor(){this._=void 0}}function DE(i,e,n){return i instanceof Ol?function(o,u){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Qu(u)&&(u=Tu(u)),u&&(l.fields.__previous_value__=u),{mapValue:l}}(n,e):i instanceof Qc?Mh(i,e):i instanceof Pl?av(i,e):function(o,u){const l=ov(o,u),f=uv(l)+uv(o.gt);return Ju(l)&&Ju(o.gt)?$f(f):wd(o.serializer,f)}(i,e)}function Hg(i,e,n){return i instanceof Qc?Mh(i,e):i instanceof Pl?av(i,e):n}function ov(i,e){return i instanceof Ec?Ju(n=e)||(o=n)&&"doubleValue"in o?e:{integerValue:0}:null;var o,n}class Ol extends Id{}class Qc extends Id{constructor(e){super(),this.elements=e}}function Mh(i,e){const n=cv(e);for(const o of i.elements)n.some(u=>Co(u,o))||n.push(o);return{arrayValue:{values:n}}}class Pl extends Id{constructor(e){super(),this.elements=e}}function av(i,e){let n=cv(e);for(const o of i.elements)n=n.filter(u=>!Co(u,o));return{arrayValue:{values:n}}}class Ec extends Id{constructor(e,n){super(),this.serializer=e,this.gt=n}}function uv(i){return wi(i.integerValue||i.doubleValue)}function cv(i){return Va(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class Nh{constructor(e,n){this.field=e,this.transform=n}}class bE{constructor(e,n){this.version=e,this.transformResults=n}}class Ds{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ds}static exists(e){return new Ds(void 0,e)}static updateTime(e){return new Ds(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Xc(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class Jc{}function Hf(i,e){if(!i.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return i.isNoDocument()?new Ll(i.key,Ds.none()):new el(i.key,i.data,Ds.none());{const n=i.data,o=fo.empty();let u=new Ui(tr.comparator);for(let l of e.fields)if(!u.has(l)){let f=n.field(l);null===f&&l.length>1&&(l=l.popLast(),f=n.field(l)),null===f?o.delete(l):o.set(l,f),u=u.add(l)}return new su(i.key,o,new Wo(u.toArray()),Ds.none())}}function zg(i,e,n){i instanceof el?function(o,u,l){const f=o.value.clone(),T=Cd(o.fieldTransforms,u,l.transformResults);f.setAll(T),u.convertToFoundDocument(l.version,f).setHasCommittedMutations()}(i,e,n):i instanceof su?function(o,u,l){if(!Xc(o.precondition,u))return void u.convertToUnknownDocument(l.version);const f=Cd(o.fieldTransforms,u,l.transformResults),T=u.data;T.setAll(Dd(o)),T.setAll(f),u.convertToFoundDocument(l.version,T).setHasCommittedMutations()}(i,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function kl(i,e,n,o){return i instanceof el?function(u,l,f,T){if(!Xc(u.precondition,l))return f;const P=u.value.clone(),V=Gg(u.fieldTransforms,T,l);return P.setAll(V),l.convertToFoundDocument(l.version,P).setHasLocalMutations(),null}(i,e,n,o):i instanceof su?function(u,l,f,T){if(!Xc(u.precondition,l))return f;const P=Gg(u.fieldTransforms,T,l),V=l.data;return V.setAll(Dd(u)),V.setAll(P),l.convertToFoundDocument(l.version,V).setHasLocalMutations(),null===f?null:f.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(ne=>ne.field))}(i,e,n,o):(f=n,Xc(i.precondition,l=e)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):f);var l,f}function Fl(i,e){let n=null;for(const o of i.fieldTransforms){const u=e.data.field(o.field),l=ov(o.transform,u||null);null!=l&&(null===n&&(n=fo.empty()),n.set(o.field,l))}return n||null}function zf(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(o=e.fieldTransforms,!!(void 0===(n=i.fieldTransforms)&&void 0===o||n&&o&&ya(n,o,(u,l)=>function CE(i,e){return i.field.isEqual(e.field)&&(o=e.transform,(n=i.transform)instanceof Qc&&o instanceof Qc||n instanceof Pl&&o instanceof Pl?ya(n.elements,o.elements,Co):n instanceof Ec&&o instanceof Ec?Co(n.gt,o.gt):n instanceof Ol&&o instanceof Ol);var n,o}(u,l))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var n,o}class el extends Jc{constructor(e,n,o,u=[]){super(),this.key=e,this.value=n,this.precondition=o,this.fieldTransforms=u,this.type=0}getFieldMask(){return null}}class su extends Jc{constructor(e,n,o,u,l=[]){super(),this.key=e,this.data=n,this.fieldMask=o,this.precondition=u,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Dd(i){const e=new Map;return i.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const o=i.data.field(n);e.set(n,o)}}),e}function Cd(i,e,n){const o=new Map;zt(i.length===n.length);for(let u=0;u<n.length;u++){const l=i[u],f=l.transform,T=e.data.field(l.field);o.set(l.field,Hg(f,T,n[u]))}return o}function Gg(i,e,n){const o=new Map;for(const u of i){const l=u.transform,f=n.data.field(u.field);o.set(u.field,DE(l,f,e))}return o}class Ll extends Jc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Gf extends Jc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class xh{constructor(e,n,o,u){this.batchId=e,this.localWriteTime=n,this.baseMutations=o,this.mutations=u}applyToRemoteDocument(e,n){const o=n.mutationResults;for(let u=0;u<this.mutations.length;u++){const l=this.mutations[u];l.key.isEqual(e.key)&&zg(l,e,o[u])}}applyToLocalView(e,n){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(n=kl(o,e,n,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(n=kl(o,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const o=Ah();return this.mutations.forEach(u=>{const l=e.get(u.key),f=l.overlayedDocument;let T=this.applyToLocalView(f,l.mutatedFields);T=n.has(u.key)?null:T;const P=Hf(f,T);null!==P&&o.set(u.key,P),f.isValidDocument()||f.convertToNoDocument(hn.min())}),o}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ur())}isEqual(e){return this.batchId===e.batchId&&ya(this.mutations,e.mutations,(n,o)=>zf(n,o))&&ya(this.baseMutations,e.baseMutations,(n,o)=>zf(n,o))}}class bd{constructor(e,n,o,u){this.batch=e,this.commitVersion=n,this.mutationResults=o,this.docVersions=u}static from(e,n,o){zt(e.mutations.length===o.length);let u=vd;const l=e.mutations;for(let f=0;f<l.length;f++)u=u.insert(l[f].key,o[f].version);return new bd(e,n,o,u)}}class Wf{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class dv{constructor(e,n){this.count=e,this.unchangedNames=n}}var io,Xr;function Wg(i){switch(i){default:return Bt();case Ue.CANCELLED:case Ue.UNKNOWN:case Ue.DEADLINE_EXCEEDED:case Ue.RESOURCE_EXHAUSTED:case Ue.INTERNAL:case Ue.UNAVAILABLE:case Ue.UNAUTHENTICATED:return!1;case Ue.INVALID_ARGUMENT:case Ue.NOT_FOUND:case Ue.ALREADY_EXISTS:case Ue.PERMISSION_DENIED:case Ue.FAILED_PRECONDITION:case Ue.ABORTED:case Ue.OUT_OF_RANGE:case Ue.UNIMPLEMENTED:case Ue.DATA_LOSS:return!0}}function Aa(i){if(void 0===i)return Mr("GRPC error has no .code"),Ue.UNKNOWN;switch(i){case io.OK:return Ue.OK;case io.CANCELLED:return Ue.CANCELLED;case io.UNKNOWN:return Ue.UNKNOWN;case io.DEADLINE_EXCEEDED:return Ue.DEADLINE_EXCEEDED;case io.RESOURCE_EXHAUSTED:return Ue.RESOURCE_EXHAUSTED;case io.INTERNAL:return Ue.INTERNAL;case io.UNAVAILABLE:return Ue.UNAVAILABLE;case io.UNAUTHENTICATED:return Ue.UNAUTHENTICATED;case io.INVALID_ARGUMENT:return Ue.INVALID_ARGUMENT;case io.NOT_FOUND:return Ue.NOT_FOUND;case io.ALREADY_EXISTS:return Ue.ALREADY_EXISTS;case io.PERMISSION_DENIED:return Ue.PERMISSION_DENIED;case io.FAILED_PRECONDITION:return Ue.FAILED_PRECONDITION;case io.ABORTED:return Ue.ABORTED;case io.OUT_OF_RANGE:return Ue.OUT_OF_RANGE;case io.UNIMPLEMENTED:return Ue.UNIMPLEMENTED;case io.DATA_LOSS:return Ue.DATA_LOSS;default:return Bt()}}(Xr=io||(io={}))[Xr.OK=0]="OK",Xr[Xr.CANCELLED=1]="CANCELLED",Xr[Xr.UNKNOWN=2]="UNKNOWN",Xr[Xr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xr[Xr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xr[Xr.NOT_FOUND=5]="NOT_FOUND",Xr[Xr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xr[Xr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xr[Xr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xr[Xr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xr[Xr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xr[Xr.ABORTED=10]="ABORTED",Xr[Xr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xr[Xr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xr[Xr.INTERNAL=13]="INTERNAL",Xr[Xr.UNAVAILABLE=14]="UNAVAILABLE",Xr[Xr.DATA_LOSS=15]="DATA_LOSS";class Td{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Sd}static getOrCreateInstance(){return null===Sd&&(Sd=new Td),Sd}onExistenceFilterMismatch(e){const n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),()=>this.onExistenceFilterMismatchCallbacks.delete(n)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(n=>n(e))}}let Sd=null;function Rh(){return new TextEncoder}const aa=new rr([4294967295,4294967295],0);function Vl(i){const e=Rh().encode(i),n=new Or;return n.update(e),new Uint8Array(n.digest())}function qf(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),o=e.getUint32(4,!0),u=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new rr([n,o],0),new rr([u,l],0)]}class Oh{constructor(e,n,o){if(this.bitmap=e,this.padding=n,this.hashCount=o,n<0||n>=8)throw new Ad(`Invalid padding: ${n}`);if(o<0)throw new Ad(`Invalid hash count: ${o}`);if(e.length>0&&0===this.hashCount)throw new Ad(`Invalid hash count: ${o}`);if(0===e.length&&0!==n)throw new Ad(`Invalid padding when bitmap length is 0: ${n}`);this.It=8*e.length-n,this.Tt=rr.fromNumber(this.It)}Et(e,n,o){let u=e.add(n.multiply(rr.fromNumber(o)));return 1===u.compare(aa)&&(u=new rr([u.getBits(0),u.getBits(1)],0)),u.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const n=Vl(e),[o,u]=qf(n);for(let l=0;l<this.hashCount;l++){const f=this.Et(o,u,l);if(!this.At(f))return!1}return!0}static create(e,n,o){const u=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),f=new Oh(l,u,n);return o.forEach(T=>f.insert(T)),f}insert(e){if(0===this.It)return;const n=Vl(e),[o,u]=qf(n);for(let l=0;l<this.hashCount;l++){const f=this.Et(o,u,l);this.Rt(f)}}Rt(e){const n=Math.floor(e/8);this.bitmap[n]|=1<<e%8}}class Ad extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Bl{constructor(e,n,o,u,l){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=o,this.documentUpdates=u,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,n,o){const u=new Map;return u.set(e,Md.createSynthesizedTargetChangeForCurrentChange(e,n,o)),new Bl(hn.min(),u,new ri(On),Zo(),ur())}}class Md{constructor(e,n,o,u,l){this.resumeToken=e,this.current=n,this.addedDocuments=o,this.modifiedDocuments=u,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,n,o){return new Md(o,n,ur(),ur(),ur())}}class Nd{constructor(e,n,o,u){this.Pt=e,this.removedTargetIds=n,this.key=o,this.bt=u}}class qg{constructor(e,n){this.targetId=e,this.Vt=n}}class Kf{constructor(e,n,o=hs.EMPTY_BYTE_STRING,u=null){this.state=e,this.targetIds=n,this.resumeToken=o,this.cause=u}}class Kg{constructor(){this.St=0,this.Dt=kh(),this.Ct=hs.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=ur(),n=ur(),o=ur();return this.Dt.forEach((u,l)=>{switch(l){case 0:e=e.add(u);break;case 2:n=n.add(u);break;case 1:o=o.add(u);break;default:Bt()}}),new Md(this.Ct,this.xt,e,n,o)}Ft(){this.Nt=!1,this.Dt=kh()}Bt(e,n){this.Nt=!0,this.Dt=this.Dt.insert(e,n)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class hv{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Zo(),this.zt=Ph(),this.Wt=new ri(On)}Ht(e){for(const n of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(n,e.bt):this.Yt(n,e.key,e.bt);for(const n of e.removedTargetIds)this.Yt(n,e.key,e.bt)}Xt(e){this.forEachTarget(e,n=>{const o=this.Zt(n);switch(e.state){case 0:this.te(n)&&o.$t(e.resumeToken);break;case 1:o.Ut(),o.kt||o.Ft(),o.$t(e.resumeToken);break;case 2:o.Ut(),o.kt||this.removeTarget(n);break;case 3:this.te(n)&&(o.Kt(),o.$t(e.resumeToken));break;case 4:this.te(n)&&(this.ee(n),o.$t(e.resumeToken));break;default:Bt()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Qt.forEach((o,u)=>{this.te(u)&&n(u)})}ne(e){var n;const o=e.targetId,u=e.Vt.count,l=this.se(o);if(l){const f=l.target;if(Zc(f))if(0===u){const T=new Ot(f.path);this.Yt(o,T,li.newNoDocument(T,hn.min()))}else zt(1===u);else{const T=this.ie(o);if(T!==u){const P=this.re(e,T);0!==P&&(this.ee(o),this.Wt=this.Wt.insert(o,2===P?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(n=Td.instance)||void 0===n||n.notifyOnExistenceFilterMismatch(function(V,ne,ge){var Le,it,St,Gt,Wt,yr;const Jr={localCacheCount:ne,existenceFilterCount:ge.count},Ir=ge.unchangedNames;return Ir&&(Jr.bloomFilter={applied:0===V,hashCount:null!==(Le=Ir?.hashCount)&&void 0!==Le?Le:0,bitmapLength:null!==(Gt=null===(St=null===(it=Ir?.bits)||void 0===it?void 0:it.bitmap)||void 0===St?void 0:St.length)&&void 0!==Gt?Gt:0,padding:null!==(yr=null===(Wt=Ir?.bits)||void 0===Wt?void 0:Wt.padding)&&void 0!==yr?yr:0}),Jr}(P,T,e.Vt))}}}}re(e,n){const{unchangedNames:o,count:u}=e.Vt;if(!o||!o.bits)return 1;const{bits:{bitmap:l="",padding:f=0},hashCount:T=0}=o;let P,V;try{P=nu(l).toUint8Array()}catch(ne){if(ne instanceof Zu)return Si("Decoding the base64 bloom filter in existence filter failed ("+ne.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw ne}try{V=new Oh(P,f,T)}catch(ne){return Si(ne instanceof Ad?"BloomFilter error: ":"Applying bloom filter failed: ",ne),1}return 0===V.It?1:u!==n-this.oe(e.targetId,V)?2:0}oe(e,n){const o=this.Gt.getRemoteKeysForTarget(e);let u=0;return o.forEach(l=>{const f=this.Gt.ue(),T=`projects/${f.projectId}/databases/${f.database}/documents/${l.path.canonicalString()}`;n.vt(T)||(this.Yt(e,l,null),u++)}),u}ce(e){const n=new Map;this.Qt.forEach((l,f)=>{const T=this.se(f);if(T){if(l.current&&Zc(T.target)){const P=new Ot(T.target.path);null!==this.jt.get(P)||this.ae(f,P)||this.Yt(f,P,li.newNoDocument(P,e))}l.Mt&&(n.set(f,l.Ot()),l.Ft())}});let o=ur();this.zt.forEach((l,f)=>{let T=!0;f.forEachWhile(P=>{const V=this.se(P);return!V||"TargetPurposeLimboResolution"===V.purpose||(T=!1,!1)}),T&&(o=o.add(l))}),this.jt.forEach((l,f)=>f.setReadTime(e));const u=new Bl(e,n,this.Wt,this.jt,o);return this.jt=Zo(),this.zt=Ph(),this.Wt=new ri(On),u}Jt(e,n){if(!this.te(e))return;const o=this.ae(e,n.key)?2:0;this.Zt(e).Bt(n.key,o),this.jt=this.jt.insert(n.key,n),this.zt=this.zt.insert(n.key,this.he(n.key).add(e))}Yt(e,n,o){if(!this.te(e))return;const u=this.Zt(e);this.ae(e,n)?u.Bt(n,1):u.Lt(n),this.zt=this.zt.insert(n,this.he(n).delete(e)),o&&(this.jt=this.jt.insert(n,o))}removeTarget(e){this.Qt.delete(e)}ie(e){const n=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let n=this.Qt.get(e);return n||(n=new Kg,this.Qt.set(e,n)),n}he(e){let n=this.zt.get(e);return n||(n=new Ui(On),this.zt=this.zt.insert(e,n)),n}te(e){const n=null!==this.se(e);return n||dt("WatchChangeAggregator","Detected inactive target",e),n}se(e){const n=this.Qt.get(e);return n&&n.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new Kg),this.Gt.getRemoteKeysForTarget(e).forEach(n=>{this.Yt(e,n,null)})}ae(e,n){return this.Gt.getRemoteKeysForTarget(e).has(n)}}function Ph(){return new ri(Ot.comparator)}function kh(){return new ri(Ot.comparator)}const fv={asc:"ASCENDING",desc:"DESCENDING"},xd={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},pv={and:"AND",or:"OR"};class gv{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Fh(i,e){return i.useProto3Json||Ei(e)?e:{value:e}}function tl(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Zf(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function Ul(i,e){return tl(i,e.toTimestamp())}function Cs(i){return zt(!!i),hn.fromTimestamp(function(e){const n=ka(e);return new Kr(n.seconds,n.nanos)}(i))}function Lh(i,e){return(n=i,new on(["projects",n.projectId,"databases",n.database])).child("documents").child(e).canonicalString();var n}function Vh(i){const e=on.fromString(i);return zt(Hh(e)),e}function wc(i,e){return Lh(i.databaseId,e.path)}function xu(i,e){const n=Vh(e);if(n.get(1)!==i.databaseId.projectId)throw new ot(Ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new ot(Ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new Ot(Yg(n))}function Yf(i,e){return Lh(i.databaseId,e)}function Zg(i){const e=Vh(i);return 4===e.length?on.emptyPath():Yg(e)}function Rd(i){return new on(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function Yg(i){return zt(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function Qg(i,e,n){return{name:wc(i,e),fields:n.value.mapValue.fields}}function Qf(i,e,n){const o=xu(i,e.name),u=Cs(e.updateTime),l=e.createTime?Cs(e.createTime):hn.min(),f=new fo({mapValue:{fields:e.fields}}),T=li.newFoundDocument(o,u,l,f);return n&&T.setHasCommittedMutations(),n?T.setHasCommittedMutations():T}function nl(i,e){let n;if(e instanceof el)n={update:Qg(i,e.key,e.value)};else if(e instanceof Ll)n={delete:wc(i,e.key)};else if(e instanceof su)n={update:Qg(i,e.key,e.data),updateMask:Jg(e.fieldMask)};else{if(!(e instanceof Gf))return Bt();n={verify:wc(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(o=>function(u,l){const f=l.transform;if(f instanceof Ol)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Qc)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Pl)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Ec)return{fieldPath:l.field.canonicalString(),increment:f.gt};throw Bt()}(0,o))),e.precondition.isNone||(n.currentDocument=void 0!==(u=e.precondition).updateTime?{updateTime:Ul(i,u.updateTime)}:void 0!==u.exists?{exists:u.exists}:Bt()),n;var u}function Jf(i,e){const n=e.currentDocument?void 0!==(u=e.currentDocument).updateTime?Ds.updateTime(Cs(u.updateTime)):void 0!==u.exists?Ds.exists(u.exists):Ds.none():Ds.none(),o=e.updateTransforms?e.updateTransforms.map(u=>function(l,f){let T=null;"setToServerValue"in f?(zt("REQUEST_TIME"===f.setToServerValue),T=new Ol):"appendMissingElements"in f?T=new Qc(f.appendMissingElements.values||[]):"removeAllFromArray"in f?T=new Pl(f.removeAllFromArray.values||[]):"increment"in f?T=new Ec(l,f.increment):Bt();const P=tr.fromServerFormat(f.fieldPath);return new Nh(P,T)}(i,u)):[];var u;if(e.update){const u=xu(i,e.update.name),l=new fo({mapValue:{fields:e.update.fields}});if(e.updateMask){const f=new Wo((e.updateMask.fieldPaths||[]).map(V=>tr.fromServerFormat(V)));return new su(u,l,f,n,o)}return new el(u,l,n,o)}if(e.delete){const u=xu(i,e.delete);return new Ll(u,n)}if(e.verify){const u=xu(i,e.verify);return new Gf(u,n)}return Bt()}function Uh(i,e){return{documents:[Yf(i,e.path)]}}function jh(i,e){const n={structuredQuery:{}},o=e.path;null!==e.collectionGroup?(n.parent=Yf(i,o),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Yf(i,o.popLast()),n.structuredQuery.from=[{collectionId:o.lastSegment()}]);const u=function(P){if(0!==P.length)return tp(ye.create(P,"and"))}(e.filters);u&&(n.structuredQuery.where=u);const l=function(P){if(0!==P.length)return P.map(V=>{return{field:Dc((ne=V).field),direction:yv(ne.dir)};var ne})}(e.orderBy);l&&(n.structuredQuery.orderBy=l);const f=Fh(i,e.limit);var T,P;return null!==f&&(n.structuredQuery.limit=f),e.startAt&&(n.structuredQuery.startAt={before:(T=e.startAt).inclusive,values:T.position}),e.endAt&&(n.structuredQuery.endAt={before:!(P=e.endAt).inclusive,values:P.position}),n}function Ic(i){let e=Zg(i.parent);const n=i.structuredQuery,o=n.from?n.from.length:0;let u=null;if(o>0){zt(1===o);const ne=n.from[0];ne.allDescendants?u=ne.collectionId:e=e.child(ne.collectionId)}let l=[];n.where&&(l=function(ne){const ge=ep(ne);return ge instanceof ye&&jt(ge)?ge.getFilters():[ge]}(n.where));let f=[];n.orderBy&&(f=n.orderBy.map(ne=>{return new D(rl((ge=ne).field),function(Le){switch(Le){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(ge.direction));var ge}));let T=null;n.limit&&(T=function(ne){let ge;return ge="object"==typeof ne?ne.value:ne,Ei(ge)?null:ge}(n.limit));let P=null;var ne;n.startAt&&(P=new Ko((ne=n.startAt).values||[],!!ne.before));let V=null;return n.endAt&&(V=function(ne){return new Ko(ne.values||[],!ne.before)}(n.endAt)),Uf(e,u,f,l,T,"F",P,V)}function ep(i){return void 0!==i.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=rl(e.unaryFilter.field);return se.create(n,"==",{doubleValue:NaN});case"IS_NULL":const o=rl(e.unaryFilter.field);return se.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=rl(e.unaryFilter.field);return se.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=rl(e.unaryFilter.field);return se.create(l,"!=",{nullValue:"NULL_VALUE"});default:return Bt()}}(i):void 0!==i.fieldFilter?se.create(rl((e=i).fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Bt()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==i.compositeFilter?function(e){return ye.create(e.compositeFilter.filters.map(n=>ep(n)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return Bt()}}(e.compositeFilter.op))}(i):Bt();var e}function yv(i){return fv[i]}function TE(i){return xd[i]}function $h(i){return pv[i]}function Dc(i){return{fieldPath:i.canonicalString()}}function rl(i){return tr.fromServerFormat(i.fieldPath)}function tp(i){return i instanceof se?function(e){if("=="===e.op){if(Gc(e.value))return{unaryFilter:{field:Dc(e.field),op:"IS_NAN"}};if(vc(e.value))return{unaryFilter:{field:Dc(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Gc(e.value))return{unaryFilter:{field:Dc(e.field),op:"IS_NOT_NAN"}};if(vc(e.value))return{unaryFilter:{field:Dc(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Dc(e.field),op:TE(e.op),value:e.value}}}(i):i instanceof ye?function(e){const n=e.getFilters().map(o=>tp(o));return 1===n.length?n[0]:{compositeFilter:{op:$h(e.op),filters:n}}}(i):Bt()}function Jg(i){const e=[];return i.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Hh(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}class Ru{constructor(e,n,o,u,l=hn.min(),f=hn.min(),T=hs.EMPTY_BYTE_STRING,P=null){this.target=e,this.targetId=n,this.purpose=o,this.sequenceNumber=u,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=T,this.expectedCount=P}withSequenceNumber(e){return new Ru(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ru(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ru(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ru(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Od{constructor(e){this.fe=e}}function np(i,e){const n=e.key,o={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:jl(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())o.document={name:wc(u=i.fe,(l=e).key),fields:l.data.value.mapValue.fields,updateTime:tl(u,l.version.toTimestamp()),createTime:tl(u,l.createTime.toTimestamp())};else if(e.isNoDocument())o.noDocument={path:n.path.toArray(),readTime:Ou(e.version)};else{if(!e.isUnknownDocument())return Bt();o.unknownDocument={path:n.path.toArray(),version:Ou(e.version)}}var u,l;return o}function jl(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function Ou(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Cc(i){const e=new Kr(i.seconds,i.nanoseconds);return hn.fromTimestamp(e)}function nc(i,e){const n=(e.baseMutations||[]).map(l=>Jf(i.fe,l));for(let l=0;l<e.mutations.length-1;++l)l+1<e.mutations.length&&void 0!==e.mutations[l+1].transform&&(e.mutations[l].updateTransforms=e.mutations[l+1].transform.fieldTransforms,e.mutations.splice(l+1,1),++l);const o=e.mutations.map(l=>Jf(i.fe,l)),u=Kr.fromMillis(e.localWriteTimeMs);return new xh(e.batchId,u,n,o)}function rc(i){const e=Cc(i.readTime),n=void 0!==i.lastLimboFreeSnapshotVersion?Cc(i.lastLimboFreeSnapshotVersion):hn.min();let o;var u;return void 0!==i.query.documents?(zt(1===(u=i.query).documents.length),o=b(Nu(Zg(u.documents[0])))):o=b(Ic(i.query)),new Ru(o,i.targetId,"TargetPurposeListen",i.lastListenSequenceNumber,e,n,hs.fromBase64String(i.resumeToken))}function em(i,e){const n=Ou(e.snapshotVersion),o=Ou(e.lastLimboFreeSnapshotVersion);let u;u=Zc(e.target)?Uh(i.fe,e.target):jh(i.fe,e.target);const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:iu(e.target),readTime:n,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:o,query:u}}function zh(i){const e=Ic({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?re(e,e.limit,"L"):e}function rp(i,e){return new Wf(e.largestBatchId,Jf(i.fe,e.overlayMutation))}function tm(i,e){const n=e.path.lastSegment();return[i,_(e.path.popLast()),n]}function nm(i,e,n,o){return{indexId:i,uid:e.uid||"",sequenceNumber:n,readTime:Ou(o.readTime),documentKey:_(o.documentKey.path),largestBatchId:o.largestBatchId}}class rm{getBundleMetadata(e,n){return ip(e).get(n).next(o=>{if(o)return{id:(u=o).bundleId,createTime:Cc(u.createTime),version:u.version};var u})}saveBundleMetadata(e,n){return ip(e).put({bundleId:(o=n).id,createTime:Ou(Cs(o.createTime)),version:o.version});var o}getNamedQuery(e,n){return kd(e).get(n).next(o=>{if(o)return{name:(u=o).name,query:zh(u.bundledQuery),readTime:Cc(u.readTime)};var u})}saveNamedQuery(e,n){return kd(e).put({name:(o=n).name,readTime:Ou(Cs(o.readTime)),bundledQuery:o.bundledQuery});var o}}function ip(i){return js(i,"bundles")}function kd(i){return js(i,"namedQueries")}class $l{constructor(e,n){this.serializer=e,this.userId=n}static de(e,n){return new $l(e,n.uid||"")}getOverlay(e,n){return Pu(e).get(tm(this.userId,n)).next(o=>o?rp(this.serializer,o):null)}getOverlays(e,n){const o=ja();return Q.forEach(n,u=>this.getOverlay(e,u).next(l=>{null!==l&&o.set(u,l)})).next(()=>o)}saveOverlays(e,n,o){const u=[];return o.forEach((l,f)=>{const T=new Wf(n,f);u.push(this.we(e,T))}),Q.waitFor(u)}removeOverlaysForBatchId(e,n,o){const u=new Set;n.forEach(f=>u.add(_(f.getCollectionPath())));const l=[];return u.forEach(f=>{const T=IDBKeyRange.bound([this.userId,f,o],[this.userId,f,o+1],!1,!0);l.push(Pu(e).J("collectionPathOverlayIndex",T))}),Q.waitFor(l)}getOverlaysForCollection(e,n,o){const u=ja(),l=_(n),f=IDBKeyRange.bound([this.userId,l,o],[this.userId,l,Number.POSITIVE_INFINITY],!0);return Pu(e).j("collectionPathOverlayIndex",f).next(T=>{for(const P of T){const V=rp(this.serializer,P);u.set(V.getKey(),V)}return u})}getOverlaysForCollectionGroup(e,n,o,u){const l=ja();let f;const T=IDBKeyRange.bound([this.userId,n,o],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Pu(e).X({index:"collectionGroupOverlayIndex",range:T},(P,V,ne)=>{const ge=rp(this.serializer,V);l.size()<u||ge.largestBatchId===f?(l.set(ge.getKey(),ge),f=ge.largestBatchId):ne.done()}).next(()=>l)}we(e,n){return Pu(e).put(function(o,u,l){const[f,T,P]=tm(u,l.mutation.key);return{userId:u,collectionPath:T,documentId:P,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:nl(o.fe,l.mutation)}}(this.serializer,this.userId,n))}}function Pu(i){return js(i,"documentOverlays")}class il{constructor(){}_e(e,n){this.me(e,n),n.ge()}me(e,n){if("nullValue"in e)this.ye(n,5);else if("booleanValue"in e)this.ye(n,10),n.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(n,15),n.pe(wi(e.integerValue));else if("doubleValue"in e){const o=wi(e.doubleValue);isNaN(o)?this.ye(n,13):(this.ye(n,15),lo(o)?n.pe(0):n.pe(o))}else if("timestampValue"in e){const o=e.timestampValue;this.ye(n,20),"string"==typeof o?n.Ie(o):(n.Ie(`${o.seconds||""}`),n.pe(o.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,n),this.Ee(n);else if("bytesValue"in e)this.ye(n,30),n.Ae(nu(e.bytesValue)),this.Ee(n);else if("referenceValue"in e)this.ve(e.referenceValue,n);else if("geoPointValue"in e){const o=e.geoPointValue;this.ye(n,45),n.pe(o.latitude||0),n.pe(o.longitude||0)}else"mapValue"in e?Ml(e)?this.ye(n,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,n),this.Ee(n)):"arrayValue"in e?(this.Pe(e.arrayValue,n),this.Ee(n)):Bt()}Te(e,n){this.ye(n,25),this.be(e,n)}be(e,n){n.Ie(e)}Re(e,n){const o=e.fields||{};this.ye(n,55);for(const u of Object.keys(o))this.Te(u,n),this.me(o[u],n)}Pe(e,n){const o=e.values||[];this.ye(n,50);for(const u of o)this.me(u,n)}ve(e,n){this.ye(n,37),Ot.fromName(e).path.forEach(o=>{this.ye(n,60),this.be(o,n)})}ye(e,n){e.pe(n)}Ee(e){e.pe(2)}}function vv(i){if(0===i)return 8;let e=0;return!(i>>4)&&(e+=4,i<<=4),!(i>>6)&&(e+=2,i<<=2),!(i>>7)&&(e+=1),e}function _v(i){const e=64-function(n){let o=0;for(let u=0;u<8;++u){const l=vv(255&n[u]);if(o+=l,8!==l)break}return o}(i);return Math.ceil(e/8)}il.Ve=new il;class Ev{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const n=e[Symbol.iterator]();let o=n.next();for(;!o.done;)this.De(o.value),o=n.next();this.Ce()}xe(e){const n=e[Symbol.iterator]();let o=n.next();for(;!o.done;)this.Ne(o.value),o=n.next();this.ke()}Me(e){for(const n of e){const o=n.charCodeAt(0);if(o<128)this.De(o);else if(o<2048)this.De(960|o>>>6),this.De(128|63&o);else if(n<"\ud800"||"\udbff"<n)this.De(480|o>>>12),this.De(128|63&o>>>6),this.De(128|63&o);else{const u=n.codePointAt(0);this.De(240|u>>>18),this.De(128|63&u>>>12),this.De(128|63&u>>>6),this.De(128|63&u)}}this.Ce()}$e(e){for(const n of e){const o=n.charCodeAt(0);if(o<128)this.Ne(o);else if(o<2048)this.Ne(960|o>>>6),this.Ne(128|63&o);else if(n<"\ud800"||"\udbff"<n)this.Ne(480|o>>>12),this.Ne(128|63&o>>>6),this.Ne(128|63&o);else{const u=n.codePointAt(0);this.Ne(240|u>>>18),this.Ne(128|63&u>>>12),this.Ne(128|63&u>>>6),this.Ne(128|63&u)}}this.ke()}Oe(e){const n=this.Fe(e),o=_v(n);this.Be(1+o),this.buffer[this.position++]=255&o;for(let u=n.length-o;u<n.length;++u)this.buffer[this.position++]=255&n[u]}Le(e){const n=this.Fe(e),o=_v(n);this.Be(1+o),this.buffer[this.position++]=~(255&o);for(let u=n.length-o;u<n.length;++u)this.buffer[this.position++]=~(255&n[u])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const n=function(u){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,u,!1),new Uint8Array(l.buffer)}(e),o=0!=(128&n[0]);n[0]^=o?255:128;for(let u=1;u<n.length;++u)n[u]^=o?255:0;return n}De(e){const n=255&e;0===n?(this.Ue(0),this.Ue(255)):255===n?(this.Ue(255),this.Ue(0)):this.Ue(n)}Ne(e){const n=255&e;0===n?(this.Ge(0),this.Ge(255)):255===n?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const n=e+this.position;if(n<=this.buffer.length)return;let o=2*this.buffer.length;o<n&&(o=n);const u=new Uint8Array(o);u.set(this.buffer),this.buffer=u}}class sp{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class wv{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class ku{constructor(){this.je=new Ev,this.ze=new sp(this.je),this.We=new wv(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class Fu{constructor(e,n,o,u){this.indexId=e,this.documentKey=n,this.arrayValue=o,this.directionalValue=u}Je(){const e=this.directionalValue.length,n=0===e||255===this.directionalValue[e-1]?e+1:e,o=new Uint8Array(n);return o.set(this.directionalValue,0),n!==e?o.set([0],this.directionalValue.length):++o[o.length-1],new Fu(this.indexId,this.documentKey,this.arrayValue,o)}}function Lu(i,e){let n=i.indexId-e.indexId;return 0!==n?n:(n=op(i.arrayValue,e.arrayValue),0!==n?n:(n=op(i.directionalValue,e.directionalValue),0!==n?n:Ot.comparator(i.documentKey,e.documentKey)))}function op(i,e){for(let n=0;n<i.length&&n<e.length;++n){const o=i[n]-e[n];if(0!==o)return o}return i.length-e.length}class im{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const n of e.filters){const o=n;o.isInequality()?this.Ze=o:this.Xe.push(o)}}tn(e){zt(e.collectionGroup===this.collectionId);const n=Pa(e);if(void 0!==n&&!this.en(n))return!1;const o=Ea(e);let u=new Set,l=0,f=0;for(;l<o.length&&this.en(o[l]);++l)u=u.add(o[l].fieldPath.canonicalString());if(l===o.length)return!0;if(void 0!==this.Ze){if(!u.has(this.Ze.field.canonicalString())){const T=o[l];if(!this.nn(this.Ze,T)||!this.sn(this.Ye[f++],T))return!1}++l}for(;l<o.length;++l)if(f>=this.Ye.length||!this.sn(this.Ye[f++],o[l]))return!1;return!0}en(e){for(const n of this.Xe)if(this.nn(n,e))return!0;return!1}nn(e,n){return!(void 0===e||!e.field.isEqual(n.fieldPath))&&2===n.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(0===n.kind&&"asc"===e.dir||1===n.kind&&"desc"===e.dir)}}function ap(i){var e,n;if(zt(i instanceof se||i instanceof ye),i instanceof se){if(i instanceof es){const u=(null===(n=null===(e=i.value.arrayValue)||void 0===e?void 0:e.values)||void 0===n?void 0:n.map(l=>se.create(i.field,"==",l)))||[];return ye.create(u,"or")}return i}const o=i.filters.map(u=>ap(u));return ye.create(o,i.op)}function sl(i){if(0===i.getFilters().length)return[];const e=lp(ap(i));return zt(sm(e)),up(e)||cp(e)?[e]:e.getFilters()}function up(i){return i instanceof se}function cp(i){return i instanceof ye&&jt(i)}function sm(i){return up(i)||cp(i)||function(e){if(e instanceof ye&&tt(e)){for(const n of e.getFilters())if(!up(n)&&!cp(n))return!1;return!0}return!1}(i)}function lp(i){if(zt(i instanceof se||i instanceof ye),i instanceof se)return i;if(1===i.filters.length)return lp(i.filters[0]);const e=i.filters.map(o=>lp(o));let n=ye.create(e,i.op);return n=ic(n),sm(n)?n:(zt(n instanceof ye),zt(Ae(n)),zt(n.filters.length>1),n.filters.reduce((o,u)=>dp(o,u)))}function dp(i,e){let n;return zt(i instanceof se||i instanceof ye),zt(e instanceof se||e instanceof ye),n=i instanceof se?e instanceof se?ye.create([i,e],"and"):Vu(i,e):e instanceof se?Vu(e,i):function(o,u){if(zt(o.filters.length>0&&u.filters.length>0),Ae(o)&&Ae(u))return Sn(o,u.getFilters());const l=tt(o)?o:u,f=tt(o)?u:o,T=l.filters.map(P=>dp(P,f));return ye.create(T,"or")}(i,e),ic(n)}function Vu(i,e){if(Ae(e))return Sn(e,i.getFilters());{const n=e.filters.map(o=>dp(i,o));return ye.create(n,"or")}}function ic(i){if(zt(i instanceof se||i instanceof ye),i instanceof se)return i;const e=i.getFilters();if(1===e.length)return ic(e[0]);if(Lt(i))return i;const n=e.map(u=>ic(u)),o=[];return n.forEach(u=>{u instanceof se?o.push(u):u instanceof ye&&(u.op===i.op?o.push(...u.filters):o.push(u))}),1===o.length?o[0]:ye.create(o,i.op)}class Iv{constructor(){this.rn=new hp}addToCollectionParentIndex(e,n){return this.rn.add(n),Q.resolve()}getCollectionParents(e,n){return Q.resolve(this.rn.getEntries(n))}addFieldIndex(e,n){return Q.resolve()}deleteFieldIndex(e,n){return Q.resolve()}getDocumentsMatchingTarget(e,n){return Q.resolve(null)}getIndexType(e,n){return Q.resolve(0)}getFieldIndexes(e,n){return Q.resolve([])}getNextCollectionGroupToUpdate(e){return Q.resolve(null)}getMinOffset(e,n){return Q.resolve(y.min())}getMinOffsetFromCollectionGroup(e,n){return Q.resolve(y.min())}updateCollectionGroup(e,n,o){return Q.resolve()}updateIndexEntries(e,n){return Q.resolve()}}class hp{constructor(){this.index={}}add(e){const n=e.lastSegment(),o=e.popLast(),u=this.index[n]||new Ui(on.comparator),l=!u.has(o);return this.index[n]=u.add(o),l}has(e){const n=e.lastSegment(),o=e.popLast(),u=this.index[n];return u&&u.has(o)}getEntries(e){return(this.index[e]||new Ui(on.comparator)).toArray()}}const Gh=new Uint8Array(0);class Dv{constructor(e,n){this.user=e,this.databaseId=n,this.on=new hp,this.un=new ro(o=>iu(o),(o,u)=>Kc(o,u)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.on.has(n)){const o=n.lastSegment(),u=n.popLast();e.addOnCommittedListener(()=>{this.on.add(n)});const l={collectionId:o,parent:_(u)};return om(e).put(l)}return Q.resolve()}getCollectionParents(e,n){const o=[],u=IDBKeyRange.bound([n,""],[bn(n),""],!1,!0);return om(e).j(u).next(l=>{for(const f of l){if(f.collectionId!==n)break;o.push(A(f.parent))}return o})}addFieldIndex(e,n){const o=Ld(e),u={indexId:(f=n).indexId,collectionGroup:f.collectionGroup,fields:f.fields.map(T=>[T.fieldPath.canonicalString(),T.kind])};var f;delete u.indexId;const l=o.add(u);if(n.indexState){const f=Vd(e);return l.next(T=>{f.put(nm(T,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return l.next()}deleteFieldIndex(e,n){const o=Ld(e),u=Vd(e),l=Fd(e);return o.delete(n.indexId).next(()=>u.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>l.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,n){const o=Fd(e);let u=!0;const l=new Map;return Q.forEach(this.cn(n),f=>this.an(e,f).next(T=>{u&&(u=!!T),l.set(f,T)})).next(()=>{if(u){let f=ur();const T=[];return Q.forEach(l,(P,V)=>{var ne;dt("IndexedDbIndexManager",`Using index ${ne=P,`id=${ne.indexId}|cg=${ne.collectionGroup}|f=${ne.fields.map(Ir=>`${Ir.fieldPath}:${Ir.kind}`).join(",")}`} to execute ${iu(n)}`);const ge=function(Ir,ps){const zs=Pa(ps);if(void 0===zs)return null;for(const gs of md(Ir,zs.fieldPath))switch(gs.op){case"array-contains-any":return gs.value.arrayValue.values||[];case"array-contains":return[gs.value]}return null}(V,P),Le=function(Ir,ps){const zs=new Map;for(const gs of Ea(ps))for(const la of md(Ir,gs.fieldPath))switch(la.op){case"==":case"in":zs.set(gs.fieldPath.canonicalString(),la.value);break;case"not-in":case"!=":return zs.set(gs.fieldPath.canonicalString(),la.value),Array.from(zs.values())}return null}(V,P),it=function(Ir,ps){const zs=[];let gs=!0;for(const la of Ea(ps)){const fd=0===la.kind?sa(Ir,la.fieldPath,Ir.startAt):xl(Ir,la.fieldPath,Ir.startAt);zs.push(fd.value),gs&&(gs=fd.inclusive)}return new Ko(zs,gs)}(V,P),St=function(Ir,ps){const zs=[];let gs=!0;for(const la of Ea(ps)){const fd=0===la.kind?xl(Ir,la.fieldPath,Ir.endAt):sa(Ir,la.fieldPath,Ir.endAt);zs.push(fd.value),gs&&(gs=fd.inclusive)}return new Ko(zs,gs)}(V,P),Gt=this.hn(P,V,it),Wt=this.hn(P,V,St),yr=this.ln(P,V,Le),Jr=this.fn(P.indexId,ge,Gt,it.inclusive,Wt,St.inclusive,yr);return Q.forEach(Jr,Ir=>o.H(Ir,n.limit).next(ps=>{ps.forEach(zs=>{const gs=Ot.fromSegments(zs.documentKey);f.has(gs)||(f=f.add(gs),T.push(gs))})}))}).next(()=>T)}return Q.resolve(null)})}cn(e){let n=this.un.get(e);return n||(n=0===e.filters.length?[e]:sl(ye.create(e.filters,"and")).map(o=>Mu(e.path,e.collectionGroup,e.orderBy,o.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,n),n)}fn(e,n,o,u,l,f,T){const P=(null!=n?n.length:1)*Math.max(o.length,l.length),V=P/(null!=n?n.length:1),ne=[];for(let ge=0;ge<P;++ge){const Le=n?this.dn(n[ge/V]):Gh,it=this.wn(e,Le,o[ge%V],u),St=this._n(e,Le,l[ge%V],f),Gt=T.map(Wt=>this.wn(e,Le,Wt,!0));ne.push(...this.createRange(it,St,Gt))}return ne}wn(e,n,o,u){const l=new Fu(e,Ot.empty(),n,o);return u?l:l.Je()}_n(e,n,o,u){const l=new Fu(e,Ot.empty(),n,o);return u?l.Je():l}an(e,n){const o=new im(n),u=null!=n.collectionGroup?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,u).next(l=>{let f=null;for(const T of l)o.tn(T)&&(!f||T.fields.length>f.fields.length)&&(f=T);return f})}getIndexType(e,n){let o=2;const u=this.cn(n);return Q.forEach(u,l=>this.an(e,l).next(f=>{f?0!==o&&f.fields.length<function(T){let P=new Ui(tr.comparator),V=!1;for(const ne of T.filters)for(const ge of ne.getFlattenedFilters())ge.field.isKeyField()||("array-contains"===ge.op||"array-contains-any"===ge.op?V=!0:P=P.add(ge.field));for(const ne of T.orderBy)ne.field.isKeyField()||(P=P.add(ne.field));return P.size+(V?1:0)}(l)&&(o=1):o=0})).next(()=>null!==n.limit&&u.length>1&&2===o?1:o)}mn(e,n){const o=new ku;for(const u of Ea(e)){const l=n.data.field(u.fieldPath);if(null==l)return null;const f=o.He(u.kind);il.Ve._e(l,f)}return o.Qe()}dn(e){const n=new ku;return il.Ve._e(e,n.He(0)),n.Qe()}gn(e,n){const o=new ku;return il.Ve._e(Au(this.databaseId,n),o.He(function(u){const l=Ea(u);return 0===l.length?0:l[l.length-1].kind}(e))),o.Qe()}ln(e,n,o){if(null===o)return[];let u=[];u.push(new ku);let l=0;for(const f of Ea(e)){const T=o[l++];for(const P of u)if(this.yn(n,f.fieldPath)&&Va(T))u=this.pn(u,f,T);else{const V=P.He(f.kind);il.Ve._e(T,V)}}return this.In(u)}hn(e,n,o){return this.ln(e,n,o.position)}In(e){const n=[];for(let o=0;o<e.length;++o)n[o]=e[o].Qe();return n}pn(e,n,o){const u=[...e],l=[];for(const f of o.arrayValue.values||[])for(const T of u){const P=new ku;P.seed(T.Qe()),il.Ve._e(f,P.He(n.kind)),l.push(P)}return l}yn(e,n){return!!e.filters.find(o=>o instanceof se&&o.field.isEqual(n)&&("in"===o.op||"not-in"===o.op))}getFieldIndexes(e,n){const o=Ld(e),u=Vd(e);return(n?o.j("collectionGroupIndex",IDBKeyRange.bound(n,n)):o.j()).next(l=>{const f=[];return Q.forEach(l,T=>u.get([T.indexId,this.uid]).next(P=>{f.push(function(V,ne){const ge=ne?new sr(ne.sequenceNumber,new y(Cc(ne.readTime),new Ot(A(ne.documentKey)),ne.largestBatchId)):sr.empty(),Le=V.fields.map(([it,St])=>new Ja(tr.fromServerFormat(it),St));return new _a(V.indexId,V.collectionGroup,Le,ge)}(T,P))})).next(()=>f)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>0===n.length?null:(n.sort((o,u)=>{const l=o.indexState.sequenceNumber-u.indexState.sequenceNumber;return 0!==l?l:On(o.collectionGroup,u.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,o){const u=Ld(e),l=Vd(e);return this.Tn(e).next(f=>u.j("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(T=>Q.forEach(T,P=>l.put(nm(P.indexId,this.user,f,o)))))}updateIndexEntries(e,n){const o=new Map;return Q.forEach(n,(u,l)=>{const f=o.get(u.collectionGroup);return(f?Q.resolve(f):this.getFieldIndexes(e,u.collectionGroup)).next(T=>(o.set(u.collectionGroup,T),Q.forEach(T,P=>this.En(e,u,P).next(V=>{const ne=this.An(l,P);return V.isEqual(ne)?Q.resolve():this.vn(e,l,P,V,ne)}))))})}Rn(e,n,o,u){return Fd(e).put({indexId:u.indexId,uid:this.uid,arrayValue:u.arrayValue,directionalValue:u.directionalValue,orderedDocumentKey:this.gn(o,n.key),documentKey:n.key.path.toArray()})}Pn(e,n,o,u){return Fd(e).delete([u.indexId,this.uid,u.arrayValue,u.directionalValue,this.gn(o,n.key),n.key.path.toArray()])}En(e,n,o){const u=Fd(e);let l=new Ui(Lu);return u.X({index:"documentKeyIndex",range:IDBKeyRange.only([o.indexId,this.uid,this.gn(o,n)])},(f,T)=>{l=l.add(new Fu(o.indexId,n,T.arrayValue,T.directionalValue))}).next(()=>l)}An(e,n){let o=new Ui(Lu);const u=this.mn(n,e);if(null==u)return o;const l=Pa(n);if(null!=l){const f=e.data.field(l.fieldPath);if(Va(f))for(const T of f.arrayValue.values||[])o=o.add(new Fu(n.indexId,e.key,this.dn(T),u))}else o=o.add(new Fu(n.indexId,e.key,Gh,u));return o}vn(e,n,o,u,l){dt("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const f=[];return function(T,P,V,ne,ge){const Le=T.getIterator(),it=P.getIterator();let St=Cu(Le),Gt=Cu(it);for(;St||Gt;){let Wt=!1,yr=!1;if(St&&Gt){const Jr=V(St,Gt);Jr<0?yr=!0:Jr>0&&(Wt=!0)}else null!=St?yr=!0:Wt=!0;Wt?(ne(Gt),Gt=Cu(it)):yr?(ge(St),St=Cu(Le)):(St=Cu(Le),Gt=Cu(it))}}(u,l,Lu,T=>{f.push(this.Rn(e,n,o,T))},T=>{f.push(this.Pn(e,n,o,T))}),Q.waitFor(f)}Tn(e){let n=1;return Vd(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(o,u,l)=>{l.done(),n=u.sequenceNumber+1}).next(()=>n)}createRange(e,n,o){o=o.sort((f,T)=>Lu(f,T)).filter((f,T,P)=>!T||0!==Lu(f,P[T-1]));const u=[];u.push(e);for(const f of o){const T=Lu(f,e),P=Lu(f,n);if(0===T)u[0]=e.Je();else if(T>0&&P<0)u.push(f),u.push(f.Je());else if(P>0)break}u.push(n);const l=[];for(let f=0;f<u.length;f+=2){if(this.bn(u[f],u[f+1]))return[];l.push(IDBKeyRange.bound([u[f].indexId,this.uid,u[f].arrayValue,u[f].directionalValue,Gh,[]],[u[f+1].indexId,this.uid,u[f+1].arrayValue,u[f+1].directionalValue,Gh,[]]))}return l}bn(e,n){return Lu(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(am)}getMinOffset(e,n){return Q.mapArray(this.cn(n),o=>this.an(e,o).next(u=>u||Bt())).next(am)}}function om(i){return js(i,"collectionParents")}function Fd(i){return js(i,"indexEntries")}function Ld(i){return js(i,"indexConfiguration")}function Vd(i){return js(i,"indexState")}function am(i){zt(0!==i.length);let e=i[0].indexState.offset,n=e.largestBatchId;for(let o=1;o<i.length;o++){const u=i[o].indexState.offset;I(u,e)<0&&(e=u),n<u.largestBatchId&&(n=u.largestBatchId)}return new y(e.readTime,e.documentKey,n)}const um={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ua{constructor(e,n,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=o}static withCacheSize(e){return new ua(e,ua.DEFAULT_COLLECTION_PERCENTILE,ua.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Bd(i,e,n){const o=i.store("mutations"),u=i.store("documentMutations"),l=[],f=IDBKeyRange.only(n.batchId);let T=0;const P=o.X({range:f},(ne,ge,Le)=>(T++,Le.delete()));l.push(P.next(()=>{zt(1===T)}));const V=[];for(const ne of n.mutations){const ge=ce(e,ne.key.path,n.batchId);l.push(u.delete(ge)),V.push(ne.key)}return Q.waitFor(l).next(()=>V)}function ou(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw Bt();e=i.noDocument}return JSON.stringify(e).length}ua.DEFAULT_COLLECTION_PERCENTILE=10,ua.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ua.DEFAULT=new ua(41943040,ua.DEFAULT_COLLECTION_PERCENTILE,ua.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ua.DISABLED=new ua(-1,0,0);class bc{constructor(e,n,o,u){this.userId=e,this.serializer=n,this.indexManager=o,this.referenceDelegate=u,this.Vn={}}static de(e,n,o,u){zt(""!==e.uid);const l=e.isAuthenticated()?e.uid:"";return new bc(l,n,o,u)}checkEmpty(e){let n=!0;const o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return sc(e).X({index:"userMutationsIndex",range:o},(u,l,f)=>{n=!1,f.done()}).next(()=>n)}addMutationBatch(e,n,o,u){const l=ol(e),f=sc(e);return f.add({}).next(T=>{zt("number"==typeof T);const P=new xh(T,n,o,u),V=function(Le,it,St){const Gt=St.baseMutations.map(yr=>nl(Le.fe,yr)),Wt=St.mutations.map(yr=>nl(Le.fe,yr));return{userId:it,batchId:St.batchId,localWriteTimeMs:St.localWriteTime.toMillis(),baseMutations:Gt,mutations:Wt}}(this.serializer,this.userId,P),ne=[];let ge=new Ui((Le,it)=>On(Le.canonicalString(),it.canonicalString()));for(const Le of u){const it=ce(this.userId,Le.key.path,T);ge=ge.add(Le.key.path.popLast()),ne.push(f.put(V)),ne.push(l.put(it,$e))}return ge.forEach(Le=>{ne.push(this.indexManager.addToCollectionParentIndex(e,Le))}),e.addOnCommittedListener(()=>{this.Vn[T]=P.keys()}),Q.waitFor(ne).next(()=>P)})}lookupMutationBatch(e,n){return sc(e).get(n).next(o=>o?(zt(o.userId===this.userId),nc(this.serializer,o)):null)}Sn(e,n){return this.Vn[n]?Q.resolve(this.Vn[n]):this.lookupMutationBatch(e,n).next(o=>{if(o){const u=o.keys();return this.Vn[n]=u,u}return null})}getNextMutationBatchAfterBatchId(e,n){const o=n+1,u=IDBKeyRange.lowerBound([this.userId,o]);let l=null;return sc(e).X({index:"userMutationsIndex",range:u},(f,T,P)=>{T.userId===this.userId&&(zt(T.batchId>=o),l=nc(this.serializer,T)),P.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let o=-1;return sc(e).X({index:"userMutationsIndex",range:n,reverse:!0},(u,l,f)=>{o=l.batchId,f.done()}).next(()=>o)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return sc(e).j("userMutationsIndex",n).next(o=>o.map(u=>nc(this.serializer,u)))}getAllMutationBatchesAffectingDocumentKey(e,n){const o=Z(this.userId,n.path),u=IDBKeyRange.lowerBound(o),l=[];return ol(e).X({range:u},(f,T,P)=>{const[V,ne,ge]=f,Le=A(ne);if(V===this.userId&&n.path.isEqual(Le))return sc(e).get(ge).next(it=>{if(!it)throw Bt();zt(it.userId===this.userId),l.push(nc(this.serializer,it))});P.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(e,n){let o=new Ui(On);const u=[];return n.forEach(l=>{const f=Z(this.userId,l.path),T=IDBKeyRange.lowerBound(f),P=ol(e).X({range:T},(V,ne,ge)=>{const[Le,it,St]=V,Gt=A(it);Le===this.userId&&l.path.isEqual(Gt)?o=o.add(St):ge.done()});u.push(P)}),Q.waitFor(u).next(()=>this.Dn(e,o))}getAllMutationBatchesAffectingQuery(e,n){const o=n.path,u=o.length+1,l=Z(this.userId,o),f=IDBKeyRange.lowerBound(l);let T=new Ui(On);return ol(e).X({range:f},(P,V,ne)=>{const[ge,Le,it]=P,St=A(Le);ge===this.userId&&o.isPrefixOf(St)?St.length===u&&(T=T.add(it)):ne.done()}).next(()=>this.Dn(e,T))}Dn(e,n){const o=[],u=[];return n.forEach(l=>{u.push(sc(e).get(l).next(f=>{if(null===f)throw Bt();zt(f.userId===this.userId),o.push(nc(this.serializer,f))}))}),Q.waitFor(u).next(()=>o)}removeMutationBatch(e,n){return Bd(e.ht,this.userId,n).next(o=>(e.addOnCommittedListener(()=>{this.Cn(n.batchId)}),Q.forEach(o,u=>this.referenceDelegate.markPotentiallyOrphaned(e,u))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return Q.resolve();const o=IDBKeyRange.lowerBound([this.userId]),u=[];return ol(e).X({range:o},(l,f,T)=>{if(l[0]===this.userId){const P=A(l[1]);u.push(P)}else T.done()}).next(()=>{zt(0===u.length)})})}containsKey(e,n){return fp(e,this.userId,n)}xn(e){return Cv(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function fp(i,e,n){const o=Z(e,n.path),u=o[1],l=IDBKeyRange.lowerBound(o);let f=!1;return ol(i).X({range:l,Y:!0},(T,P,V)=>{const[ne,ge,Le]=T;ne===e&&ge===u&&(f=!0),V.done()}).next(()=>f)}function sc(i){return js(i,"mutations")}function ol(i){return js(i,"documentMutations")}function Cv(i){return js(i,"mutationQueues")}class Hl{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Hl(0)}static Mn(){return new Hl(-1)}}class SE{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.$n(e).next(n=>{const o=new Hl(n.highestTargetId);return n.highestTargetId=o.next(),this.On(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(n=>hn.fromTimestamp(new Kr(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,o){return this.$n(e).next(u=>(u.highestListenSequenceNumber=n,o&&(u.lastRemoteSnapshotVersion=o.toTimestamp()),n>u.highestListenSequenceNumber&&(u.highestListenSequenceNumber=n),this.On(e,u)))}addTargetData(e,n){return this.Fn(e,n).next(()=>this.$n(e).next(o=>(o.targetCount+=1,this.Bn(n,o),this.On(e,o))))}updateTargetData(e,n){return this.Fn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Tc(e).delete(n.targetId)).next(()=>this.$n(e)).next(o=>(zt(o.targetCount>0),o.targetCount-=1,this.On(e,o)))}removeTargets(e,n,o){let u=0;const l=[];return Tc(e).X((f,T)=>{const P=rc(T);P.sequenceNumber<=n&&null===o.get(P.targetId)&&(u++,l.push(this.removeTargetData(e,P)))}).next(()=>Q.waitFor(l)).next(()=>u)}forEachTarget(e,n){return Tc(e).X((o,u)=>{const l=rc(u);n(l)})}$n(e){return Wh(e).get("targetGlobalKey").next(n=>(zt(null!==n),n))}On(e,n){return Wh(e).put("targetGlobalKey",n)}Fn(e,n){return Tc(e).put(em(this.serializer,n))}Bn(e,n){let o=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,o=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,o=!0),o}getTargetCount(e){return this.$n(e).next(n=>n.targetCount)}getTargetData(e,n){const o=iu(n),u=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]);let l=null;return Tc(e).X({range:u,index:"queryTargetsIndex"},(f,T,P)=>{const V=rc(T);Kc(n,V.target)&&(l=V,P.done())}).next(()=>l)}addMatchingKeys(e,n,o){const u=[],l=al(e);return n.forEach(f=>{const T=_(f.path);u.push(l.put({targetId:o,path:T})),u.push(this.referenceDelegate.addReference(e,o,f))}),Q.waitFor(u)}removeMatchingKeys(e,n,o){const u=al(e);return Q.forEach(n,l=>{const f=_(l.path);return Q.waitFor([u.delete([o,f]),this.referenceDelegate.removeReference(e,o,l)])})}removeMatchingKeysForTargetId(e,n){const o=al(e),u=IDBKeyRange.bound([n],[n+1],!1,!0);return o.delete(u)}getMatchingKeysForTargetId(e,n){const o=IDBKeyRange.bound([n],[n+1],!1,!0),u=al(e);let l=ur();return u.X({range:o,Y:!0},(f,T,P)=>{const V=A(f[1]),ne=new Ot(V);l=l.add(ne)}).next(()=>l)}containsKey(e,n){const o=_(n.path),u=IDBKeyRange.bound([o],[bn(o)],!1,!0);let l=0;return al(e).X({index:"documentTargetsIndex",Y:!0,range:u},([f,T],P,V)=>{0!==f&&(l++,V.done())}).next(()=>l>0)}le(e,n){return Tc(e).get(n).next(o=>o?rc(o):null)}}function Tc(i){return js(i,"targets")}function Wh(i){return js(i,"targetGlobal")}function al(i){return js(i,"targetDocuments")}function bv([i,e],[n,o]){const u=On(i,n);return 0===u?On(e,o):u}class cm{constructor(e){this.Ln=e,this.buffer=new Ui(bv),this.qn=0}Un(){return++this.qn}Kn(e){const n=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(n);else{const o=this.buffer.last();bv(n,o)<0&&(this.buffer=this.buffer.delete(o).add(n))}}get maxValue(){return this.buffer.last()[0]}}class lm{constructor(e,n,o){this.garbageCollector=e,this.asyncQueue=n,this.localStore=o,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var n=this;dt("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,p.Z)(function*(){n.Gn=null;try{yield n.localStore.collectGarbage(n.garbageCollector)}catch(o){Un(o)?dt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield ie(o)}yield n.Qn(3e5)}))}}class Tv{constructor(e,n){this.jn=e,this.params=n}calculateTargetCount(e,n){return this.jn.zn(e).next(o=>Math.floor(n/100*o))}nthSequenceNumber(e,n){if(0===n)return Q.resolve(Pr.ct);const o=new cm(n);return this.jn.forEachTarget(e,u=>o.Kn(u.sequenceNumber)).next(()=>this.jn.Wn(e,u=>o.Kn(u))).next(()=>o.maxValue)}removeTargets(e,n,o){return this.jn.removeTargets(e,n,o)}removeOrphanedDocuments(e,n){return this.jn.removeOrphanedDocuments(e,n)}collect(e,n){return-1===this.params.cacheSizeCollectionThreshold?(dt("LruGarbageCollector","Garbage collection skipped; disabled"),Q.resolve(um)):this.getCacheSize(e).next(o=>o<this.params.cacheSizeCollectionThreshold?(dt("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),um):this.Hn(e,n))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,n){let o,u,l,f,T,P,V;const ne=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(ge=>(ge>this.params.maximumSequenceNumbersToCollect?(dt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${ge}`),u=this.params.maximumSequenceNumbersToCollect):u=ge,f=Date.now(),this.nthSequenceNumber(e,u))).next(ge=>(o=ge,T=Date.now(),this.removeTargets(e,o,n))).next(ge=>(l=ge,P=Date.now(),this.removeOrphanedDocuments(e,o))).next(ge=>(V=Date.now(),qr()<=he.in.DEBUG&&dt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${f-ne}ms\n\tDetermined least recently used ${u} in `+(T-f)+`ms\n\tRemoved ${l} targets in `+(P-T)+`ms\n\tRemoved ${ge} documents in `+(V-P)+`ms\nTotal Duration: ${V-ne}ms`),Q.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:l,documentsRemoved:ge})))}}class Sv{constructor(e,n){this.db=e,this.garbageCollector=function dm(i,e){return new Tv(i,e)}(this,n)}zn(e){const n=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(o=>n.next(u=>o+u))}Jn(e){let n=0;return this.Wn(e,o=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Wn(e,n){return this.Yn(e,(o,u)=>n(u))}addReference(e,n,o){return Ud(e,o)}removeReference(e,n,o){return Ud(e,o)}removeTargets(e,n,o){return this.db.getTargetCache().removeTargets(e,n,o)}markPotentiallyOrphaned(e,n){return Ud(e,n)}Xn(e,n){return function(o,u){let l=!1;return Cv(o).Z(f=>fp(o,f,u).next(T=>(T&&(l=!0),Q.resolve(!T)))).next(()=>l)}(e,n)}removeOrphanedDocuments(e,n){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),u=[];let l=0;return this.Yn(e,(f,T)=>{if(T<=n){const P=this.Xn(e,f).next(V=>{if(!V)return l++,o.getEntry(e,f).next(()=>(o.removeEntry(f,hn.min()),al(e).delete([0,_(f.path)])))});u.push(P)}}).next(()=>Q.waitFor(u)).next(()=>o.apply(e)).next(()=>l)}removeTarget(e,n){const o=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,o)}updateLimboDocument(e,n){return Ud(e,n)}Yn(e,n){const o=al(e);let u,l=Pr.ct;return o.X({index:"documentTargetsIndex"},([f,T],{path:P,sequenceNumber:V})=>{0===f?(l!==Pr.ct&&n(new Ot(A(u)),l),l=V,u=P):l=Pr.ct}).next(()=>{l!==Pr.ct&&n(new Ot(A(u)),l)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Ud(i,e){return al(i).put((o=i.currentSequenceNumber,{targetId:0,path:_(e.path),sequenceNumber:o}));var o}class jd{constructor(){this.changes=new ro(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,li.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const o=this.changes.get(n);return void 0!==o?Q.resolve(o):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class hm{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,o){return Ac(e).put(o)}removeEntry(e,n,o){return Ac(e).delete(function(u,l){const f=u.path.toArray();return[f.slice(0,f.length-2),f[f.length-2],jl(l),f[f.length-1]]}(n,o))}updateMetadata(e,n){return this.getMetadata(e).next(o=>(o.byteSize+=n,this.Zn(e,o)))}getEntry(e,n){let o=li.newInvalidDocument(n);return Ac(e).X({index:"documentKeyIndex",range:IDBKeyRange.only($d(n))},(u,l)=>{o=this.ts(n,l)}).next(()=>o)}es(e,n){let o={size:0,document:li.newInvalidDocument(n)};return Ac(e).X({index:"documentKeyIndex",range:IDBKeyRange.only($d(n))},(u,l)=>{o={document:this.ts(n,l),size:ou(l)}}).next(()=>o)}getEntries(e,n){let o=Zo();return this.ns(e,n,(u,l)=>{const f=this.ts(u,l);o=o.insert(u,f)}).next(()=>o)}ss(e,n){let o=Zo(),u=new ri(Ot.comparator);return this.ns(e,n,(l,f)=>{const T=this.ts(l,f);o=o.insert(l,T),u=u.insert(l,ou(f))}).next(()=>({documents:o,rs:u}))}ns(e,n,o){if(n.isEmpty())return Q.resolve();let u=new Ui(gp);n.forEach(P=>u=u.add(P));const l=IDBKeyRange.bound($d(u.first()),$d(u.last())),f=u.getIterator();let T=f.getNext();return Ac(e).X({index:"documentKeyIndex",range:l},(P,V,ne)=>{const ge=Ot.fromSegments([...V.prefixPath,V.collectionGroup,V.documentId]);for(;T&&gp(T,ge)<0;)o(T,null),T=f.getNext();T&&T.isEqual(ge)&&(o(T,V),T=f.hasNext()?f.getNext():null),T?ne.G($d(T)):ne.done()}).next(()=>{for(;T;)o(T,null),T=f.hasNext()?f.getNext():null})}getDocumentsMatchingQuery(e,n,o,u){const l=n.path,f=[l.popLast().toArray(),l.lastSegment(),jl(o.readTime),o.documentKey.path.isEmpty()?"":o.documentKey.path.lastSegment()],T=[l.popLast().toArray(),l.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ac(e).j(IDBKeyRange.bound(f,T,!0)).next(P=>{let V=Zo();for(const ne of P){const ge=this.ts(Ot.fromSegments(ne.prefixPath.concat(ne.collectionGroup,ne.documentId)),ne);ge.isFoundDocument()&&(Ut(n,ge)||u.has(ge.key))&&(V=V.insert(ge.key,ge))}return V})}getAllFromCollectionGroup(e,n,o,u){let l=Zo();const f=pp(n,o),T=pp(n,y.max());return Ac(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(f,T,!0)},(P,V,ne)=>{const ge=this.ts(Ot.fromSegments(V.prefixPath.concat(V.collectionGroup,V.documentId)),V);l=l.insert(ge.key,ge),l.size===u&&ne.done()}).next(()=>l)}newChangeBuffer(e){return new Av(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return Sc(e).get("remoteDocumentGlobalKey").next(n=>(zt(!!n),n))}Zn(e,n){return Sc(e).put("remoteDocumentGlobalKey",n)}ts(e,n){if(n){const o=function Pd(i,e){let n;if(e.document)n=Qf(i.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const o=Ot.fromSegments(e.noDocument.path),u=Cc(e.noDocument.readTime);n=li.newNoDocument(o,u),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Bt();{const o=Ot.fromSegments(e.unknownDocument.path),u=Cc(e.unknownDocument.version);n=li.newUnknownDocument(o,u)}}return e.readTime&&n.setReadTime(function(o){const u=new Kr(o[0],o[1]);return hn.fromTimestamp(u)}(e.readTime)),n}(this.serializer,n);if(!o.isNoDocument()||!o.version.isEqual(hn.min()))return o}return li.newInvalidDocument(e)}}function qh(i){return new hm(i)}class Av extends jd{constructor(e,n){super(),this.os=e,this.trackRemovals=n,this.us=new ro(o=>o.toString(),(o,u)=>o.isEqual(u))}applyChanges(e){const n=[];let o=0,u=new Ui((l,f)=>On(l.canonicalString(),f.canonicalString()));return this.changes.forEach((l,f)=>{const T=this.us.get(l);if(n.push(this.os.removeEntry(e,l,T.readTime)),f.isValidDocument()){const P=np(this.os.serializer,f);u=u.add(l.path.popLast());const V=ou(P);o+=V-T.size,n.push(this.os.addEntry(e,l,P))}else if(o-=T.size,this.trackRemovals){const P=np(this.os.serializer,f.convertToNoDocument(hn.min()));n.push(this.os.addEntry(e,l,P))}}),u.forEach(l=>{n.push(this.os.indexManager.addToCollectionParentIndex(e,l))}),n.push(this.os.updateMetadata(e,o)),Q.waitFor(n)}getFromCache(e,n){return this.os.es(e,n).next(o=>(this.us.set(n,{size:o.size,readTime:o.document.readTime}),o.document))}getAllFromCache(e,n){return this.os.ss(e,n).next(({documents:o,rs:u})=>(u.forEach((l,f)=>{this.us.set(l,{size:f,readTime:o.get(l).readTime})}),o))}}function Sc(i){return js(i,"remoteDocumentGlobal")}function Ac(i){return js(i,"remoteDocumentsV14")}function $d(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function pp(i,e){const n=e.documentKey.path.toArray();return[i,jl(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function gp(i,e){const n=i.path.toArray(),o=e.path.toArray();let u=0;for(let l=0;l<n.length-2&&l<o.length-2;++l)if(u=On(n[l],o[l]),u)return u;return u=On(n.length,o.length),u||(u=On(n[n.length-2],o[o.length-2]),u||On(n[n.length-1],o[o.length-1]))}class Mv{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class fm{constructor(e,n,o,u){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=o,this.indexManager=u}getDocument(e,n){let o=null;return this.documentOverlayCache.getOverlay(e,n).next(u=>(o=u,this.remoteDocumentCache.getEntry(e,n))).next(u=>(null!==o&&kl(o.mutation,u,Wo.empty(),Kr.now()),u))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(o=>this.getLocalViewOfDocuments(e,o,ur()).next(()=>o))}getLocalViewOfDocuments(e,n,o=ur()){const u=ja();return this.populateOverlays(e,u,n).next(()=>this.computeViews(e,n,u,o).next(l=>{let f=Ya();return l.forEach((T,P)=>{f=f.insert(T,P.overlayedDocument)}),f}))}getOverlayedDocuments(e,n){const o=ja();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,ur()))}populateOverlays(e,n,o){const u=[];return o.forEach(l=>{n.has(l)||u.push(l)}),this.documentOverlayCache.getOverlays(e,u).next(l=>{l.forEach((f,T)=>{n.set(f,T)})})}computeViews(e,n,o,u){let l=Zo();const f=tc(),T=tc();return n.forEach((P,V)=>{const ne=o.get(V.key);u.has(V.key)&&(void 0===ne||ne.mutation instanceof su)?l=l.insert(V.key,V):void 0!==ne?(f.set(V.key,ne.mutation.getFieldMask()),kl(ne.mutation,V,ne.mutation.getFieldMask(),Kr.now())):f.set(V.key,Wo.empty())}),this.recalculateAndSaveOverlays(e,l).next(P=>(P.forEach((V,ne)=>f.set(V,ne)),n.forEach((V,ne)=>{var ge;return T.set(V,new Mv(ne,null!==(ge=f.get(V))&&void 0!==ge?ge:null))}),T))}recalculateAndSaveOverlays(e,n){const o=tc();let u=new ri((f,T)=>f-T),l=ur();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(f=>{for(const T of f)T.keys().forEach(P=>{const V=n.get(P);if(null===V)return;let ne=o.get(P)||Wo.empty();ne=T.applyToLocalView(V,ne),o.set(P,ne);const ge=(u.get(T.batchId)||ur()).add(P);u=u.insert(T.batchId,ge)})}).next(()=>{const f=[],T=u.getReverseIterator();for(;T.hasNext();){const P=T.getNext(),V=P.key,ne=P.value,ge=Ah();ne.forEach(Le=>{if(!l.has(Le)){const it=Hf(n.get(Le),o.get(Le));null!==it&&ge.set(Le,it),l=l.add(Le)}}),f.push(this.documentOverlayCache.saveOverlays(e,V,ge))}return Q.waitFor(f)}).next(()=>o)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(o=>this.recalculateAndSaveOverlays(e,o))}getDocumentsMatchingQuery(e,n,o){return Ot.isDocumentKey((u=n).path)&&null===u.collectionGroup&&0===u.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):h(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,o):this.getDocumentsMatchingCollectionQuery(e,n,o);var u}getNextDocuments(e,n,o,u){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,o,u).next(l=>{const f=u-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,o.largestBatchId,u-l.size):Q.resolve(ja());let T=-1,P=l;return f.next(V=>Q.forEach(V,(ne,ge)=>(T<ge.largestBatchId&&(T=ge.largestBatchId),l.get(ne)?Q.resolve():this.remoteDocumentCache.getEntry(e,ne).next(Le=>{P=P.insert(ne,Le)}))).next(()=>this.populateOverlays(e,V,l)).next(()=>this.computeViews(e,P,V,ur())).next(ne=>({batchId:T,changes:ec(ne)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ot(n)).next(o=>{let u=Ya();return o.isFoundDocument()&&(u=u.insert(o.key,o)),u})}getDocumentsMatchingCollectionGroupQuery(e,n,o){const u=n.collectionGroup;let l=Ya();return this.indexManager.getCollectionParents(e,u).next(f=>Q.forEach(f,T=>{const P=(V=n,ne=T.child(u),new oa(ne,null,V.explicitOrderBy.slice(),V.filters.slice(),V.limit,V.limitType,V.startAt,V.endAt));var V,ne;return this.getDocumentsMatchingCollectionQuery(e,P,o).next(V=>{V.forEach((ne,ge)=>{l=l.insert(ne,ge)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,n,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,o.largestBatchId).next(l=>(u=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,o,u))).next(l=>{u.forEach((T,P)=>{const V=P.getKey();null===l.get(V)&&(l=l.insert(V,li.newInvalidDocument(V)))});let f=Ya();return l.forEach((T,P)=>{const V=u.get(T);void 0!==V&&kl(V.mutation,P,Wo.empty(),Kr.now()),Ut(n,P)&&(f=f.insert(T,P))}),f})}}class pm{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,n){return Q.resolve(this.cs.get(n))}saveBundleMetadata(e,n){var o;return this.cs.set(n.id,{id:(o=n).id,version:o.version,createTime:Cs(o.createTime)}),Q.resolve()}getNamedQuery(e,n){return Q.resolve(this.hs.get(n))}saveNamedQuery(e,n){return this.hs.set(n.name,{name:(o=n).name,query:zh(o.bundledQuery),readTime:Cs(o.readTime)}),Q.resolve();var o}}class Nv{constructor(){this.overlays=new ri(Ot.comparator),this.ls=new Map}getOverlay(e,n){return Q.resolve(this.overlays.get(n))}getOverlays(e,n){const o=ja();return Q.forEach(n,u=>this.getOverlay(e,u).next(l=>{null!==l&&o.set(u,l)})).next(()=>o)}saveOverlays(e,n,o){return o.forEach((u,l)=>{this.we(e,n,l)}),Q.resolve()}removeOverlaysForBatchId(e,n,o){const u=this.ls.get(o);return void 0!==u&&(u.forEach(l=>this.overlays=this.overlays.remove(l)),this.ls.delete(o)),Q.resolve()}getOverlaysForCollection(e,n,o){const u=ja(),l=n.length+1,f=new Ot(n.child("")),T=this.overlays.getIteratorFrom(f);for(;T.hasNext();){const P=T.getNext().value,V=P.getKey();if(!n.isPrefixOf(V.path))break;V.path.length===l&&P.largestBatchId>o&&u.set(P.getKey(),P)}return Q.resolve(u)}getOverlaysForCollectionGroup(e,n,o,u){let l=new ri((V,ne)=>V-ne);const f=this.overlays.getIterator();for(;f.hasNext();){const V=f.getNext().value;if(V.getKey().getCollectionGroup()===n&&V.largestBatchId>o){let ne=l.get(V.largestBatchId);null===ne&&(ne=ja(),l=l.insert(V.largestBatchId,ne)),ne.set(V.getKey(),V)}}const T=ja(),P=l.getIterator();for(;P.hasNext()&&(P.getNext().value.forEach((V,ne)=>T.set(V,ne)),!(T.size()>=u)););return Q.resolve(T)}we(e,n,o){const u=this.overlays.get(o.key);if(null!==u){const f=this.ls.get(u.largestBatchId).delete(o.key);this.ls.set(u.largestBatchId,f)}this.overlays=this.overlays.insert(o.key,new Wf(n,o));let l=this.ls.get(n);void 0===l&&(l=ur(),this.ls.set(n,l)),this.ls.set(n,l.add(o.key))}}class Kh{constructor(){this.fs=new Ui(Yo.ds),this.ws=new Ui(Yo._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,n){const o=new Yo(e,n);this.fs=this.fs.add(o),this.ws=this.ws.add(o)}gs(e,n){e.forEach(o=>this.addReference(o,n))}removeReference(e,n){this.ys(new Yo(e,n))}ps(e,n){e.forEach(o=>this.removeReference(o,n))}Is(e){const n=new Ot(new on([])),o=new Yo(n,e),u=new Yo(n,e+1),l=[];return this.ws.forEachInRange([o,u],f=>{this.ys(f),l.push(f.key)}),l}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const n=new Ot(new on([])),o=new Yo(n,e),u=new Yo(n,e+1);let l=ur();return this.ws.forEachInRange([o,u],f=>{l=l.add(f.key)}),l}containsKey(e){const n=new Yo(e,0),o=this.fs.firstAfterOrEqual(n);return null!==o&&e.isEqual(o.key)}}class Yo{constructor(e,n){this.key=e,this.As=n}static ds(e,n){return Ot.comparator(e.key,n.key)||On(e.As,n.As)}static _s(e,n){return On(e.As,n.As)||Ot.comparator(e.key,n.key)}}class AE{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.vs=1,this.Rs=new Ui(Yo.ds)}checkEmpty(e){return Q.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,o,u){const l=this.vs;this.vs++;const f=new xh(l,n,o,u);this.mutationQueue.push(f);for(const T of u)this.Rs=this.Rs.add(new Yo(T.key,l)),this.indexManager.addToCollectionParentIndex(e,T.key.path.popLast());return Q.resolve(f)}lookupMutationBatch(e,n){return Q.resolve(this.Ps(n))}getNextMutationBatchAfterBatchId(e,n){const u=this.bs(n+1),l=u<0?0:u;return Q.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return Q.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return Q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const o=new Yo(n,0),u=new Yo(n,Number.POSITIVE_INFINITY),l=[];return this.Rs.forEachInRange([o,u],f=>{const T=this.Ps(f.As);l.push(T)}),Q.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,n){let o=new Ui(On);return n.forEach(u=>{const l=new Yo(u,0),f=new Yo(u,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([l,f],T=>{o=o.add(T.As)})}),Q.resolve(this.Vs(o))}getAllMutationBatchesAffectingQuery(e,n){const o=n.path,u=o.length+1;let l=o;Ot.isDocumentKey(l)||(l=l.child(""));const f=new Yo(new Ot(l),0);let T=new Ui(On);return this.Rs.forEachWhile(P=>{const V=P.key.path;return!!o.isPrefixOf(V)&&(V.length===u&&(T=T.add(P.As)),!0)},f),Q.resolve(this.Vs(T))}Vs(e){const n=[];return e.forEach(o=>{const u=this.Ps(o);null!==u&&n.push(u)}),n}removeMutationBatch(e,n){zt(0===this.Ss(n.batchId,"removed")),this.mutationQueue.shift();let o=this.Rs;return Q.forEach(n.mutations,u=>{const l=new Yo(u.key,n.batchId);return o=o.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,u.key)}).next(()=>{this.Rs=o})}Cn(e){}containsKey(e,n){const o=new Yo(n,0),u=this.Rs.firstAfterOrEqual(o);return Q.resolve(n.isEqual(u&&u.key))}performConsistencyCheck(e){return Q.resolve()}Ss(e,n){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const n=this.bs(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class Hd{constructor(e){this.Ds=e,this.docs=new ri(Ot.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const o=n.key,u=this.docs.get(o),l=u?u.size:0,f=this.Ds(n);return this.docs=this.docs.insert(o,{document:n.mutableCopy(),size:f}),this.size+=f-l,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const o=this.docs.get(n);return Q.resolve(o?o.document.mutableCopy():li.newInvalidDocument(n))}getEntries(e,n){let o=Zo();return n.forEach(u=>{const l=this.docs.get(u);o=o.insert(u,l?l.document.mutableCopy():li.newInvalidDocument(u))}),Q.resolve(o)}getDocumentsMatchingQuery(e,n,o,u){let l=Zo();const f=n.path,T=new Ot(f.child("")),P=this.docs.getIteratorFrom(T);for(;P.hasNext();){const{key:V,value:{document:ne}}=P.getNext();if(!f.isPrefixOf(V.path))break;V.path.length>f.length+1||I(H(ne),o)<=0||(u.has(ne.key)||Ut(n,ne))&&(l=l.insert(ne.key,ne.mutableCopy()))}return Q.resolve(l)}getAllFromCollectionGroup(e,n,o,u){Bt()}Cs(e,n){return Q.forEach(this.docs,o=>n(o))}newChangeBuffer(e){return new Ii(this)}getSize(e){return Q.resolve(this.size)}}class Ii extends jd{constructor(e){super(),this.os=e}applyChanges(e){const n=[];return this.changes.forEach((o,u)=>{u.isValidDocument()?n.push(this.os.addEntry(e,u)):this.os.removeEntry(o)}),Q.waitFor(n)}getFromCache(e,n){return this.os.getEntry(e,n)}getAllFromCache(e,n){return this.os.getEntries(e,n)}}class zd{constructor(e){this.persistence=e,this.xs=new ro(n=>iu(n),Kc),this.lastRemoteSnapshotVersion=hn.min(),this.highestTargetId=0,this.Ns=0,this.ks=new Kh,this.targetCount=0,this.Ms=Hl.kn()}forEachTarget(e,n){return this.xs.forEach((o,u)=>n(u)),Q.resolve()}getLastRemoteSnapshotVersion(e){return Q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Q.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),Q.resolve(this.highestTargetId)}setTargetsMetadata(e,n,o){return o&&(this.lastRemoteSnapshotVersion=o),n>this.Ns&&(this.Ns=n),Q.resolve()}Fn(e){this.xs.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Ms=new Hl(n),this.highestTargetId=n),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,n){return this.Fn(n),this.targetCount+=1,Q.resolve()}updateTargetData(e,n){return this.Fn(n),Q.resolve()}removeTargetData(e,n){return this.xs.delete(n.target),this.ks.Is(n.targetId),this.targetCount-=1,Q.resolve()}removeTargets(e,n,o){let u=0;const l=[];return this.xs.forEach((f,T)=>{T.sequenceNumber<=n&&null===o.get(T.targetId)&&(this.xs.delete(f),l.push(this.removeMatchingKeysForTargetId(e,T.targetId)),u++)}),Q.waitFor(l).next(()=>u)}getTargetCount(e){return Q.resolve(this.targetCount)}getTargetData(e,n){const o=this.xs.get(n)||null;return Q.resolve(o)}addMatchingKeys(e,n,o){return this.ks.gs(n,o),Q.resolve()}removeMatchingKeys(e,n,o){this.ks.ps(n,o);const u=this.persistence.referenceDelegate,l=[];return u&&n.forEach(f=>{l.push(u.markPotentiallyOrphaned(e,f))}),Q.waitFor(l)}removeMatchingKeysForTargetId(e,n){return this.ks.Is(n),Q.resolve()}getMatchingKeysForTargetId(e,n){const o=this.ks.Es(n);return Q.resolve(o)}containsKey(e,n){return Q.resolve(this.ks.containsKey(n))}}class Zh{constructor(e,n){this.$s={},this.overlays={},this.Os=new Pr(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new zd(this),this.indexManager=new Iv,this.remoteDocumentCache=new Hd(o=>this.referenceDelegate.Ls(o)),this.serializer=new Od(n),this.qs=new pm(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Nv,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let o=this.$s[e.toKey()];return o||(o=new AE(n,this.referenceDelegate),this.$s[e.toKey()]=o),o}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,n,o){dt("MemoryPersistence","Starting transaction:",e);const u=new gm(this.Os.next());return this.referenceDelegate.Us(),o(u).next(l=>this.referenceDelegate.Ks(u).next(()=>l)).toPromise().then(l=>(u.raiseOnCommittedEvent(),l))}Gs(e,n){return Q.or(Object.values(this.$s).map(o=>()=>o.containsKey(e,n)))}}class gm extends G{constructor(e){super(),this.currentSequenceNumber=e}}class zl{constructor(e){this.persistence=e,this.Qs=new Kh,this.js=null}static zs(e){return new zl(e)}get Ws(){if(this.js)return this.js;throw Bt()}addReference(e,n,o){return this.Qs.addReference(o,n),this.Ws.delete(o.toString()),Q.resolve()}removeReference(e,n,o){return this.Qs.removeReference(o,n),this.Ws.add(o.toString()),Q.resolve()}markPotentiallyOrphaned(e,n){return this.Ws.add(n.toString()),Q.resolve()}removeTarget(e,n){this.Qs.Is(n.targetId).forEach(u=>this.Ws.add(u.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,n.targetId).next(u=>{u.forEach(l=>this.Ws.add(l.toString()))}).next(()=>o.removeTargetData(e,n))}Us(){this.js=new Set}Ks(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Q.forEach(this.Ws,o=>{const u=Ot.fromPath(o);return this.Hs(e,u).next(l=>{l||n.removeEntry(u,hn.min())})}).next(()=>(this.js=null,n.apply(e)))}updateLimboDocument(e,n){return this.Hs(e,n).next(o=>{o?this.Ws.delete(n.toString()):this.Ws.add(n.toString())})}Ls(e){return 0}Hs(e,n){return Q.or([()=>Q.resolve(this.Qs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gs(e,n)])}}class xv{constructor(e){this.serializer=e}O(e,n,o,u){const l=new je("createOrUpgrade",n);var T;o<1&&u>=1&&(e.createObjectStore("owner"),(T=e).createObjectStore("mutationQueues",{keyPath:"userId"}),T.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",k,{unique:!0}),T.createObjectStore("documentMutations"),mp(e),function(T){T.createObjectStore("remoteDocuments")}(e));let f=Q.resolve();return o<3&&u>=3&&(0!==o&&(function(T){T.deleteObjectStore("targetDocuments"),T.deleteObjectStore("targets"),T.deleteObjectStore("targetGlobal")}(e),mp(e)),f=f.next(()=>function(T){const P=T.store("targetGlobal"),V={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:hn.min().toTimestamp(),targetCount:0};return P.put("targetGlobalKey",V)}(l))),o<4&&u>=4&&(0!==o&&(f=f.next(()=>function(T,P){return P.store("mutations").j().next(V=>{T.deleteObjectStore("mutations"),T.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",k,{unique:!0});const ne=P.store("mutations"),ge=V.map(Le=>ne.put(Le));return Q.waitFor(ge)})}(e,l))),f=f.next(()=>{!function(T){T.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),o<5&&u>=5&&(f=f.next(()=>this.Ys(l))),o<6&&u>=6&&(f=f.next(()=>(function(T){T.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(l)))),o<7&&u>=7&&(f=f.next(()=>this.Zs(l))),o<8&&u>=8&&(f=f.next(()=>this.ti(e,l))),o<9&&u>=9&&(f=f.next(()=>{!function(T){T.objectStoreNames.contains("remoteDocumentChanges")&&T.deleteObjectStore("remoteDocumentChanges")}(e)})),o<10&&u>=10&&(f=f.next(()=>this.ei(l))),o<11&&u>=11&&(f=f.next(()=>{(function(T){T.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(T){T.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),o<12&&u>=12&&(f=f.next(()=>{!function(T){const P=T.createObjectStore("documentOverlays",{keyPath:eu});P.createIndex("collectionPathOverlayIndex",Ai,{unique:!1}),P.createIndex("collectionGroupOverlayIndex",Us,{unique:!1})}(e)})),o<13&&u>=13&&(f=f.next(()=>function(T){const P=T.createObjectStore("remoteDocumentsV14",{keyPath:Fe});P.createIndex("documentKeyIndex",Xe),P.createIndex("collectionGroupIndex",ft)}(e)).next(()=>this.ni(e,l)).next(()=>e.deleteObjectStore("remoteDocuments"))),o<14&&u>=14&&(f=f.next(()=>this.si(e,l))),o<15&&u>=15&&(f=f.next(()=>function(T){T.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),T.createObjectStore("indexState",{keyPath:Qr}).createIndex("sequenceNumberIndex",Do,{unique:!1}),T.createObjectStore("indexEntries",{keyPath:kr}).createIndex("documentKeyIndex",ia,{unique:!1})}(e))),f}Xs(e){let n=0;return e.store("remoteDocuments").X((o,u)=>{n+=ou(u)}).next(()=>{const o={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",o)})}Ys(e){const n=e.store("mutationQueues"),o=e.store("mutations");return n.j().next(u=>Q.forEach(u,l=>{const f=IDBKeyRange.bound([l.userId,-1],[l.userId,l.lastAcknowledgedBatchId]);return o.j("userMutationsIndex",f).next(T=>Q.forEach(T,P=>{zt(P.userId===l.userId);const V=nc(this.serializer,P);return Bd(e,l.userId,V).next(()=>{})}))}))}Zs(e){const n=e.store("targetDocuments"),o=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(u=>{const l=[];return o.X((f,T)=>{const P=new on(f),V=[0,_(P)];l.push(n.get(V).next(ne=>ne?Q.resolve():n.put({targetId:0,path:_(P),sequenceNumber:u.highestListenSequenceNumber})))}).next(()=>Q.waitFor(l))})}ti(e,n){e.createObjectStore("collectionParents",{keyPath:Is});const o=n.store("collectionParents"),u=new hp,l=f=>{if(u.add(f)){const T=f.lastSegment(),P=f.popLast();return o.put({collectionId:T,parent:_(P)})}};return n.store("remoteDocuments").X({Y:!0},(f,T)=>{const P=new on(f);return l(P.popLast())}).next(()=>n.store("documentMutations").X({Y:!0},([f,T,P],V)=>{const ne=A(T);return l(ne.popLast())}))}ei(e){const n=e.store("targets");return n.X((o,u)=>{const l=rc(u),f=em(this.serializer,l);return n.put(f)})}ni(e,n){const o=n.store("remoteDocuments"),u=[];return o.X((l,f)=>{const T=n.store("remoteDocumentsV14"),P=(V=f,V.document?new Ot(on.fromString(V.document.name).popFirst(5)):V.noDocument?Ot.fromSegments(V.noDocument.path):V.unknownDocument?Ot.fromSegments(V.unknownDocument.path):Bt()).path.toArray();var V;const ne={prefixPath:P.slice(0,P.length-2),collectionGroup:P[P.length-2],documentId:P[P.length-1],readTime:f.readTime||[0,0],unknownDocument:f.unknownDocument,noDocument:f.noDocument,document:f.document,hasCommittedMutations:!!f.hasCommittedMutations};u.push(T.put(ne))}).next(()=>Q.waitFor(u))}si(e,n){const o=n.store("mutations"),u=qh(this.serializer),l=new Zh(zl.zs,this.serializer.fe);return o.j().next(f=>{const T=new Map;return f.forEach(P=>{var V;let ne=null!==(V=T.get(P.userId))&&void 0!==V?V:ur();nc(this.serializer,P).keys().forEach(ge=>ne=ne.add(ge)),T.set(P.userId,ne)}),Q.forEach(T,(P,V)=>{const ne=new un(V),ge=$l.de(this.serializer,ne),Le=l.getIndexManager(ne),it=bc.de(ne,this.serializer,Le,l.referenceDelegate);return new fm(u,it,ge,Le).recalculateAndSaveOverlaysForDocumentKeys(new Du(n,Pr.ct),P).next()})})}}function mp(i){i.createObjectStore("targetDocuments",{keyPath:At}).createIndex("documentTargetsIndex",fr,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",xt,{unique:!0}),i.createObjectStore("targetGlobal")}const Yh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Gl{constructor(e,n,o,u,l,f,T,P,V,ne,ge=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=o,this.ii=l,this.window=f,this.document=T,this.ri=V,this.oi=ne,this.ui=ge,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=Le=>Promise.resolve(),!Gl.D())throw new ot(Ue.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Sv(this,u),this.di=n+"main",this.serializer=new Od(P),this.wi=new Qe(this.di,this.ui,new xv(this.serializer)),this.Bs=new SE(this.referenceDelegate,this.serializer),this.remoteDocumentCache=qh(this.serializer),this.qs=new rm,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===ne&&Mr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ot(Ue.FAILED_PRECONDITION,Yh);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new Pr(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var n=this;return this.fi=function(){var o=(0,p.Z)(function*(u){if(n.started)return e(u)});return function(u){return o.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var n=(0,p.Z)(function*(o){null===o.newVersion&&(yield e())});return function(o){return n.apply(this,arguments)}}())}setNetworkEnabled(e){var n=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,p.Z)(function*(){n.started&&(yield n.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Wl(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(n=>{n||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(n=>this.isPrimary&&!n?this.Ai(e).next(()=>!1):!!n&&this.vi(e).next(()=>!0))).catch(e=>{if(Un(e))return dt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return dt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return Qh(e).get("owner").next(n=>Q.resolve(this.Ri(n)))}Pi(e){return Wl(e).delete(this.clientId)}bi(){var e=this;return(0,p.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const n=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=>{const u=js(o,"clientMetadata");return u.j().next(l=>{const f=e.Si(l,18e5),T=l.filter(P=>-1===f.indexOf(P));return Q.forEach(T,P=>u.delete(P.clientId)).next(()=>T)})}).catch(()=>[]);if(e._i)for(const o of n)e._i.removeItem(e.Di(o.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?Q.resolve(!0):Qh(e).get("owner").next(n=>{if(null!==n&&this.Vi(n.leaseTimestampMs,5e3)&&!this.Ci(n.ownerId)){if(this.Ri(n)&&this.networkEnabled)return!0;if(!this.Ri(n)){if(!n.allowTabSynchronization)throw new ot(Ue.FAILED_PRECONDITION,Yh);return!1}}return!(!this.networkEnabled||!this.inForeground)||Wl(e).j().next(o=>void 0===this.Si(o,5e3).find(u=>!(this.clientId===u.clientId||!(!this.networkEnabled&&u.networkEnabled||!this.inForeground&&u.inForeground&&this.networkEnabled===u.networkEnabled))))}).next(n=>(this.isPrimary!==n&&dt("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){var e=this;return(0,p.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],n=>{const o=new Du(n,Pr.ct);return e.Ai(o).next(()=>e.Pi(o))}),e.wi.close(),e.Mi()})()}Si(e,n){return e.filter(o=>this.Vi(o.updateTimeMs,n)&&!this.Ci(o.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>Wl(e).j().next(n=>this.Si(n,18e5).map(o=>o.clientId)))}get started(){return this.Fs}getMutationQueue(e,n){return bc.de(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Dv(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return $l.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,n,o){dt("IndexedDbPersistence","Starting transaction:",e);const u="readonly"===n?"readonly":"readwrite",l=15===(f=this.ui)?zc:14===f?yc:13===f?wa:12===f?tu:11===f?Ji:void Bt();var f;let T;return this.wi.runTransaction(e,u,l,P=>(T=new Du(P,this.Os?this.Os.next():Pr.ct),"readwrite-primary"===n?this.Ti(T).next(V=>!!V||this.Ei(T)).next(V=>{if(!V)throw Mr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new ot(Ue.FAILED_PRECONDITION,R);return o(T)}).next(V=>this.vi(T).next(()=>V)):this.Oi(T).next(()=>o(T)))).then(P=>(T.raiseOnCommittedEvent(),P))}Oi(e){return Qh(e).get("owner").next(n=>{if(null!==n&&this.Vi(n.leaseTimestampMs,5e3)&&!this.Ci(n.ownerId)&&!this.Ri(n)&&!(this.oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new ot(Ue.FAILED_PRECONDITION,Yh)})}vi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Qh(e).put("owner",n)}static D(){return Qe.D()}Ai(e){const n=Qh(e);return n.get("owner").next(o=>this.Ri(o)?(dt("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Q.resolve())}Vi(e,n){const o=Date.now();return!(e<o-n||e>o&&(Mr(`Detected an update time that is in the future: ${e} > ${o}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const n=/(?:Version|Mobile)\/1[456]/;(0,fe.G6)()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var n;try{const o=null!==(null===(n=this._i)||void 0===n?void 0:n.getItem(this.Di(e)));return dt("IndexedDbPersistence",`Client '${e}' ${o?"is":"is not"} zombied in LocalStorage`),o}catch(o){return Mr("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){Mr("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Qh(i){return js(i,"owner")}function Wl(i){return js(i,"clientMetadata")}function yp(i,e){let n=i.projectId;return i.isDefaultDatabase||(n+="."+i.database),"firestore/"+e+"/"+n+"/"}class Wd{constructor(e,n,o,u){this.targetId=e,this.fromCache=n,this.Fi=o,this.Bi=u}static Li(e,n){let o=ur(),u=ur();for(const l of n.docChanges)switch(l.type){case 0:o=o.add(l.doc.key);break;case 1:u=u.add(l.doc.key)}return new Wd(e,n.fromCache,o,u)}}class vp{constructor(){this.qi=!1}initialize(e,n){this.Ui=e,this.indexManager=n,this.qi=!0}getDocumentsMatchingQuery(e,n,o,u){return this.Ki(e,n).next(l=>l||this.Gi(e,n,u,o)).next(l=>l||this.Qi(e,n))}Ki(e,n){if(Sh(n))return Q.resolve(null);let o=b(n);return this.indexManager.getIndexType(e,o).next(u=>0===u?null:(null!==n.limit&&1===u&&(n=re(n,null,"F"),o=b(n)),this.indexManager.getDocumentsMatchingTarget(e,o).next(l=>{const f=ur(...l);return this.Ui.getDocuments(e,f).next(T=>this.indexManager.getMinOffset(e,o).next(P=>{const V=this.ji(n,T);return this.zi(n,V,f,P.readTime)?this.Ki(e,re(n,null,"F")):this.Wi(e,V,n,P)}))})))}Gi(e,n,o,u){return Sh(n)||u.isEqual(hn.min())?this.Qi(e,n):this.Ui.getDocuments(e,o).next(l=>{const f=this.ji(n,l);return this.zi(n,f,o,u)?this.Qi(e,n):(qr()<=he.in.DEBUG&&dt("QueryEngine","Re-using previous result from %s to execute query: %s",u.toString(),Nt(n)),this.Wi(e,f,n,zo(u,-1)))})}ji(e,n){let o=new Ui(wr(e));return n.forEach((u,l)=>{Ut(e,l)&&(o=o.add(l))}),o}zi(e,n,o,u){if(null===e.limit)return!1;if(o.size!==n.size)return!0;const l="F"===e.limitType?n.last():n.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(u)>0)}Qi(e,n){return qr()<=he.in.DEBUG&&dt("QueryEngine","Using full collection scan to execute query:",Nt(n)),this.Ui.getDocumentsMatchingQuery(e,n,y.min())}Wi(e,n,o,u){return this.Ui.getDocumentsMatchingQuery(e,o,u).next(l=>(n.forEach(f=>{l=l.insert(f.key,f)}),l))}}class mm{constructor(e,n,o,u){this.persistence=e,this.Hi=n,this.serializer=u,this.Ji=new ri(On),this.Yi=new ro(l=>iu(l),Kc),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(o)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new fm(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ji))}}function Mc(i,e,n,o){return new mm(i,e,n,o)}function ym(i,e){return qd.apply(this,arguments)}function qd(){return qd=(0,p.Z)(function*(i,e){const n=Ft(i);return yield n.persistence.runTransaction("Handle user change","readonly",o=>{let u;return n.mutationQueue.getAllMutationBatches(o).next(l=>(u=l,n.tr(e),n.mutationQueue.getAllMutationBatches(o))).next(l=>{const f=[],T=[];let P=ur();for(const V of u){f.push(V.batchId);for(const ne of V.mutations)P=P.add(ne.key)}for(const V of l){T.push(V.batchId);for(const ne of V.mutations)P=P.add(ne.key)}return n.localDocuments.getDocuments(o,P).next(V=>({er:V,removedBatchIds:f,addedBatchIds:T}))})})}),qd.apply(this,arguments)}function vm(i){const e=Ft(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Bs.getLastRemoteSnapshotVersion(n))}function Kd(i,e,n){let o=ur(),u=ur();return n.forEach(l=>o=o.add(l)),e.getEntries(i,o).next(l=>{let f=Zo();return n.forEach((T,P)=>{const V=l.get(T);P.isFoundDocument()!==V.isFoundDocument()&&(u=u.add(T)),P.isNoDocument()&&P.version.isEqual(hn.min())?(e.removeEntry(T,P.readTime),f=f.insert(T,P)):!V.isValidDocument()||P.version.compareTo(V.version)>0||0===P.version.compareTo(V.version)&&V.hasPendingWrites?(e.addEntry(P),f=f.insert(T,P)):dt("LocalStore","Ignoring outdated watch update for ",T,". Current version:",V.version," Watch version:",P.version)}),{nr:f,sr:u}})}function Bu(i,e){const n=Ft(i);return n.persistence.runTransaction("Get next mutation batch","readonly",o=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(o,e)))}function oc(i,e){const n=Ft(i);return n.persistence.runTransaction("Allocate target","readwrite",o=>{let u;return n.Bs.getTargetData(o,e).next(l=>l?(u=l,Q.resolve(u)):n.Bs.allocateTargetId(o).next(f=>(u=new Ru(e,f,"TargetPurposeListen",o.currentSequenceNumber),n.Bs.addTargetData(o,u).next(()=>u))))}).then(o=>{const u=n.Ji.get(o.targetId);return(null===u||o.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(o.targetId,o),n.Yi.set(e,o.targetId)),o})}function Nc(i,e,n){return Ep.apply(this,arguments)}function Ep(){return Ep=(0,p.Z)(function*(i,e,n){const o=Ft(i),u=o.Ji.get(e),l=n?"readwrite":"readwrite-primary";try{n||(yield o.persistence.runTransaction("Release target",l,f=>o.persistence.referenceDelegate.removeTarget(f,u)))}catch(f){if(!Un(f))throw f;dt("LocalStore",`Failed to update sequence numbers for target ${e}: ${f}`)}o.Ji=o.Ji.remove(e),o.Yi.delete(u.target)}),Ep.apply(this,arguments)}function Jh(i,e,n){const o=Ft(i);let u=hn.min(),l=ur();return o.persistence.runTransaction("Execute query","readonly",f=>function(T,P,V){const ne=Ft(T),ge=ne.Yi.get(V);return void 0!==ge?Q.resolve(ne.Ji.get(ge)):ne.Bs.getTargetData(P,V)}(o,f,b(e)).next(T=>{if(T)return u=T.lastLimboFreeSnapshotVersion,o.Bs.getMatchingKeysForTargetId(f,T.targetId).next(P=>{l=P})}).next(()=>o.Hi.getDocumentsMatchingQuery(f,e,n?u:hn.min(),n?l:ur())).next(T=>(_m(o,yn(e),T),{documents:T,ir:l})))}function wp(i,e){const n=Ft(i),o=Ft(n.Bs),u=n.Ji.get(e);return u?Promise.resolve(u.target):n.persistence.runTransaction("Get target data","readonly",l=>o.le(l,e).next(f=>f?f.target:null))}function ul(i,e){const n=Ft(i),o=n.Xi.get(e)||hn.min();return n.persistence.runTransaction("Get new document changes","readonly",u=>n.Zi.getAllFromCollectionGroup(u,e,zo(o,-1),Number.MAX_SAFE_INTEGER)).then(u=>(_m(n,e,u),u))}function _m(i,e,n){let o=i.Xi.get(e)||hn.min();n.forEach((u,l)=>{l.readTime.compareTo(o)>0&&(o=l.readTime)}),i.Xi.set(e,o)}function Ip(){return Ip=(0,p.Z)(function*(i,e,n,o){const u=Ft(i);let l=ur(),f=Zo();for(const V of n){const ne=e.rr(V.metadata.name);V.document&&(l=l.add(ne));const ge=e.ur(V);ge.setReadTime(e.cr(V.metadata.readTime)),f=f.insert(ne,ge)}const T=u.Zi.newChangeBuffer({trackRemovals:!0}),P=yield oc(u,(V=o,b(Nu(on.fromString(`__bundle__/docs/${V}`)))));var V;return u.persistence.runTransaction("Apply bundle documents","readwrite",V=>Kd(V,T,f).next(ne=>(T.apply(V),ne)).next(ne=>u.Bs.removeMatchingKeysForTargetId(V,P.targetId).next(()=>u.Bs.addMatchingKeys(V,l,P.targetId)).next(()=>u.localDocuments.getLocalViewOfDocuments(V,ne.nr,ne.sr)).next(()=>ne.nr)))}),Ip.apply(this,arguments)}function Dp(i,e){return ef.apply(this,arguments)}function ef(){return ef=(0,p.Z)(function*(i,e,n=ur()){const o=yield oc(i,b(zh(e.bundledQuery))),u=Ft(i);return u.persistence.runTransaction("Save named query","readwrite",l=>{const f=Cs(e.readTime);if(o.snapshotVersion.compareTo(f)>=0)return u.qs.saveNamedQuery(l,e);const T=o.withResumeToken(hs.EMPTY_BYTE_STRING,f);return u.Ji=u.Ji.insert(T.targetId,T),u.Bs.updateTargetData(l,T).next(()=>u.Bs.removeMatchingKeysForTargetId(l,o.targetId)).next(()=>u.Bs.addMatchingKeys(l,n,o.targetId)).next(()=>u.qs.saveNamedQuery(l,e))})}),ef.apply(this,arguments)}function Em(i,e){return`firestore_clients_${i}_${e}`}function Cp(i,e,n){let o=`firestore_mutations_${i}_${n}`;return e.isAuthenticated()&&(o+=`_${e.uid}`),o}function Zd(i,e){return`firestore_targets_${i}_${e}`}class bp{constructor(e,n,o,u){this.user=e,this.batchId=n,this.state=o,this.error=u}static ar(e,n,o){const u=JSON.parse(o);let l,f="object"==typeof u&&-1!==["pending","acknowledged","rejected"].indexOf(u.state)&&(void 0===u.error||"object"==typeof u.error);return f&&u.error&&(f="string"==typeof u.error.message&&"string"==typeof u.error.code,f&&(l=new ot(u.error.code,u.error.message))),f?new bp(e,n,u.state,l):(Mr("SharedClientState",`Failed to parse mutation state for ID '${n}': ${o}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Yd{constructor(e,n,o){this.targetId=e,this.state=n,this.error=o}static ar(e,n){const o=JSON.parse(n);let u,l="object"==typeof o&&-1!==["not-current","current","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return l&&o.error&&(l="string"==typeof o.error.message&&"string"==typeof o.error.code,l&&(u=new ot(o.error.code,o.error.message))),l?new Yd(e,o.state,u):(Mr("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class tf{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static ar(e,n){const o=JSON.parse(n);let u="object"==typeof o&&o.activeTargetIds instanceof Array,l=Ed();for(let f=0;u&&f<o.activeTargetIds.length;++f)u=ho(o.activeTargetIds[f]),l=l.add(o.activeTargetIds[f]);return u?new tf(e,l):(Mr("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class Tp{constructor(e,n){this.clientId=e,this.onlineState=n}static ar(e){const n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new Tp(n.clientId,n.onlineState):(Mr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class wm{constructor(){this.activeTargetIds=Ed()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Im{constructor(e,n,o,u,l){this.window=e,this.ii=n,this.persistenceKey=o,this.wr=u,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new ri(On),this.started=!1,this.yr=[];const f=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.pr=Em(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new wm),this.Tr=new RegExp(`^firestore_clients_${f}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${f}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${f}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(T){return`firestore_bundle_loaded_v2_${T}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,p.Z)(function*(){const n=yield e.syncEngine.$i();for(const u of n){if(u===e.wr)continue;const l=e.getItem(Em(e.persistenceKey,u));if(l){const f=tf.ar(u,l);f&&(e.gr=e.gr.insert(f.clientId,f))}}e.Pr();const o=e.storage.getItem(e.vr);if(o){const u=e.br(o);u&&e.Vr(u)}for(const u of e.yr)e.mr(u);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let n=!1;return this.gr.forEach((o,u)=>{u.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,n,o){this.Dr(e,n,o),this.Cr(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const o=this.storage.getItem(Zd(this.persistenceKey,e));if(o){const u=Yd.ar(e,o);u&&(n=u.state)}}return this.Nr.lr(e),this.Pr(),n}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Zd(this.persistenceKey,e))}updateQueryState(e,n,o){this.kr(e,n,o)}handleUserChange(e,n,o){n.forEach(u=>{this.Cr(u)}),this.currentUser=e,o.forEach(u=>{this.addPendingMutation(u)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return dt("SharedClientState","READ",e,n),n}setItem(e,n){dt("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){dt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var n=this;const o=e;if(o.storageArea===this.storage){if(dt("SharedClientState","EVENT",o.key,o.newValue),o.key===this.pr)return void Mr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,p.Z)(function*(){if(n.started){if(null!==o.key)if(n.Tr.test(o.key)){if(null==o.newValue){const u=n.Or(o.key);return n.Fr(u,null)}{const u=n.Br(o.key,o.newValue);if(u)return n.Fr(u.clientId,u)}}else if(n.Er.test(o.key)){if(null!==o.newValue){const u=n.Lr(o.key,o.newValue);if(u)return n.qr(u)}}else if(n.Ar.test(o.key)){if(null!==o.newValue){const u=n.Ur(o.key,o.newValue);if(u)return n.Kr(u)}}else if(o.key===n.vr){if(null!==o.newValue){const u=n.br(o.newValue);if(u)return n.Vr(u)}}else if(o.key===n.Ir){const u=function(l){let f=Pr.ct;if(null!=l)try{const T=JSON.parse(l);zt("number"==typeof T),f=T}catch(T){Mr("SharedClientState","Failed to read sequence number from WebStorage",T)}return f}(o.newValue);u!==Pr.ct&&n.sequenceNumberHandler(u)}else if(o.key===n.Rr){const u=n.Gr(o.newValue);yield Promise.all(u.map(l=>n.syncEngine.Qr(l)))}}else n.yr.push(o)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,n,o){const u=new bp(this.currentUser,e,n,o),l=Cp(this.persistenceKey,this.currentUser,e);this.setItem(l,u.hr())}Cr(e){const n=Cp(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,n,o){const u=Zd(this.persistenceKey,e),l=new Yd(e,n,o);this.setItem(u,l.hr())}$r(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Rr,n)}Or(e){const n=this.Tr.exec(e);return n?n[1]:null}Br(e,n){const o=this.Or(e);return tf.ar(o,n)}Lr(e,n){const o=this.Er.exec(e),u=Number(o[1]);return bp.ar(new un(void 0!==o[2]?o[2]:null),u,n)}Ur(e,n){const o=this.Ar.exec(e),u=Number(o[1]);return Yd.ar(u,n)}br(e){return Tp.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var n=this;return(0,p.Z)(function*(){if(e.user.uid===n.currentUser.uid)return n.syncEngine.jr(e.batchId,e.state,e.error);dt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,n){const o=n?this.gr.insert(e,n):this.gr.remove(e),u=this.Sr(this.gr),l=this.Sr(o),f=[],T=[];return l.forEach(P=>{u.has(P)||f.push(P)}),u.forEach(P=>{l.has(P)||T.push(P)}),this.syncEngine.Wr(f,T).then(()=>{this.gr=o})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let n=Ed();return e.forEach((o,u)=>{n=n.unionWith(u.activeTargetIds)}),n}}class Qd{constructor(){this.Hr=new wm,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,o){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,n,o){this.Jr[e]=n}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new wm,Promise.resolve()}handleUserChange(e,n,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Ov{Yr(e){}shutdown(){}}class nf{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){dt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){dt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let ql=null;function xc(){return null===ql?ql=268435456+Math.round(2147483648*Math.random()):ql++,"0x"+ql.toString(16)}const Sp={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Ap{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const po="WebChannelConnection";class rf extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,n,o,u,l){const f=xc(),T=this.To(e,n);dt("RestConnection",`Sending RPC '${e}' ${f}:`,T,o);const P={};return this.Eo(P,u,l),this.Ao(e,T,P,o).then(V=>(dt("RestConnection",`Received RPC '${e}' ${f}: `,V),V),V=>{throw Si("RestConnection",`RPC '${e}' ${f} failed with error: `,V,"url: ",T,"request:",o),V})}vo(e,n,o,u,l,f){return this.Io(e,n,o,u,l)}Eo(e,n,o){e["X-Goog-Api-Client"]="gl-js/ fire/"+Br,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((u,l)=>e[l]=u),o&&o.headers.forEach((u,l)=>e[l]=u)}To(e,n){return`${this.mo}/v1/${n}:${Sp[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,n,o,u){const l=xc();return new Promise((f,T)=>{const P=new sn;P.setWithCredentials(!0),P.listenOnce(O.COMPLETE,()=>{try{switch(P.getLastErrorCode()){case q.NO_ERROR:const ne=P.getResponseJson();dt(po,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(ne)),f(ne);break;case q.TIMEOUT:dt(po,`RPC '${e}' ${l} timed out`),T(new ot(Ue.DEADLINE_EXCEEDED,"Request time out"));break;case q.HTTP_ERROR:const ge=P.getStatus();if(dt(po,`RPC '${e}' ${l} failed with status:`,ge,"response text:",P.getResponseText()),ge>0){let Le=P.getResponseJson();Array.isArray(Le)&&(Le=Le[0]);const it=Le?.error;if(it&&it.status&&it.message){const St=function(Gt){const Wt=Gt.toLowerCase().replace(/_/g,"-");return Object.values(Ue).indexOf(Wt)>=0?Wt:Ue.UNKNOWN}(it.status);T(new ot(St,it.message))}else T(new ot(Ue.UNKNOWN,"Server responded with status "+P.getStatus()))}else T(new ot(Ue.UNAVAILABLE,"Connection failed."));break;default:Bt()}}finally{dt(po,`RPC '${e}' ${l} completed.`)}});const V=JSON.stringify(u);dt(po,`RPC '${e}' ${l} sending request:`,u),P.send(n,"POST",V,o,15)})}Ro(e,n,o){const u=xc(),l=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=Ga(),T=C(),P={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},V=this.longPollingOptions.timeoutSeconds;void 0!==V&&(P.longPollingTimeout=Math.round(1e3*V)),this.useFetchStreams&&(P.xmlHttpFactory=new Ke({})),this.Eo(P.initMessageHeaders,n,o),P.encodeInitMessageHeaders=!0;const ne=l.join("");dt(po,`Creating RPC '${e}' stream ${u}: ${ne}`,P);const ge=f.createWebChannel(ne,P);let Le=!1,it=!1;const St=new Ap({ro:Wt=>{it?dt(po,`Not sending because RPC '${e}' stream ${u} is closed:`,Wt):(Le||(dt(po,`Opening RPC '${e}' stream ${u} transport.`),ge.open(),Le=!0),dt(po,`RPC '${e}' stream ${u} sending:`,Wt),ge.send(Wt))},oo:()=>ge.close()}),Gt=(Wt,yr,Jr)=>{Wt.listen(yr,Ir=>{try{Jr(Ir)}catch(ps){setTimeout(()=>{throw ps},0)}})};return Gt(ge,st.EventType.OPEN,()=>{it||dt(po,`RPC '${e}' stream ${u} transport opened.`)}),Gt(ge,st.EventType.CLOSE,()=>{it||(it=!0,dt(po,`RPC '${e}' stream ${u} transport closed`),St.wo())}),Gt(ge,st.EventType.ERROR,Wt=>{it||(it=!0,Si(po,`RPC '${e}' stream ${u} transport errored:`,Wt),St.wo(new ot(Ue.UNAVAILABLE,"The operation could not be completed")))}),Gt(ge,st.EventType.MESSAGE,Wt=>{var yr;if(!it){const Jr=Wt.data[0];zt(!!Jr);const ps=Jr.error||(null===(yr=Jr[0])||void 0===yr?void 0:yr.error);if(ps){dt(po,`RPC '${e}' stream ${u} received error:`,ps);const zs=ps.status;let gs=function(fd){const P_=io[fd];if(void 0!==P_)return Aa(P_)}(zs),la=ps.message;void 0===gs&&(gs=Ue.INTERNAL,la="Unknown error status: "+zs+" with message "+ps.message),it=!0,St.wo(new ot(gs,la)),ge.close()}else dt(po,`RPC '${e}' stream ${u} received:`,Jr),St._o(Jr)}}),Gt(T,j.STAT_EVENT,Wt=>{Wt.stat===de.PROXY?dt(po,`RPC '${e}' stream ${u} detected buffering proxy`):Wt.stat===de.NOPROXY&&dt(po,`RPC '${e}' stream ${u} detected no buffering proxy`)}),setTimeout(()=>{St.fo()},0),St}}function cl(){return typeof window<"u"?window:null}function Kl(){return typeof document<"u"?document:null}function ll(i){return new gv(i,!0)}class Zl{constructor(e,n,o=1e3,u=1.5,l=6e4){this.ii=e,this.timerId=n,this.Po=o,this.bo=u,this.Vo=l,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const n=Math.floor(this.So+this.ko()),o=Math.max(0,Date.now()-this.Co),u=Math.max(0,n-o);u>0&&dt("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.So} ms, delay with jitter: ${n} ms, last attempt: ${o} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,u,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class Pv{constructor(e,n,o,u,l,f,T,P){this.ii=e,this.$o=o,this.Oo=u,this.connection=l,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=T,this.listener=P,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new Zl(e,n)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,p.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,p.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,n){var o=this;return(0,p.Z)(function*(){o.Ho(),o.Jo(),o.qo.cancel(),o.Fo++,4!==e?o.qo.reset():n&&n.code===Ue.RESOURCE_EXHAUSTED?(Mr(n.toString()),Mr("Using maximum backoff delay to prevent overloading the backend."),o.qo.xo()):n&&n.code===Ue.UNAUTHENTICATED&&3!==o.state&&(o.authCredentialsProvider.invalidateToken(),o.appCheckCredentialsProvider.invalidateToken()),null!==o.stream&&(o.Yo(),o.stream.close(),o.stream=null),o.state=e,yield o.listener.ao(n)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),n=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,u])=>{this.Fo===n&&this.Zo(o,u)},o=>{e(()=>{const u=new ot(Ue.UNKNOWN,"Fetching auth token failed: "+o.message);return this.tu(u)})})}Zo(e,n){const o=this.Xo(this.Fo);this.stream=this.eu(e,n),this.stream.uo(()=>{o(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(u=>{o(()=>this.tu(u))}),this.stream.onMessage(u=>{o(()=>this.onMessage(u))})}Go(){var e=this;this.state=5,this.qo.No((0,p.Z)(function*(){e.state=0,e.start()}))}tu(e){return dt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return n=>{this.ii.enqueueAndForget(()=>this.Fo===e?n():(dt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Mp extends Pv{constructor(e,n,o,u,l,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,o,u,f),this.serializer=l}eu(e,n){return this.connection.Ro("Listen",e,n)}onMessage(e){this.qo.reset();const n=function Xf(i,e){let n;if("targetChange"in e){const o="NO_CHANGE"===(P=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===P?1:"REMOVE"===P?2:"CURRENT"===P?3:"RESET"===P?4:Bt(),u=e.targetChange.targetIds||[],l=function(P,V){return P.useProto3Json?(zt(void 0===V||"string"==typeof V),hs.fromBase64String(V||"")):(zt(void 0===V||V instanceof Uint8Array),hs.fromUint8Array(V||new Uint8Array))}(i,e.targetChange.resumeToken),f=e.targetChange.cause,T=f&&function(P){const V=void 0===P.code?Ue.UNKNOWN:Aa(P.code);return new ot(V,P.message||"")}(f);n=new Kf(o,u,l,T||null)}else if("documentChange"in e){const o=e.documentChange,u=xu(i,o.document.name),l=Cs(o.document.updateTime),f=o.document.createTime?Cs(o.document.createTime):hn.min(),T=new fo({mapValue:{fields:o.document.fields}}),P=li.newFoundDocument(u,l,f,T);n=new Nd(o.targetIds||[],o.removedTargetIds||[],P.key,P)}else if("documentDelete"in e){const o=e.documentDelete,u=xu(i,o.document),l=o.readTime?Cs(o.readTime):hn.min(),f=li.newNoDocument(u,l);n=new Nd([],o.removedTargetIds||[],f.key,f)}else if("documentRemove"in e){const o=e.documentRemove,u=xu(i,o.document);n=new Nd([],o.removedTargetIds||[],u,null)}else{if(!("filter"in e))return Bt();{const o=e.filter,{count:u=0,unchangedNames:l}=o,f=new dv(u,l);n=new qg(o.targetId,f)}}var P;return n}(this.serializer,e),o=function(u){if(!("targetChange"in u))return hn.min();const l=u.targetChange;return l.targetIds&&l.targetIds.length?hn.min():l.readTime?Cs(l.readTime):hn.min()}(e);return this.listener.nu(n,o)}su(e){const n={};n.database=Rd(this.serializer),n.addTarget=function(u,l){let f;const T=l.target;if(f=Zc(T)?{documents:Uh(u,T)}:{query:jh(u,T)},f.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){f.resumeToken=Zf(u,l.resumeToken);const P=Fh(u,l.expectedCount);null!==P&&(f.expectedCount=P)}else if(l.snapshotVersion.compareTo(hn.min())>0){f.readTime=tl(u,l.snapshotVersion.toTimestamp());const P=Fh(u,l.expectedCount);null!==P&&(f.expectedCount=P)}return f}(this.serializer,e);const o=function Xg(i,e){const n=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Bt()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);o&&(n.labels=o),this.Wo(n)}iu(e){const n={};n.database=Rd(this.serializer),n.removeTarget=e,this.Wo(n)}}class Xd extends Pv{constructor(e,n,o,u,l,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,o,u,f),this.serializer=l,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,n){return this.connection.Ro("Write",e,n)}onMessage(e){if(zt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const n=function mv(i,e){return i&&i.length>0?(zt(void 0!==e),i.map(n=>function(o,u){let l=Cs(o.updateTime?o.updateTime:u);return l.isEqual(hn.min())&&(l=Cs(u)),new bE(l,o.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),o=Cs(e.commitTime);return this.listener.cu(o,n)}return zt(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=Rd(this.serializer),this.Wo(e)}uu(e){const n={streamToken:this.lastStreamToken,writes:e.map(o=>nl(this.serializer,o))};this.Wo(n)}}class kv extends class{}{constructor(e,n,o,u){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=o,this.serializer=u,this.lu=!1}fu(){if(this.lu)throw new ot(Ue.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,n,o){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,l])=>this.connection.Io(e,n,o,u,l)).catch(u=>{throw"FirebaseError"===u.name?(u.code===Ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ot(Ue.UNKNOWN,u.toString())})}vo(e,n,o,u){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,f])=>this.connection.vo(e,n,o,l,f,u)).catch(l=>{throw"FirebaseError"===l.name?(l.code===Ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ot(Ue.UNKNOWN,l.toString())})}terminate(){this.lu=!0}}class Fv{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Mr(n),this.mu=!1):dt("OnlineStateTracker",n)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class xp{constructor(e,n,o,u,l){var f=this;this.localStore=e,this.datastore=n,this.asyncQueue=o,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=l,this.Pu.Yr(T=>{o.enqueueAndForget((0,p.Z)(function*(){var P;mu(f)&&(dt("RemoteStore","Restarting streams for network reachability change."),yield(P=(0,p.Z)(function*(V){const ne=Ft(V);ne.vu.add(4),yield Ql(ne),ne.bu.set("Unknown"),ne.vu.delete(4),yield Yl(ne)}),function(V){return P.apply(this,arguments)})(f))}))}),this.bu=new Fv(o,u)}}function Yl(i){return Rp.apply(this,arguments)}function Rp(){return Rp=(0,p.Z)(function*(i){if(mu(i))for(const e of i.Ru)yield e(!0)}),Rp.apply(this,arguments)}function Ql(i){return Cm.apply(this,arguments)}function Cm(){return Cm=(0,p.Z)(function*(i){for(const e of i.Ru)yield e(!1)}),Cm.apply(this,arguments)}function sf(i,e){const n=Ft(i);n.Au.has(e.targetId)||(n.Au.set(e.targetId,e),eh(n)?af(n):rh(n).Ko()&&Jd(n,e))}function Rc(i,e){const n=Ft(i),o=rh(n);n.Au.delete(e),o.Ko()&&bm(n,e),0===n.Au.size&&(o.Ko()?o.jo():mu(n)&&n.bu.set("Unknown"))}function Jd(i,e){if(i.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(hn.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}rh(i).su(e)}function bm(i,e){i.Vu.qt(e),rh(i).iu(e)}function af(i){i.Vu=new hv({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),le:e=>i.Au.get(e)||null,ue:()=>i.datastore.serializer.databaseId}),rh(i).start(),i.bu.gu()}function eh(i){return mu(i)&&!rh(i).Uo()&&i.Au.size>0}function mu(i){return 0===Ft(i).vu.size}function Tm(i){i.Vu=void 0}function Sm(i){return Op.apply(this,arguments)}function Op(){return Op=(0,p.Z)(function*(i){i.Au.forEach((e,n)=>{Jd(i,e)})}),Op.apply(this,arguments)}function Am(i,e){return Mm.apply(this,arguments)}function Mm(){return Mm=(0,p.Z)(function*(i,e){Tm(i),eh(i)?(i.bu.Iu(e),af(i)):i.bu.set("Unknown")}),Mm.apply(this,arguments)}function Lv(i,e,n){return Xl.apply(this,arguments)}function Xl(){return Xl=(0,p.Z)(function*(i,e,n){if(i.bu.set("Online"),e instanceof Kf&&2===e.state&&e.cause)try{yield(o=(0,p.Z)(function*(u,l){const f=l.cause;for(const T of l.targetIds)u.Au.has(T)&&(yield u.remoteSyncer.rejectListen(T,f),u.Au.delete(T),u.Vu.removeTarget(T))}),function(u,l){return o.apply(this,arguments)})(i,e)}catch(o){dt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),o),yield uf(i,o)}else if(e instanceof Nd?i.Vu.Ht(e):e instanceof qg?i.Vu.ne(e):i.Vu.Xt(e),!n.isEqual(hn.min()))try{const o=yield vm(i.localStore);n.compareTo(o)>=0&&(yield function(u,l){const f=u.Vu.ce(l);return f.targetChanges.forEach((T,P)=>{if(T.resumeToken.approximateByteSize()>0){const V=u.Au.get(P);V&&u.Au.set(P,V.withResumeToken(T.resumeToken,l))}}),f.targetMismatches.forEach((T,P)=>{const V=u.Au.get(T);if(!V)return;u.Au.set(T,V.withResumeToken(hs.EMPTY_BYTE_STRING,V.snapshotVersion)),bm(u,T);const ne=new Ru(V.target,T,P,V.sequenceNumber);Jd(u,ne)}),u.remoteSyncer.applyRemoteEvent(f)}(i,n))}catch(o){dt("RemoteStore","Failed to raise snapshot:",o),yield uf(i,o)}var o}),Xl.apply(this,arguments)}function uf(i,e,n){return Oc.apply(this,arguments)}function Oc(){return Oc=(0,p.Z)(function*(i,e,n){if(!Un(e))throw e;i.vu.add(1),yield Ql(i),i.bu.set("Offline"),n||(n=()=>vm(i.localStore)),i.asyncQueue.enqueueRetryable((0,p.Z)(function*(){dt("RemoteStore","Retrying IndexedDB access"),yield n(),i.vu.delete(1),yield Yl(i)}))}),Oc.apply(this,arguments)}function Jl(i,e){return e().catch(n=>uf(i,n,e))}function ed(i){return cf.apply(this,arguments)}function cf(){return cf=(0,p.Z)(function*(i){const e=Ft(i),n=ac(e);let o=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;Vv(e);)try{const u=yield Bu(e.localStore,o);if(null===u){0===e.Eu.length&&n.jo();break}o=u.batchId,Bv(e,u)}catch(u){yield uf(e,u)}Nm(e)&&Pp(e)}),cf.apply(this,arguments)}function Vv(i){return mu(i)&&i.Eu.length<10}function Bv(i,e){i.Eu.push(e);const n=ac(i);n.Ko()&&n.ou&&n.uu(e.mutations)}function Nm(i){return mu(i)&&!ac(i).Uo()&&i.Eu.length>0}function Pp(i){ac(i).start()}function xm(i){return th.apply(this,arguments)}function th(){return th=(0,p.Z)(function*(i){ac(i).hu()}),th.apply(this,arguments)}function ME(i){return nh.apply(this,arguments)}function nh(){return nh=(0,p.Z)(function*(i){const e=ac(i);for(const n of i.Eu)e.uu(n.mutations)}),nh.apply(this,arguments)}function Rm(i,e,n){return kp.apply(this,arguments)}function kp(){return kp=(0,p.Z)(function*(i,e,n){const o=i.Eu.shift(),u=bd.from(o,e,n);yield Jl(i,()=>i.remoteSyncer.applySuccessfulWrite(u)),yield ed(i)}),kp.apply(this,arguments)}function Uv(i,e){return lf.apply(this,arguments)}function lf(){return lf=(0,p.Z)(function*(i,e){var n;e&&ac(i).ou&&(yield(n=(0,p.Z)(function*(o,u){if(Wg(l=u.code)&&l!==Ue.ABORTED){const f=o.Eu.shift();ac(o).Qo(),yield Jl(o,()=>o.remoteSyncer.rejectFailedWrite(f.batchId,u)),yield ed(o)}var l}),function(o,u){return n.apply(this,arguments)})(i,e)),Nm(i)&&Pp(i)}),lf.apply(this,arguments)}function Om(i,e){return df.apply(this,arguments)}function df(){return df=(0,p.Z)(function*(i,e){const n=Ft(i);n.asyncQueue.verifyOperationInProgress(),dt("RemoteStore","RemoteStore received new credentials");const o=mu(n);n.vu.add(3),yield Ql(n),o&&n.bu.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.vu.delete(3),yield Yl(n)}),df.apply(this,arguments)}function Fp(i,e){return Lp.apply(this,arguments)}function Lp(){return Lp=(0,p.Z)(function*(i,e){const n=Ft(i);e?(n.vu.delete(2),yield Yl(n)):e||(n.vu.add(2),yield Ql(n),n.bu.set("Unknown"))}),Lp.apply(this,arguments)}function rh(i){return i.Su||(i.Su=function(e,n,o){const u=Ft(e);return u.fu(),new Mp(n,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(i.datastore,i.asyncQueue,{uo:Sm.bind(null,i),ao:Am.bind(null,i),nu:Lv.bind(null,i)}),i.Ru.push(function(){var e=(0,p.Z)(function*(n){n?(i.Su.Qo(),eh(i)?af(i):i.bu.set("Unknown")):(yield i.Su.stop(),Tm(i))});return function(n){return e.apply(this,arguments)}}())),i.Su}function ac(i){return i.Du||(i.Du=function(e,n,o){const u=Ft(e);return u.fu(),new Xd(n,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(i.datastore,i.asyncQueue,{uo:xm.bind(null,i),ao:Uv.bind(null,i),au:ME.bind(null,i),cu:Rm.bind(null,i)}),i.Ru.push(function(){var e=(0,p.Z)(function*(n){n?(i.Du.Qo(),yield ed(i)):(yield i.Du.stop(),i.Eu.length>0&&(dt("RemoteStore",`Stopping write stream with ${i.Eu.length} pending writes`),i.Eu=[]))});return function(n){return e.apply(this,arguments)}}())),i.Du}class hf{constructor(e,n,o,u,l){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=o,this.op=u,this.removalCallback=l,this.deferred=new Xi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(f=>{})}static createAndSchedule(e,n,o,u,l){const f=Date.now()+o,T=new hf(e,n,f,u,l);return T.start(o),T}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ot(Ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ca(i,e){if(Mr("AsyncQueue",`${e}: ${i}`),Un(i))return new ot(Ue.UNAVAILABLE,`${e}: ${i}`);throw i}class dl{constructor(e){this.comparator=e?(n,o)=>e(n,o)||Ot.comparator(n.key,o.key):(n,o)=>Ot.comparator(n.key,o.key),this.keyedMap=Ya(),this.sortedSet=new ri(this.comparator)}static emptySet(e){return new dl(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,o)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof dl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;n.hasNext();){const u=n.getNext().key,l=o.getNext().key;if(!u.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const o=new dl;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=n,o}}class jv{constructor(){this.Cu=new ri(Ot.comparator)}track(e){const n=e.doc.key,o=this.Cu.get(n);o?0!==e.type&&3===o.type?this.Cu=this.Cu.insert(n,e):3===e.type&&1!==o.type?this.Cu=this.Cu.insert(n,{type:o.type,doc:e.doc}):2===e.type&&2===o.type?this.Cu=this.Cu.insert(n,{type:2,doc:e.doc}):2===e.type&&0===o.type?this.Cu=this.Cu.insert(n,{type:0,doc:e.doc}):1===e.type&&0===o.type?this.Cu=this.Cu.remove(n):1===e.type&&2===o.type?this.Cu=this.Cu.insert(n,{type:1,doc:o.doc}):0===e.type&&1===o.type?this.Cu=this.Cu.insert(n,{type:2,doc:e.doc}):Bt():this.Cu=this.Cu.insert(n,e)}xu(){const e=[];return this.Cu.inorderTraversal((n,o)=>{e.push(o)}),e}}class Pc{constructor(e,n,o,u,l,f,T,P,V){this.query=e,this.docs=n,this.oldDocs=o,this.docChanges=u,this.mutatedKeys=l,this.fromCache=f,this.syncStateChanged=T,this.excludesMetadataChanges=P,this.hasCachedResults=V}static fromInitialDocuments(e,n,o,u,l){const f=[];return n.forEach(T=>{f.push({type:0,doc:T})}),new Pc(e,n,dl.emptySet(n),f,o,u,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&be(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,o=e.docChanges;if(n.length!==o.length)return!1;for(let u=0;u<n.length;u++)if(n[u].type!==o[u].type||!n[u].doc.isEqual(o[u].doc))return!1;return!0}}class kc{constructor(){this.Nu=void 0,this.listeners=[]}}class Vp{constructor(){this.queries=new ro(e=>Ye(e),be),this.onlineState="Unknown",this.ku=new Set}}function Bp(i,e){return Pm.apply(this,arguments)}function Pm(){return Pm=(0,p.Z)(function*(i,e){const n=Ft(i),o=e.query;let u=!1,l=n.queries.get(o);if(l||(u=!0,l=new kc),u)try{l.Nu=yield n.onListen(o)}catch(f){const T=ca(f,`Initialization of query '${Nt(e.query)}' failed`);return void e.onError(T)}n.queries.set(o,l),l.listeners.push(e),e.Mu(n.onlineState),l.Nu&&e.$u(l.Nu)&&jp(n)}),Pm.apply(this,arguments)}function Up(i,e){return ih.apply(this,arguments)}function ih(){return ih=(0,p.Z)(function*(i,e){const n=Ft(i),o=e.query;let u=!1;const l=n.queries.get(o);if(l){const f=l.listeners.indexOf(e);f>=0&&(l.listeners.splice(f,1),u=0===l.listeners.length)}if(u)return n.queries.delete(o),n.onUnlisten(o)}),ih.apply(this,arguments)}function Uu(i,e){const n=Ft(i);let o=!1;for(const u of e){const f=n.queries.get(u.query);if(f){for(const T of f.listeners)T.$u(u)&&(o=!0);f.Nu=u}}o&&jp(n)}function km(i,e,n){const o=Ft(i),u=o.queries.get(e);if(u)for(const l of u.listeners)l.onError(n);o.queries.delete(e)}function jp(i){i.ku.forEach(e=>{e.next()})}class Fm{constructor(e,n,o){this.query=e,this.Ou=n,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=o||{}}$u(e){if(!this.options.includeMetadataChanges){const o=[];for(const u of e.docChanges)3!==u.type&&o.push(u);e=new Pc(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),n=!0):this.qu(e,this.onlineState)&&(this.Uu(e),n=!0),this.Bu=e,n}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let n=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),n=!0),n}qu(e,n){return!e.fromCache||(!this.options.Ku||!("Offline"!==n))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===n)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=Pc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class Bo{constructor(e,n){this.Gu=e,this.byteLength=n}Qu(){return"metadata"in this.Gu}}class Lm{constructor(e){this.serializer=e}rr(e){return xu(this.serializer,e)}ur(e){return e.metadata.exists?Qf(this.serializer,e.document,!1):li.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return Cs(e)}}class $p{constructor(e,n,o){this.ju=e,this.localStore=n,this.serializer=o,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Vm(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++n;const o=on.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(o.get(o.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}Wu(e){const n=new Map,o=new Lm(this.serializer);for(const u of e)if(u.metadata.queries){const l=o.rr(u.metadata.name);for(const f of u.metadata.queries){const T=(n.get(f)||ur()).add(l);n.set(f,T)}}return n}complete(){var e=this;return(0,p.Z)(function*(){const n=yield function Rv(i,e,n,o){return Ip.apply(this,arguments)}(e.localStore,new Lm(e.serializer),e.documents,e.ju.id),o=e.Wu(e.documents);for(const u of e.queries)yield Dp(e.localStore,u,o.get(u.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:n}})()}}function Vm(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class Bm{constructor(e){this.key=e}}class ff{constructor(e){this.key=e}}class Hp{constructor(e,n){this.query=e,this.Yu=n,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=ur(),this.mutatedKeys=ur(),this.tc=wr(e),this.ec=new dl(this.tc)}get nc(){return this.Yu}sc(e,n){const o=n?n.ic:new jv,u=n?n.ec:this.ec;let l=n?n.mutatedKeys:this.mutatedKeys,f=u,T=!1;const P="F"===this.query.limitType&&u.size===this.query.limit?u.last():null,V="L"===this.query.limitType&&u.size===this.query.limit?u.first():null;if(e.inorderTraversal((ne,ge)=>{const Le=u.get(ne),it=Ut(this.query,ge)?ge:null,St=!!Le&&this.mutatedKeys.has(Le.key),Gt=!!it&&(it.hasLocalMutations||this.mutatedKeys.has(it.key)&&it.hasCommittedMutations);let Wt=!1;Le&&it?Le.data.isEqual(it.data)?St!==Gt&&(o.track({type:3,doc:it}),Wt=!0):this.rc(Le,it)||(o.track({type:2,doc:it}),Wt=!0,(P&&this.tc(it,P)>0||V&&this.tc(it,V)<0)&&(T=!0)):!Le&&it?(o.track({type:0,doc:it}),Wt=!0):Le&&!it&&(o.track({type:1,doc:Le}),Wt=!0,(P||V)&&(T=!0)),Wt&&(it?(f=f.add(it),l=Gt?l.add(ne):l.delete(ne)):(f=f.delete(ne),l=l.delete(ne)))}),null!==this.query.limit)for(;f.size>this.query.limit;){const ne="F"===this.query.limitType?f.last():f.first();f=f.delete(ne.key),l=l.delete(ne.key),o.track({type:1,doc:ne})}return{ec:f,ic:o,zi:T,mutatedKeys:l}}rc(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,o){const u=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const l=e.ic.xu();l.sort((V,ne)=>function(ge,Le){const it=St=>{switch(St){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Bt()}};return it(ge)-it(Le)}(V.type,ne.type)||this.tc(V.doc,ne.doc)),this.oc(o);const f=n?this.uc():[],T=0===this.Zu.size&&this.current?1:0,P=T!==this.Xu;return this.Xu=T,0!==l.length||P?{snapshot:new Pc(this.query,e.ec,u,l,e.mutatedKeys,0===T,P,!1,!!o&&o.resumeToken.approximateByteSize()>0),cc:f}:{cc:f}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new jv,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(n=>this.Yu=this.Yu.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Yu=this.Yu.delete(n)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=ur(),this.ec.forEach(o=>{this.ac(o.key)&&(this.Zu=this.Zu.add(o.key))});const n=[];return e.forEach(o=>{this.Zu.has(o)||n.push(new ff(o))}),this.Zu.forEach(o=>{e.has(o)||n.push(new Bm(o))}),n}hc(e){this.Yu=e.ir,this.Zu=ur();const n=this.sc(e.documents);return this.applyChanges(n,!0)}lc(){return Pc.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class Um{constructor(e,n,o){this.query=e,this.targetId=n,this.view=o}}class $v{constructor(e){this.key=e,this.fc=!1}}class jm{constructor(e,n,o,u,l,f){this.localStore=e,this.remoteStore=n,this.eventManager=o,this.sharedClientState=u,this.currentUser=l,this.maxConcurrentLimboResolutions=f,this.dc={},this.wc=new ro(T=>Ye(T),be),this._c=new Map,this.mc=new Set,this.gc=new ri(Ot.comparator),this.yc=new Map,this.Ic=new Kh,this.Tc={},this.Ec=new Map,this.Ac=Hl.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function $m(i,e){return zp.apply(this,arguments)}function zp(){return zp=(0,p.Z)(function*(i,e){const n=ch(i);let o,u;const l=n.wc.get(e);if(l)o=l.targetId,n.sharedClientState.addLocalQueryTarget(o),u=l.view.lc();else{const f=yield oc(n.localStore,b(e)),T=n.sharedClientState.addLocalQueryTarget(f.targetId);o=f.targetId,u=yield Gp(n,e,o,"current"===T,f.resumeToken),n.isPrimaryClient&&sf(n.remoteStore,f)}return u}),zp.apply(this,arguments)}function Gp(i,e,n,o,u){return Wp.apply(this,arguments)}function Wp(){return Wp=(0,p.Z)(function*(i,e,n,o,u){i.Rc=(ge,Le,it)=>{return(St=(0,p.Z)(function*(Gt,Wt,yr,Jr){let Ir=Wt.view.sc(yr);Ir.zi&&(Ir=yield Jh(Gt.localStore,Wt.query,!1).then(({documents:gs})=>Wt.view.sc(gs,Ir)));const ps=Jr&&Jr.targetChanges.get(Wt.targetId),zs=Wt.view.applyChanges(Ir,Gt.isPrimaryClient,ps);return Xp(Gt,Wt.targetId,zs.cc),zs.snapshot}),function(Gt,Wt,yr,Jr){return St.apply(this,arguments)})(i,ge,Le,it);var St};const l=yield Jh(i.localStore,e,!0),f=new Hp(e,l.ir),T=f.sc(l.documents),P=Md.createSynthesizedTargetChangeForCurrentChange(n,o&&"Offline"!==i.onlineState,u),V=f.applyChanges(T,i.isPrimaryClient,P);Xp(i,n,V.cc);const ne=new Um(e,n,f);return i.wc.set(e,ne),i._c.has(n)?i._c.get(n).push(e):i._c.set(n,[e]),V.snapshot}),Wp.apply(this,arguments)}function Hm(i,e){return Fc.apply(this,arguments)}function Fc(){return Fc=(0,p.Z)(function*(i,e){const n=Ft(i),o=n.wc.get(e),u=n._c.get(o.targetId);if(u.length>1)return n._c.set(o.targetId,u.filter(l=>!be(l,e))),void n.wc.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(o.targetId),n.sharedClientState.isActiveQueryTarget(o.targetId)||(yield Nc(n.localStore,o.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(o.targetId),Rc(n.remoteStore,o.targetId),hl(n,o.targetId)}).catch(ie))):(hl(n,o.targetId),yield Nc(n.localStore,o.targetId,!0))}),Fc.apply(this,arguments)}function Lc(){return Lc=(0,p.Z)(function*(i,e,n){const o=lh(i);try{const u=yield function(l,f){const T=Ft(l),P=Kr.now(),V=f.reduce((Le,it)=>Le.add(it.key),ur());let ne,ge;return T.persistence.runTransaction("Locally write mutations","readwrite",Le=>{let it=Zo(),St=ur();return T.Zi.getEntries(Le,V).next(Gt=>{it=Gt,it.forEach((Wt,yr)=>{yr.isValidDocument()||(St=St.add(Wt))})}).next(()=>T.localDocuments.getOverlayedDocuments(Le,it)).next(Gt=>{ne=Gt;const Wt=[];for(const yr of f){const Jr=Fl(yr,ne.get(yr.key).overlayedDocument);null!=Jr&&Wt.push(new su(yr.key,Jr,Nl(Jr.value.mapValue),Ds.exists(!0)))}return T.mutationQueue.addMutationBatch(Le,P,Wt,f)}).next(Gt=>{ge=Gt;const Wt=Gt.applyToLocalDocumentSet(ne,St);return T.documentOverlayCache.saveOverlays(Le,Gt.batchId,Wt)})}).then(()=>({batchId:ge.batchId,changes:ec(ne)}))}(o.localStore,e);o.sharedClientState.addPendingMutation(u.batchId),function(l,f,T){let P=l.Tc[l.currentUser.toKey()];P||(P=new ri(On)),P=P.insert(f,T),l.Tc[l.currentUser.toKey()]=P}(o,u.batchId,n),yield ju(o,u.changes),yield ed(o.remoteStore)}catch(u){const l=ca(u,"Failed to persist write");n.reject(l)}}),Lc.apply(this,arguments)}function zm(i,e){return qp.apply(this,arguments)}function qp(){return qp=(0,p.Z)(function*(i,e){const n=Ft(i);try{const o=yield function _p(i,e){const n=Ft(i),o=e.snapshotVersion;let u=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const f=n.Zi.newChangeBuffer({trackRemovals:!0});u=n.Ji;const T=[];e.targetChanges.forEach((ne,ge)=>{const Le=u.get(ge);if(!Le)return;T.push(n.Bs.removeMatchingKeys(l,ne.removedDocuments,ge).next(()=>n.Bs.addMatchingKeys(l,ne.addedDocuments,ge)));let it=Le.withSequenceNumber(l.currentSequenceNumber);var St,Gt,Wt;null!==e.targetMismatches.get(ge)?it=it.withResumeToken(hs.EMPTY_BYTE_STRING,hn.min()).withLastLimboFreeSnapshotVersion(hn.min()):ne.resumeToken.approximateByteSize()>0&&(it=it.withResumeToken(ne.resumeToken,o)),u=u.insert(ge,it),Gt=it,Wt=ne,(0===(St=Le).resumeToken.approximateByteSize()||Gt.snapshotVersion.toMicroseconds()-St.snapshotVersion.toMicroseconds()>=3e8||Wt.addedDocuments.size+Wt.modifiedDocuments.size+Wt.removedDocuments.size>0)&&T.push(n.Bs.updateTargetData(l,it))});let P=Zo(),V=ur();if(e.documentUpdates.forEach(ne=>{e.resolvedLimboDocuments.has(ne)&&T.push(n.persistence.referenceDelegate.updateLimboDocument(l,ne))}),T.push(Kd(l,f,e.documentUpdates).next(ne=>{P=ne.nr,V=ne.sr})),!o.isEqual(hn.min())){const ne=n.Bs.getLastRemoteSnapshotVersion(l).next(ge=>n.Bs.setTargetsMetadata(l,l.currentSequenceNumber,o));T.push(ne)}return Q.waitFor(T).next(()=>f.apply(l)).next(()=>n.localDocuments.getLocalViewOfDocuments(l,P,V)).next(()=>P)}).then(l=>(n.Ji=u,l))}(n.localStore,e);e.targetChanges.forEach((u,l)=>{const f=n.yc.get(l);f&&(zt(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1),u.addedDocuments.size>0?f.fc=!0:u.modifiedDocuments.size>0?zt(f.fc):u.removedDocuments.size>0&&(zt(f.fc),f.fc=!1))}),yield ju(n,o,e)}catch(o){yield ie(o)}}),qp.apply(this,arguments)}function Kp(i,e,n){const o=Ft(i);if(o.isPrimaryClient&&0===n||!o.isPrimaryClient&&1===n){const u=[];o.wc.forEach((l,f)=>{const T=f.view.Mu(e);T.snapshot&&u.push(T.snapshot)}),function(l,f){const T=Ft(l);T.onlineState=f;let P=!1;T.queries.forEach((V,ne)=>{for(const ge of ne.listeners)ge.Mu(f)&&(P=!0)}),P&&jp(T)}(o.eventManager,e),u.length&&o.dc.nu(u),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}function Gm(i,e,n){return sh.apply(this,arguments)}function sh(){return sh=(0,p.Z)(function*(i,e,n){const o=Ft(i);o.sharedClientState.updateQueryState(e,"rejected",n);const u=o.yc.get(e),l=u&&u.key;if(l){let f=new ri(Ot.comparator);f=f.insert(l,li.newNoDocument(l,hn.min()));const T=ur().add(l),P=new Bl(hn.min(),new Map,new ri(On),f,T);yield zm(o,P),o.gc=o.gc.remove(l),o.yc.delete(e),qm(o)}else yield Nc(o.localStore,e,!1).then(()=>hl(o,e,n)).catch(ie)}),sh.apply(this,arguments)}function oh(i,e){return td.apply(this,arguments)}function td(){return td=(0,p.Z)(function*(i,e){const n=Ft(i),o=e.batch.batchId;try{const u=yield function Xh(i,e){const n=Ft(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const u=e.batch.keys(),l=n.Zi.newChangeBuffer({trackRemovals:!0});return function(f,T,P,V){const ne=P.batch,ge=ne.keys();let Le=Q.resolve();return ge.forEach(it=>{Le=Le.next(()=>V.getEntry(T,it)).next(St=>{const Gt=P.docVersions.get(it);zt(null!==Gt),St.version.compareTo(Gt)<0&&(ne.applyToRemoteDocument(St,P),St.isValidDocument()&&(St.setReadTime(P.commitVersion),V.addEntry(St)))})}),Le.next(()=>f.mutationQueue.removeMutationBatch(T,ne))}(n,o,e,l).next(()=>l.apply(o)).next(()=>n.mutationQueue.performConsistencyCheck(o)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(o,u,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,function(f){let T=ur();for(let P=0;P<f.mutationResults.length;++P)f.mutationResults[P].transformResults.length>0&&(T=T.add(f.batch.mutations[P].key));return T}(e))).next(()=>n.localDocuments.getDocuments(o,u))})}(n.localStore,e);Qp(n,o,null),Yp(n,o),n.sharedClientState.updateMutationState(o,"acknowledged"),yield ju(n,u)}catch(u){yield ie(u)}}),td.apply(this,arguments)}function Wm(i,e,n){return pf.apply(this,arguments)}function pf(){return pf=(0,p.Z)(function*(i,e,n){const o=Ft(i);try{const u=yield function(l,f){const T=Ft(l);return T.persistence.runTransaction("Reject batch","readwrite-primary",P=>{let V;return T.mutationQueue.lookupMutationBatch(P,f).next(ne=>(zt(null!==ne),V=ne.keys(),T.mutationQueue.removeMutationBatch(P,ne))).next(()=>T.mutationQueue.performConsistencyCheck(P)).next(()=>T.documentOverlayCache.removeOverlaysForBatchId(P,V,f)).next(()=>T.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(P,V)).next(()=>T.localDocuments.getDocuments(P,V))})}(o.localStore,e);Qp(o,e,n),Yp(o,e),o.sharedClientState.updateMutationState(e,"rejected",n),yield ju(o,u)}catch(u){yield ie(u)}}),pf.apply(this,arguments)}function Zp(){return Zp=(0,p.Z)(function*(i,e){const n=Ft(i);mu(n.remoteStore)||dt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const o=yield function(l){const f=Ft(l);return f.persistence.runTransaction("Get highest unacknowledged batch id","readonly",T=>f.mutationQueue.getHighestUnacknowledgedBatchId(T))}(n.localStore);if(-1===o)return void e.resolve();const u=n.Ec.get(o)||[];u.push(e),n.Ec.set(o,u)}catch(o){const u=ca(o,"Initialization of waitForPendingWrites() operation failed");e.reject(u)}}),Zp.apply(this,arguments)}function Yp(i,e){(i.Ec.get(e)||[]).forEach(n=>{n.resolve()}),i.Ec.delete(e)}function Qp(i,e,n){const o=Ft(i);let u=o.Tc[o.currentUser.toKey()];if(u){const l=u.get(e);l&&(n?l.reject(n):l.resolve(),u=u.remove(e)),o.Tc[o.currentUser.toKey()]=u}}function hl(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const o of i._c.get(e))i.wc.delete(o),n&&i.dc.Pc(o,n);i._c.delete(e),i.isPrimaryClient&&i.Ic.Is(e).forEach(o=>{i.Ic.containsKey(o)||zv(i,o)})}function zv(i,e){i.mc.delete(e.path.canonicalString());const n=i.gc.get(e);null!==n&&(Rc(i.remoteStore,n),i.gc=i.gc.remove(e),i.yc.delete(n),qm(i))}function Xp(i,e,n){for(const o of n)o instanceof Bm?(i.Ic.addReference(o.key,e),NE(i,o)):o instanceof ff?(dt("SyncEngine","Document no longer in limbo: "+o.key),i.Ic.removeReference(o.key,e),i.Ic.containsKey(o.key)||zv(i,o.key)):Bt()}function NE(i,e){const n=e.key,o=n.path.canonicalString();i.gc.get(n)||i.mc.has(o)||(dt("SyncEngine","New document in limbo: "+n),i.mc.add(o),qm(i))}function qm(i){for(;i.mc.size>0&&i.gc.size<i.maxConcurrentLimboResolutions;){const e=i.mc.values().next().value;i.mc.delete(e);const n=new Ot(on.fromString(e)),o=i.Ac.next();i.yc.set(o,new $v(n)),i.gc=i.gc.insert(n,o),sf(i.remoteStore,new Ru(b(Nu(n.path)),o,"TargetPurposeLimboResolution",Pr.ct))}}function ju(i,e,n){return gf.apply(this,arguments)}function gf(){return gf=(0,p.Z)(function*(i,e,n){const o=Ft(i),u=[],l=[],f=[];var T;o.wc.isEmpty()||(o.wc.forEach((T,P)=>{f.push(o.Rc(P,e,n).then(V=>{if((V||n)&&o.isPrimaryClient&&o.sharedClientState.updateQueryState(P.targetId,V?.fromCache?"not-current":"current"),V){u.push(V);const ne=Wd.Li(P.targetId,V);l.push(ne)}}))}),yield Promise.all(f),o.dc.nu(u),yield(T=(0,p.Z)(function*(P,V){const ne=Ft(P);try{yield ne.persistence.runTransaction("notifyLocalViewChanges","readwrite",ge=>Q.forEach(V,Le=>Q.forEach(Le.Fi,it=>ne.persistence.referenceDelegate.addReference(ge,Le.targetId,it)).next(()=>Q.forEach(Le.Bi,it=>ne.persistence.referenceDelegate.removeReference(ge,Le.targetId,it)))))}catch(ge){if(!Un(ge))throw ge;dt("LocalStore","Failed to update sequence numbers: "+ge)}for(const ge of V){const Le=ge.targetId;if(!ge.fromCache){const it=ne.Ji.get(Le),Gt=it.withLastLimboFreeSnapshotVersion(it.snapshotVersion);ne.Ji=ne.Ji.insert(Le,Gt)}}}),function(P,V){return T.apply(this,arguments)})(o.localStore,l))}),gf.apply(this,arguments)}function xE(i,e){return nd.apply(this,arguments)}function nd(){return nd=(0,p.Z)(function*(i,e){const n=Ft(i);if(!n.currentUser.isEqual(e)){dt("SyncEngine","User change. New user:",e.toKey());const o=yield ym(n.localStore,e);n.currentUser=e,(u=n).Ec.forEach(f=>{f.forEach(T=>{T.reject(new ot(Ue.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),u.Ec.clear(),n.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),yield ju(n,o.er)}var u}),nd.apply(this,arguments)}function Km(i,e){const n=Ft(i),o=n.yc.get(e);if(o&&o.fc)return ur().add(o.key);{let u=ur();const l=n._c.get(e);if(!l)return u;for(const f of l){const T=n.wc.get(f);u=u.unionWith(T.view.nc)}return u}}function Zm(i,e){return Jp.apply(this,arguments)}function Jp(){return Jp=(0,p.Z)(function*(i,e){const n=Ft(i),o=yield Jh(n.localStore,e.query,!0),u=e.view.hc(o);return n.isPrimaryClient&&Xp(n,e.targetId,u.cc),u}),Jp.apply(this,arguments)}function Ym(i,e){return mf.apply(this,arguments)}function mf(){return mf=(0,p.Z)(function*(i,e){const n=Ft(i);return ul(n.localStore,e).then(o=>ju(n,o))}),mf.apply(this,arguments)}function cr(i,e,n,o){return yf.apply(this,arguments)}function yf(){return yf=(0,p.Z)(function*(i,e,n,o){const u=Ft(i),l=yield function(f,T){const P=Ft(f),V=Ft(P.mutationQueue);return P.persistence.runTransaction("Lookup mutation documents","readonly",ne=>V.Sn(ne,T).next(ge=>ge?P.localDocuments.getDocuments(ne,ge):Q.resolve(null)))}(u.localStore,e);var T;null!==l?("pending"===n?yield ed(u.remoteStore):"acknowledged"===n||"rejected"===n?(Qp(u,e,o||null),Yp(u,e),T=e,Ft(Ft(u.localStore).mutationQueue).Cn(T)):Bt(),yield ju(u,l)):dt("SyncEngine","Cannot apply mutation batch with id: "+e)}),yf.apply(this,arguments)}function Vc(){return Vc=(0,p.Z)(function*(i,e){const n=Ft(i);if(ch(n),lh(n),!0===e&&!0!==n.vc){const o=n.sharedClientState.getAllActiveQueryTargets(),u=yield eg(n,o.toArray());n.vc=!0,yield Fp(n.remoteStore,!0);for(const l of u)sf(n.remoteStore,l)}else if(!1===e&&!1!==n.vc){const o=[];let u=Promise.resolve();n._c.forEach((l,f)=>{n.sharedClientState.isLocalQueryTarget(f)?o.push(f):u=u.then(()=>(hl(n,f),Nc(n.localStore,f,!0))),Rc(n.remoteStore,f)}),yield u,yield eg(n,o),function(l){const f=Ft(l);f.yc.forEach((T,P)=>{Rc(f.remoteStore,P)}),f.Ic.Ts(),f.yc=new Map,f.gc=new ri(Ot.comparator)}(n),n.vc=!1,yield Fp(n.remoteStore,!1)}}),Vc.apply(this,arguments)}function eg(i,e,n){return tg.apply(this,arguments)}function tg(){return tg=(0,p.Z)(function*(i,e,n){const o=Ft(i),u=[],l=[];for(const f of e){let T;const P=o._c.get(f);if(P&&0!==P.length){T=yield oc(o.localStore,b(P[0]));for(const V of P){const ne=o.wc.get(V),ge=yield Zm(o,ne);ge.snapshot&&l.push(ge.snapshot)}}else{const V=yield wp(o.localStore,f);T=yield oc(o.localStore,V),yield Gp(o,ah(V),f,!1,T.resumeToken)}u.push(T)}return o.dc.nu(l),u}),tg.apply(this,arguments)}function ah(i){return Uf(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function rd(i){const e=Ft(i);return Ft(Ft(e.localStore).persistence).$i()}function ng(i,e,n,o){return fl.apply(this,arguments)}function fl(){return fl=(0,p.Z)(function*(i,e,n,o){const u=Ft(i);if(u.vc)return void dt("SyncEngine","Ignoring unexpected query state notification.");const l=u._c.get(e);if(l&&l.length>0)switch(n){case"current":case"not-current":{const f=yield ul(u.localStore,yn(l[0])),T=Bl.createSynthesizedRemoteEventForCurrentChange(e,"current"===n,hs.EMPTY_BYTE_STRING);yield ju(u,f,T);break}case"rejected":yield Nc(u.localStore,e,!0),hl(u,e,o);break;default:Bt()}}),fl.apply(this,arguments)}function Xm(i,e,n){return uh.apply(this,arguments)}function uh(){return uh=(0,p.Z)(function*(i,e,n){const o=ch(i);if(o.vc){for(const u of e){if(o._c.has(u)){dt("SyncEngine","Adding an already active target "+u);continue}const l=yield wp(o.localStore,u),f=yield oc(o.localStore,l);yield Gp(o,ah(l),f.targetId,!1,f.resumeToken),sf(o.remoteStore,f)}for(const u of n)o._c.has(u)&&(yield Nc(o.localStore,u,!1).then(()=>{Rc(o.remoteStore,u),hl(o,u)}).catch(ie))}}),uh.apply(this,arguments)}function ch(i){const e=Ft(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=zm.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Km.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Gm.bind(null,e),e.dc.nu=Uu.bind(null,e.eventManager),e.dc.Pc=km.bind(null,e.eventManager),e}function lh(i){const e=Ft(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=oh.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Wm.bind(null,e),e}class pl{constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return(0,p.Z)(function*(){n.serializer=ll(e.databaseInfo.databaseId),n.sharedClientState=n.createSharedClientState(e),n.persistence=n.createPersistence(e),yield n.persistence.start(),n.localStore=n.createLocalStore(e),n.gcScheduler=n.createGarbageCollectionScheduler(e,n.localStore),n.indexBackfillerScheduler=n.createIndexBackfillerScheduler(e,n.localStore)})()}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return Mc(this.persistence,new vp,e.initialUser,this.serializer)}createPersistence(e){return new Zh(zl.zs,this.serializer)}createSharedClientState(e){return new Qd}terminate(){var e=this;return(0,p.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class rg extends pl{constructor(e,n,o){super(),this.Vc=e,this.cacheSizeBytes=n,this.forceOwnership=o,this.synchronizeTabs=!1}initialize(e){var n=()=>super.initialize,o=this;return(0,p.Z)(function*(){yield n().call(o,e),yield o.Vc.initialize(o,e),yield lh(o.Vc.syncEngine),yield ed(o.Vc.remoteStore),yield o.persistence.Ii(()=>(o.gcScheduler&&!o.gcScheduler.started&&o.gcScheduler.start(),o.indexBackfillerScheduler&&!o.indexBackfillerScheduler.started&&o.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return Mc(this.persistence,new vp,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){return new lm(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const o=new ds(n,this.persistence);return new Bi(e.asyncQueue,o)}createPersistence(e){const n=yp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?ua.withCacheSize(this.cacheSizeBytes):ua.DEFAULT;return new Gl(this.synchronizeTabs,n,e.clientId,o,e.asyncQueue,cl(),Kl(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Qd}}class ey extends rg{constructor(e,n){super(e,n,!1),this.Vc=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){var n=()=>super.initialize,o=this;return(0,p.Z)(function*(){yield n().call(o,e);const u=o.Vc.syncEngine;o.sharedClientState instanceof Im&&(o.sharedClientState.syncEngine={jr:cr.bind(null,u),zr:ng.bind(null,u),Wr:Xm.bind(null,u),$i:rd.bind(null,u),Qr:Ym.bind(null,u)},yield o.sharedClientState.start()),yield o.persistence.Ii(function(){var l=(0,p.Z)(function*(f){yield function Qm(i,e){return Vc.apply(this,arguments)}(o.Vc.syncEngine,f),o.gcScheduler&&(f&&!o.gcScheduler.started?o.gcScheduler.start():f||o.gcScheduler.stop()),o.indexBackfillerScheduler&&(f&&!o.indexBackfillerScheduler.started?o.indexBackfillerScheduler.start():f||o.indexBackfillerScheduler.stop())});return function(f){return l.apply(this,arguments)}}())})()}createSharedClientState(e){const n=cl();if(!Im.D(n))throw new ot(Ue.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const o=yp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Im(n,e.asyncQueue,o,e.clientId,e.initialUser)}}class gl{initialize(e,n){var o=this;return(0,p.Z)(function*(){o.localStore||(o.localStore=e.localStore,o.sharedClientState=e.sharedClientState,o.datastore=o.createDatastore(n),o.remoteStore=o.createRemoteStore(n),o.eventManager=o.createEventManager(n),o.syncEngine=o.createSyncEngine(n,!e.synchronizeTabs),o.sharedClientState.onlineStateHandler=u=>Kp(o.syncEngine,u,1),o.remoteStore.remoteSyncer.handleCredentialChange=xE.bind(null,o.syncEngine),yield Fp(o.remoteStore,o.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Vp}createDatastore(e){const n=ll(e.databaseInfo.databaseId),o=new rf(e.databaseInfo);return new kv(e.authCredentials,e.appCheckCredentials,o,n)}createRemoteStore(e){return n=this.localStore,o=this.datastore,u=e.asyncQueue,l=T=>Kp(this.syncEngine,T,0),f=nf.D()?new nf:new Ov,new xp(n,o,u,l,f);var n,o,u,l,f}createSyncEngine(e,n){return function(o,u,l,f,T,P,V){const ne=new jm(o,u,l,f,T,P);return V&&(ne.vc=!0),ne}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return(e=(0,p.Z)(function*(n){const o=Ft(n);dt("RemoteStore","RemoteStore shutting down."),o.vu.add(5),yield Ql(o),o.Pu.shutdown(),o.bu.set("Unknown")}),function(n){return e.apply(this,arguments)})(this.remoteStore);var e}}function ty(i,e=10240){let n=0;return{read:()=>(0,p.Z)(function*(){if(n<i.byteLength){const o={value:i.slice(n,n+e),done:!1};return n+=e,o}return{done:!0}})(),cancel:()=>(0,p.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class vf{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Mr("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class Wv{constructor(e,n){this.Cc=e,this.serializer=n,this.metadata=new Xi,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(o=>{o&&o.Qu()?this.metadata.resolve(o.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(o?.Gu)}`))},o=>this.metadata.reject(o))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,p.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,p.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,p.Z)(function*(){const n=yield e.kc();if(null===n)return null;const o=e.xc.decode(n),u=Number(o);isNaN(u)&&e.Mc(`length string (${o}) is not valid number`);const l=yield e.$c(u);return new Bo(JSON.parse(l),n.length+u)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,p.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const n=e.Oc();n<0&&e.Mc("Reached the end of bundle when a length string is expected.");const o=e.buffer.slice(0,n);return e.buffer=e.buffer.slice(n),o})()}$c(e){var n=this;return(0,p.Z)(function*(){for(;n.buffer.length<e;)(yield n.Fc())&&n.Mc("Reached the end of bundle when more is expected.");const o=n.xc.decode(n.buffer.slice(0,e));return n.buffer=n.buffer.slice(e),o})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,p.Z)(function*(){const n=yield e.Cc.read();if(!n.done){const o=new Uint8Array(e.buffer.length+n.value.length);o.set(e.buffer),o.set(n.value,e.buffer.length),e.buffer=o}return n.done})()}}class qv{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var n=this;return(0,p.Z)(function*(){if(n.ensureCommitNotCalled(),n.mutations.length>0)throw new ot(Ue.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const o=yield(u=(0,p.Z)(function*(l,f){const T=Ft(l),P=Rd(T.serializer)+"/documents",V={documents:f.map(it=>wc(T.serializer,it))},ne=yield T.vo("BatchGetDocuments",P,V,f.length),ge=new Map;ne.forEach(it=>{const St=function Bh(i,e){return"found"in e?function(n,o){zt(!!o.found);const u=xu(n,o.found.name),l=Cs(o.found.updateTime),f=o.found.createTime?Cs(o.found.createTime):hn.min(),T=new fo({mapValue:{fields:o.found.fields}});return li.newFoundDocument(u,l,f,T)}(i,e):"missing"in e?function(n,o){zt(!!o.missing),zt(!!o.readTime);const u=xu(n,o.missing),l=Cs(o.readTime);return li.newNoDocument(u,l)}(i,e):Bt()}(T.serializer,it);ge.set(St.key.toString(),St)});const Le=[];return f.forEach(it=>{const St=ge.get(it.toString());zt(!!St),Le.push(St)}),Le}),function(l,f){return u.apply(this,arguments)})(n.datastore,e);var u;return o.forEach(u=>n.recordVersion(u)),o})()}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(o){this.lastWriteError=o}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ll(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,p.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const n=e.readVersions;var o;e.mutations.forEach(o=>{n.delete(o.key.toString())}),n.forEach((o,u)=>{const l=Ot.fromPath(u);e.mutations.push(new Gf(l,e.precondition(l)))}),yield(o=(0,p.Z)(function*(u,l){const f=Ft(u),T=Rd(f.serializer)+"/documents",P={writes:l.map(V=>nl(f.serializer,V))};yield f.Io("Commit",T,P)}),function(u,l){return o.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Bt();n=hn.min()}const o=this.readVersions.get(e.key.toString());if(o){if(!n.isEqual(o))throw new ot(Ue.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(hn.min())?Ds.exists(!1):Ds.updateTime(n):Ds.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(hn.min()))throw new ot(Ue.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ds.updateTime(n)}return Ds.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class ny{constructor(e,n,o,u,l){this.asyncQueue=e,this.datastore=n,this.options=o,this.updateFunction=u,this.deferred=l,this.Bc=o.maxAttempts,this.qo=new Zl(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,p.Z)(function*(){const n=new qv(e.datastore),o=e.qc(n);o&&o.then(u=>{e.asyncQueue.enqueueAndForget(()=>n.commit().then(()=>{e.deferred.resolve(u)}).catch(l=>{e.Uc(l)}))}).catch(u=>{e.Uc(u)})}))}qc(e){try{const n=this.updateFunction(e);return!Ei(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const n=e.code;return"aborted"===n||"failed-precondition"===n||"already-exists"===n||!Wg(n)}return!1}}class ry{constructor(e,n,o,u){var l=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=o,this.databaseInfo=u,this.user=un.UNAUTHENTICATED,this.clientId=Wi.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(o,function(){var f=(0,p.Z)(function*(T){dt("FirestoreClient","Received user=",T.uid),yield l.authCredentialListener(T),l.user=T});return function(T){return f.apply(this,arguments)}}()),this.appCheckCredentials.start(o,f=>(dt("FirestoreClient","Received new app check token=",f),this.appCheckCredentialListener(f,this.user)))}getConfiguration(){var e=this;return(0,p.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ot(Ue.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new Xi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,p.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(o){const u=ca(o,"Failed to shutdown persistence");n.reject(u)}})),n.promise}}function _f(i,e){return ig.apply(this,arguments)}function ig(){return ig=(0,p.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),dt("FirestoreClient","Initializing OfflineComponentProvider");const n=yield i.getConfiguration();yield e.initialize(n);let o=n.initialUser;i.setCredentialChangeListener(function(){var u=(0,p.Z)(function*(l){o.isEqual(l)||(yield ym(e.localStore,l),o=l)});return function(l){return u.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}),ig.apply(this,arguments)}function Ma(i,e){return sg.apply(this,arguments)}function sg(){return sg=(0,p.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const n=yield sy(i);dt("FirestoreClient","Initializing OnlineComponentProvider");const o=yield i.getConfiguration();yield e.initialize(n,o),i.setCredentialChangeListener(u=>Om(e.remoteStore,u)),i.setAppCheckTokenChangeListener((u,l)=>Om(e.remoteStore,l)),i._onlineComponents=e}),sg.apply(this,arguments)}function iy(i){return"FirebaseError"===i.name?i.code===Ue.FAILED_PRECONDITION||i.code===Ue.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code}function sy(i){return dh.apply(this,arguments)}function dh(){return dh=(0,p.Z)(function*(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){dt("FirestoreClient","Using user provided OfflineComponentProvider");try{yield _f(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!iy(n))throw n;Si("Error using user provided cache. Falling back to memory cache: "+n),yield _f(i,new pl)}}else dt("FirestoreClient","Using default OfflineComponentProvider"),yield _f(i,new pl);return i._offlineComponents}),dh.apply(this,arguments)}function hh(i){return og.apply(this,arguments)}function og(){return og=(0,p.Z)(function*(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(dt("FirestoreClient","Using user provided OnlineComponentProvider"),yield Ma(i,i._uninitializedComponentsProvider._online)):(dt("FirestoreClient","Using default OnlineComponentProvider"),yield Ma(i,new gl))),i._onlineComponents}),og.apply(this,arguments)}function oy(i){return sy(i).then(e=>e.persistence)}function Ef(i){return sy(i).then(e=>e.localStore)}function ag(i){return hh(i).then(e=>e.remoteStore)}function ug(i){return hh(i).then(e=>e.syncEngine)}function Bc(i){return cg.apply(this,arguments)}function cg(){return cg=(0,p.Z)(function*(i){const e=yield hh(i),n=e.eventManager;return n.onListen=$m.bind(null,e.syncEngine),n.onUnlisten=Hm.bind(null,e.syncEngine),n}),cg.apply(this,arguments)}function uy(i,e,n={}){const o=new Xi;return i.asyncQueue.enqueueAndForget((0,p.Z)(function*(){return function(u,l,f,T,P){const V=new vf({next:ge=>{l.enqueueAndForget(()=>Up(u,ne));const Le=ge.docs.has(f);!Le&&ge.fromCache?P.reject(new ot(Ue.UNAVAILABLE,"Failed to get document because the client is offline.")):Le&&ge.fromCache&&T&&"server"===T.source?P.reject(new ot(Ue.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):P.resolve(ge)},error:ge=>P.reject(ge)}),ne=new Fm(Nu(f.path),V,{includeMetadataChanges:!0,Ku:!0});return Bp(u,ne)}(yield Bc(i),i.asyncQueue,e,n,o)})),o.promise}function wf(i,e,n={}){const o=new Xi;return i.asyncQueue.enqueueAndForget((0,p.Z)(function*(){return function(u,l,f,T,P){const V=new vf({next:ge=>{l.enqueueAndForget(()=>Up(u,ne)),ge.fromCache&&"server"===T.source?P.reject(new ot(Ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):P.resolve(ge)},error:ge=>P.reject(ge)}),ne=new Fm(f,V,{includeMetadataChanges:!0,Ku:!0});return Bp(u,ne)}(yield Bc(i),i.asyncQueue,e,n,o)})),o.promise}function lg(i){const e={};return void 0!==i.timeoutSeconds&&(e.timeoutSeconds=i.timeoutSeconds),e}const fh=new Map;function ph(i,e,n){if(!n)throw new ot(Ue.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function Jv(i,e,n,o){if(!0===e&&!0===o)throw new ot(Ue.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function dg(i){if(!Ot.isDocumentKey(i))throw new ot(Ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function hg(i){if(Ot.isDocumentKey(i))throw new ot(Ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function gh(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(n=i).constructor?n.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var n;return"function"==typeof i?"a function":Bt()}function jr(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new ot(Ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=gh(i);throw new ot(Ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}function If(i,e){if(e<=0)throw new ot(Ue.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}class Hu{constructor(e){var n,o;if(void 0===e.host){if(void 0!==e.ssl)throw new ot(Ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ot(Ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Jv("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=lg(null!==(o=e.experimentalLongPollingOptions)&&void 0!==o?o:{}),function(u){if(void 0!==u.timeoutSeconds){if(isNaN(u.timeoutSeconds))throw new ot(Ue.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new ot(Ue.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new ot(Ue.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class mh{constructor(e,n,o,u){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=o,this._app=u,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Hu({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ot(Ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ot(Ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Hu(e),void 0!==e.credentials&&(this._authCredentials=function(n){if(!n)return new Oa;switch(n.type){case"firstParty":return new lu(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new ot(Ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=fh.get(e);n&&(dt("ComponentProvider","Removing Datastore"),fh.delete(e),n.terminate())}(this),Promise.resolve()}}function dy(i,e,n,o={}){var u;const l=(i=jr(i,mh))._getSettings(),f=`${e}:${n}`;if("firestore.googleapis.com"!==l.host&&l.host!==f&&Si("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},l),{host:f,ssl:!1})),o.mockUserToken){let T,P;if("string"==typeof o.mockUserToken)T=o.mockUserToken,P=un.MOCK_USER;else{T=(0,fe.Sg)(o.mockUserToken,null===(u=i._app)||void 0===u?void 0:u.options.projectId);const V=o.mockUserToken.sub||o.mockUserToken.user_id;if(!V)throw new ot(Ue.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");P=new un(V)}i._authCredentials=new Bs(new Iu(T,P))}}class bs{constructor(e,n,o){this.converter=n,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new yu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new bs(this.firestore,e,this._key)}}class Qo{constructor(e,n,o){this.converter=n,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new Qo(this.firestore,e,this._query)}}class yu extends Qo{constructor(e,n,o){super(e,n,Nu(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new bs(this.firestore,null,new Ot(e))}withConverter(e){return new yu(this.firestore,e,this._path)}}function e_(i,e,...n){if(i=(0,fe.m9)(i),ph("collection","path",e),i instanceof mh){const o=on.fromString(e,...n);return hg(o),new yu(i,null,o)}{if(!(i instanceof bs||i instanceof yu))throw new ot(Ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(on.fromString(e,...n));return hg(o),new yu(i.firestore,null,o)}}function Df(i,e){if(i=jr(i,mh),ph("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ot(Ue.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Qo(i,null,(n=e,new oa(on.emptyPath(),n)));var n}function id(i,e,...n){if(i=(0,fe.m9)(i),1===arguments.length&&(e=Wi.A()),ph("doc","path",e),i instanceof mh){const o=on.fromString(e,...n);return dg(o),new bs(i,null,new Ot(o))}{if(!(i instanceof bs||i instanceof yu))throw new ot(Ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(on.fromString(e,...n));return dg(o),new bs(i.firestore,i instanceof yu?i.converter:null,new Ot(o))}}function hy(i,e){return i=(0,fe.m9)(i),e=(0,fe.m9)(e),(i instanceof bs||i instanceof yu)&&(e instanceof bs||e instanceof yu)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function sd(i,e){return i=(0,fe.m9)(i),e=(0,fe.m9)(e),i instanceof Qo&&e instanceof Qo&&i.firestore===e.firestore&&be(i._query,e._query)&&i.converter===e.converter}class RE{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new Zl(this,"async_queue_retry"),this.Xc=()=>{const n=Kl();n&&dt("AsyncQueue","Visibility state changed to "+n.visibilityState),this.qo.Mo()};const e=Kl();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const n=Kl();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const n=new Xi;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,p.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(n){if(!Un(n))throw n;dt("AsyncQueue","Operation failed with retryable error: "+n)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const n=this.Gc.then(()=>(this.Hc=!0,e().catch(o=>{throw this.Wc=o,this.Hc=!1,Mr("INTERNAL UNHANDLED ERROR: ",function(l){let f=l.message||"";return l.stack&&(f=l.stack.includes(l.message)?l.stack:l.message+"\n"+l.stack),f}(o)),o}).then(o=>(this.Hc=!1,o))));return this.Gc=n,n}enqueueAfterDelay(e,n,o){this.Zc(),this.Yc.indexOf(e)>-1&&(n=0);const u=hf.createAndSchedule(this,e,n,o,l=>this.na(l));return this.zc.push(u),u}Zc(){this.Wc&&Bt()}verifyOperationInProgress(){}sa(){var e=this;return(0,p.Z)(function*(){let n;do{n=e.Gc,yield n}while(n!==e.Gc)})()}ia(e){for(const n of this.zc)if(n.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((n,o)=>n.targetTimeMs-o.targetTimeMs);for(const n of this.zc)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const n=this.zc.indexOf(e);this.zc.splice(n,1)}}function fg(i){return function(e,n){if("object"!=typeof e||null===e)return!1;const o=e;for(const u of["next","error","complete"])if(u in o&&"function"==typeof o[u])return!0;return!1}(i)}class fy{constructor(){this._progressObserver={},this._taskCompletionResolver=new Xi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,o){this._progressObserver={next:e,error:n,complete:o}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}const py=-1;class fs extends mh{constructor(e,n,o,u){super(e,n,o,u),this.type="firestore",this._queue=new RE,this._persistenceKey=u?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||od(this),this._firestoreClient.terminate()}}function gy(i,e){const n="object"==typeof i?i:(0,W.getApp)(),o="string"==typeof i?i:e||"(default)",u=(0,W._getProvider)(n,"firestore").getImmediate({identifier:o});if(!u._initialized){const l=(0,fe.P0)("firestore");l&&dy(u,...l)}return u}function Hs(i){return i._firestoreClient||od(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function od(i){var e,n,o;const u=i._freezeSettings(),l=(T=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new qo(i._databaseId,T,i._persistenceKey,(V=u).host,V.ssl,V.experimentalForceLongPolling,V.experimentalAutoDetectLongPolling,lg(V.experimentalLongPollingOptions),V.useFetchStreams));var T,V;i._firestoreClient=new ry(i._authCredentials,i._appCheckCredentials,i._queue,l),null!==(n=u.cache)&&void 0!==n&&n._offlineComponentProvider&&null!==(o=u.cache)&&void 0!==o&&o._onlineComponentProvider&&(i._firestoreClient._uninitializedComponentsProvider={_offlineKind:u.cache.kind,_offline:u.cache._offlineComponentProvider,_online:u.cache._onlineComponentProvider})}function t_(i,e){yy(i=jr(i,fs));const n=Hs(i);if(n._uninitializedComponentsProvider)throw new ot(Ue.FAILED_PRECONDITION,"SDK cache is already specified.");Si("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const o=i._freezeSettings(),u=new gl;return pg(n,u,new rg(u,o.cacheSizeBytes,e?.forceOwnership))}function my(i){yy(i=jr(i,fs));const e=Hs(i);if(e._uninitializedComponentsProvider)throw new ot(Ue.FAILED_PRECONDITION,"SDK cache is already specified.");Si("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=i._freezeSettings(),o=new gl;return pg(e,o,new ey(o,n.cacheSizeBytes))}function pg(i,e,n){const o=new Xi;return i.asyncQueue.enqueue((0,p.Z)(function*(){try{yield _f(i,n),yield Ma(i,e),o.resolve()}catch(u){const l=u;if(!iy(l))throw l;Si("Error enabling indexeddb cache. Falling back to memory cache: "+l),o.reject(l)}})).then(()=>o.promise)}function n_(i){if(i._initialized&&!i._terminated)throw new ot(Ue.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Xi;return i._queue.enqueueAndForgetEvenWhileRestricted((0,p.Z)(function*(){try{yield(n=(0,p.Z)(function*(o){if(!Qe.D())return Promise.resolve();const u=o+"main";yield Qe.delete(u)}),function(o){return n.apply(this,arguments)})(yp(i._databaseId,i._persistenceKey)),e.resolve()}catch(n){e.reject(n)}var n})),e.promise}function r_(i){return function(e){const n=new Xi;return e.asyncQueue.enqueueAndForget((0,p.Z)(function*(){return function Hv(i,e){return Zp.apply(this,arguments)}(yield ug(e),n)})),n.promise}(Hs(i=jr(i,fs)))}function yh(i){return function Kv(i){return i.asyncQueue.enqueue((0,p.Z)(function*(){const e=yield oy(i),n=yield ag(i);return e.setNetworkEnabled(!0),function(o){const u=Ft(o);return u.vu.delete(0),Yl(u)}(n)}))}(Hs(i=jr(i,fs)))}function i_(i){return function Zv(i){return i.asyncQueue.enqueue((0,p.Z)(function*(){const e=yield oy(i),n=yield ag(i);return e.setNetworkEnabled(!1),(o=(0,p.Z)(function*(u){const l=Ft(u);l.vu.add(0),yield Ql(l),l.bu.set("Offline")}),function(u){return o.apply(this,arguments)})(n);var o}))}(Hs(i=jr(i,fs)))}function s_(i,e){const n=Hs(i=jr(i,fs)),o=new fy;return function cy(i,e,n,o){const u=function(l,f){let T;return T="string"==typeof l?Rh().encode(l):l,P=function(P,V){if(P instanceof Uint8Array)return ty(P,V);if(P instanceof ArrayBuffer)return ty(new Uint8Array(P),V);if(P instanceof ReadableStream)return P.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(T),new Wv(P,f);var P}(n,ll(e));i.asyncQueue.enqueueAndForget((0,p.Z)(function*(){!function Jm(i,e,n){const o=Ft(i);var u;(u=(0,p.Z)(function*(l,f,T){try{const P=yield f.getMetadata();if(yield function(Le,it){const St=Ft(Le),Gt=Cs(it.createTime);return St.persistence.runTransaction("hasNewerBundle","readonly",Wt=>St.qs.getBundleMetadata(Wt,it.id)).then(Wt=>!!Wt&&Wt.createTime.compareTo(Gt)>=0)}(l.localStore,P))return yield f.close(),T._completeWith({taskState:"Success",documentsLoaded:(Le=P).totalDocuments,bytesLoaded:Le.totalBytes,totalDocuments:Le.totalDocuments,totalBytes:Le.totalBytes}),Promise.resolve(new Set);T._updateProgress(Vm(P));const V=new $p(P,l.localStore,f.serializer);let ne=yield f.bc();for(;ne;){const Le=yield V.zu(ne);Le&&T._updateProgress(Le),ne=yield f.bc()}const ge=yield V.complete();return yield ju(l,ge.Ju,void 0),yield function(Le,it){const St=Ft(Le);return St.persistence.runTransaction("Save bundle","readwrite",Gt=>St.qs.saveBundleMetadata(Gt,it))}(l.localStore,P),T._completeWith(ge.progress),Promise.resolve(ge.Hu)}catch(P){return Si("SyncEngine",`Loading bundle failed with ${P}`),T._failWith(P),Promise.resolve(new Set)}var Le}),function(l,f,T){return u.apply(this,arguments)})(o,e,n).then(u=>{o.sharedClientState.notifyBundleLoaded(u)})}(yield ug(i),u,o)}))}(n,i._databaseId,e,o),o}function o_(i,e){return function Xv(i,e){return i.asyncQueue.enqueue((0,p.Z)(function*(){return function(n,o){const u=Ft(n);return u.persistence.runTransaction("Get named query","readonly",l=>u.qs.getNamedQuery(l,o))}(yield Ef(i),e)}))}(Hs(i=jr(i,fs)),e).then(n=>n?new Qo(i,null,n.query):null)}function yy(i){if(i._initialized||i._terminated)throw new ot(Ue.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Uc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Uc(hs.fromBase64String(e))}catch(n){throw new ot(Ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Uc(hs.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class cc{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new ot(Ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ml{constructor(e){this._methodName=e}}class yl{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ot(Ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ot(Ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return On(this._lat,e._lat)||On(this._long,e._long)}}const u_=/^__.*__$/;class c_{constructor(e,n,o){this.data=e,this.fieldMask=n,this.fieldTransforms=o}toMutation(e,n){return null!==this.fieldMask?new su(e,this.data,this.fieldMask,n,this.fieldTransforms):new el(e,this.data,n,this.fieldTransforms)}}class _y{constructor(e,n,o){this.data=e,this.fieldMask=n,this.fieldTransforms=o}toMutation(e,n){return new su(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Ey(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Bt()}}class Cf{constructor(e,n,o,u,l,f){this.settings=e,this.databaseId=n,this.serializer=o,this.ignoreUndefinedProperties=u,void 0===l&&this.ua(),this.fieldTransforms=l||[],this.fieldMask=f||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new Cf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var n;const o=null===(n=this.path)||void 0===n?void 0:n.child(e),u=this.aa({path:o,la:!1});return u.fa(e),u}da(e){var n;const o=null===(n=this.path)||void 0===n?void 0:n.child(e),u=this.aa({path:o,la:!1});return u.ua(),u}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return Na(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(Ey(this.ca)&&u_.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class l_{constructor(e,n,o){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=o||ll(e)}ya(e,n,o,u=!1){return new Cf({ca:e,methodName:n,ga:o,path:tr.emptyPath(),la:!1,ma:u},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function vl(i){const e=i._freezeSettings(),n=ll(i._databaseId);return new l_(i._databaseId,!!e.ignoreUndefinedProperties,n)}function _h(i,e,n,o,u,l={}){const f=i.ya(l.merge||l.mergeFields?2:0,e,n,u);_l("Data must be an object, but it was:",f,o);const T=Ty(o,f);let P,V;if(l.merge)P=new Wo(f.fieldMask),V=f.fieldTransforms;else if(l.mergeFields){const ne=[];for(const ge of l.mergeFields){const Le=go(e,ge,n);if(!f.contains(Le))throw new ot(Ue.INVALID_ARGUMENT,`Field '${Le}' is specified in your field mask but missing from your input data.`);bf(ne,Le)||ne.push(Le)}P=new Wo(ne),V=f.fieldTransforms.filter(ge=>P.covers(ge.field))}else P=null,V=f.fieldTransforms;return new c_(new fo(T),P,V)}class ad extends ml{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ad}}function wy(i,e,n){return new Cf({ca:3,ga:e.settings.ga,methodName:i._methodName,la:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Iy extends ml{_toFieldTransform(e){return new Nh(e.path,new Ol)}isEqual(e){return e instanceof Iy}}class Dy extends ml{constructor(e,n){super(e),this.pa=n}_toFieldTransform(e){const n=wy(this,e,!0),o=this.pa.map(l=>lc(l,n)),u=new Qc(o);return new Nh(e.path,u)}isEqual(e){return this===e}}class Cy extends ml{constructor(e,n){super(e),this.pa=n}_toFieldTransform(e){const n=wy(this,e,!0),o=this.pa.map(l=>lc(l,n)),u=new Pl(o);return new Nh(e.path,u)}isEqual(e){return this===e}}class kE extends ml{constructor(e,n){super(e),this.Ia=n}_toFieldTransform(e){const n=new Ec(e.serializer,$g(e.serializer,this.Ia));return new Nh(e.path,n)}isEqual(e){return this===e}}function ud(i,e,n,o){const u=i.ya(1,e,n);_l("Data must be an object, but it was:",u,o);const l=[],f=fo.empty();Ia(o,(P,V)=>{const ne=wl(e,P,n);V=(0,fe.m9)(V);const ge=u.da(ne);if(V instanceof ad)l.push(ne);else{const Le=lc(V,ge);null!=Le&&(l.push(ne),f.set(ne,Le))}});const T=new Wo(l);return new _y(f,T,u.fieldTransforms)}function gg(i,e,n,o,u,l){const f=i.ya(1,e,n),T=[go(e,o,n)],P=[u];if(l.length%2!=0)throw new ot(Ue.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Le=0;Le<l.length;Le+=2)T.push(go(e,l[Le])),P.push(l[Le+1]);const V=[],ne=fo.empty();for(let Le=T.length-1;Le>=0;--Le)if(!bf(V,T[Le])){const it=T[Le];let St=P[Le];St=(0,fe.m9)(St);const Gt=f.da(it);if(St instanceof ad)V.push(it);else{const Wt=lc(St,Gt);null!=Wt&&(V.push(it),ne.set(it,Wt))}}const ge=new Wo(V);return new _y(ne,ge,f.fieldTransforms)}function by(i,e,n,o=!1){return lc(n,i.ya(o?4:3,e))}function lc(i,e){if(vu(i=(0,fe.m9)(i)))return _l("Unsupported field value:",e,i),Ty(i,e);if(i instanceof ml)return function(n,o){if(!Ey(o.ca))throw o._a(`${n._methodName}() can only be used with update() and set()`);if(!o.path)throw o._a(`${n._methodName}() is not currently supported inside arrays`);const u=n._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(n,o){const u=[];let l=0;for(const f of n){let T=lc(f,o.wa(l));null==T&&(T={nullValue:"NULL_VALUE"}),u.push(T),l++}return{arrayValue:{values:u}}}(i,e)}return function(n,o){if(null===(n=(0,fe.m9)(n)))return{nullValue:"NULL_VALUE"};if("number"==typeof n)return $g(o.serializer,n);if("boolean"==typeof n)return{booleanValue:n};if("string"==typeof n)return{stringValue:n};if(n instanceof Date){const u=Kr.fromDate(n);return{timestampValue:tl(o.serializer,u)}}if(n instanceof Kr){const u=new Kr(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:tl(o.serializer,u)}}if(n instanceof yl)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Uc)return{bytesValue:Zf(o.serializer,n._byteString)};if(n instanceof bs){const u=o.databaseId,l=n.firestore._databaseId;if(!l.isEqual(u))throw o._a(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Lh(n.firestore._databaseId||o.databaseId,n._key.path)}}throw o._a(`Unsupported field value: ${gh(n)}`)}(i,e)}function Ty(i,e){const n={};return gd(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ia(i,(o,u)=>{const l=lc(u,e.ha(o));null!=l&&(n[o]=l)}),{mapValue:{fields:n}}}function vu(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof Kr||i instanceof yl||i instanceof Uc||i instanceof bs||i instanceof ml)}function _l(i,e,n){if(!vu(n)||"object"!=typeof(o=n)||null===o||Object.getPrototypeOf(o)!==Object.prototype&&null!==Object.getPrototypeOf(o)){const o=gh(n);throw e._a("an object"===o?i+" a custom object":i+" "+o)}var o}function go(i,e,n){if((e=(0,fe.m9)(e))instanceof cc)return e._internalPath;if("string"==typeof e)return wl(i,e);throw Na("Field path arguments must be of type string or ",i,!1,void 0,n)}const El=new RegExp("[~\\*/\\[\\]]");function wl(i,e,n){if(e.search(El)>=0)throw Na(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new cc(...e.split("."))._internalPath}catch{throw Na(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function Na(i,e,n,o,u){const l=o&&!o.isEmpty(),f=void 0!==u;let T=`Function ${e}() called with invalid data`;n&&(T+=" (via `toFirestore()`)"),T+=". ";let P="";return(l||f)&&(P+=" (found",l&&(P+=` in field ${o}`),f&&(P+=` in document ${u}`),P+=")"),new ot(Ue.INVALID_ARGUMENT,T+i+P)}function bf(i,e){return i.some(n=>n.isEqual(e))}class zu{constructor(e,n,o,u,l){this._firestore=e,this._userDataWriter=n,this._key=o,this._document=u,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new bs(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new cd(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(dc("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class cd extends zu{data(){return super.data()}}function dc(i,e){return"string"==typeof e?wl(i,e):e instanceof cc?e._internalPath:e._delegate._internalPath}function Il(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new ot(Ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class jc{}class Gu extends jc{}function ld(i,e,...n){let o=[];e instanceof jc&&o.push(e),o=o.concat(n),function(u){const l=u.filter(T=>T instanceof Dl).length,f=u.filter(T=>T instanceof Wu).length;if(l>1||l>0&&f>0)throw new ot(Ue.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(o);for(const u of o)i=u._apply(i);return i}class Wu extends Gu{constructor(e,n,o){super(),this._field=e,this._op=n,this._value=o,this.type="where"}static _create(e,n,o){return new Wu(e,n,o)}_apply(e){const n=this._parse(e);return m_(e._query,n),new Qo(e.firestore,e.converter,$(e._query,n))}_parse(e){const n=vl(e.firestore);return function(u,l,f,T,P,V,ne){let ge;if(P.isKeyField()){if("array-contains"===V||"array-contains-any"===V)throw new ot(Ue.INVALID_ARGUMENT,`Invalid Query. You can't perform '${V}' queries on documentId().`);if("in"===V||"not-in"===V){xy(ne,V);const Le=[];for(const it of ne)Le.push(g_(T,u,it));ge={arrayValue:{values:Le}}}else ge=g_(T,u,ne)}else"in"!==V&&"not-in"!==V&&"array-contains-any"!==V||xy(ne,V),ge=by(f,"where",ne,"in"===V||"not-in"===V);return se.create(P,V,ge)}(e._query,0,n,e.firestore._databaseId,this._field,this._op,this._value)}}function dd(i,e,n){const o=e,u=dc("where",i);return Wu._create(u,o,n)}class Dl extends jc{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Dl(e,n)}_parse(e){const n=this._queryConstraints.map(o=>o._parse(e)).filter(o=>o.getFilters().length>0);return 1===n.length?n[0]:ye.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return 0===n.getFilters().length?e:(function(o,u){let l=o;const f=u.getFlattenedFilters();for(const T of f)m_(l,T),l=$(l,T)}(e._query,n),new Qo(e.firestore,e.converter,$(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Tf extends Gu{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Tf(e,n)}_apply(e){const n=function(o,u,l){if(null!==o.startAt)throw new ot(Ue.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==o.endAt)throw new ot(Ue.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const f=new D(u,l);return function(T,P){if(null===yd(T)){const V=w(T);null!==V&&Ry(0,V,P.field)}}(o,f),f}(e._query,this._field,this._direction);return new Qo(e.firestore,e.converter,function(o,u){const l=o.explicitOrderBy.concat([u]);return new oa(o.path,o.collectionGroup,l,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,n))}}function Sy(i,e="asc"){const n=e,o=dc("orderBy",i);return Tf._create(o,n)}class Eh extends Gu{constructor(e,n,o){super(),this.type=e,this._limit=n,this._limitType=o}static _create(e,n,o){return new Eh(e,n,o)}_apply(e){return new Qo(e.firestore,e.converter,re(e._query,this._limit,this._limitType))}}function Ay(i){return If("limit",i),Eh._create("limit",i,"F")}function My(i){return If("limitToLast",i),Eh._create("limitToLast",i,"L")}class wh extends Gu{constructor(e,n,o){super(),this.type=e,this._docOrFields=n,this._inclusive=o}static _create(e,n,o){return new wh(e,n,o)}_apply(e){const n=Ny(e,this.type,this._docOrFields,this._inclusive);return new Qo(e.firestore,e.converter,(u=n,new oa((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,u,o.endAt)));var o,u}}function mg(...i){return wh._create("startAt",i,!0)}function f_(...i){return wh._create("startAfter",i,!1)}class yg extends Gu{constructor(e,n,o){super(),this.type=e,this._docOrFields=n,this._inclusive=o}static _create(e,n,o){return new yg(e,n,o)}_apply(e){const n=Ny(e,this.type,this._docOrFields,this._inclusive);return new Qo(e.firestore,e.converter,(u=n,new oa((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,o.startAt,u)));var o,u}}function FE(...i){return yg._create("endBefore",i,!1)}function p_(...i){return yg._create("endAt",i,!0)}function Ny(i,e,n,o){if(n[0]=(0,fe.m9)(n[0]),n[0]instanceof zu)return function(u,l,f,T,P){if(!T)throw new ot(Ue.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${f}().`);const V=[];for(const ne of g(u))if(ne.field.isKeyField())V.push(Au(l,T.key));else{const ge=T.data.field(ne.field);if(Qu(ge))throw new ot(Ue.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+ne.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===ge){const Le=ne.field.canonicalString();throw new ot(Ue.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Le}' (used as the orderBy) does not exist.`)}V.push(ge)}return new Ko(V,P)}(i._query,i.firestore._databaseId,e,n[0]._document,o);{const u=vl(i.firestore);return function(l,f,T,P,V,ne){const ge=l.explicitOrderBy;if(V.length>ge.length)throw new ot(Ue.INVALID_ARGUMENT,`Too many arguments provided to ${P}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Le=[];for(let it=0;it<V.length;it++){const St=V[it];if(ge[it].field.isKeyField()){if("string"!=typeof St)throw new ot(Ue.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${P}(), but got a ${typeof St}`);if(!h(l)&&-1!==St.indexOf("/"))throw new ot(Ue.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${P}() must be a plain document ID, but '${St}' contains a slash.`);const Gt=l.path.child(on.fromString(St));if(!Ot.isDocumentKey(Gt))throw new ot(Ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${P}() must result in a valid document path, but '${Gt}' is not because it contains an odd number of segments.`);const Wt=new Ot(Gt);Le.push(Au(f,Wt))}else{const Gt=by(T,P,St);Le.push(Gt)}}return new Ko(Le,ne)}(i._query,i.firestore._databaseId,u,e,n,o)}}function g_(i,e,n){if("string"==typeof(n=(0,fe.m9)(n))){if(""===n)throw new ot(Ue.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!h(e)&&-1!==n.indexOf("/"))throw new ot(Ue.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const o=e.path.child(on.fromString(n));if(!Ot.isDocumentKey(o))throw new ot(Ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return Au(i,new Ot(o))}if(n instanceof bs)return Au(i,n._key);throw new ot(Ue.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${gh(n)}.`)}function xy(i,e){if(!Array.isArray(i)||0===i.length)throw new ot(Ue.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function m_(i,e){if(e.isInequality()){const o=w(i),u=e.field;if(null!==o&&!o.isEqual(u))throw new ot(Ue.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${o.toString()}' and '${u.toString()}'`);const l=yd(i);null!==l&&Ry(0,u,l)}const n=function(o,u){for(const l of o)for(const f of l.getFlattenedFilters())if(u.indexOf(f.op)>=0)return f.op;return null}(i.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw new ot(Ue.INVALID_ARGUMENT,n===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function Ry(i,e,n){if(!n.isEqual(e))throw new ot(Ue.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class vg{convertValue(e,n="none"){switch(Da(e)){case 0:return null;case 1:return e.booleanValue;case 2:return wi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(nu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw Bt()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const o={};return Ia(e,(u,l)=>{o[u]=this.convertValue(l,n)}),o}convertGeoPoint(e){return new yl(wi(e.latitude),wi(e.longitude))}convertArray(e,n){return(e.values||[]).map(o=>this.convertValue(o,n))}convertServerTimestamp(e,n){switch(n){case"previous":const o=Tu(e);return null==o?null:this.convertValue(o,n);case"estimate":return this.convertTimestamp(Xu(e));default:return null}}convertTimestamp(e){const n=ka(e);return new Kr(n.seconds,n.nanos)}convertDocumentKey(e,n){const o=on.fromString(e);zt(Hh(o));const u=new Fa(o.get(1),o.get(3)),l=new Ot(o.popFirst(5));return u.isEqual(n)||Mr(`Document ${l} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),l}}function hd(i,e,n){let o;return o=i?n&&(n.merge||n.mergeFields)?i.toFirestore(e,n):i.toFirestore(e):e,o}class Ih extends vg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Uc(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new bs(this.firestore,null,n)}}class Cl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class _u extends zu{constructor(e,n,o,u,l,f){super(e,n,o,u,f),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Dh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const o=this._document.data.field(dc("DocumentSnapshot.get",e));if(null!==o)return this._userDataWriter.convertValue(o,n.serverTimestamps)}}}class Dh extends _u{data(e={}){return super.data(e)}}class bl{constructor(e,n,o,u){this._firestore=e,this._userDataWriter=n,this._snapshot=u,this.metadata=new Cl(u.hasPendingWrites,u.fromCache),this.query=o}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(o=>{e.call(n,new Dh(this._firestore,this._userDataWriter,o.key,o,new Cl(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ot(Ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let l=0;return o._snapshot.docChanges.map(f=>({type:"added",doc:new Dh(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Cl(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter),oldIndex:-1,newIndex:l++}))}{let l=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(f=>u||3!==f.type).map(f=>{const T=new Dh(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Cl(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);let P=-1,V=-1;return 0!==f.type&&(P=l.indexOf(f.doc.key),l=l.delete(f.doc.key)),1!==f.type&&(l=l.add(f.doc),V=l.indexOf(f.doc.key)),{type:v_(f.type),doc:T,oldIndex:P,newIndex:V}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function v_(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Bt()}}function __(i,e){return i instanceof _u&&e instanceof _u?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof bl&&e instanceof bl&&i._firestore===e._firestore&&sd(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}function Eg(i){i=jr(i,bs);const e=jr(i.firestore,fs);return uy(Hs(e),i._key).then(n=>Ig(e,i,n))}class Eu extends vg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Uc(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new bs(this.firestore,null,n)}}function Af(i){i=jr(i,bs);const e=jr(i.firestore,fs),n=Hs(e),o=new Eu(e);return function Yv(i,e){const n=new Xi;return i.asyncQueue.enqueueAndForget((0,p.Z)(function*(){return(o=(0,p.Z)(function*(u,l,f){try{const T=yield function(P,V){const ne=Ft(P);return ne.persistence.runTransaction("read document","readonly",ge=>ne.localDocuments.getDocument(ge,V))}(u,l);T.isFoundDocument()?f.resolve(T):T.isNoDocument()?f.resolve(null):f.reject(new ot(Ue.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(T){const P=ca(T,`Failed to get document '${l} from cache`);f.reject(P)}}),function(u,l,f){return o.apply(this,arguments)})(yield Ef(i),e,n);var o})),n.promise}(n,i._key).then(u=>new _u(e,o,i._key,u,new Cl(null!==u&&u.hasLocalMutations,!0),i.converter))}function LE(i){i=jr(i,bs);const e=jr(i.firestore,fs);return uy(Hs(e),i._key,{source:"server"}).then(n=>Ig(e,i,n))}function E_(i){i=jr(i,Qo);const e=jr(i.firestore,fs),n=Hs(e),o=new Eu(e);return Il(i._query),wf(n,i._query).then(u=>new bl(e,o,i,u))}function w_(i){i=jr(i,Qo);const e=jr(i.firestore,fs),n=Hs(e),o=new Eu(e);return function $u(i,e){const n=new Xi;return i.asyncQueue.enqueueAndForget((0,p.Z)(function*(){return(o=(0,p.Z)(function*(u,l,f){try{const T=yield Jh(u,l,!0),P=new Hp(l,T.ir),V=P.sc(T.documents),ne=P.applyChanges(V,!1);f.resolve(ne.snapshot)}catch(T){const P=ca(T,`Failed to execute query '${l} against cache`);f.reject(P)}}),function(u,l,f){return o.apply(this,arguments)})(yield Ef(i),e,n);var o})),n.promise}(n,i._query).then(u=>new bl(e,o,i,u))}function wg(i){i=jr(i,Qo);const e=jr(i.firestore,fs),n=Hs(e),o=new Eu(e);return wf(n,i._query,{source:"server"}).then(u=>new bl(e,o,i,u))}function I_(i,e,n){i=jr(i,bs);const o=jr(i.firestore,fs),u=hd(i.converter,e,n);return Tl(o,[_h(vl(o),"setDoc",i._key,u,null!==i.converter,n).toMutation(i._key,Ds.none())])}function Fy(i,e,n,...o){i=jr(i,bs);const u=jr(i.firestore,fs),l=vl(u);let f;return f="string"==typeof(e=(0,fe.m9)(e))||e instanceof cc?gg(l,"updateDoc",i._key,e,n,o):ud(l,"updateDoc",i._key,e),Tl(u,[f.toMutation(i._key,Ds.exists(!0))])}function D_(i){return Tl(jr(i.firestore,fs),[new Ll(i._key,Ds.none())])}function C_(i,e){const n=jr(i.firestore,fs),o=id(i),u=hd(i.converter,e);return Tl(n,[_h(vl(i.firestore),"addDoc",o._key,u,null!==i.converter,{}).toMutation(o._key,Ds.exists(!1))]).then(()=>o)}function Ly(i,...e){var n,o,u;i=(0,fe.m9)(i);let l={includeMetadataChanges:!1},f=0;"object"!=typeof e[f]||fg(e[f])||(l=e[f],f++);const T={includeMetadataChanges:l.includeMetadataChanges};if(fg(e[f])){const ge=e[f];e[f]=null===(n=ge.next)||void 0===n?void 0:n.bind(ge),e[f+1]=null===(o=ge.error)||void 0===o?void 0:o.bind(ge),e[f+2]=null===(u=ge.complete)||void 0===u?void 0:u.bind(ge)}let P,V,ne;if(i instanceof bs)V=jr(i.firestore,fs),ne=Nu(i._key.path),P={next:ge=>{e[f]&&e[f](Ig(V,i,ge))},error:e[f+1],complete:e[f+2]};else{const ge=jr(i,Qo);V=jr(ge.firestore,fs),ne=ge._query;const Le=new Eu(V);P={next:it=>{e[f]&&e[f](new bl(V,Le,ge,it))},error:e[f+1],complete:e[f+2]},Il(i._query)}return function(ge,Le,it,St){const Gt=new vf(St),Wt=new Fm(Le,Gt,it);return ge.asyncQueue.enqueueAndForget((0,p.Z)(function*(){return Bp(yield Bc(ge),Wt)})),()=>{Gt.Dc(),ge.asyncQueue.enqueueAndForget((0,p.Z)(function*(){return Up(yield Bc(ge),Wt)}))}}(Hs(V),ne,T,P)}function Vy(i,e){return function Qv(i,e){const n=new vf(e);return i.asyncQueue.enqueueAndForget((0,p.Z)(function*(){return o=yield Bc(i),u=n,Ft(o).ku.add(u),void u.next();var o,u})),()=>{n.Dc(),i.asyncQueue.enqueueAndForget((0,p.Z)(function*(){return o=yield Bc(i),u=n,void Ft(o).ku.delete(u);var o,u}))}}(Hs(i=jr(i,fs)),fg(e)?e:{next:e})}function Tl(i,e){return function(n,o){const u=new Xi;return n.asyncQueue.enqueueAndForget((0,p.Z)(function*(){return function uc(i,e,n){return Lc.apply(this,arguments)}(yield ug(n),o,u)})),u.promise}(Hs(i),e)}function Ig(i,e,n){const o=n.docs.get(e._key),u=new Eu(i);return new _u(i,u,e._key,o,new Cl(n.hasPendingWrites,n.fromCache),e.converter)}const Mf={maxAttempts:5};class Nf{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=vl(e)}set(e,n,o){this._verifyNotCommitted();const u=hc(e,this._firestore),l=hd(u.converter,n,o),f=_h(this._dataReader,"WriteBatch.set",u._key,l,null!==u.converter,o);return this._mutations.push(f.toMutation(u._key,Ds.none())),this}update(e,n,o,...u){this._verifyNotCommitted();const l=hc(e,this._firestore);let f;return f="string"==typeof(n=(0,fe.m9)(n))||n instanceof cc?gg(this._dataReader,"WriteBatch.update",l._key,n,o,u):ud(this._dataReader,"WriteBatch.update",l._key,n),this._mutations.push(f.toMutation(l._key,Ds.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=hc(e,this._firestore);return this._mutations=this._mutations.concat(new Ll(n._key,Ds.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ot(Ue.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function hc(i,e){if((i=(0,fe.m9)(i)).firestore!==e)throw new ot(Ue.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class x_ extends class{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=vl(e)}get(e){const n=hc(e,this._firestore),o=new Ih(this._firestore);return this._transaction.lookup([n._key]).then(u=>{if(!u||1!==u.length)return Bt();const l=u[0];if(l.isFoundDocument())return new zu(this._firestore,o,l.key,l,n.converter);if(l.isNoDocument())return new zu(this._firestore,o,n._key,null,n.converter);throw Bt()})}set(e,n,o){const u=hc(e,this._firestore),l=hd(u.converter,n,o),f=_h(this._dataReader,"Transaction.set",u._key,l,null!==u.converter,o);return this._transaction.set(u._key,f),this}update(e,n,o,...u){const l=hc(e,this._firestore);let f;return f="string"==typeof(n=(0,fe.m9)(n))||n instanceof cc?gg(this._dataReader,"Transaction.update",l._key,n,o,u):ud(this._dataReader,"Transaction.update",l._key,n),this._transaction.update(l._key,f),this}delete(e){const n=hc(e,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=hc(e,this._firestore),o=new Eu(this._firestore);return super.get(e).then(u=>new _u(this._firestore,o,n._key,u._document,new Cl(!1,!1),n.converter))}}function R_(i,e,n){i=jr(i,fs);const o=Object.assign(Object.assign({},Mf),n);return function(u){if(u.maxAttempts<1)throw new ot(Ue.INVALID_ARGUMENT,"Max attempts must be at least 1")}(o),function(u,l,f){const T=new Xi;return u.asyncQueue.enqueueAndForget((0,p.Z)(function*(){const P=yield function ay(i){return hh(i).then(e=>e.datastore)}(u);new ny(u.asyncQueue,P,f,l,T).run()})),T.promise}(Hs(i),u=>e(new x_(i,u)),o)}function jy(){return new ad("deleteField")}function Ag(){return new Iy("serverTimestamp")}function $y(...i){return new Dy("arrayUnion",i)}function Mg(...i){return new Cy("arrayRemove",i)}function Hy(i){return new kE("increment",i)}!function(i,e=!0){Br=W.SDK_VERSION,(0,W._registerComponent)(new ae.wA("firestore",(n,{instanceIdentifier:o,options:u})=>{const l=n.getProvider("app").getImmediate(),f=new fs(new eo(n.getProvider("auth-internal")),new gc(n.getProvider("app-check-internal")),function(T,P){if(!Object.prototype.hasOwnProperty.apply(T.options,["projectId"]))throw new ot(Ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Fa(T.options.projectId,P)}(l,o),l);return u=Object.assign({useFetchStreams:e},u),f._setSettings(u),f},"PUBLIC").setMultipleInstances(!0)),(0,W.registerVersion)(ir,"3.13.0",i),(0,W.registerVersion)(ir,"3.13.0","esm2017")}()},9058:($t,Ge,z)=>{z.d(Ge,{$s:()=>Zn,BH:()=>Oe,G6:()=>vr,L:()=>ze,LL:()=>gt,P0:()=>bt,Pz:()=>Ve,Sg:()=>Ze,UG:()=>ln,US:()=>xe,ZB:()=>Te,ZR:()=>Je,aH:()=>le,b$:()=>dn,eu:()=>He,hl:()=>ke,jU:()=>en,m9:()=>Yn,ne:()=>vn,pd:()=>gn,q4:()=>Mn,r3:()=>er,ru:()=>Nn,tV:()=>oe,uI:()=>Se,vZ:()=>Ln,w1:()=>ii,xO:()=>nr,xb:()=>Nr,z$:()=>pt,zI:()=>qe,zd:()=>Xt});const he=function(me){const X=[];let ee=0;for(let K=0;K<me.length;K++){let J=me.charCodeAt(K);J<128?X[ee++]=J:J<2048?(X[ee++]=J>>6|192,X[ee++]=63&J|128):55296==(64512&J)&&K+1<me.length&&56320==(64512&me.charCodeAt(K+1))?(J=65536+((1023&J)<<10)+(1023&me.charCodeAt(++K)),X[ee++]=J>>18|240,X[ee++]=J>>12&63|128,X[ee++]=J>>6&63|128,X[ee++]=63&J|128):(X[ee++]=J>>12|224,X[ee++]=J>>6&63|128,X[ee++]=63&J|128)}return X},xe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(me,X){if(!Array.isArray(me))throw Error("encodeByteArray takes an array as a parameter");this.init_();const ee=X?this.byteToCharMapWebSafe_:this.byteToCharMap_,K=[];for(let J=0;J<me.length;J+=3){const Ie=me[J],at=J+1<me.length,yt=at?me[J+1]:0,pn=J+2<me.length,Mt=pn?me[J+2]:0;let dr=(15&yt)<<2|Mt>>6,Ni=63&Mt;pn||(Ni=64,at||(dr=64)),K.push(ee[Ie>>2],ee[(3&Ie)<<4|yt>>4],ee[dr],ee[Ni])}return K.join("")},encodeString(me,X){return this.HAS_NATIVE_SUPPORT&&!X?btoa(me):this.encodeByteArray(he(me),X)},decodeString(me,X){return this.HAS_NATIVE_SUPPORT&&!X?atob(me):function(me){const X=[];let ee=0,K=0;for(;ee<me.length;){const J=me[ee++];if(J<128)X[K++]=String.fromCharCode(J);else if(J>191&&J<224){const Ie=me[ee++];X[K++]=String.fromCharCode((31&J)<<6|63&Ie)}else if(J>239&&J<365){const pn=((7&J)<<18|(63&me[ee++])<<12|(63&me[ee++])<<6|63&me[ee++])-65536;X[K++]=String.fromCharCode(55296+(pn>>10)),X[K++]=String.fromCharCode(56320+(1023&pn))}else{const Ie=me[ee++],at=me[ee++];X[K++]=String.fromCharCode((15&J)<<12|(63&Ie)<<6|63&at)}}return X.join("")}(this.decodeStringToByteArray(me,X))},decodeStringToByteArray(me,X){this.init_();const ee=X?this.charToByteMapWebSafe_:this.charToByteMap_,K=[];for(let J=0;J<me.length;){const Ie=ee[me.charAt(J++)],yt=J<me.length?ee[me.charAt(J)]:0;++J;const Mt=J<me.length?ee[me.charAt(J)]:64;++J;const In=J<me.length?ee[me.charAt(J)]:64;if(++J,null==Ie||null==yt||null==Mt||null==In)throw new Me;K.push(Ie<<2|yt>>4),64!==Mt&&(K.push(yt<<4&240|Mt>>2),64!==In&&K.push(Mt<<6&192|In))}return K},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let me=0;me<this.ENCODED_VALS.length;me++)this.byteToCharMap_[me]=this.ENCODED_VALS.charAt(me),this.charToByteMap_[this.byteToCharMap_[me]]=me,this.byteToCharMapWebSafe_[me]=this.ENCODED_VALS_WEBSAFE.charAt(me),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[me]]=me,me>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(me)]=me,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(me)]=me)}}};class Me extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ze=function(me){return function(me){const X=he(me);return xe.encodeByteArray(X,!0)}(me).replace(/\./g,"")},oe=function(me){try{return xe.decodeString(me,!0)}catch(X){console.error("base64Decode failed: ",X)}return null};function Te(me,X){if(!(X instanceof Object))return X;switch(X.constructor){case Date:return new Date(X.getTime());case Object:void 0===me&&(me={});break;case Array:me=[];break;default:return X}for(const ee in X)!X.hasOwnProperty(ee)||!et(ee)||(me[ee]=Te(me[ee],X[ee]));return me}function et(me){return"__proto__"!==me}const Rt=()=>{try{return function rt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const me=process.env.__FIREBASE_DEFAULTS__;return me?JSON.parse(me):void 0})()||(()=>{if(typeof document>"u")return;let me;try{me=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const X=me&&oe(me[1]);return X&&JSON.parse(X)})()}catch(me){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${me}`)}},Mn=me=>{var X,ee;return null===(ee=null===(X=Rt())||void 0===X?void 0:X.emulatorHosts)||void 0===ee?void 0:ee[me]},bt=me=>{const X=Mn(me);if(!X)return;const ee=X.lastIndexOf(":");if(ee<=0||ee+1===X.length)throw new Error(`Invalid host ${X} with no separate hostname and port!`);const K=parseInt(X.substring(ee+1),10);return"["===X[0]?[X.substring(1,ee-1),K]:[X.substring(0,ee),K]},le=()=>{var me;return null===(me=Rt())||void 0===me?void 0:me.config},Ve=me=>{var X;return null===(X=Rt())||void 0===X?void 0:X[`_${me}`]};class Oe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((X,ee)=>{this.resolve=X,this.reject=ee})}wrapCallback(X){return(ee,K)=>{ee?this.reject(ee):this.resolve(K),"function"==typeof X&&(this.promise.catch(()=>{}),1===X.length?X(ee):X(ee,K))}}}function Ze(me,X){if(me.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const K=X||"demo-project",J=me.iat||0,Ie=me.sub||me.user_id;if(!Ie)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const at=Object.assign({iss:`https://securetoken.google.com/${K}`,aud:K,iat:J,exp:J+3600,auth_time:J,sub:Ie,user_id:Ie,firebase:{sign_in_provider:"custom",identities:{}}},me);return[ze(JSON.stringify({alg:"none",type:"JWT"})),ze(JSON.stringify(at)),""].join(".")}function pt(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Se(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pt())}function ln(){var me;const X=null===(me=Rt())||void 0===me?void 0:me.forceEnvironment;if("node"===X)return!0;if("browser"===X)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function en(){return"object"==typeof self&&self.self===self}function Nn(){const me="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof me&&void 0!==me.id}function dn(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ii(){const me=pt();return me.indexOf("MSIE ")>=0||me.indexOf("Trident/")>=0}function vr(){return!ln()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ke(){try{return"object"==typeof indexedDB}catch{return!1}}function He(){return new Promise((me,X)=>{try{let ee=!0;const K="validate-browser-context-for-indexeddb-analytics-module",J=self.indexedDB.open(K);J.onsuccess=()=>{J.result.close(),ee||self.indexedDB.deleteDatabase(K),me(!0)},J.onupgradeneeded=()=>{ee=!1},J.onerror=()=>{var Ie;X((null===(Ie=J.error)||void 0===Ie?void 0:Ie.message)||"")}}catch(ee){X(ee)}})}function qe(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Je extends Error{constructor(X,ee,K){super(ee),this.code=X,this.customData=K,this.name="FirebaseError",Object.setPrototypeOf(this,Je.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,gt.prototype.create)}}class gt{constructor(X,ee,K){this.service=X,this.serviceName=ee,this.errors=K}create(X,...ee){const K=ee[0]||{},J=`${this.service}/${X}`,Ie=this.errors[X],at=Ie?function Tt(me,X){return me.replace(Et,(ee,K)=>{const J=X[K];return null!=J?String(J):`<${K}?>`})}(Ie,K):"Error";return new Je(J,`${this.serviceName}: ${at} (${J}).`,K)}}const Et=/\{\$([^}]+)}/g;function er(me,X){return Object.prototype.hasOwnProperty.call(me,X)}function Nr(me){for(const X in me)if(Object.prototype.hasOwnProperty.call(me,X))return!1;return!0}function Ln(me,X){if(me===X)return!0;const ee=Object.keys(me),K=Object.keys(X);for(const J of ee){if(!K.includes(J))return!1;const Ie=me[J],at=X[J];if($r(Ie)&&$r(at)){if(!Ln(Ie,at))return!1}else if(Ie!==at)return!1}for(const J of K)if(!ee.includes(J))return!1;return!0}function $r(me){return null!==me&&"object"==typeof me}function nr(me){const X=[];for(const[ee,K]of Object.entries(me))Array.isArray(K)?K.forEach(J=>{X.push(encodeURIComponent(ee)+"="+encodeURIComponent(J))}):X.push(encodeURIComponent(ee)+"="+encodeURIComponent(K));return X.length?"&"+X.join("&"):""}function Xt(me){const X={};return me.replace(/^\?/,"").split("&").forEach(K=>{if(K){const[J,Ie]=K.split("=");X[decodeURIComponent(J)]=decodeURIComponent(Ie)}}),X}function gn(me){const X=me.indexOf("?");if(!X)return"";const ee=me.indexOf("#",X);return me.substring(X,ee>0?ee:void 0)}function vn(me,X){const ee=new _r(me,X);return ee.subscribe.bind(ee)}class _r{constructor(X,ee){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ee,this.task.then(()=>{X(this)}).catch(K=>{this.error(K)})}next(X){this.forEachObserver(ee=>{ee.next(X)})}error(X){this.forEachObserver(ee=>{ee.error(X)}),this.close(X)}complete(){this.forEachObserver(X=>{X.complete()}),this.close()}subscribe(X,ee,K){let J;if(void 0===X&&void 0===ee&&void 0===K)throw new Error("Missing Observer.");J=function Vn(me,X){if("object"!=typeof me||null===me)return!1;for(const ee of X)if(ee in me&&"function"==typeof me[ee])return!0;return!1}(X,["next","error","complete"])?X:{next:X,error:ee,complete:K},void 0===J.next&&(J.next=pr),void 0===J.error&&(J.error=pr),void 0===J.complete&&(J.complete=pr);const Ie=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?J.error(this.finalError):J.complete()}catch{}}),this.observers.push(J),Ie}unsubscribeOne(X){void 0===this.observers||void 0===this.observers[X]||(delete this.observers[X],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(X){if(!this.finalized)for(let ee=0;ee<this.observers.length;ee++)this.sendOne(ee,X)}sendOne(X,ee){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[X])try{ee(this.observers[X])}catch(K){typeof console<"u"&&console.error&&console.error(K)}})}close(X){this.finalized||(this.finalized=!0,void 0!==X&&(this.finalError=X),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function pr(){}const kn=1e3,zr=2,xr=144e5,hi=.5;function Zn(me,X=kn,ee=zr){const K=X*Math.pow(ee,me),J=Math.round(hi*K*(Math.random()-.5)*2);return Math.min(xr,K+J)}function Yn(me){return me&&me._delegate?me._delegate:me}},2971:($t,Ge,z)=>{z.d(Ge,{b:()=>sr,B:()=>zo});var p=z(6593),W=z(5879),ae=z(6825);function fe(H){return new W.vHH(3e3,!1)}function Tt(H){switch(H.length){case 0:return new ae.ZN;case 1:return H[0];default:return new ae.ZE(H)}}function Et(H,y,I=new Map,R=new Map){const G=[],ie=[];let ve=-1,Q=null;if(y.forEach(je=>{const Qe=je.get("offset"),Dt=Qe==ve,Pt=Dt&&Q||new Map;je.forEach((Un,Tn)=>{let Kt=Tn,Fn=Un;if("offset"!==Tn)switch(Kt=H.normalizePropertyName(Kt,G),Fn){case ae.k1:Fn=I.get(Tn);break;case ae.l3:Fn=R.get(Tn);break;default:Fn=H.normalizeStyleValue(Tn,Kt,Fn,G)}Pt.set(Kt,Fn)}),Dt||ie.push(Pt),Q=Pt,ve=Qe}),G.length)throw function Nn(H){return new W.vHH(3502,!1)}();return ie}function Wn(H,y,I,R){switch(y){case"start":H.onStart(()=>R(I&&rn(I,"start",H)));break;case"done":H.onDone(()=>R(I&&rn(I,"done",H)));break;case"destroy":H.onDestroy(()=>R(I&&rn(I,"destroy",H)))}}function rn(H,y,I){const ie=xn(H.element,H.triggerName,H.fromState,H.toState,y||H.phaseName,I.totalTime??H.totalTime,!!I.disabled),ve=H._data;return null!=ve&&(ie._data=ve),ie}function xn(H,y,I,R,G="",ie=0,ve){return{element:H,triggerName:y,fromState:I,toState:R,phaseName:G,totalTime:ie,disabled:!!ve}}function Ht(H,y,I){let R=H.get(y);return R||H.set(y,R=I),R}function Kn(H){const y=H.indexOf(":");return[H.substring(1,y),H.slice(y+1)]}const lr=(()=>typeof document>"u"?null:document.documentElement)();function Qn(H){const y=H.parentNode||H.host||null;return y===lr?null:y}let Vt=null,Nr=!1;function si(H,y){for(;y;){if(y===H)return!0;y=Qn(y)}return!1}function nr(H,y,I){if(I)return Array.from(H.querySelectorAll(y));const R=H.querySelector(y);return R?[R]:[]}let gn=(()=>{class H{validateStyleProperty(I){return function Ki(H){Vt||(Vt=function $r(){return typeof document<"u"?document.body:null}()||{},Nr=!!Vt.style&&"WebkitAppearance"in Vt.style);let y=!0;return Vt.style&&!function er(H){return"ebkit"==H.substring(1,6)}(H)&&(y=H in Vt.style,!y&&Nr&&(y="Webkit"+H.charAt(0).toUpperCase()+H.slice(1)in Vt.style)),y}(I)}matchesElement(I,R){return!1}containsElement(I,R){return si(I,R)}getParentElement(I){return Qn(I)}query(I,R,G){return nr(I,R,G)}computeStyle(I,R,G){return G||""}animate(I,R,G,ie,ve,Q=[],je){return new ae.ZN(G,ie)}static#e=this.\u0275fac=function(R){return new(R||H)};static#t=this.\u0275prov=W.Yz7({token:H,factory:H.\u0275fac})}return H})(),tn=(()=>{class H{static#e=this.NOOP=new gn}return H})();const vn=1e3,Vn="ng-enter",pr="ng-leave",Mi="ng-trigger",jn=".ng-trigger",Di="ng-animating",fn=".ng-animating";function gr(H){if("number"==typeof H)return H;const y=H.match(/^(-?[\.\d]+)(m?s)/);return!y||y.length<2?0:Pn(parseFloat(y[1]),y[2])}function Pn(H,y){return"s"===y?H*vn:H}function ei(H,y,I){return H.hasOwnProperty("duration")?H:function Xn(H,y,I){let G,ie=0,ve="";if("string"==typeof H){const Q=H.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===Q)return y.push(fe()),{duration:0,delay:0,easing:""};G=Pn(parseFloat(Q[1]),Q[2]);const je=Q[3];null!=je&&(ie=Pn(parseFloat(je),Q[4]));const Qe=Q[5];Qe&&(ve=Qe)}else G=H;if(!I){let Q=!1,je=y.length;G<0&&(y.push(function xe(){return new W.vHH(3100,!1)}()),Q=!0),ie<0&&(y.push(function Me(){return new W.vHH(3101,!1)}()),Q=!0),Q&&y.splice(je,0,fe())}return{duration:G,delay:ie,easing:ve}}(H,y,I)}function kn(H,y={}){return Object.keys(H).forEach(I=>{y[I]=H[I]}),y}function zr(H){const y=new Map;return Object.keys(H).forEach(I=>{y.set(I,H[I])}),y}function Zn(H,y=new Map,I){if(I)for(let[R,G]of I)y.set(R,G);for(let[R,G]of H)y.set(R,G);return y}function wn(H,y,I){y.forEach((R,G)=>{const ie=at(G);I&&!I.has(G)&&I.set(G,H.style[ie]),H.style[ie]=R})}function Jt(H,y){y.forEach((I,R)=>{const G=at(R);H.style[G]=""})}function Yn(H){return Array.isArray(H)?1==H.length?H[0]:(0,ae.vP)(H):H}const X=new RegExp("{{\\s*(.+?)\\s*}}","g");function ee(H){let y=[];if("string"==typeof H){let I;for(;I=X.exec(H);)y.push(I[1]);X.lastIndex=0}return y}function K(H,y,I){const R=H.toString(),G=R.replace(X,(ie,ve)=>{let Q=y[ve];return null==Q&&(I.push(function ze(H){return new W.vHH(3003,!1)}()),Q=""),Q.toString()});return G==R?H:G}function J(H){const y=[];let I=H.next();for(;!I.done;)y.push(I.value),I=H.next();return y}const Ie=/-+([a-z0-9])/g;function at(H){return H.replace(Ie,(...y)=>y[1].toUpperCase())}function _n(H,y,I){switch(y.type){case 7:return H.visitTrigger(y,I);case 0:return H.visitState(y,I);case 1:return H.visitTransition(y,I);case 2:return H.visitSequence(y,I);case 3:return H.visitGroup(y,I);case 4:return H.visitAnimate(y,I);case 5:return H.visitKeyframes(y,I);case 6:return H.visitStyle(y,I);case 8:return H.visitReference(y,I);case 9:return H.visitAnimateChild(y,I);case 10:return H.visitAnimateRef(y,I);case 11:return H.visitQuery(y,I);case 12:return H.visitStagger(y,I);default:throw function oe(H){return new W.vHH(3004,!1)}()}}function In(H,y){return window.getComputedStyle(H)[y]}const ut="*";function kt(H,y){const I=[];return"string"==typeof H?H.split(/\s*,\s*/).forEach(R=>function wt(H,y,I){if(":"==H[0]){const je=function mn(H,y){switch(H){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(I,R)=>parseFloat(R)>parseFloat(I);case":decrement":return(I,R)=>parseFloat(R)<parseFloat(I);default:return y.push(function pt(H){return new W.vHH(3016,!1)}()),"* => *"}}(H,I);if("function"==typeof je)return void y.push(je);H=je}const R=H.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==R||R.length<4)return I.push(function Ze(H){return new W.vHH(3015,!1)}()),y;const G=R[1],ie=R[2],ve=R[3];y.push(hr(G,ve));"<"==ie[0]&&!(G==ut&&ve==ut)&&y.push(hr(ve,G))}(R,I,y)):I.push(H),I}const En=new Set(["true","1"]),Tr=new Set(["false","0"]);function hr(H,y){const I=En.has(H)||Tr.has(H),R=En.has(y)||Tr.has(y);return(G,ie)=>{let ve=H==ut||H==G,Q=y==ut||y==ie;return!ve&&I&&"boolean"==typeof G&&(ve=G?En.has(H):Tr.has(H)),!Q&&R&&"boolean"==typeof ie&&(Q=ie?En.has(y):Tr.has(y)),ve&&Q}}const xi=new RegExp("s*:selfs*,?","g");function ys(H,y,I,R){return new Rs(H).build(y,I,R)}class Rs{constructor(y){this._driver=y}build(y,I,R){const G=new To(I);return this._resetContextStyleTimingState(G),_n(this,Yn(y),G)}_resetContextStyleTimingState(y){y.currentQuerySelector="",y.collectedStyles=new Map,y.collectedStyles.set("",new Map),y.currentTime=0}visitTrigger(y,I){let R=I.queryCount=0,G=I.depCount=0;const ie=[],ve=[];return"@"==y.name.charAt(0)&&I.errors.push(function Te(){return new W.vHH(3006,!1)}()),y.definitions.forEach(Q=>{if(this._resetContextStyleTimingState(I),0==Q.type){const je=Q,Qe=je.name;Qe.toString().split(/\s*,\s*/).forEach(Dt=>{je.name=Dt,ie.push(this.visitState(je,I))}),je.name=Qe}else if(1==Q.type){const je=this.visitTransition(Q,I);R+=je.queryCount,G+=je.depCount,ve.push(je)}else I.errors.push(function et(){return new W.vHH(3007,!1)}())}),{type:7,name:y.name,states:ie,transitions:ve,queryCount:R,depCount:G,options:null}}visitState(y,I){const R=this.visitStyle(y.styles,I),G=y.options&&y.options.params||null;if(R.containsDynamicStyles){const ie=new Set,ve=G||{};R.styles.forEach(Q=>{Q instanceof Map&&Q.forEach(je=>{ee(je).forEach(Qe=>{ve.hasOwnProperty(Qe)||ie.add(Qe)})})}),ie.size&&(J(ie.values()),I.errors.push(function rt(H,y){return new W.vHH(3008,!1)}()))}return{type:0,name:y.name,style:R,options:G?{params:G}:null}}visitTransition(y,I){I.queryCount=0,I.depCount=0;const R=_n(this,Yn(y.animation),I);return{type:1,matchers:kt(y.expr,I.errors),animation:R,queryCount:I.queryCount,depCount:I.depCount,options:ns(y.options)}}visitSequence(y,I){return{type:2,steps:y.steps.map(R=>_n(this,R,I)),options:ns(y.options)}}visitGroup(y,I){const R=I.currentTime;let G=0;const ie=y.steps.map(ve=>{I.currentTime=R;const Q=_n(this,ve,I);return G=Math.max(G,I.currentTime),Q});return I.currentTime=G,{type:3,steps:ie,options:ns(y.options)}}visitAnimate(y,I){const R=function Lr(H,y){if(H.hasOwnProperty("duration"))return H;if("number"==typeof H)return Zi(ei(H,y).duration,0,"");const I=H;if(I.split(/\s+/).some(ie=>"{"==ie.charAt(0)&&"{"==ie.charAt(1))){const ie=Zi(0,0,"");return ie.dynamic=!0,ie.strValue=I,ie}const G=ei(I,y);return Zi(G.duration,G.delay,G.easing)}(y.timings,I.errors);I.currentAnimateTimings=R;let G,ie=y.styles?y.styles:(0,ae.oB)({});if(5==ie.type)G=this.visitKeyframes(ie,I);else{let ve=y.styles,Q=!1;if(!ve){Q=!0;const Qe={};R.easing&&(Qe.easing=R.easing),ve=(0,ae.oB)(Qe)}I.currentTime+=R.duration+R.delay;const je=this.visitStyle(ve,I);je.isEmptyStep=Q,G=je}return I.currentAnimateTimings=null,{type:4,timings:R,style:G,options:null}}visitStyle(y,I){const R=this._makeStyleAst(y,I);return this._validateStyleAst(R,I),R}_makeStyleAst(y,I){const R=[],G=Array.isArray(y.styles)?y.styles:[y.styles];for(let Q of G)"string"==typeof Q?Q===ae.l3?R.push(Q):I.errors.push(new W.vHH(3002,!1)):R.push(zr(Q));let ie=!1,ve=null;return R.forEach(Q=>{if(Q instanceof Map&&(Q.has("easing")&&(ve=Q.get("easing"),Q.delete("easing")),!ie))for(let je of Q.values())if(je.toString().indexOf("{{")>=0){ie=!0;break}}),{type:6,styles:R,easing:ve,offset:y.offset,containsDynamicStyles:ie,options:null}}_validateStyleAst(y,I){const R=I.currentAnimateTimings;let G=I.currentTime,ie=I.currentTime;R&&ie>0&&(ie-=R.duration+R.delay),y.styles.forEach(ve=>{"string"!=typeof ve&&ve.forEach((Q,je)=>{const Qe=I.collectedStyles.get(I.currentQuerySelector),Dt=Qe.get(je);let Pt=!0;Dt&&(ie!=G&&ie>=Dt.startTime&&G<=Dt.endTime&&(I.errors.push(function Qt(H,y,I,R,G){return new W.vHH(3010,!1)}()),Pt=!1),ie=Dt.startTime),Pt&&Qe.set(je,{startTime:ie,endTime:G}),I.options&&function me(H,y,I){const R=y.params||{},G=ee(H);G.length&&G.forEach(ie=>{R.hasOwnProperty(ie)||I.push(function Ee(H){return new W.vHH(3001,!1)}())})}(Q,I.options,I.errors)})})}visitKeyframes(y,I){const R={type:5,styles:[],options:null};if(!I.currentAnimateTimings)return I.errors.push(function Rt(){return new W.vHH(3011,!1)}()),R;let ie=0;const ve=[];let Q=!1,je=!1,Qe=0;const Dt=y.steps.map(Bi=>{const ds=this._makeStyleAst(Bi,I);let Pr=null!=ds.offset?ds.offset:function Ts(H){if("string"==typeof H)return null;let y=null;if(Array.isArray(H))H.forEach(I=>{if(I instanceof Map&&I.has("offset")){const R=I;y=parseFloat(R.get("offset")),R.delete("offset")}});else if(H instanceof Map&&H.has("offset")){const I=H;y=parseFloat(I.get("offset")),I.delete("offset")}return y}(ds.styles),Ei=0;return null!=Pr&&(ie++,Ei=ds.offset=Pr),je=je||Ei<0||Ei>1,Q=Q||Ei<Qe,Qe=Ei,ve.push(Ei),ds});je&&I.errors.push(function Mn(){return new W.vHH(3012,!1)}()),Q&&I.errors.push(function bt(){return new W.vHH(3200,!1)}());const Pt=y.steps.length;let Un=0;ie>0&&ie<Pt?I.errors.push(function le(){return new W.vHH(3202,!1)}()):0==ie&&(Un=1/(Pt-1));const Tn=Pt-1,Kt=I.currentTime,Fn=I.currentAnimateTimings,Zr=Fn.duration;return Dt.forEach((Bi,ds)=>{const Pr=Un>0?ds==Tn?1:Un*ds:ve[ds],Ei=Pr*Zr;I.currentTime=Kt+Fn.delay+Ei,Fn.duration=Ei,this._validateStyleAst(Bi,I),Bi.offset=Pr,R.styles.push(Bi)}),R}visitReference(y,I){return{type:8,animation:_n(this,Yn(y.animation),I),options:ns(y.options)}}visitAnimateChild(y,I){return I.depCount++,{type:9,options:ns(y.options)}}visitAnimateRef(y,I){return{type:10,animation:this.visitReference(y.animation,I),options:ns(y.options)}}visitQuery(y,I){const R=I.currentQuerySelector,G=y.options||{};I.queryCount++,I.currentQuery=y;const[ie,ve]=function oi(H){const y=!!H.split(/\s*,\s*/).find(I=>":self"==I);return y&&(H=H.replace(xi,"")),H=H.replace(/@\*/g,jn).replace(/@\w+/g,I=>jn+"-"+I.slice(1)).replace(/:animating/g,fn),[H,y]}(y.selector);I.currentQuerySelector=R.length?R+" "+ie:ie,Ht(I.collectedStyles,I.currentQuerySelector,new Map);const Q=_n(this,Yn(y.animation),I);return I.currentQuery=null,I.currentQuerySelector=R,{type:11,selector:ie,limit:G.limit||0,optional:!!G.optional,includeSelf:ve,animation:Q,originalSelector:y.selector,options:ns(y.options)}}visitStagger(y,I){I.currentQuery||I.errors.push(function Ve(){return new W.vHH(3013,!1)}());const R="full"===y.timings?{duration:0,delay:0,easing:"full"}:ei(y.timings,I.errors,!0);return{type:12,animation:_n(this,Yn(y.animation),I),timings:R,options:null}}}class To{constructor(y){this.errors=y,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function ns(H){return H?(H=kn(H)).params&&(H.params=function Os(H){return H?kn(H):null}(H.params)):H={},H}function Zi(H,y,I){return{duration:H,delay:y,easing:I}}function mo(H,y,I,R,G,ie,ve=null,Q=!1){return{type:1,element:H,keyframes:y,preStyleProps:I,postStyleProps:R,duration:G,delay:ie,totalTime:G+ie,easing:ve,subTimeline:Q}}class yo{constructor(){this._map=new Map}get(y){return this._map.get(y)||[]}append(y,I){let R=this._map.get(y);R||this._map.set(y,R=[]),R.push(...I)}has(y){return this._map.has(y)}clear(){this._map.clear()}}const Ne=new RegExp(":enter","g"),vt=new RegExp(":leave","g");function Zt(H,y,I,R,G,ie=new Map,ve=new Map,Q,je,Qe=[]){return(new Bn).buildKeyframes(H,y,I,R,G,ie,ve,Q,je,Qe)}class Bn{buildKeyframes(y,I,R,G,ie,ve,Q,je,Qe,Dt=[]){Qe=Qe||new yo;const Pt=new $n(y,I,Qe,G,ie,Dt,[]);Pt.options=je;const Un=je.delay?gr(je.delay):0;Pt.currentTimeline.delayNextStep(Un),Pt.currentTimeline.setStyles([ve],null,Pt.errors,je),_n(this,R,Pt);const Tn=Pt.timelines.filter(Kt=>Kt.containsAnimation());if(Tn.length&&Q.size){let Kt;for(let Fn=Tn.length-1;Fn>=0;Fn--){const Zr=Tn[Fn];if(Zr.element===I){Kt=Zr;break}}Kt&&!Kt.allowOnlyTimelineStyles()&&Kt.setStyles([Q],null,Pt.errors,je)}return Tn.length?Tn.map(Kt=>Kt.buildKeyframes()):[mo(I,[],[],[],0,Un,"",!1)]}visitTrigger(y,I){}visitState(y,I){}visitTransition(y,I){}visitAnimateChild(y,I){const R=I.subInstructions.get(I.element);if(R){const G=I.createSubContext(y.options),ie=I.currentTimeline.currentTime,ve=this._visitSubInstructions(R,G,G.options);ie!=ve&&I.transformIntoNewTimeline(ve)}I.previousNode=y}visitAnimateRef(y,I){const R=I.createSubContext(y.options);R.transformIntoNewTimeline(),this._applyAnimationRefDelays([y.options,y.animation.options],I,R),this.visitReference(y.animation,R),I.transformIntoNewTimeline(R.currentTimeline.currentTime),I.previousNode=y}_applyAnimationRefDelays(y,I,R){for(const G of y){const ie=G?.delay;if(ie){const ve="number"==typeof ie?ie:gr(K(ie,G?.params??{},I.errors));R.delayNextStep(ve)}}}_visitSubInstructions(y,I,R){let ie=I.currentTimeline.currentTime;const ve=null!=R.duration?gr(R.duration):null,Q=null!=R.delay?gr(R.delay):null;return 0!==ve&&y.forEach(je=>{const Qe=I.appendInstructionToTimeline(je,ve,Q);ie=Math.max(ie,Qe.duration+Qe.delay)}),ie}visitReference(y,I){I.updateOptions(y.options,!0),_n(this,y.animation,I),I.previousNode=y}visitSequence(y,I){const R=I.subContextCount;let G=I;const ie=y.options;if(ie&&(ie.params||ie.delay)&&(G=I.createSubContext(ie),G.transformIntoNewTimeline(),null!=ie.delay)){6==G.previousNode.type&&(G.currentTimeline.snapshotCurrentStyles(),G.previousNode=Dn);const ve=gr(ie.delay);G.delayNextStep(ve)}y.steps.length&&(y.steps.forEach(ve=>_n(this,ve,G)),G.currentTimeline.applyStylesToKeyframe(),G.subContextCount>R&&G.transformIntoNewTimeline()),I.previousNode=y}visitGroup(y,I){const R=[];let G=I.currentTimeline.currentTime;const ie=y.options&&y.options.delay?gr(y.options.delay):0;y.steps.forEach(ve=>{const Q=I.createSubContext(y.options);ie&&Q.delayNextStep(ie),_n(this,ve,Q),G=Math.max(G,Q.currentTimeline.currentTime),R.push(Q.currentTimeline)}),R.forEach(ve=>I.currentTimeline.mergeTimelineCollectedStyles(ve)),I.transformIntoNewTimeline(G),I.previousNode=y}_visitTiming(y,I){if(y.dynamic){const R=y.strValue;return ei(I.params?K(R,I.params,I.errors):R,I.errors)}return{duration:y.duration,delay:y.delay,easing:y.easing}}visitAnimate(y,I){const R=I.currentAnimateTimings=this._visitTiming(y.timings,I),G=I.currentTimeline;R.delay&&(I.incrementTime(R.delay),G.snapshotCurrentStyles());const ie=y.style;5==ie.type?this.visitKeyframes(ie,I):(I.incrementTime(R.duration),this.visitStyle(ie,I),G.applyStylesToKeyframe()),I.currentAnimateTimings=null,I.previousNode=y}visitStyle(y,I){const R=I.currentTimeline,G=I.currentAnimateTimings;!G&&R.hasCurrentStyleProperties()&&R.forwardFrame();const ie=G&&G.easing||y.easing;y.isEmptyStep?R.applyEmptyStep(ie):R.setStyles(y.styles,ie,I.errors,I.options),I.previousNode=y}visitKeyframes(y,I){const R=I.currentAnimateTimings,G=I.currentTimeline.duration,ie=R.duration,Q=I.createSubContext().currentTimeline;Q.easing=R.easing,y.styles.forEach(je=>{Q.forwardTime((je.offset||0)*ie),Q.setStyles(je.styles,je.easing,I.errors,I.options),Q.applyStylesToKeyframe()}),I.currentTimeline.mergeTimelineCollectedStyles(Q),I.transformIntoNewTimeline(G+ie),I.previousNode=y}visitQuery(y,I){const R=I.currentTimeline.currentTime,G=y.options||{},ie=G.delay?gr(G.delay):0;ie&&(6===I.previousNode.type||0==R&&I.currentTimeline.hasCurrentStyleProperties())&&(I.currentTimeline.snapshotCurrentStyles(),I.previousNode=Dn);let ve=R;const Q=I.invokeQuery(y.selector,y.originalSelector,y.limit,y.includeSelf,!!G.optional,I.errors);I.currentQueryTotal=Q.length;let je=null;Q.forEach((Qe,Dt)=>{I.currentQueryIndex=Dt;const Pt=I.createSubContext(y.options,Qe);ie&&Pt.delayNextStep(ie),Qe===I.element&&(je=Pt.currentTimeline),_n(this,y.animation,Pt),Pt.currentTimeline.applyStylesToKeyframe(),ve=Math.max(ve,Pt.currentTimeline.currentTime)}),I.currentQueryIndex=0,I.currentQueryTotal=0,I.transformIntoNewTimeline(ve),je&&(I.currentTimeline.mergeTimelineCollectedStyles(je),I.currentTimeline.snapshotCurrentStyles()),I.previousNode=y}visitStagger(y,I){const R=I.parentContext,G=I.currentTimeline,ie=y.timings,ve=Math.abs(ie.duration),Q=ve*(I.currentQueryTotal-1);let je=ve*I.currentQueryIndex;switch(ie.duration<0?"reverse":ie.easing){case"reverse":je=Q-je;break;case"full":je=R.currentStaggerTime}const Dt=I.currentTimeline;je&&Dt.delayNextStep(je);const Pt=Dt.currentTime;_n(this,y.animation,I),I.previousNode=y,R.currentStaggerTime=G.currentTime-Pt+(G.startTime-R.currentTimeline.startTime)}}const Dn={};class $n{constructor(y,I,R,G,ie,ve,Q,je){this._driver=y,this.element=I,this.subInstructions=R,this._enterClassName=G,this._leaveClassName=ie,this.errors=ve,this.timelines=Q,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Dn,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=je||new Ps(this._driver,I,0),Q.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(y,I){if(!y)return;const R=y;let G=this.options;null!=R.duration&&(G.duration=gr(R.duration)),null!=R.delay&&(G.delay=gr(R.delay));const ie=R.params;if(ie){let ve=G.params;ve||(ve=this.options.params={}),Object.keys(ie).forEach(Q=>{(!I||!ve.hasOwnProperty(Q))&&(ve[Q]=K(ie[Q],ve,this.errors))})}}_copyOptions(){const y={};if(this.options){const I=this.options.params;if(I){const R=y.params={};Object.keys(I).forEach(G=>{R[G]=I[G]})}}return y}createSubContext(y=null,I,R){const G=I||this.element,ie=new $n(this._driver,G,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(G,R||0));return ie.previousNode=this.previousNode,ie.currentAnimateTimings=this.currentAnimateTimings,ie.options=this._copyOptions(),ie.updateOptions(y),ie.currentQueryIndex=this.currentQueryIndex,ie.currentQueryTotal=this.currentQueryTotal,ie.parentContext=this,this.subContextCount++,ie}transformIntoNewTimeline(y){return this.previousNode=Dn,this.currentTimeline=this.currentTimeline.fork(this.element,y),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(y,I,R){const G={duration:I??y.duration,delay:this.currentTimeline.currentTime+(R??0)+y.delay,easing:""},ie=new Ri(this._driver,y.element,y.keyframes,y.preStyleProps,y.postStyleProps,G,y.stretchStartingKeyframe);return this.timelines.push(ie),G}incrementTime(y){this.currentTimeline.forwardTime(this.currentTimeline.duration+y)}delayNextStep(y){y>0&&this.currentTimeline.delayNextStep(y)}invokeQuery(y,I,R,G,ie,ve){let Q=[];if(G&&Q.push(this.element),y.length>0){y=(y=y.replace(Ne,"."+this._enterClassName)).replace(vt,"."+this._leaveClassName);let Qe=this._driver.query(this.element,y,1!=R);0!==R&&(Qe=R<0?Qe.slice(Qe.length+R,Qe.length):Qe.slice(0,R)),Q.push(...Qe)}return!ie&&0==Q.length&&ve.push(function Oe(H){return new W.vHH(3014,!1)}()),Q}}class Ps{constructor(y,I,R,G){this._driver=y,this.element=I,this.startTime=R,this._elementTimelineStylesLookup=G,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(I),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(I,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(y){const I=1===this._keyframes.size&&this._pendingStyles.size;this.duration||I?(this.forwardTime(this.currentTime+y),I&&this.snapshotCurrentStyles()):this.startTime+=y}fork(y,I){return this.applyStylesToKeyframe(),new Ps(this._driver,y,I||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(y){this.applyStylesToKeyframe(),this.duration=y,this._loadKeyframe()}_updateStyle(y,I){this._localTimelineStyles.set(y,I),this._globalTimelineStyles.set(y,I),this._styleSummary.set(y,{time:this.currentTime,value:I})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(y){y&&this._previousKeyframe.set("easing",y);for(let[I,R]of this._globalTimelineStyles)this._backFill.set(I,R||ae.l3),this._currentKeyframe.set(I,ae.l3);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(y,I,R,G){I&&this._previousKeyframe.set("easing",I);const ie=G&&G.params||{},ve=function pi(H,y){const I=new Map;let R;return H.forEach(G=>{if("*"===G){R=R||y.keys();for(let ie of R)I.set(ie,ae.l3)}else Zn(G,I)}),I}(y,this._globalTimelineStyles);for(let[Q,je]of ve){const Qe=K(je,ie,R);this._pendingStyles.set(Q,Qe),this._localTimelineStyles.has(Q)||this._backFill.set(Q,this._globalTimelineStyles.get(Q)??ae.l3),this._updateStyle(Q,Qe)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((y,I)=>{this._currentKeyframe.set(I,y)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((y,I)=>{this._currentKeyframe.has(I)||this._currentKeyframe.set(I,y)}))}snapshotCurrentStyles(){for(let[y,I]of this._localTimelineStyles)this._pendingStyles.set(y,I),this._updateStyle(y,I)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const y=[];for(let I in this._currentKeyframe)y.push(I);return y}mergeTimelineCollectedStyles(y){y._styleSummary.forEach((I,R)=>{const G=this._styleSummary.get(R);(!G||I.time>G.time)&&this._updateStyle(R,I.value)})}buildKeyframes(){this.applyStylesToKeyframe();const y=new Set,I=new Set,R=1===this._keyframes.size&&0===this.duration;let G=[];this._keyframes.forEach((Q,je)=>{const Qe=Zn(Q,new Map,this._backFill);Qe.forEach((Dt,Pt)=>{Dt===ae.k1?y.add(Pt):Dt===ae.l3&&I.add(Pt)}),R||Qe.set("offset",je/this.duration),G.push(Qe)});const ie=y.size?J(y.values()):[],ve=I.size?J(I.values()):[];if(R){const Q=G[0],je=new Map(Q);Q.set("offset",0),je.set("offset",1),G=[Q,je]}return mo(this.element,G,ie,ve,this.duration,this.startTime,this.easing,!1)}}class Ri extends Ps{constructor(y,I,R,G,ie,ve,Q=!1){super(y,I,ve.delay),this.keyframes=R,this.preStyleProps=G,this.postStyleProps=ie,this._stretchStartingKeyframe=Q,this.timings={duration:ve.duration,delay:ve.delay,easing:ve.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let y=this.keyframes,{delay:I,duration:R,easing:G}=this.timings;if(this._stretchStartingKeyframe&&I){const ie=[],ve=R+I,Q=I/ve,je=Zn(y[0]);je.set("offset",0),ie.push(je);const Qe=Zn(y[0]);Qe.set("offset",$i(Q)),ie.push(Qe);const Dt=y.length-1;for(let Pt=1;Pt<=Dt;Pt++){let Un=Zn(y[Pt]);const Tn=Un.get("offset");Un.set("offset",$i((I+Tn*R)/ve)),ie.push(Un)}R=ve,I=0,G="",y=ie}return mo(this.element,y,this.preStyleProps,this.postStyleProps,R,I,G,!0)}}function $i(H,y=3){const I=Math.pow(10,y-1);return Math.round(H*I)/I}class Gs{}const Ss=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class so extends Gs{normalizePropertyName(y,I){return at(y)}normalizeStyleValue(y,I,R,G){let ie="";const ve=R.toString().trim();if(Ss.has(I)&&0!==R&&"0"!==R)if("number"==typeof R)ie="px";else{const Q=R.match(/^[+-]?[\d\.]+([a-z]*)$/);Q&&0==Q[1].length&&G.push(function pe(H,y){return new W.vHH(3005,!1)}())}return ve+ie}}function vo(H,y,I,R,G,ie,ve,Q,je,Qe,Dt,Pt,Un){return{type:0,element:H,triggerName:y,isRemovalTransition:G,fromState:I,fromStyles:ie,toState:R,toStyles:ve,timelines:Q,queriedElements:je,preStyleProps:Qe,postStyleProps:Dt,totalTime:Pt,errors:Un}}const Uo={};class Hn{constructor(y,I,R){this._triggerName=y,this.ast=I,this._stateStyles=R}match(y,I,R,G){return function Ci(H,y,I,R,G){return H.some(ie=>ie(y,I,R,G))}(this.ast.matchers,y,I,R,G)}buildStyles(y,I,R){let G=this._stateStyles.get("*");return void 0!==y&&(G=this._stateStyles.get(y?.toString())||G),G?G.buildStyles(I,R):new Map}build(y,I,R,G,ie,ve,Q,je,Qe,Dt){const Pt=[],Un=this.ast.options&&this.ast.options.params||Uo,Kt=this.buildStyles(R,Q&&Q.params||Uo,Pt),Fn=je&&je.params||Uo,Zr=this.buildStyles(G,Fn,Pt),Bi=new Set,ds=new Map,Pr=new Map,Ei="void"===G,lo={params:vs(Fn,Un),delay:this.ast.options?.delay},ho=Dt?[]:Zt(y,I,this.ast.animation,ie,ve,Kt,Zr,lo,Qe,Pt);let _=0;if(ho.forEach(v=>{_=Math.max(v.duration+v.delay,_)}),Pt.length)return vo(I,this._triggerName,R,G,Ei,Kt,Zr,[],[],ds,Pr,_,Pt);ho.forEach(v=>{const A=v.element,k=Ht(ds,A,new Set);v.preStyleProps.forEach(ce=>k.add(ce));const Z=Ht(Pr,A,new Set);v.postStyleProps.forEach(ce=>Z.add(ce)),A!==I&&Bi.add(A)});const S=J(Bi.values());return vo(I,this._triggerName,R,G,Ei,Kt,Zr,ho,S,ds,Pr,_)}}function vs(H,y){const I=kn(y);for(const R in H)H.hasOwnProperty(R)&&null!=H[R]&&(I[R]=H[R]);return I}class Vr{constructor(y,I,R){this.styles=y,this.defaultParams=I,this.normalizer=R}buildStyles(y,I){const R=new Map,G=kn(this.defaultParams);return Object.keys(y).forEach(ie=>{const ve=y[ie];null!==ve&&(G[ie]=ve)}),this.styles.styles.forEach(ie=>{"string"!=typeof ie&&ie.forEach((ve,Q)=>{ve&&(ve=K(ve,G,I));const je=this.normalizer.normalizePropertyName(Q,I);ve=this.normalizer.normalizeStyleValue(Q,je,ve,I),R.set(Q,ve)})}),R}}class _o{constructor(y,I,R){this.name=y,this.ast=I,this._normalizer=R,this.transitionFactories=[],this.states=new Map,I.states.forEach(G=>{this.states.set(G.name,new Vr(G.style,G.options&&G.options.params||{},R))}),Jn(this.states,"true","1"),Jn(this.states,"false","0"),I.transitions.forEach(G=>{this.transitionFactories.push(new Hn(y,G,this.states))}),this.fallbackTransition=function As(H,y,I){return new Hn(H,{type:1,animation:{type:2,steps:[],options:null},matchers:[(ve,Q)=>!0],options:null,queryCount:0,depCount:0},y)}(y,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(y,I,R,G){return this.transitionFactories.find(ve=>ve.match(y,I,R,G))||null}matchStyles(y,I,R){return this.fallbackTransition.buildStyles(y,I,R)}}function Jn(H,y,I){H.has(y)?H.has(I)||H.set(I,H.get(y)):H.has(I)&&H.set(y,H.get(I))}const Oi=new yo;class ar{constructor(y,I,R){this.bodyNode=y,this._driver=I,this._normalizer=R,this._animations=new Map,this._playersById=new Map,this.players=[]}register(y,I){const R=[],ie=ys(this._driver,I,R,[]);if(R.length)throw function dn(H){return new W.vHH(3503,!1)}();this._animations.set(y,ie)}_buildPlayer(y,I,R){const G=y.element,ie=Et(this._normalizer,y.keyframes,I,R);return this._driver.animate(G,ie,y.duration,y.delay,y.easing,[],!0)}create(y,I,R={}){const G=[],ie=this._animations.get(y);let ve;const Q=new Map;if(ie?(ve=Zt(this._driver,I,ie,Vn,pr,new Map,new Map,R,Oi,G),ve.forEach(Dt=>{const Pt=Ht(Q,Dt.element,new Map);Dt.postStyleProps.forEach(Un=>Pt.set(Un,null))})):(G.push(function Dr(){return new W.vHH(3300,!1)}()),ve=[]),G.length)throw function ii(H){return new W.vHH(3504,!1)}();Q.forEach((Dt,Pt)=>{Dt.forEach((Un,Tn)=>{Dt.set(Tn,this._driver.computeStyle(Pt,Tn,ae.l3))})});const Qe=Tt(ve.map(Dt=>{const Pt=Q.get(Dt.element);return this._buildPlayer(Dt,new Map,Pt)}));return this._playersById.set(y,Qe),Qe.onDestroy(()=>this.destroy(y)),this.players.push(Qe),Qe}destroy(y){const I=this._getPlayer(y);I.destroy(),this._playersById.delete(y);const R=this.players.indexOf(I);R>=0&&this.players.splice(R,1)}_getPlayer(y){const I=this._playersById.get(y);if(!I)throw function br(H){return new W.vHH(3301,!1)}();return I}listen(y,I,R,G){const ie=xn(I,"","","");return Wn(this._getPlayer(y),R,ie,G),()=>{}}command(y,I,R,G){if("register"==R)return void this.register(y,G[0]);if("create"==R)return void this.create(y,I,G[0]||{});const ie=this._getPlayer(y);switch(R){case"play":ie.play();break;case"pause":ie.pause();break;case"reset":ie.reset();break;case"restart":ie.restart();break;case"finish":ie.finish();break;case"init":ie.init();break;case"setPosition":ie.setPosition(parseFloat(G[0]));break;case"destroy":this.destroy(y)}}}const It="ng-animate-queued",Er="ng-animate-disabled",Ms=[],Sr={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},gi={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},ui="__ng_removed";class nn{get params(){return this.options.params}constructor(y,I=""){this.namespaceId=I;const R=y&&y.hasOwnProperty("value");if(this.value=function mi(H){return H??null}(R?y.value:y),R){const ie=kn(y);delete ie.value,this.options=ie}else this.options={};this.options.params||(this.options.params={})}absorbOptions(y){const I=y.params;if(I){const R=this.options.params;Object.keys(I).forEach(G=>{null==R[G]&&(R[G]=I[G])})}}}const bi="void",rs=new nn(bi);class Fs{constructor(y,I,R){this.id=y,this.hostElement=I,this._engine=R,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+y,Hr(I,this._hostClassName)}listen(y,I,R,G){if(!this._triggers.has(I))throw function Cr(H,y){return new W.vHH(3302,!1)}();if(null==R||0==R.length)throw function vr(H){return new W.vHH(3303,!1)}();if(!function Ao(H){return"start"==H||"done"==H}(R))throw function ke(H,y){return new W.vHH(3400,!1)}();const ie=Ht(this._elementListeners,y,[]),ve={name:I,phase:R,callback:G};ie.push(ve);const Q=Ht(this._engine.statesByElement,y,new Map);return Q.has(I)||(Hr(y,Mi),Hr(y,Mi+"-"+I),Q.set(I,rs)),()=>{this._engine.afterFlush(()=>{const je=ie.indexOf(ve);je>=0&&ie.splice(je,1),this._triggers.has(I)||Q.delete(I)})}}register(y,I){return!this._triggers.has(y)&&(this._triggers.set(y,I),!0)}_getTrigger(y){const I=this._triggers.get(y);if(!I)throw function He(H){return new W.vHH(3401,!1)}();return I}trigger(y,I,R,G=!0){const ie=this._getTrigger(I),ve=new Ns(this.id,I,y);let Q=this._engine.statesByElement.get(y);Q||(Hr(y,Mi),Hr(y,Mi+"-"+I),this._engine.statesByElement.set(y,Q=new Map));let je=Q.get(I);const Qe=new nn(R,this.id);if(!(R&&R.hasOwnProperty("value"))&&je&&Qe.absorbOptions(je.options),Q.set(I,Qe),je||(je=rs),Qe.value!==bi&&je.value===Qe.value){if(!function ci(H,y){const I=Object.keys(H),R=Object.keys(y);if(I.length!=R.length)return!1;for(let G=0;G<I.length;G++){const ie=I[G];if(!y.hasOwnProperty(ie)||H[ie]!==y[ie])return!1}return!0}(je.params,Qe.params)){const Fn=[],Zr=ie.matchStyles(je.value,je.params,Fn),Bi=ie.matchStyles(Qe.value,Qe.params,Fn);Fn.length?this._engine.reportError(Fn):this._engine.afterFlush(()=>{Jt(y,Zr),wn(y,Bi)})}return}const Un=Ht(this._engine.playersByElement,y,[]);Un.forEach(Fn=>{Fn.namespaceId==this.id&&Fn.triggerName==I&&Fn.queued&&Fn.destroy()});let Tn=ie.matchTransition(je.value,Qe.value,y,Qe.params),Kt=!1;if(!Tn){if(!G)return;Tn=ie.fallbackTransition,Kt=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:y,triggerName:I,transition:Tn,fromState:je,toState:Qe,player:ve,isFallbackTransition:Kt}),Kt||(Hr(y,It),ve.onStart(()=>{Rn(y,It)})),ve.onDone(()=>{let Fn=this.players.indexOf(ve);Fn>=0&&this.players.splice(Fn,1);const Zr=this._engine.playersByElement.get(y);if(Zr){let Bi=Zr.indexOf(ve);Bi>=0&&Zr.splice(Bi,1)}}),this.players.push(ve),Un.push(ve),ve}deregister(y){this._triggers.delete(y),this._engine.statesByElement.forEach(I=>I.delete(y)),this._elementListeners.forEach((I,R)=>{this._elementListeners.set(R,I.filter(G=>G.name!=y))})}clearElementCache(y){this._engine.statesByElement.delete(y),this._elementListeners.delete(y);const I=this._engine.playersByElement.get(y);I&&(I.forEach(R=>R.destroy()),this._engine.playersByElement.delete(y))}_signalRemovalForInnerTriggers(y,I){const R=this._engine.driver.query(y,jn,!0);R.forEach(G=>{if(G[ui])return;const ie=this._engine.fetchNamespacesByElement(G);ie.size?ie.forEach(ve=>ve.triggerLeaveAnimation(G,I,!1,!0)):this.clearElementCache(G)}),this._engine.afterFlushAnimationsDone(()=>R.forEach(G=>this.clearElementCache(G)))}triggerLeaveAnimation(y,I,R,G){const ie=this._engine.statesByElement.get(y),ve=new Map;if(ie){const Q=[];if(ie.forEach((je,Qe)=>{if(ve.set(Qe,je.value),this._triggers.has(Qe)){const Dt=this.trigger(y,Qe,bi,G);Dt&&Q.push(Dt)}}),Q.length)return this._engine.markElementAsRemoved(this.id,y,!0,I,ve),R&&Tt(Q).onDone(()=>this._engine.processLeaveNode(y)),!0}return!1}prepareLeaveAnimationListeners(y){const I=this._elementListeners.get(y),R=this._engine.statesByElement.get(y);if(I&&R){const G=new Set;I.forEach(ie=>{const ve=ie.name;if(G.has(ve))return;G.add(ve);const je=this._triggers.get(ve).fallbackTransition,Qe=R.get(ve)||rs,Dt=new nn(bi),Pt=new Ns(this.id,ve,y);this._engine.totalQueuedPlayers++,this._queue.push({element:y,triggerName:ve,transition:je,fromState:Qe,toState:Dt,player:Pt,isFallbackTransition:!0})})}}removeNode(y,I){const R=this._engine;if(y.childElementCount&&this._signalRemovalForInnerTriggers(y,I),this.triggerLeaveAnimation(y,I,!0))return;let G=!1;if(R.totalAnimations){const ie=R.players.length?R.playersByQueriedElement.get(y):[];if(ie&&ie.length)G=!0;else{let ve=y;for(;ve=ve.parentNode;)if(R.statesByElement.get(ve)){G=!0;break}}}if(this.prepareLeaveAnimationListeners(y),G)R.markElementAsRemoved(this.id,y,!1,I);else{const ie=y[ui];(!ie||ie===Sr)&&(R.afterFlush(()=>this.clearElementCache(y)),R.destroyInnerAnimations(y),R._onRemovalComplete(y,I))}}insertNode(y,I){Hr(y,this._hostClassName)}drainQueuedTransitions(y){const I=[];return this._queue.forEach(R=>{const G=R.player;if(G.destroyed)return;const ie=R.element,ve=this._elementListeners.get(ie);ve&&ve.forEach(Q=>{if(Q.name==R.triggerName){const je=xn(ie,R.triggerName,R.fromState.value,R.toState.value);je._data=y,Wn(R.player,Q.phase,je,Q.callback)}}),G.markedForDestroy?this._engine.afterFlush(()=>{G.destroy()}):I.push(R)}),this._queue=[],I.sort((R,G)=>{const ie=R.transition.ast.depCount,ve=G.transition.ast.depCount;return 0==ie||0==ve?ie-ve:this._engine.driver.containsElement(R.element,G.element)?1:-1})}destroy(y){this.players.forEach(I=>I.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,y)}}class Yr{_onRemovalComplete(y,I){this.onRemovalComplete(y,I)}constructor(y,I,R){this.bodyNode=y,this.driver=I,this._normalizer=R,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(G,ie)=>{}}get queuedPlayers(){const y=[];return this._namespaceList.forEach(I=>{I.players.forEach(R=>{R.queued&&y.push(R)})}),y}createNamespace(y,I){const R=new Fs(y,I,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,I)?this._balanceNamespaceList(R,I):(this.newHostElements.set(I,R),this.collectEnterElement(I)),this._namespaceLookup[y]=R}_balanceNamespaceList(y,I){const R=this._namespaceList,G=this.namespacesByHostElement;if(R.length-1>=0){let ve=!1,Q=this.driver.getParentElement(I);for(;Q;){const je=G.get(Q);if(je){const Qe=R.indexOf(je);R.splice(Qe+1,0,y),ve=!0;break}Q=this.driver.getParentElement(Q)}ve||R.unshift(y)}else R.push(y);return G.set(I,y),y}register(y,I){let R=this._namespaceLookup[y];return R||(R=this.createNamespace(y,I)),R}registerTrigger(y,I,R){let G=this._namespaceLookup[y];G&&G.register(I,R)&&this.totalAnimations++}destroy(y,I){y&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const R=this._fetchNamespace(y);this.namespacesByHostElement.delete(R.hostElement);const G=this._namespaceList.indexOf(R);G>=0&&this._namespaceList.splice(G,1),R.destroy(I),delete this._namespaceLookup[y]}))}_fetchNamespace(y){return this._namespaceLookup[y]}fetchNamespacesByElement(y){const I=new Set,R=this.statesByElement.get(y);if(R)for(let G of R.values())if(G.namespaceId){const ie=this._fetchNamespace(G.namespaceId);ie&&I.add(ie)}return I}trigger(y,I,R,G){if(Yi(I)){const ie=this._fetchNamespace(y);if(ie)return ie.trigger(I,R,G),!0}return!1}insertNode(y,I,R,G){if(!Yi(I))return;const ie=I[ui];if(ie&&ie.setForRemoval){ie.setForRemoval=!1,ie.setForMove=!0;const ve=this.collectedLeaveElements.indexOf(I);ve>=0&&this.collectedLeaveElements.splice(ve,1)}if(y){const ve=this._fetchNamespace(y);ve&&ve.insertNode(I,R)}G&&this.collectEnterElement(I)}collectEnterElement(y){this.collectedEnterElements.push(y)}markElementAsDisabled(y,I){I?this.disabledNodes.has(y)||(this.disabledNodes.add(y),Hr(y,Er)):this.disabledNodes.has(y)&&(this.disabledNodes.delete(y),Rn(y,Er))}removeNode(y,I,R){if(Yi(I)){const G=y?this._fetchNamespace(y):null;G?G.removeNode(I,R):this.markElementAsRemoved(y,I,!1,R);const ie=this.namespacesByHostElement.get(I);ie&&ie.id!==y&&ie.removeNode(I,R)}else this._onRemovalComplete(I,R)}markElementAsRemoved(y,I,R,G,ie){this.collectedLeaveElements.push(I),I[ui]={namespaceId:y,setForRemoval:G,hasAnimation:R,removedBeforeQueried:!1,previousTriggersValues:ie}}listen(y,I,R,G,ie){return Yi(I)?this._fetchNamespace(y).listen(I,R,G,ie):()=>{}}_buildInstruction(y,I,R,G,ie){return y.transition.build(this.driver,y.element,y.fromState.value,y.toState.value,R,G,y.fromState.options,y.toState.options,I,ie)}destroyInnerAnimations(y){let I=this.driver.query(y,jn,!0);I.forEach(R=>this.destroyActiveAnimationsForElement(R)),0!=this.playersByQueriedElement.size&&(I=this.driver.query(y,fn,!0),I.forEach(R=>this.finishActiveQueriedAnimationOnElement(R)))}destroyActiveAnimationsForElement(y){const I=this.playersByElement.get(y);I&&I.forEach(R=>{R.queued?R.markedForDestroy=!0:R.destroy()})}finishActiveQueriedAnimationOnElement(y){const I=this.playersByQueriedElement.get(y);I&&I.forEach(R=>R.finish())}whenRenderingDone(){return new Promise(y=>{if(this.players.length)return Tt(this.players).onDone(()=>y());y()})}processLeaveNode(y){const I=y[ui];if(I&&I.setForRemoval){if(y[ui]=Sr,I.namespaceId){this.destroyInnerAnimations(y);const R=this._fetchNamespace(I.namespaceId);R&&R.clearElementCache(y)}this._onRemovalComplete(y,I.setForRemoval)}y.classList?.contains(Er)&&this.markElementAsDisabled(y,!1),this.driver.query(y,".ng-animate-disabled",!0).forEach(R=>{this.markElementAsDisabled(R,!1)})}flush(y=-1){let I=[];if(this.newHostElements.size&&(this.newHostElements.forEach((R,G)=>this._balanceNamespaceList(R,G)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let R=0;R<this.collectedEnterElements.length;R++)Hr(this.collectedEnterElements[R],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const R=[];try{I=this._flushAnimations(R,y)}finally{for(let G=0;G<R.length;G++)R[G]()}}else for(let R=0;R<this.collectedLeaveElements.length;R++)this.processLeaveNode(this.collectedLeaveElements[R]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(R=>R()),this._flushFns=[],this._whenQuietFns.length){const R=this._whenQuietFns;this._whenQuietFns=[],I.length?Tt(I).onDone(()=>{R.forEach(G=>G())}):R.forEach(G=>G())}}reportError(y){throw function qe(H){return new W.vHH(3402,!1)}()}_flushAnimations(y,I){const R=new yo,G=[],ie=new Map,ve=[],Q=new Map,je=new Map,Qe=new Map,Dt=new Set;this.disabledNodes.forEach(Xe=>{Dt.add(Xe);const ft=this.driver.query(Xe,".ng-animate-queued",!0);for(let xt=0;xt<ft.length;xt++)Dt.add(ft[xt])});const Pt=this.bodyNode,Un=Array.from(this.statesByElement.keys()),Tn=os(Un,this.collectedEnterElements),Kt=new Map;let Fn=0;Tn.forEach((Xe,ft)=>{const xt=Vn+Fn++;Kt.set(ft,xt),Xe.forEach(At=>Hr(At,xt))});const Zr=[],Bi=new Set,ds=new Set;for(let Xe=0;Xe<this.collectedLeaveElements.length;Xe++){const ft=this.collectedLeaveElements[Xe],xt=ft[ui];xt&&xt.setForRemoval&&(Zr.push(ft),Bi.add(ft),xt.hasAnimation?this.driver.query(ft,".ng-star-inserted",!0).forEach(At=>Bi.add(At)):ds.add(ft))}const Pr=new Map,Ei=os(Un,Array.from(Bi));Ei.forEach((Xe,ft)=>{const xt=pr+Fn++;Pr.set(ft,xt),Xe.forEach(At=>Hr(At,xt))}),y.push(()=>{Tn.forEach((Xe,ft)=>{const xt=Kt.get(ft);Xe.forEach(At=>Rn(At,xt))}),Ei.forEach((Xe,ft)=>{const xt=Pr.get(ft);Xe.forEach(At=>Rn(At,xt))}),Zr.forEach(Xe=>{this.processLeaveNode(Xe)})});const lo=[],ho=[];for(let Xe=this._namespaceList.length-1;Xe>=0;Xe--)this._namespaceList[Xe].drainQueuedTransitions(I).forEach(xt=>{const At=xt.player,fr=xt.element;if(lo.push(At),this.collectedEnterElements.length){const Ai=fr[ui];if(Ai&&Ai.setForMove){if(Ai.previousTriggersValues&&Ai.previousTriggersValues.has(xt.triggerName)){const Us=Ai.previousTriggersValues.get(xt.triggerName),Ji=this.statesByElement.get(xt.element);if(Ji&&Ji.has(xt.triggerName)){const tu=Ji.get(xt.triggerName);tu.value=Us,Ji.set(xt.triggerName,tu)}}return void At.destroy()}}const Is=!Pt||!this.driver.containsElement(Pt,fr),Qr=Pr.get(fr),Do=Kt.get(fr),kr=this._buildInstruction(xt,R,Do,Qr,Is);if(kr.errors&&kr.errors.length)return void ho.push(kr);if(Is)return At.onStart(()=>Jt(fr,kr.fromStyles)),At.onDestroy(()=>wn(fr,kr.toStyles)),void G.push(At);if(xt.isFallbackTransition)return At.onStart(()=>Jt(fr,kr.fromStyles)),At.onDestroy(()=>wn(fr,kr.toStyles)),void G.push(At);const ia=[];kr.timelines.forEach(Ai=>{Ai.stretchStartingKeyframe=!0,this.disabledNodes.has(Ai.element)||ia.push(Ai)}),kr.timelines=ia,R.append(fr,kr.timelines),ve.push({instruction:kr,player:At,element:fr}),kr.queriedElements.forEach(Ai=>Ht(Q,Ai,[]).push(At)),kr.preStyleProps.forEach((Ai,Us)=>{if(Ai.size){let Ji=je.get(Us);Ji||je.set(Us,Ji=new Set),Ai.forEach((tu,wa)=>Ji.add(wa))}}),kr.postStyleProps.forEach((Ai,Us)=>{let Ji=Qe.get(Us);Ji||Qe.set(Us,Ji=new Set),Ai.forEach((tu,wa)=>Ji.add(wa))})});if(ho.length){const Xe=[];ho.forEach(ft=>{Xe.push(function Je(H,y){return new W.vHH(3505,!1)}())}),lo.forEach(ft=>ft.destroy()),this.reportError(Xe)}const _=new Map,S=new Map;ve.forEach(Xe=>{const ft=Xe.element;R.has(ft)&&(S.set(ft,ft),this._beforeAnimationBuild(Xe.player.namespaceId,Xe.instruction,_))}),G.forEach(Xe=>{const ft=Xe.element;this._getPreviousPlayers(ft,!1,Xe.namespaceId,Xe.triggerName,null).forEach(At=>{Ht(_,ft,[]).push(At),At.destroy()})});const v=Zr.filter(Xe=>ni(Xe,je,Qe)),A=new Map;Hi(A,this.driver,ds,Qe,ae.l3).forEach(Xe=>{ni(Xe,je,Qe)&&v.push(Xe)});const Z=new Map;Tn.forEach((Xe,ft)=>{Hi(Z,this.driver,new Set(Xe),je,ae.k1)}),v.forEach(Xe=>{const ft=A.get(Xe),xt=Z.get(Xe);A.set(Xe,new Map([...ft?.entries()??[],...xt?.entries()??[]]))});const ce=[],$e=[],Fe={};ve.forEach(Xe=>{const{element:ft,player:xt,instruction:At}=Xe;if(R.has(ft)){if(Dt.has(ft))return xt.onDestroy(()=>wn(ft,At.toStyles)),xt.disabled=!0,xt.overrideTotalTime(At.totalTime),void G.push(xt);let fr=Fe;if(S.size>1){let Qr=ft;const Do=[];for(;Qr=Qr.parentNode;){const kr=S.get(Qr);if(kr){fr=kr;break}Do.push(Qr)}Do.forEach(kr=>S.set(kr,fr))}const Is=this._buildAnimation(xt.namespaceId,At,_,ie,Z,A);if(xt.setRealPlayer(Is),fr===Fe)ce.push(xt);else{const Qr=this.playersByElement.get(fr);Qr&&Qr.length&&(xt.parentPlayer=Tt(Qr)),G.push(xt)}}else Jt(ft,At.fromStyles),xt.onDestroy(()=>wn(ft,At.toStyles)),$e.push(xt),Dt.has(ft)&&G.push(xt)}),$e.forEach(Xe=>{const ft=ie.get(Xe.element);if(ft&&ft.length){const xt=Tt(ft);Xe.setRealPlayer(xt)}}),G.forEach(Xe=>{Xe.parentPlayer?Xe.syncPlayerEvents(Xe.parentPlayer):Xe.destroy()});for(let Xe=0;Xe<Zr.length;Xe++){const ft=Zr[Xe],xt=ft[ui];if(Rn(ft,pr),xt&&xt.hasAnimation)continue;let At=[];if(Q.size){let Is=Q.get(ft);Is&&Is.length&&At.push(...Is);let Qr=this.driver.query(ft,fn,!0);for(let Do=0;Do<Qr.length;Do++){let kr=Q.get(Qr[Do]);kr&&kr.length&&At.push(...kr)}}const fr=At.filter(Is=>!Is.destroyed);fr.length?ea(this,ft,fr):this.processLeaveNode(ft)}return Zr.length=0,ce.forEach(Xe=>{this.players.push(Xe),Xe.onDone(()=>{Xe.destroy();const ft=this.players.indexOf(Xe);this.players.splice(ft,1)}),Xe.play()}),ce}afterFlush(y){this._flushFns.push(y)}afterFlushAnimationsDone(y){this._whenQuietFns.push(y)}_getPreviousPlayers(y,I,R,G,ie){let ve=[];if(I){const Q=this.playersByQueriedElement.get(y);Q&&(ve=Q)}else{const Q=this.playersByElement.get(y);if(Q){const je=!ie||ie==bi;Q.forEach(Qe=>{Qe.queued||!je&&Qe.triggerName!=G||ve.push(Qe)})}}return(R||G)&&(ve=ve.filter(Q=>!(R&&R!=Q.namespaceId||G&&G!=Q.triggerName))),ve}_beforeAnimationBuild(y,I,R){const ie=I.element,ve=I.isRemovalTransition?void 0:y,Q=I.isRemovalTransition?void 0:I.triggerName;for(const je of I.timelines){const Qe=je.element,Dt=Qe!==ie,Pt=Ht(R,Qe,[]);this._getPreviousPlayers(Qe,Dt,ve,Q,I.toState).forEach(Tn=>{const Kt=Tn.getRealPlayer();Kt.beforeDestroy&&Kt.beforeDestroy(),Tn.destroy(),Pt.push(Tn)})}Jt(ie,I.fromStyles)}_buildAnimation(y,I,R,G,ie,ve){const Q=I.triggerName,je=I.element,Qe=[],Dt=new Set,Pt=new Set,Un=I.timelines.map(Kt=>{const Fn=Kt.element;Dt.add(Fn);const Zr=Fn[ui];if(Zr&&Zr.removedBeforeQueried)return new ae.ZN(Kt.duration,Kt.delay);const Bi=Fn!==je,ds=function ta(H){const y=[];return qs(H,y),y}((R.get(Fn)||Ms).map(_=>_.getRealPlayer())).filter(_=>!!_.element&&_.element===Fn),Pr=ie.get(Fn),Ei=ve.get(Fn),lo=Et(this._normalizer,Kt.keyframes,Pr,Ei),ho=this._buildPlayer(Kt,lo,ds);if(Kt.subTimeline&&G&&Pt.add(Fn),Bi){const _=new Ns(y,Q,Fn);_.setRealPlayer(ho),Qe.push(_)}return ho});Qe.forEach(Kt=>{Ht(this.playersByQueriedElement,Kt.element,[]).push(Kt),Kt.onDone(()=>function is(H,y,I){let R=H.get(y);if(R){if(R.length){const G=R.indexOf(I);R.splice(G,1)}0==R.length&&H.delete(y)}return R}(this.playersByQueriedElement,Kt.element,Kt))}),Dt.forEach(Kt=>Hr(Kt,Di));const Tn=Tt(Un);return Tn.onDestroy(()=>{Dt.forEach(Kt=>Rn(Kt,Di)),wn(je,I.toStyles)}),Pt.forEach(Kt=>{Ht(G,Kt,[]).push(Tn)}),Tn}_buildPlayer(y,I,R){return I.length>0?this.driver.animate(y.element,I,y.duration,y.delay,y.easing,R):new ae.ZN(y.duration,y.delay)}}class Ns{constructor(y,I,R){this.namespaceId=y,this.triggerName=I,this.element=R,this._player=new ae.ZN,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(y){this._containsRealPlayer||(this._player=y,this._queuedCallbacks.forEach((I,R)=>{I.forEach(G=>Wn(y,R,void 0,G))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(y.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(y){this.totalTime=y}syncPlayerEvents(y){const I=this._player;I.triggerCallback&&y.onStart(()=>I.triggerCallback("start")),y.onDone(()=>this.finish()),y.onDestroy(()=>this.destroy())}_queueEvent(y,I){Ht(this._queuedCallbacks,y,[]).push(I)}onDone(y){this.queued&&this._queueEvent("done",y),this._player.onDone(y)}onStart(y){this.queued&&this._queueEvent("start",y),this._player.onStart(y)}onDestroy(y){this.queued&&this._queueEvent("destroy",y),this._player.onDestroy(y)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(y){this.queued||this._player.setPosition(y)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(y){const I=this._player;I.triggerCallback&&I.triggerCallback(y)}}function Yi(H){return H&&1===H.nodeType}function ss(H,y){const I=H.style.display;return H.style.display=y??"none",I}function Hi(H,y,I,R,G){const ie=[];I.forEach(je=>ie.push(ss(je)));const ve=[];R.forEach((je,Qe)=>{const Dt=new Map;je.forEach(Pt=>{const Un=y.computeStyle(Qe,Pt,G);Dt.set(Pt,Un),(!Un||0==Un.length)&&(Qe[ui]=gi,ve.push(Qe))}),H.set(Qe,Dt)});let Q=0;return I.forEach(je=>ss(je,ie[Q++])),ve}function os(H,y){const I=new Map;if(H.forEach(Q=>I.set(Q,[])),0==y.length)return I;const G=new Set(y),ie=new Map;function ve(Q){if(!Q)return 1;let je=ie.get(Q);if(je)return je;const Qe=Q.parentNode;return je=I.has(Qe)?Qe:G.has(Qe)?1:ve(Qe),ie.set(Q,je),je}return y.forEach(Q=>{const je=ve(Q);1!==je&&I.get(je).push(Q)}),I}function Hr(H,y){H.classList?.add(y)}function Rn(H,y){H.classList?.remove(y)}function ea(H,y,I){Tt(I).onDone(()=>H.processLeaveNode(y))}function qs(H,y){for(let I=0;I<H.length;I++){const R=H[I];R instanceof ae.ZE?qs(R.players,y):y.push(R)}}function ni(H,y,I){const R=I.get(H);if(!R)return!1;let G=y.get(H);return G?R.forEach(ie=>G.add(ie)):y.set(H,R),I.delete(H),!0}class as{constructor(y,I,R){this.bodyNode=y,this._driver=I,this._normalizer=R,this._triggerCache={},this.onRemovalComplete=(G,ie)=>{},this._transitionEngine=new Yr(y,I,R),this._timelineEngine=new ar(y,I,R),this._transitionEngine.onRemovalComplete=(G,ie)=>this.onRemovalComplete(G,ie)}registerTrigger(y,I,R,G,ie){const ve=y+"-"+G;let Q=this._triggerCache[ve];if(!Q){const je=[],Dt=ys(this._driver,ie,je,[]);if(je.length)throw function en(H,y){return new W.vHH(3404,!1)}();Q=function Ws(H,y,I){return new _o(H,y,I)}(G,Dt,this._normalizer),this._triggerCache[ve]=Q}this._transitionEngine.registerTrigger(I,G,Q)}register(y,I){this._transitionEngine.register(y,I)}destroy(y,I){this._transitionEngine.destroy(y,I)}onInsert(y,I,R,G){this._transitionEngine.insertNode(y,I,R,G)}onRemove(y,I,R){this._transitionEngine.removeNode(y,I,R)}disableAnimations(y,I){this._transitionEngine.markElementAsDisabled(y,I)}process(y,I,R,G){if("@"==R.charAt(0)){const[ie,ve]=Kn(R);this._timelineEngine.command(ie,I,ve,G)}else this._transitionEngine.trigger(y,I,R,G)}listen(y,I,R,G,ie){if("@"==R.charAt(0)){const[ve,Q]=Kn(R);return this._timelineEngine.listen(ve,I,Q,ie)}return this._transitionEngine.listen(y,I,R,G,ie)}flush(y=-1){this._transitionEngine.flush(y)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(y){this._transitionEngine.afterFlushAnimationsDone(y)}}let Gr=(()=>{class H{static#e=this.initialStylesByElement=new WeakMap;constructor(I,R,G){this._element=I,this._startStyles=R,this._endStyles=G,this._state=0;let ie=H.initialStylesByElement.get(I);ie||H.initialStylesByElement.set(I,ie=new Map),this._initialStyles=ie}start(){this._state<1&&(this._startStyles&&wn(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(wn(this._element,this._initialStyles),this._endStyles&&(wn(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(H.initialStylesByElement.delete(this._element),this._startStyles&&(Jt(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Jt(this._element,this._endStyles),this._endStyles=null),wn(this._element,this._initialStyles),this._state=3)}}return H})();function ao(H){let y=null;return H.forEach((I,R)=>{(function ki(H){return"display"===H||"position"===H})(R)&&(y=y||new Map,y.set(R,I))}),y}class zn{constructor(y,I,R,G){this.element=y,this.keyframes=I,this.options=R,this._specialStyles=G,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=R.duration,this._delay=R.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(y=>y()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const y=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,y,this.options),this._finalKeyframe=y.length?y[y.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(y){const I=[];return y.forEach(R=>{I.push(Object.fromEntries(R))}),I}_triggerWebAnimation(y,I,R){return y.animate(this._convertKeyframesToObject(I),R)}onStart(y){this._originalOnStartFns.push(y),this._onStartFns.push(y)}onDone(y){this._originalOnDoneFns.push(y),this._onDoneFns.push(y)}onDestroy(y){this._onDestroyFns.push(y)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(y=>y()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(y=>y()),this._onDestroyFns=[])}setPosition(y){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=y*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const y=new Map;this.hasStarted()&&this._finalKeyframe.forEach((R,G)=>{"offset"!==G&&y.set(G,this._finished?R:In(this.element,G))}),this.currentSnapshot=y}triggerCallback(y){const I="start"===y?this._onStartFns:this._onDoneFns;I.forEach(R=>R()),I.length=0}}class zi{validateStyleProperty(y){return!0}validateAnimatableStyleProperty(y){return!0}matchesElement(y,I){return!1}containsElement(y,I){return si(y,I)}getParentElement(y){return Qn(y)}query(y,I,R){return nr(y,I,R)}computeStyle(y,I,R){return window.getComputedStyle(y)[I]}animate(y,I,R,G,ie,ve=[]){const je={duration:R,delay:G,fill:0==G?"both":"forwards"};ie&&(je.easing=ie);const Qe=new Map,Dt=ve.filter(Tn=>Tn instanceof zn);(function pn(H,y){return 0===H||0===y})(R,G)&&Dt.forEach(Tn=>{Tn.currentSnapshot.forEach((Kt,Fn)=>Qe.set(Fn,Kt))});let Pt=function xr(H){return H.length?H[0]instanceof Map?H:H.map(y=>zr(y)):[]}(I).map(Tn=>Zn(Tn));Pt=function Mt(H,y,I){if(I.size&&y.length){let R=y[0],G=[];if(I.forEach((ie,ve)=>{R.has(ve)||G.push(ve),R.set(ve,ie)}),G.length)for(let ie=1;ie<y.length;ie++){let ve=y[ie];G.forEach(Q=>ve.set(Q,In(H,Q)))}}return y}(y,Pt,Qe);const Un=function oo(H,y){let I=null,R=null;return Array.isArray(y)&&y.length?(I=ao(y[0]),y.length>1&&(R=ao(y[y.length-1]))):y instanceof Map&&(I=ao(y)),I||R?new Gr(H,I,R):null}(y,Pt);return new zn(y,Pt,je,Un)}}var _s=z(6814);let Ti=(()=>{class H extends ae._j{constructor(I,R){super(),this._nextAnimationId=0,this._renderer=I.createRenderer(R.body,{id:"0",encapsulation:W.ifc.None,styles:[],data:{animation:[]}})}build(I){const R=this._nextAnimationId.toString();this._nextAnimationId++;const G=Array.isArray(I)?(0,ae.vP)(I):I;return Mo(this._renderer,null,R,"register",[G]),new Es(R,this._renderer)}static#e=this.\u0275fac=function(R){return new(R||H)(W.LFG(W.FYo),W.LFG(_s.K0))};static#t=this.\u0275prov=W.Yz7({token:H,factory:H.\u0275fac})}return H})();class Es extends ae.LC{constructor(y,I){super(),this._id=y,this._renderer=I}create(y,I){return new Eo(this._id,y,I||{},this._renderer)}}class Eo{constructor(y,I,R,G){this.id=y,this.element=I,this._renderer=G,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",R)}_listen(y,I){return this._renderer.listen(this.element,`@@${this.id}:${y}`,I)}_command(y,...I){return Mo(this._renderer,this.element,this.id,y,I)}onDone(y){this._listen("done",y)}onStart(y){this._listen("start",y)}onDestroy(y){this._listen("destroy",y)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(y){this._command("setPosition",y)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function Mo(H,y,I,R,G){return H.setProperty(y,`@@${I}:${R}`,G)}const uo="@.disabled";let da=(()=>{class H{constructor(I,R,G){this.delegate=I,this.engine=R,this._zone=G,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,R.onRemovalComplete=(ie,ve)=>{const Q=ve?.parentNode(ie);Q&&ve.removeChild(Q,ie)}}createRenderer(I,R){const ie=this.delegate.createRenderer(I,R);if(!(I&&R&&R.data&&R.data.animation)){let Dt=this._rendererCache.get(ie);return Dt||(Dt=new us("",ie,this.engine,()=>this._rendererCache.delete(ie)),this._rendererCache.set(ie,Dt)),Dt}const ve=R.id,Q=R.id+"-"+this._currentId;this._currentId++,this.engine.register(Q,I);const je=Dt=>{Array.isArray(Dt)?Dt.forEach(je):this.engine.registerTrigger(ve,Q,I,Dt.name,Dt)};return R.data.animation.forEach(je),new co(this,Q,ie,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(I,R,G){I>=0&&I<this._microtaskId?this._zone.run(()=>R(G)):(0==this._animationCallbacksBuffer.length&&queueMicrotask(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(ie=>{const[ve,Q]=ie;ve(Q)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([R,G]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}static#e=this.\u0275fac=function(R){return new(R||H)(W.LFG(W.FYo),W.LFG(as),W.LFG(W.R0b))};static#t=this.\u0275prov=W.Yz7({token:H,factory:H.\u0275fac})}return H})();class us{constructor(y,I,R,G){this.namespaceId=y,this.delegate=I,this.engine=R,this._onDestroy=G}get data(){return this.delegate.data}destroyNode(y){this.delegate.destroyNode?.(y)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(y,I){return this.delegate.createElement(y,I)}createComment(y){return this.delegate.createComment(y)}createText(y){return this.delegate.createText(y)}appendChild(y,I){this.delegate.appendChild(y,I),this.engine.onInsert(this.namespaceId,I,y,!1)}insertBefore(y,I,R,G=!0){this.delegate.insertBefore(y,I,R),this.engine.onInsert(this.namespaceId,I,y,G)}removeChild(y,I,R){this.engine.onRemove(this.namespaceId,I,this.delegate)}selectRootElement(y,I){return this.delegate.selectRootElement(y,I)}parentNode(y){return this.delegate.parentNode(y)}nextSibling(y){return this.delegate.nextSibling(y)}setAttribute(y,I,R,G){this.delegate.setAttribute(y,I,R,G)}removeAttribute(y,I,R){this.delegate.removeAttribute(y,I,R)}addClass(y,I){this.delegate.addClass(y,I)}removeClass(y,I){this.delegate.removeClass(y,I)}setStyle(y,I,R,G){this.delegate.setStyle(y,I,R,G)}removeStyle(y,I,R){this.delegate.removeStyle(y,I,R)}setProperty(y,I,R){"@"==I.charAt(0)&&I==uo?this.disableAnimations(y,!!R):this.delegate.setProperty(y,I,R)}setValue(y,I){this.delegate.setValue(y,I)}listen(y,I,R){return this.delegate.listen(y,I,R)}disableAnimations(y,I){this.engine.disableAnimations(y,I)}}class co extends us{constructor(y,I,R,G,ie){super(I,R,G,ie),this.factory=y,this.namespaceId=I}setProperty(y,I,R){"@"==I.charAt(0)?"."==I.charAt(1)&&I==uo?this.disableAnimations(y,R=void 0===R||!!R):this.engine.process(this.namespaceId,y,I.slice(1),R):this.delegate.setProperty(y,I,R)}listen(y,I,R){if("@"==I.charAt(0)){const G=function jo(H){switch(H){case"body":return document.body;case"document":return document;case"window":return window;default:return H}}(y);let ie=I.slice(1),ve="";return"@"!=ie.charAt(0)&&([ie,ve]=function $a(H){const y=H.indexOf(".");return[H.substring(0,y),H.slice(y+1)]}(ie)),this.engine.listen(this.namespaceId,G,ie,ve,Q=>{this.factory.scheduleListenerCallback(Q._data||-1,R,Q)})}return this.delegate.listen(y,I,R)}}const Ha=[{provide:ae._j,useClass:Ti},{provide:Gs,useFactory:function mr(){return new so}},{provide:as,useClass:(()=>{class H extends as{constructor(I,R,G,ie){super(I.body,R,G)}ngOnDestroy(){this.flush()}static#e=this.\u0275fac=function(R){return new(R||H)(W.LFG(_s.K0),W.LFG(tn),W.LFG(Gs),W.LFG(W.z2F))};static#t=this.\u0275prov=W.Yz7({token:H,factory:H.\u0275fac})}return H})()},{provide:W.FYo,useFactory:function No(H,y,I){return new da(H,y,I)},deps:[p.se,as,W.R0b]}],L=[{provide:tn,useFactory:()=>new zi},{provide:W.QbO,useValue:"BrowserAnimations"},...Ha],U=[{provide:tn,useClass:gn},{provide:W.QbO,useValue:"NoopAnimations"},...Ha];let x=(()=>{class H{static withConfig(I){return{ngModule:H,providers:I.disableAnimations?U:L}}static#e=this.\u0275fac=function(R){return new(R||H)};static#t=this.\u0275mod=W.oAB({type:H});static#n=this.\u0275inj=W.cJS({providers:L,imports:[p.b2]})}return H})();var cn=z(639),Li=z(7398),ws=z(8180),yi=z(5975),cs=z(3182);const Gi=(0,Li.U)(H=>!!H);let Io=(()=>{class H{constructor(I,R){this.router=I,this.auth=R,this.canActivate=(G,ie)=>{const ve=G.data.authGuardPipe||(()=>Gi);return(0,yi.EA)(this.auth).pipe((0,ws.q)(1),ve(G,ie),(0,Li.U)(Q=>"boolean"==typeof Q?Q:Array.isArray(Q)?this.router.createUrlTree(Q):this.router.parseUrl(Q)))}}}return H.\u0275fac=function(I){return new(I||H)(W.LFG(cn.F0),W.LFG(yi.gx))},H.\u0275prov=W.Yz7({token:H,factory:H.\u0275fac,providedIn:"any"}),H})();const pa=(0,Li.U)(H=>!!H||["auth"]),vi=[{path:"auth",loadChildren:()=>Promise.all([z.e(76),z.e(69)]).then(z.bind(z,6069)).then(H=>H.AuthModule)},{path:"",loadChildren:()=>Promise.all([z.e(76),z.e(33)]).then(z.bind(z,9033)).then(H=>H.PanelModule),canActivate:[Io],data:{authGuardPipe:()=>pa},runGuardsAndResolvers:"always"}];let Qs=(()=>{class H{static#e=this.\u0275fac=function(R){return new(R||H)};static#t=this.\u0275mod=W.oAB({type:H});static#n=this.\u0275inj=W.cJS({imports:[cn.Bz.forRoot(vi),cn.Bz]})}return H})(),$o=(()=>{class H{constructor(){this.title="Notas-Mentais"}static#e=this.\u0275fac=function(R){return new(R||H)};static#t=this.\u0275cmp=W.Xpm({type:H,selectors:[["app-root"]],decls:1,vars:0,template:function(R,G){1&R&&W._UZ(0,"router-outlet")},dependencies:[cn.lC]})}return H})();var Ar=z(95),Ls=z(8726),Xs=z(8186),_i=z(7247),ga=z(5776);class xo{constructor(y){return y}}const Ro="firestore",ls=new W.OlP("angularfire2.firestore-instances");function Vi(H){return(y,I)=>{const R=y.runOutsideAngular(()=>H(I));return new xo(R)}}const Oo={provide:class Ra{constructor(){return(0,Xs.vb)(Ro)}},deps:[[new W.FiY,ls]]},ma={provide:xo,useFactory:function Vs(H,y){const I=(0,Xs.JM)(Ro,H,y);return I&&new xo(I)},deps:[[new W.FiY,ls],Ls.Ot]};let Po=(()=>{class H{constructor(){(0,cs.KN)("angularfire",Xs.q4.full,"fst")}}return H.\u0275fac=function(I){return new(I||H)},H.\u0275mod=W.oAB({type:H}),H.\u0275inj=W.cJS({providers:[ma,Oo]}),H})();function ko(H,...y){return{ngModule:Po,providers:[{provide:ls,useFactory:Vi(H),multi:!0,deps:[W.R0b,W.zs3,Xs.HU,Ls.z6,[new W.FiY,yi.dh],[new W.FiY,_i.nm],...y]}]}}const Bs=(0,Xs.u3)(ga.ad,!0);let sr=(()=>{class H{static#e=this.\u0275fac=function(R){return new(R||H)};static#t=this.\u0275mod=W.oAB({type:H,bootstrap:[$o]});static#n=this.\u0275inj=W.cJS({providers:[{provide:_s.S$,useClass:_s.b0},Io],imports:[p.b2,Qs,Ar.u5,x,(0,Ls.hX)(()=>(0,Ls.ZF)(zo)),ko(()=>Bs()),(0,yi.AR)(()=>(0,yi.v0)())]})}return H})();const zo={apiKey:"AIzaSyCWRSN9OPbZacGGQtD-tVeY6C2TPm2NP-0",authDomain:"notas-mentais.firebaseapp.com",projectId:"notas-mentais",storageBucket:"notas-mentais.appspot.com",messagingSenderId:"688179318845",appId:"1:688179318845:web:42400a995748668e1dda54"}},4913:($t,Ge,z)=>{var p=z(6593),W=z(2971);p.q6().bootstrapModule(W.b).catch(ae=>console.error(ae))},5619:($t,Ge,z)=>{z.d(Ge,{X:()=>W});var p=z(8645);class W extends p.x{constructor(he){super(),this._value=he}get value(){return this.getValue()}_subscribe(he){const fe=super._subscribe(he);return!fe.closed&&he.next(this._value),fe}getValue(){const{hasError:he,thrownError:fe,_value:xe}=this;if(he)throw fe;return this._throwIfClosed(),xe}next(he){super.next(this._value=he)}}},5592:($t,Ge,z)=>{z.d(Ge,{y:()=>Ee});var p=z(305),W=z(7394),ae=z(4850),he=z(8407),fe=z(2653),xe=z(4674),Me=z(1441);let Ee=(()=>{class Te{constructor(rt){rt&&(this._subscribe=rt)}lift(rt){const mt=new Te;return mt.source=this,mt.operator=rt,mt}subscribe(rt,mt,ht){const Qt=function pe(Te){return Te&&Te instanceof p.Lv||function oe(Te){return Te&&(0,xe.m)(Te.next)&&(0,xe.m)(Te.error)&&(0,xe.m)(Te.complete)}(Te)&&(0,W.Nn)(Te)}(rt)?rt:new p.Hp(rt,mt,ht);return(0,Me.x)(()=>{const{operator:Rt,source:Mn}=this;Qt.add(Rt?Rt.call(Qt,Mn):Mn?this._subscribe(Qt):this._trySubscribe(Qt))}),Qt}_trySubscribe(rt){try{return this._subscribe(rt)}catch(mt){rt.error(mt)}}forEach(rt,mt){return new(mt=ze(mt))((ht,Qt)=>{const Rt=new p.Hp({next:Mn=>{try{rt(Mn)}catch(bt){Qt(bt),Rt.unsubscribe()}},error:Qt,complete:ht});this.subscribe(Rt)})}_subscribe(rt){var mt;return null===(mt=this.source)||void 0===mt?void 0:mt.subscribe(rt)}[ae.L](){return this}pipe(...rt){return(0,he.U)(rt)(this)}toPromise(rt){return new(rt=ze(rt))((mt,ht)=>{let Qt;this.subscribe(Rt=>Qt=Rt,Rt=>ht(Rt),()=>mt(Qt))})}}return Te.create=et=>new Te(et),Te})();function ze(Te){var et;return null!==(et=Te??fe.config.Promise)&&void 0!==et?et:Promise}},8645:($t,Ge,z)=>{z.d(Ge,{x:()=>Me});var p=z(5592),W=z(7394);const he=(0,z(2306).d)(ze=>function(){ze(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var fe=z(9039),xe=z(1441);let Me=(()=>{class ze extends p.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(pe){const Te=new Ee(this,this);return Te.operator=pe,Te}_throwIfClosed(){if(this.closed)throw new he}next(pe){(0,xe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Te of this.currentObservers)Te.next(pe)}})}error(pe){(0,xe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=pe;const{observers:Te}=this;for(;Te.length;)Te.shift().error(pe)}})}complete(){(0,xe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:pe}=this;for(;pe.length;)pe.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var pe;return(null===(pe=this.observers)||void 0===pe?void 0:pe.length)>0}_trySubscribe(pe){return this._throwIfClosed(),super._trySubscribe(pe)}_subscribe(pe){return this._throwIfClosed(),this._checkFinalizedStatuses(pe),this._innerSubscribe(pe)}_innerSubscribe(pe){const{hasError:Te,isStopped:et,observers:rt}=this;return Te||et?W.Lc:(this.currentObservers=null,rt.push(pe),new W.w0(()=>{this.currentObservers=null,(0,fe.P)(rt,pe)}))}_checkFinalizedStatuses(pe){const{hasError:Te,thrownError:et,isStopped:rt}=this;Te?pe.error(et):rt&&pe.complete()}asObservable(){const pe=new p.y;return pe.source=this,pe}}return ze.create=(oe,pe)=>new Ee(oe,pe),ze})();class Ee extends Me{constructor(oe,pe){super(),this.destination=oe,this.source=pe}next(oe){var pe,Te;null===(Te=null===(pe=this.destination)||void 0===pe?void 0:pe.next)||void 0===Te||Te.call(pe,oe)}error(oe){var pe,Te;null===(Te=null===(pe=this.destination)||void 0===pe?void 0:pe.error)||void 0===Te||Te.call(pe,oe)}complete(){var oe,pe;null===(pe=null===(oe=this.destination)||void 0===oe?void 0:oe.complete)||void 0===pe||pe.call(oe)}_subscribe(oe){var pe,Te;return null!==(Te=null===(pe=this.source)||void 0===pe?void 0:pe.subscribe(oe))&&void 0!==Te?Te:W.Lc}}},305:($t,Ge,z)=>{z.d(Ge,{Hp:()=>ht,Lv:()=>Te});var p=z(4674),W=z(7394),ae=z(2653),he=z(3894),fe=z(2420);const xe=ze("C",void 0,void 0);function ze(le,Ve,Oe){return{kind:le,value:Ve,error:Oe}}var oe=z(7599),pe=z(1441);class Te extends W.w0{constructor(Ve){super(),this.isStopped=!1,Ve?(this.destination=Ve,(0,W.Nn)(Ve)&&Ve.add(this)):this.destination=bt}static create(Ve,Oe,Ze){return new ht(Ve,Oe,Ze)}next(Ve){this.isStopped?Mn(function Ee(le){return ze("N",le,void 0)}(Ve),this):this._next(Ve)}error(Ve){this.isStopped?Mn(function Me(le){return ze("E",void 0,le)}(Ve),this):(this.isStopped=!0,this._error(Ve))}complete(){this.isStopped?Mn(xe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ve){this.destination.next(Ve)}_error(Ve){try{this.destination.error(Ve)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const et=Function.prototype.bind;function rt(le,Ve){return et.call(le,Ve)}class mt{constructor(Ve){this.partialObserver=Ve}next(Ve){const{partialObserver:Oe}=this;if(Oe.next)try{Oe.next(Ve)}catch(Ze){Qt(Ze)}}error(Ve){const{partialObserver:Oe}=this;if(Oe.error)try{Oe.error(Ve)}catch(Ze){Qt(Ze)}else Qt(Ve)}complete(){const{partialObserver:Ve}=this;if(Ve.complete)try{Ve.complete()}catch(Oe){Qt(Oe)}}}class ht extends Te{constructor(Ve,Oe,Ze){let pt;if(super(),(0,p.m)(Ve)||!Ve)pt={next:Ve??void 0,error:Oe??void 0,complete:Ze??void 0};else{let Se;this&&ae.config.useDeprecatedNextContext?(Se=Object.create(Ve),Se.unsubscribe=()=>this.unsubscribe(),pt={next:Ve.next&&rt(Ve.next,Se),error:Ve.error&&rt(Ve.error,Se),complete:Ve.complete&&rt(Ve.complete,Se)}):pt=Ve}this.destination=new mt(pt)}}function Qt(le){ae.config.useDeprecatedSynchronousErrorHandling?(0,pe.O)(le):(0,he.h)(le)}function Mn(le,Ve){const{onStoppedNotification:Oe}=ae.config;Oe&&oe.z.setTimeout(()=>Oe(le,Ve))}const bt={closed:!0,next:fe.Z,error:function Rt(le){throw le},complete:fe.Z}},7394:($t,Ge,z)=>{z.d(Ge,{Lc:()=>xe,w0:()=>fe,Nn:()=>Me});var p=z(4674);const ae=(0,z(2306).d)(ze=>function(pe){ze(this),this.message=pe?`${pe.length} errors occurred during unsubscription:\n${pe.map((Te,et)=>`${et+1}) ${Te.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=pe});var he=z(9039);class fe{constructor(oe){this.initialTeardown=oe,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let oe;if(!this.closed){this.closed=!0;const{_parentage:pe}=this;if(pe)if(this._parentage=null,Array.isArray(pe))for(const rt of pe)rt.remove(this);else pe.remove(this);const{initialTeardown:Te}=this;if((0,p.m)(Te))try{Te()}catch(rt){oe=rt instanceof ae?rt.errors:[rt]}const{_finalizers:et}=this;if(et){this._finalizers=null;for(const rt of et)try{Ee(rt)}catch(mt){oe=oe??[],mt instanceof ae?oe=[...oe,...mt.errors]:oe.push(mt)}}if(oe)throw new ae(oe)}}add(oe){var pe;if(oe&&oe!==this)if(this.closed)Ee(oe);else{if(oe instanceof fe){if(oe.closed||oe._hasParent(this))return;oe._addParent(this)}(this._finalizers=null!==(pe=this._finalizers)&&void 0!==pe?pe:[]).push(oe)}}_hasParent(oe){const{_parentage:pe}=this;return pe===oe||Array.isArray(pe)&&pe.includes(oe)}_addParent(oe){const{_parentage:pe}=this;this._parentage=Array.isArray(pe)?(pe.push(oe),pe):pe?[pe,oe]:oe}_removeParent(oe){const{_parentage:pe}=this;pe===oe?this._parentage=null:Array.isArray(pe)&&(0,he.P)(pe,oe)}remove(oe){const{_finalizers:pe}=this;pe&&(0,he.P)(pe,oe),oe instanceof fe&&oe._removeParent(this)}}fe.EMPTY=(()=>{const ze=new fe;return ze.closed=!0,ze})();const xe=fe.EMPTY;function Me(ze){return ze instanceof fe||ze&&"closed"in ze&&(0,p.m)(ze.remove)&&(0,p.m)(ze.add)&&(0,p.m)(ze.unsubscribe)}function Ee(ze){(0,p.m)(ze)?ze():ze.unsubscribe()}},2653:($t,Ge,z)=>{z.d(Ge,{config:()=>p});const p={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},5211:($t,Ge,z)=>{z.d(Ge,{z:()=>fe});var p=z(7537),ae=z(4564),he=z(2459);function fe(...xe){return function W(){return(0,p.J)(1)}()((0,he.D)(xe,(0,ae.yG)(xe)))}},4911:($t,Ge,z)=>{z.d(Ge,{P:()=>ae});var p=z(5592),W=z(4829);function ae(he){return new p.y(fe=>{(0,W.Xf)(he()).subscribe(fe)})}},6232:($t,Ge,z)=>{z.d(Ge,{E:()=>W});const W=new(z(5592).y)(fe=>fe.complete())},2459:($t,Ge,z)=>{z.d(Ge,{D:()=>Ve});var p=z(4829),W=z(3093),ae=z(5137),xe=z(5592),Ee=z(4971),ze=z(4674),oe=z(7103);function Te(Oe,Ze){if(!Oe)throw new Error("Iterable cannot be null");return new xe.y(pt=>{(0,oe.f)(pt,Ze,()=>{const Se=Oe[Symbol.asyncIterator]();(0,oe.f)(pt,Ze,()=>{Se.next().then(ln=>{ln.done?pt.complete():pt.next(ln.value)})},0,!0)})})}var et=z(8382),rt=z(4026),mt=z(4266),ht=z(3664),Qt=z(5726),Rt=z(9853),Mn=z(541);function Ve(Oe,Ze){return Ze?function le(Oe,Ze){if(null!=Oe){if((0,et.c)(Oe))return function he(Oe,Ze){return(0,p.Xf)(Oe).pipe((0,ae.R)(Ze),(0,W.Q)(Ze))}(Oe,Ze);if((0,mt.z)(Oe))return function Me(Oe,Ze){return new xe.y(pt=>{let Se=0;return Ze.schedule(function(){Se===Oe.length?pt.complete():(pt.next(Oe[Se++]),pt.closed||this.schedule())})})}(Oe,Ze);if((0,rt.t)(Oe))return function fe(Oe,Ze){return(0,p.Xf)(Oe).pipe((0,ae.R)(Ze),(0,W.Q)(Ze))}(Oe,Ze);if((0,Qt.D)(Oe))return Te(Oe,Ze);if((0,ht.T)(Oe))return function pe(Oe,Ze){return new xe.y(pt=>{let Se;return(0,oe.f)(pt,Ze,()=>{Se=Oe[Ee.h](),(0,oe.f)(pt,Ze,()=>{let ln,en;try{({value:ln,done:en}=Se.next())}catch(Nn){return void pt.error(Nn)}en?pt.complete():pt.next(ln)},0,!0)}),()=>(0,ze.m)(Se?.return)&&Se.return()})}(Oe,Ze);if((0,Mn.L)(Oe))return function bt(Oe,Ze){return Te((0,Mn.Q)(Oe),Ze)}(Oe,Ze)}throw(0,Rt.z)(Oe)}(Oe,Ze):(0,p.Xf)(Oe)}},4829:($t,Ge,z)=>{z.d(Ge,{Xf:()=>et});var p=z(7582),W=z(4266),ae=z(4026),he=z(5592),fe=z(8382),xe=z(5726),Me=z(9853),Ee=z(3664),ze=z(541),oe=z(4674),pe=z(3894),Te=z(4850);function et(le){if(le instanceof he.y)return le;if(null!=le){if((0,fe.c)(le))return function rt(le){return new he.y(Ve=>{const Oe=le[Te.L]();if((0,oe.m)(Oe.subscribe))return Oe.subscribe(Ve);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(le);if((0,W.z)(le))return function mt(le){return new he.y(Ve=>{for(let Oe=0;Oe<le.length&&!Ve.closed;Oe++)Ve.next(le[Oe]);Ve.complete()})}(le);if((0,ae.t)(le))return function ht(le){return new he.y(Ve=>{le.then(Oe=>{Ve.closed||(Ve.next(Oe),Ve.complete())},Oe=>Ve.error(Oe)).then(null,pe.h)})}(le);if((0,xe.D)(le))return Rt(le);if((0,Ee.T)(le))return function Qt(le){return new he.y(Ve=>{for(const Oe of le)if(Ve.next(Oe),Ve.closed)return;Ve.complete()})}(le);if((0,ze.L)(le))return function Mn(le){return Rt((0,ze.Q)(le))}(le)}throw(0,Me.z)(le)}function Rt(le){return new he.y(Ve=>{(function bt(le,Ve){var Oe,Ze,pt,Se;return(0,p.mG)(this,void 0,void 0,function*(){try{for(Oe=(0,p.KL)(le);!(Ze=yield Oe.next()).done;)if(Ve.next(Ze.value),Ve.closed)return}catch(ln){pt={error:ln}}finally{try{Ze&&!Ze.done&&(Se=Oe.return)&&(yield Se.call(Oe))}finally{if(pt)throw pt.error}}Ve.complete()})})(le,Ve).catch(Oe=>Ve.error(Oe))})}},3019:($t,Ge,z)=>{z.d(Ge,{T:()=>xe});var p=z(7537),W=z(4829),ae=z(6232),he=z(4564),fe=z(2459);function xe(...Me){const Ee=(0,he.yG)(Me),ze=(0,he._6)(Me,1/0),oe=Me;return oe.length?1===oe.length?(0,W.Xf)(oe[0]):(0,p.J)(ze)((0,fe.D)(oe,Ee)):ae.E}},2096:($t,Ge,z)=>{z.d(Ge,{of:()=>ae});var p=z(4564),W=z(2459);function ae(...he){const fe=(0,p.yG)(he);return(0,W.D)(he,fe)}},8251:($t,Ge,z)=>{z.d(Ge,{x:()=>W});var p=z(305);function W(he,fe,xe,Me,Ee){return new ae(he,fe,xe,Me,Ee)}class ae extends p.Lv{constructor(fe,xe,Me,Ee,ze,oe){super(fe),this.onFinalize=ze,this.shouldUnsubscribe=oe,this._next=xe?function(pe){try{xe(pe)}catch(Te){fe.error(Te)}}:super._next,this._error=Ee?function(pe){try{Ee(pe)}catch(Te){fe.error(Te)}finally{this.unsubscribe()}}:super._error,this._complete=Me?function(){try{Me()}catch(pe){fe.error(pe)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var fe;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:xe}=this;super.unsubscribe(),!xe&&(null===(fe=this.onFinalize)||void 0===fe||fe.call(this))}}}},3572:($t,Ge,z)=>{z.d(Ge,{d:()=>ae});var p=z(9360),W=z(8251);function ae(he){return(0,p.e)((fe,xe)=>{let Me=!1;fe.subscribe((0,W.x)(xe,Ee=>{Me=!0,xe.next(Ee)},()=>{Me||xe.next(he),xe.complete()}))})}},3997:($t,Ge,z)=>{z.d(Ge,{x:()=>he});var p=z(2737),W=z(9360),ae=z(8251);function he(xe,Me=p.y){return xe=xe??fe,(0,W.e)((Ee,ze)=>{let oe,pe=!0;Ee.subscribe((0,ae.x)(ze,Te=>{const et=Me(Te);(pe||!xe(oe,et))&&(pe=!1,oe=et,ze.next(Te))}))})}function fe(xe,Me){return xe===Me}},2181:($t,Ge,z)=>{z.d(Ge,{h:()=>ae});var p=z(9360),W=z(8251);function ae(he,fe){return(0,p.e)((xe,Me)=>{let Ee=0;xe.subscribe((0,W.x)(Me,ze=>he.call(fe,ze,Ee++)&&Me.next(ze)))})}},1374:($t,Ge,z)=>{z.d(Ge,{P:()=>Me});var p=z(6973),W=z(2181),ae=z(8180),he=z(3572),fe=z(3026),xe=z(2737);function Me(Ee,ze){const oe=arguments.length>=2;return pe=>pe.pipe(Ee?(0,W.h)((Te,et)=>Ee(Te,et,pe)):xe.y,(0,ae.q)(1),oe?(0,he.d)(ze):(0,fe.T)(()=>new p.K))}},7398:($t,Ge,z)=>{z.d(Ge,{U:()=>ae});var p=z(9360),W=z(8251);function ae(he,fe){return(0,p.e)((xe,Me)=>{let Ee=0;xe.subscribe((0,W.x)(Me,ze=>{Me.next(he.call(fe,ze,Ee++))}))})}},7537:($t,Ge,z)=>{z.d(Ge,{J:()=>ae});var p=z(1631),W=z(2737);function ae(he=1/0){return(0,p.z)(W.y,he)}},1631:($t,Ge,z)=>{z.d(Ge,{z:()=>Ee});var p=z(7398),W=z(4829),ae=z(9360),he=z(7103),fe=z(8251),Me=z(4674);function Ee(ze,oe,pe=1/0){return(0,Me.m)(oe)?Ee((Te,et)=>(0,p.U)((rt,mt)=>oe(Te,rt,et,mt))((0,W.Xf)(ze(Te,et))),pe):("number"==typeof oe&&(pe=oe),(0,ae.e)((Te,et)=>function xe(ze,oe,pe,Te,et,rt,mt,ht){const Qt=[];let Rt=0,Mn=0,bt=!1;const le=()=>{bt&&!Qt.length&&!Rt&&oe.complete()},Ve=Ze=>Rt<Te?Oe(Ze):Qt.push(Ze),Oe=Ze=>{rt&&oe.next(Ze),Rt++;let pt=!1;(0,W.Xf)(pe(Ze,Mn++)).subscribe((0,fe.x)(oe,Se=>{et?.(Se),rt?Ve(Se):oe.next(Se)},()=>{pt=!0},void 0,()=>{if(pt)try{for(Rt--;Qt.length&&Rt<Te;){const Se=Qt.shift();mt?(0,he.f)(oe,mt,()=>Oe(Se)):Oe(Se)}le()}catch(Se){oe.error(Se)}}))};return ze.subscribe((0,fe.x)(oe,Ve,()=>{bt=!0,le()})),()=>{ht?.()}}(Te,et,ze,pe)))}},3093:($t,Ge,z)=>{z.d(Ge,{Q:()=>he});var p=z(7103),W=z(9360),ae=z(8251);function he(fe,xe=0){return(0,W.e)((Me,Ee)=>{Me.subscribe((0,ae.x)(Ee,ze=>(0,p.f)(Ee,fe,()=>Ee.next(ze),xe),()=>(0,p.f)(Ee,fe,()=>Ee.complete(),xe),ze=>(0,p.f)(Ee,fe,()=>Ee.error(ze),xe)))})}},6699:($t,Ge,z)=>{z.d(Ge,{R:()=>he});var p=z(9360),W=z(8251);function he(fe,xe){return(0,p.e)(function ae(fe,xe,Me,Ee,ze){return(oe,pe)=>{let Te=Me,et=xe,rt=0;oe.subscribe((0,W.x)(pe,mt=>{const ht=rt++;et=Te?fe(et,mt,ht):(Te=!0,mt),Ee&&pe.next(et)},ze&&(()=>{Te&&pe.next(et),pe.complete()})))}}(fe,xe,arguments.length>=2,!0))}},3020:($t,Ge,z)=>{z.d(Ge,{B:()=>fe});var p=z(4829),W=z(8645),ae=z(305),he=z(9360);function fe(Me={}){const{connector:Ee=(()=>new W.x),resetOnError:ze=!0,resetOnComplete:oe=!0,resetOnRefCountZero:pe=!0}=Me;return Te=>{let et,rt,mt,ht=0,Qt=!1,Rt=!1;const Mn=()=>{rt?.unsubscribe(),rt=void 0},bt=()=>{Mn(),et=mt=void 0,Qt=Rt=!1},le=()=>{const Ve=et;bt(),Ve?.unsubscribe()};return(0,he.e)((Ve,Oe)=>{ht++,!Rt&&!Qt&&Mn();const Ze=mt=mt??Ee();Oe.add(()=>{ht--,0===ht&&!Rt&&!Qt&&(rt=xe(le,pe))}),Ze.subscribe(Oe),!et&&ht>0&&(et=new ae.Hp({next:pt=>Ze.next(pt),error:pt=>{Rt=!0,Mn(),rt=xe(bt,ze,pt),Ze.error(pt)},complete:()=>{Qt=!0,Mn(),rt=xe(bt,oe),Ze.complete()}}),(0,p.Xf)(Ve).subscribe(et))})(Te)}}function xe(Me,Ee,...ze){if(!0===Ee)return void Me();if(!1===Ee)return;const oe=new ae.Hp({next:()=>{oe.unsubscribe(),Me()}});return(0,p.Xf)(Ee(...ze)).subscribe(oe)}},7921:($t,Ge,z)=>{z.d(Ge,{O:()=>he});var p=z(5211),W=z(4564),ae=z(9360);function he(...fe){const xe=(0,W.yG)(fe);return(0,ae.e)((Me,Ee)=>{(xe?(0,p.z)(fe,Me,xe):(0,p.z)(fe,Me)).subscribe(Ee)})}},5137:($t,Ge,z)=>{z.d(Ge,{R:()=>W});var p=z(9360);function W(ae,he=0){return(0,p.e)((fe,xe)=>{xe.add(ae.schedule(()=>fe.subscribe(xe),he))})}},4664:($t,Ge,z)=>{z.d(Ge,{w:()=>he});var p=z(4829),W=z(9360),ae=z(8251);function he(fe,xe){return(0,W.e)((Me,Ee)=>{let ze=null,oe=0,pe=!1;const Te=()=>pe&&!ze&&Ee.complete();Me.subscribe((0,ae.x)(Ee,et=>{ze?.unsubscribe();let rt=0;const mt=oe++;(0,p.Xf)(fe(et,mt)).subscribe(ze=(0,ae.x)(Ee,ht=>Ee.next(xe?xe(et,ht,mt,rt++):ht),()=>{ze=null,Te()}))},()=>{pe=!0,Te()}))})}},8180:($t,Ge,z)=>{z.d(Ge,{q:()=>he});var p=z(6232),W=z(9360),ae=z(8251);function he(fe){return fe<=0?()=>p.E:(0,W.e)((xe,Me)=>{let Ee=0;xe.subscribe((0,ae.x)(Me,ze=>{++Ee<=fe&&(Me.next(ze),fe<=Ee&&Me.complete())}))})}},9397:($t,Ge,z)=>{z.d(Ge,{b:()=>fe});var p=z(4674),W=z(9360),ae=z(8251),he=z(2737);function fe(xe,Me,Ee){const ze=(0,p.m)(xe)||Me||Ee?{next:xe,error:Me,complete:Ee}:xe;return ze?(0,W.e)((oe,pe)=>{var Te;null===(Te=ze.subscribe)||void 0===Te||Te.call(ze);let et=!0;oe.subscribe((0,ae.x)(pe,rt=>{var mt;null===(mt=ze.next)||void 0===mt||mt.call(ze,rt),pe.next(rt)},()=>{var rt;et=!1,null===(rt=ze.complete)||void 0===rt||rt.call(ze),pe.complete()},rt=>{var mt;et=!1,null===(mt=ze.error)||void 0===mt||mt.call(ze,rt),pe.error(rt)},()=>{var rt,mt;et&&(null===(rt=ze.unsubscribe)||void 0===rt||rt.call(ze)),null===(mt=ze.finalize)||void 0===mt||mt.call(ze)}))}):he.y}},3026:($t,Ge,z)=>{z.d(Ge,{T:()=>he});var p=z(6973),W=z(9360),ae=z(8251);function he(xe=fe){return(0,W.e)((Me,Ee)=>{let ze=!1;Me.subscribe((0,ae.x)(Ee,oe=>{ze=!0,Ee.next(oe)},()=>ze?Ee.complete():Ee.error(xe())))})}function fe(){return new p.K}},1954:($t,Ge,z)=>{z.d(Ge,{o:()=>fe});var p=z(7394);class W extends p.w0{constructor(Me,Ee){super()}schedule(Me,Ee=0){return this}}const ae={setInterval(xe,Me,...Ee){const{delegate:ze}=ae;return ze?.setInterval?ze.setInterval(xe,Me,...Ee):setInterval(xe,Me,...Ee)},clearInterval(xe){const{delegate:Me}=ae;return(Me?.clearInterval||clearInterval)(xe)},delegate:void 0};var he=z(9039);class fe extends W{constructor(Me,Ee){super(Me,Ee),this.scheduler=Me,this.work=Ee,this.pending=!1}schedule(Me,Ee=0){var ze;if(this.closed)return this;this.state=Me;const oe=this.id,pe=this.scheduler;return null!=oe&&(this.id=this.recycleAsyncId(pe,oe,Ee)),this.pending=!0,this.delay=Ee,this.id=null!==(ze=this.id)&&void 0!==ze?ze:this.requestAsyncId(pe,this.id,Ee),this}requestAsyncId(Me,Ee,ze=0){return ae.setInterval(Me.flush.bind(Me,this),ze)}recycleAsyncId(Me,Ee,ze=0){if(null!=ze&&this.delay===ze&&!1===this.pending)return Ee;null!=Ee&&ae.clearInterval(Ee)}execute(Me,Ee){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ze=this._execute(Me,Ee);if(ze)return ze;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Me,Ee){let oe,ze=!1;try{this.work(Me)}catch(pe){ze=!0,oe=pe||new Error("Scheduled action threw falsy error")}if(ze)return this.unsubscribe(),oe}unsubscribe(){if(!this.closed){const{id:Me,scheduler:Ee}=this,{actions:ze}=Ee;this.work=this.state=this.scheduler=null,this.pending=!1,(0,he.P)(ze,this),null!=Me&&(this.id=this.recycleAsyncId(Ee,Me,null)),this.delay=null,super.unsubscribe()}}}},2631:($t,Ge,z)=>{z.d(Ge,{v:()=>ae});var p=z(4552);class W{constructor(fe,xe=W.now){this.schedulerActionCtor=fe,this.now=xe}schedule(fe,xe=0,Me){return new this.schedulerActionCtor(this,fe).schedule(Me,xe)}}W.now=p.l.now;class ae extends W{constructor(fe,xe=W.now){super(fe,xe),this.actions=[],this._active=!1}flush(fe){const{actions:xe}=this;if(this._active)return void xe.push(fe);let Me;this._active=!0;do{if(Me=fe.execute(fe.state,fe.delay))break}while(fe=xe.shift());if(this._active=!1,Me){for(;fe=xe.shift();)fe.unsubscribe();throw Me}}}},6321:($t,Ge,z)=>{z.d(Ge,{z:()=>ae});var p=z(1954);const ae=new(z(2631).v)(p.o)},4552:($t,Ge,z)=>{z.d(Ge,{l:()=>p});const p={now:()=>(p.delegate||Date).now(),delegate:void 0}},7599:($t,Ge,z)=>{z.d(Ge,{z:()=>p});const p={setTimeout(W,ae,...he){const{delegate:fe}=p;return fe?.setTimeout?fe.setTimeout(W,ae,...he):setTimeout(W,ae,...he)},clearTimeout(W){const{delegate:ae}=p;return(ae?.clearTimeout||clearTimeout)(W)},delegate:void 0}},4971:($t,Ge,z)=>{z.d(Ge,{h:()=>W});const W=function p(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:($t,Ge,z)=>{z.d(Ge,{L:()=>p});const p="function"==typeof Symbol&&Symbol.observable||"@@observable"},6973:($t,Ge,z)=>{z.d(Ge,{K:()=>W});const W=(0,z(2306).d)(ae=>function(){ae(this),this.name="EmptyError",this.message="no elements in sequence"})},4564:($t,Ge,z)=>{z.d(Ge,{_6:()=>xe,jO:()=>he,yG:()=>fe});var p=z(4674);function ae(Me){return Me[Me.length-1]}function he(Me){return(0,p.m)(ae(Me))?Me.pop():void 0}function fe(Me){return function W(Me){return Me&&(0,p.m)(Me.schedule)}(ae(Me))?Me.pop():void 0}function xe(Me,Ee){return"number"==typeof ae(Me)?Me.pop():Ee}},7453:($t,Ge,z)=>{z.d(Ge,{D:()=>fe});const{isArray:p}=Array,{getPrototypeOf:W,prototype:ae,keys:he}=Object;function fe(Me){if(1===Me.length){const Ee=Me[0];if(p(Ee))return{args:Ee,keys:null};if(function xe(Me){return Me&&"object"==typeof Me&&W(Me)===ae}(Ee)){const ze=he(Ee);return{args:ze.map(oe=>Ee[oe]),keys:ze}}}return{args:Me,keys:null}}},9039:($t,Ge,z)=>{function p(W,ae){if(W){const he=W.indexOf(ae);0<=he&&W.splice(he,1)}}z.d(Ge,{P:()=>p})},2306:($t,Ge,z)=>{function p(W){const he=W(fe=>{Error.call(fe),fe.stack=(new Error).stack});return he.prototype=Object.create(Error.prototype),he.prototype.constructor=he,he}z.d(Ge,{d:()=>p})},2714:($t,Ge,z)=>{function p(W,ae){return W.reduce((he,fe,xe)=>(he[fe]=ae[xe],he),{})}z.d(Ge,{n:()=>p})},1441:($t,Ge,z)=>{z.d(Ge,{O:()=>he,x:()=>ae});var p=z(2653);let W=null;function ae(fe){if(p.config.useDeprecatedSynchronousErrorHandling){const xe=!W;if(xe&&(W={errorThrown:!1,error:null}),fe(),xe){const{errorThrown:Me,error:Ee}=W;if(W=null,Me)throw Ee}}else fe()}function he(fe){p.config.useDeprecatedSynchronousErrorHandling&&W&&(W.errorThrown=!0,W.error=fe)}},7103:($t,Ge,z)=>{function p(W,ae,he,fe=0,xe=!1){const Me=ae.schedule(function(){he(),xe?W.add(this.schedule(null,fe)):this.unsubscribe()},fe);if(W.add(Me),!xe)return Me}z.d(Ge,{f:()=>p})},2737:($t,Ge,z)=>{function p(W){return W}z.d(Ge,{y:()=>p})},4266:($t,Ge,z)=>{z.d(Ge,{z:()=>p});const p=W=>W&&"number"==typeof W.length&&"function"!=typeof W},5726:($t,Ge,z)=>{z.d(Ge,{D:()=>W});var p=z(4674);function W(ae){return Symbol.asyncIterator&&(0,p.m)(ae?.[Symbol.asyncIterator])}},4674:($t,Ge,z)=>{function p(W){return"function"==typeof W}z.d(Ge,{m:()=>p})},8382:($t,Ge,z)=>{z.d(Ge,{c:()=>ae});var p=z(4850),W=z(4674);function ae(he){return(0,W.m)(he[p.L])}},3664:($t,Ge,z)=>{z.d(Ge,{T:()=>ae});var p=z(4971),W=z(4674);function ae(he){return(0,W.m)(he?.[p.h])}},2664:($t,Ge,z)=>{z.d(Ge,{b:()=>ae});var p=z(5592),W=z(4674);function ae(he){return!!he&&(he instanceof p.y||(0,W.m)(he.lift)&&(0,W.m)(he.subscribe))}},4026:($t,Ge,z)=>{z.d(Ge,{t:()=>W});var p=z(4674);function W(ae){return(0,p.m)(ae?.then)}},541:($t,Ge,z)=>{z.d(Ge,{L:()=>he,Q:()=>ae});var p=z(7582),W=z(4674);function ae(fe){return(0,p.FC)(this,arguments,function*(){const Me=fe.getReader();try{for(;;){const{value:Ee,done:ze}=yield(0,p.qq)(Me.read());if(ze)return yield(0,p.qq)(void 0);yield yield(0,p.qq)(Ee)}}finally{Me.releaseLock()}})}function he(fe){return(0,W.m)(fe?.getReader)}},9360:($t,Ge,z)=>{z.d(Ge,{A:()=>W,e:()=>ae});var p=z(4674);function W(he){return(0,p.m)(he?.lift)}function ae(he){return fe=>{if(W(fe))return fe.lift(function(xe){try{return he(xe,this)}catch(Me){this.error(Me)}});throw new TypeError("Unable to lift unknown Observable type")}}},7400:($t,Ge,z)=>{z.d(Ge,{Z:()=>he});var p=z(7398);const{isArray:W}=Array;function he(fe){return(0,p.U)(xe=>function ae(fe,xe){return W(xe)?fe(...xe):fe(xe)}(fe,xe))}},2420:($t,Ge,z)=>{function p(){}z.d(Ge,{Z:()=>p})},8407:($t,Ge,z)=>{z.d(Ge,{U:()=>ae,z:()=>W});var p=z(2737);function W(...he){return ae(he)}function ae(he){return 0===he.length?p.y:1===he.length?he[0]:function(xe){return he.reduce((Me,Ee)=>Ee(Me),xe)}}},3894:($t,Ge,z)=>{z.d(Ge,{h:()=>ae});var p=z(2653),W=z(7599);function ae(he){W.z.setTimeout(()=>{const{onUnhandledError:fe}=p.config;if(!fe)throw he;fe(he)})}},9853:($t,Ge,z)=>{function p(W){return new TypeError(`You provided ${null!==W&&"object"==typeof W?"an invalid object":`'${W}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}z.d(Ge,{z:()=>p})},6825:($t,Ge,z)=>{z.d(Ge,{LC:()=>W,SB:()=>ze,X$:()=>he,ZE:()=>Rt,ZN:()=>Qt,_j:()=>p,eR:()=>pe,jt:()=>fe,k1:()=>Mn,l3:()=>ae,oB:()=>Ee,vP:()=>Me});class p{}class W{}const ae="*";function he(bt,le){return{type:7,name:bt,definitions:le,options:{}}}function fe(bt,le=null){return{type:4,styles:le,timings:bt}}function Me(bt,le=null){return{type:2,steps:bt,options:le}}function Ee(bt){return{type:6,styles:bt,offset:null}}function ze(bt,le,Ve){return{type:0,name:bt,styles:le,options:Ve}}function pe(bt,le,Ve=null){return{type:1,expr:bt,animation:le,options:Ve}}class Qt{constructor(le=0,Ve=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=le+Ve}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(le=>le()),this._onDoneFns=[])}onStart(le){this._originalOnStartFns.push(le),this._onStartFns.push(le)}onDone(le){this._originalOnDoneFns.push(le),this._onDoneFns.push(le)}onDestroy(le){this._onDestroyFns.push(le)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(le=>le()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(le=>le()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(le){this._position=this.totalTime?le*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(le){const Ve="start"==le?this._onStartFns:this._onDoneFns;Ve.forEach(Oe=>Oe()),Ve.length=0}}class Rt{constructor(le){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=le;let Ve=0,Oe=0,Ze=0;const pt=this.players.length;0==pt?queueMicrotask(()=>this._onFinish()):this.players.forEach(Se=>{Se.onDone(()=>{++Ve==pt&&this._onFinish()}),Se.onDestroy(()=>{++Oe==pt&&this._onDestroy()}),Se.onStart(()=>{++Ze==pt&&this._onStart()})}),this.totalTime=this.players.reduce((Se,ln)=>Math.max(Se,ln.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(le=>le()),this._onDoneFns=[])}init(){this.players.forEach(le=>le.init())}onStart(le){this._onStartFns.push(le)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(le=>le()),this._onStartFns=[])}onDone(le){this._onDoneFns.push(le)}onDestroy(le){this._onDestroyFns.push(le)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(le=>le.play())}pause(){this.players.forEach(le=>le.pause())}restart(){this.players.forEach(le=>le.restart())}finish(){this._onFinish(),this.players.forEach(le=>le.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(le=>le.destroy()),this._onDestroyFns.forEach(le=>le()),this._onDestroyFns=[])}reset(){this.players.forEach(le=>le.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(le){const Ve=le*this.totalTime;this.players.forEach(Oe=>{const Ze=Oe.totalTime?Math.min(1,Ve/Oe.totalTime):1;Oe.setPosition(Ze)})}getPosition(){const le=this.players.reduce((Ve,Oe)=>null===Ve||Oe.totalTime>Ve.totalTime?Oe:Ve,null);return null!=le?le.getPosition():0}beforeDestroy(){this.players.forEach(le=>{le.beforeDestroy&&le.beforeDestroy()})}triggerCallback(le){const Ve="start"==le?this._onStartFns:this._onDoneFns;Ve.forEach(Oe=>Oe()),Ve.length=0}}const Mn="!"},6814:($t,Ge,z)=>{z.d(Ge,{Do:()=>ht,EM:()=>mi,HT:()=>he,JF:()=>Hi,K0:()=>xe,Mx:()=>xi,NF:()=>rs,O5:()=>Zi,PC:()=>Dn,PM:()=>Fs,S$:()=>et,V_:()=>Ee,Ye:()=>Qt,b0:()=>mt,bD:()=>gi,ez:()=>Sr,mk:()=>Rs,q:()=>ae,sg:()=>Ts,tP:()=>$n,w_:()=>fe});var p=z(5879);let W=null;function ae(){return W}function he(C){W||(W=C)}class fe{}const xe=new p.OlP("DocumentToken");let Me=(()=>{class C{historyGo(O){throw new Error("Not implemented")}static#e=this.\u0275fac=function(j){return new(j||C)};static#t=this.\u0275prov=p.Yz7({token:C,factory:function(){return(0,p.f3M)(ze)},providedIn:"platform"})}return C})();const Ee=new p.OlP("Location Initialized");let ze=(()=>{class C extends Me{constructor(){super(),this._doc=(0,p.f3M)(xe),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ae().getBaseHref(this._doc)}onPopState(O){const j=ae().getGlobalEventTarget(this._doc,"window");return j.addEventListener("popstate",O,!1),()=>j.removeEventListener("popstate",O)}onHashChange(O){const j=ae().getGlobalEventTarget(this._doc,"window");return j.addEventListener("hashchange",O,!1),()=>j.removeEventListener("hashchange",O)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(O){this._location.pathname=O}pushState(O,j,de){this._history.pushState(O,j,de)}replaceState(O,j,de){this._history.replaceState(O,j,de)}forward(){this._history.forward()}back(){this._history.back()}historyGo(O=0){this._history.go(O)}getState(){return this._history.state}static#e=this.\u0275fac=function(j){return new(j||C)};static#t=this.\u0275prov=p.Yz7({token:C,factory:function(){return new C},providedIn:"platform"})}return C})();function oe(C,q){if(0==C.length)return q;if(0==q.length)return C;let O=0;return C.endsWith("/")&&O++,q.startsWith("/")&&O++,2==O?C+q.substring(1):1==O?C+q:C+"/"+q}function pe(C){const q=C.match(/#|\?|$/),O=q&&q.index||C.length;return C.slice(0,O-("/"===C[O-1]?1:0))+C.slice(O)}function Te(C){return C&&"?"!==C[0]?"?"+C:C}let et=(()=>{class C{historyGo(O){throw new Error("Not implemented")}static#e=this.\u0275fac=function(j){return new(j||C)};static#t=this.\u0275prov=p.Yz7({token:C,factory:function(){return(0,p.f3M)(mt)},providedIn:"root"})}return C})();const rt=new p.OlP("appBaseHref");let mt=(()=>{class C extends et{constructor(O,j){super(),this._platformLocation=O,this._removeListenerFns=[],this._baseHref=j??this._platformLocation.getBaseHrefFromDOM()??(0,p.f3M)(xe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(O){this._removeListenerFns.push(this._platformLocation.onPopState(O),this._platformLocation.onHashChange(O))}getBaseHref(){return this._baseHref}prepareExternalUrl(O){return oe(this._baseHref,O)}path(O=!1){const j=this._platformLocation.pathname+Te(this._platformLocation.search),de=this._platformLocation.hash;return de&&O?`${j}${de}`:j}pushState(O,j,de,Ke){const st=this.prepareExternalUrl(de+Te(Ke));this._platformLocation.pushState(O,j,st)}replaceState(O,j,de,Ke){const st=this.prepareExternalUrl(de+Te(Ke));this._platformLocation.replaceState(O,j,st)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(O=0){this._platformLocation.historyGo?.(O)}static#e=this.\u0275fac=function(j){return new(j||C)(p.LFG(Me),p.LFG(rt,8))};static#t=this.\u0275prov=p.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"})}return C})(),ht=(()=>{class C extends et{constructor(O,j){super(),this._platformLocation=O,this._baseHref="",this._removeListenerFns=[],null!=j&&(this._baseHref=j)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(O){this._removeListenerFns.push(this._platformLocation.onPopState(O),this._platformLocation.onHashChange(O))}getBaseHref(){return this._baseHref}path(O=!1){let j=this._platformLocation.hash;return null==j&&(j="#"),j.length>0?j.substring(1):j}prepareExternalUrl(O){const j=oe(this._baseHref,O);return j.length>0?"#"+j:j}pushState(O,j,de,Ke){let st=this.prepareExternalUrl(de+Te(Ke));0==st.length&&(st=this._platformLocation.pathname),this._platformLocation.pushState(O,j,st)}replaceState(O,j,de,Ke){let st=this.prepareExternalUrl(de+Te(Ke));0==st.length&&(st=this._platformLocation.pathname),this._platformLocation.replaceState(O,j,st)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(O=0){this._platformLocation.historyGo?.(O)}static#e=this.\u0275fac=function(j){return new(j||C)(p.LFG(Me),p.LFG(rt,8))};static#t=this.\u0275prov=p.Yz7({token:C,factory:C.\u0275fac})}return C})(),Qt=(()=>{class C{constructor(O){this._subject=new p.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=O;const j=this._locationStrategy.getBaseHref();this._basePath=function le(C){if(new RegExp("^(https?:)?//").test(C)){const[,O]=C.split(/\/\/[^\/]+/);return O}return C}(pe(bt(j))),this._locationStrategy.onPopState(de=>{this._subject.emit({url:this.path(!0),pop:!0,state:de.state,type:de.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(O=!1){return this.normalize(this._locationStrategy.path(O))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(O,j=""){return this.path()==this.normalize(O+Te(j))}normalize(O){return C.stripTrailingSlash(function Mn(C,q){if(!C||!q.startsWith(C))return q;const O=q.substring(C.length);return""===O||["/",";","?","#"].includes(O[0])?O:q}(this._basePath,bt(O)))}prepareExternalUrl(O){return O&&"/"!==O[0]&&(O="/"+O),this._locationStrategy.prepareExternalUrl(O)}go(O,j="",de=null){this._locationStrategy.pushState(de,"",O,j),this._notifyUrlChangeListeners(this.prepareExternalUrl(O+Te(j)),de)}replaceState(O,j="",de=null){this._locationStrategy.replaceState(de,"",O,j),this._notifyUrlChangeListeners(this.prepareExternalUrl(O+Te(j)),de)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(O=0){this._locationStrategy.historyGo?.(O)}onUrlChange(O){return this._urlChangeListeners.push(O),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(j=>{this._notifyUrlChangeListeners(j.url,j.state)})),()=>{const j=this._urlChangeListeners.indexOf(O);this._urlChangeListeners.splice(j,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(O="",j){this._urlChangeListeners.forEach(de=>de(O,j))}subscribe(O,j,de){return this._subject.subscribe({next:O,error:j,complete:de})}static#e=this.normalizeQueryParams=Te;static#t=this.joinWithSlash=oe;static#n=this.stripTrailingSlash=pe;static#r=this.\u0275fac=function(j){return new(j||C)(p.LFG(et))};static#i=this.\u0275prov=p.Yz7({token:C,factory:function(){return function Rt(){return new Qt((0,p.LFG)(et))}()},providedIn:"root"})}return C})();function bt(C){return C.replace(/\/index.html$/,"")}function xi(C,q){q=encodeURIComponent(q);for(const O of C.split(";")){const j=O.indexOf("="),[de,Ke]=-1==j?[O,""]:[O.slice(0,j),O.slice(j+1)];if(de.trim()===q)return decodeURIComponent(Ke)}return null}const ys=/\s+/,fi=[];let Rs=(()=>{class C{constructor(O,j,de,Ke){this._iterableDiffers=O,this._keyValueDiffers=j,this._ngEl=de,this._renderer=Ke,this.initialClasses=fi,this.stateMap=new Map}set klass(O){this.initialClasses=null!=O?O.trim().split(ys):fi}set ngClass(O){this.rawClass="string"==typeof O?O.trim().split(ys):O}ngDoCheck(){for(const j of this.initialClasses)this._updateState(j,!0);const O=this.rawClass;if(Array.isArray(O)||O instanceof Set)for(const j of O)this._updateState(j,!0);else if(null!=O)for(const j of Object.keys(O))this._updateState(j,!!O[j]);this._applyStateDiff()}_updateState(O,j){const de=this.stateMap.get(O);void 0!==de?(de.enabled!==j&&(de.changed=!0,de.enabled=j),de.touched=!0):this.stateMap.set(O,{enabled:j,changed:!0,touched:!0})}_applyStateDiff(){for(const O of this.stateMap){const j=O[0],de=O[1];de.changed?(this._toggleClass(j,de.enabled),de.changed=!1):de.touched||(de.enabled&&this._toggleClass(j,!1),this.stateMap.delete(j)),de.touched=!1}}_toggleClass(O,j){(O=O.trim()).length>0&&O.split(ys).forEach(de=>{j?this._renderer.addClass(this._ngEl.nativeElement,de):this._renderer.removeClass(this._ngEl.nativeElement,de)})}static#e=this.\u0275fac=function(j){return new(j||C)(p.Y36(p.ZZ4),p.Y36(p.aQg),p.Y36(p.SBq),p.Y36(p.Qsj))};static#t=this.\u0275dir=p.lG2({type:C,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}return C})();class To{constructor(q,O,j,de){this.$implicit=q,this.ngForOf=O,this.index=j,this.count=de}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ts=(()=>{class C{set ngForOf(O){this._ngForOf=O,this._ngForOfDirty=!0}set ngForTrackBy(O){this._trackByFn=O}get ngForTrackBy(){return this._trackByFn}constructor(O,j,de){this._viewContainer=O,this._template=j,this._differs=de,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(O){O&&(this._template=O)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const O=this._ngForOf;!this._differ&&O&&(this._differ=this._differs.find(O).create(this.ngForTrackBy))}if(this._differ){const O=this._differ.diff(this._ngForOf);O&&this._applyChanges(O)}}_applyChanges(O){const j=this._viewContainer;O.forEachOperation((de,Ke,st)=>{if(null==de.previousIndex)j.createEmbeddedView(this._template,new To(de.item,this._ngForOf,-1,-1),null===st?void 0:st);else if(null==st)j.remove(null===Ke?void 0:Ke);else if(null!==Ke){const sn=j.get(Ke);j.move(sn,st),Lr(sn,de)}});for(let de=0,Ke=j.length;de<Ke;de++){const sn=j.get(de).context;sn.index=de,sn.count=Ke,sn.ngForOf=this._ngForOf}O.forEachIdentityChange(de=>{Lr(j.get(de.currentIndex),de)})}static ngTemplateContextGuard(O,j){return!0}static#e=this.\u0275fac=function(j){return new(j||C)(p.Y36(p.s_b),p.Y36(p.Rgc),p.Y36(p.ZZ4))};static#t=this.\u0275dir=p.lG2({type:C,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return C})();function Lr(C,q){C.context.$implicit=q.item}let Zi=(()=>{class C{constructor(O,j){this._viewContainer=O,this._context=new mo,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=j}set ngIf(O){this._context.$implicit=this._context.ngIf=O,this._updateView()}set ngIfThen(O){yo("ngIfThen",O),this._thenTemplateRef=O,this._thenViewRef=null,this._updateView()}set ngIfElse(O){yo("ngIfElse",O),this._elseTemplateRef=O,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(O,j){return!0}static#e=this.\u0275fac=function(j){return new(j||C)(p.Y36(p.s_b),p.Y36(p.Rgc))};static#t=this.\u0275dir=p.lG2({type:C,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return C})();class mo{constructor(){this.$implicit=null,this.ngIf=null}}function yo(C,q){if(q&&!q.createEmbeddedView)throw new Error(`${C} must be a TemplateRef, but received '${(0,p.AaK)(q)}'.`)}let Dn=(()=>{class C{constructor(O,j,de){this._ngEl=O,this._differs=j,this._renderer=de,this._ngStyle=null,this._differ=null}set ngStyle(O){this._ngStyle=O,!this._differ&&O&&(this._differ=this._differs.find(O).create())}ngDoCheck(){if(this._differ){const O=this._differ.diff(this._ngStyle);O&&this._applyChanges(O)}}_setStyle(O,j){const[de,Ke]=O.split("."),st=-1===de.indexOf("-")?void 0:p.JOm.DashCase;null!=j?this._renderer.setStyle(this._ngEl.nativeElement,de,Ke?`${j}${Ke}`:j,st):this._renderer.removeStyle(this._ngEl.nativeElement,de,st)}_applyChanges(O){O.forEachRemovedItem(j=>this._setStyle(j.key,null)),O.forEachAddedItem(j=>this._setStyle(j.key,j.currentValue)),O.forEachChangedItem(j=>this._setStyle(j.key,j.currentValue))}static#e=this.\u0275fac=function(j){return new(j||C)(p.Y36(p.SBq),p.Y36(p.aQg),p.Y36(p.Qsj))};static#t=this.\u0275dir=p.lG2({type:C,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}return C})(),$n=(()=>{class C{constructor(O){this._viewContainerRef=O,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(O){if(O.ngTemplateOutlet||O.ngTemplateOutletInjector){const j=this._viewContainerRef;if(this._viewRef&&j.remove(j.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:de,ngTemplateOutletContext:Ke,ngTemplateOutletInjector:st}=this;this._viewRef=j.createEmbeddedView(de,Ke,st?{injector:st}:void 0)}else this._viewRef=null}else this._viewRef&&O.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}static#e=this.\u0275fac=function(j){return new(j||C)(p.Y36(p.s_b))};static#t=this.\u0275dir=p.lG2({type:C,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[p.TTD]})}return C})(),Sr=(()=>{class C{static#e=this.\u0275fac=function(j){return new(j||C)};static#t=this.\u0275mod=p.oAB({type:C});static#n=this.\u0275inj=p.cJS({})}return C})();const gi="browser",ui="server";function rs(C){return C===gi}function Fs(C){return C===ui}let mi=(()=>{class C{static#e=this.\u0275prov=(0,p.Yz7)({token:C,providedIn:"root",factory:()=>new Yi((0,p.LFG)(xe),window)})}return C})();class Yi{constructor(q,O){this.document=q,this.window=O,this.offset=()=>[0,0]}setOffset(q){this.offset=Array.isArray(q)?()=>q:q}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(q){this.supportsScrolling()&&this.window.scrollTo(q[0],q[1])}scrollToAnchor(q){if(!this.supportsScrolling())return;const O=function Ao(C,q){const O=C.getElementById(q)||C.getElementsByName(q)[0];if(O)return O;if("function"==typeof C.createTreeWalker&&C.body&&"function"==typeof C.body.attachShadow){const j=C.createTreeWalker(C.body,NodeFilter.SHOW_ELEMENT);let de=j.currentNode;for(;de;){const Ke=de.shadowRoot;if(Ke){const st=Ke.getElementById(q)||Ke.querySelector(`[name="${q}"]`);if(st)return st}de=j.nextNode()}}return null}(this.document,q);O&&(this.scrollToElement(O),O.focus())}setHistoryScrollRestoration(q){this.supportsScrolling()&&(this.window.history.scrollRestoration=q)}scrollToElement(q){const O=q.getBoundingClientRect(),j=O.left+this.window.pageXOffset,de=O.top+this.window.pageYOffset,Ke=this.offset();this.window.scrollTo(j-Ke[0],de-Ke[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class Hi{}},5879:($t,Ge,z)=>{z.d(Ge,{$8M:()=>li,$WT:()=>vs,$Z:()=>eg,$Z9:()=>pm,AFp:()=>ef,AaK:()=>Te,AsE:()=>B_,BQk:()=>Mf,CHM:()=>zo,CRH:()=>Mw,EJc:()=>Rb,EiD:()=>hm,EpF:()=>jy,F$t:()=>o,F4k:()=>$y,FYo:()=>cf,FiY:()=>Ye,Gf:()=>Sw,GfV:()=>Pp,GkF:()=>Nf,Gpc:()=>mt,HDt:()=>Xw,HTZ:()=>cw,Hsn:()=>u,JOm:()=>Cd,JVY:()=>hp,JZr:()=>bt,KtG:()=>H,L6k:()=>Gh,LAX:()=>om,LFG:()=>yt,Lbi:()=>Zd,Lck:()=>_C,MAs:()=>By,MMx:()=>X0,NdJ:()=>Mg,O4$:()=>fr,Ojb:()=>tf,OlP:()=>Ii,Oqu:()=>V_,P3R:()=>Kh,PXZ:()=>sT,Q6J:()=>Dg,QGY:()=>Ag,QbO:()=>Yd,Qsj:()=>Vv,R0b:()=>Bo,RDi:()=>wv,Rgc:()=>Bg,SBq:()=>Jl,Sil:()=>kb,Suo:()=>Aw,TTD:()=>ir,TgZ:()=>bg,Tol:()=>qE,Udp:()=>k_,VKq:()=>ow,VuI:()=>jT,W1O:()=>Ow,WLB:()=>aw,X6Q:()=>fT,XFs:()=>Xt,Xpm:()=>$i,Xq5:()=>Cy,Xts:()=>zd,Y36:()=>Vc,YKP:()=>Y0,YNc:()=>Ly,Yjl:()=>Uo,Yz7:()=>Ht,Z0I:()=>er,ZZ4:()=>_E,_Bn:()=>Z0,_UZ:()=>Uy,_c5:()=>MT,_uU:()=>e0,aQg:()=>EE,c2e:()=>Qw,cJS:()=>lr,cg1:()=>U_,dDg:()=>tT,dqk:()=>Vn,eBb:()=>Dv,eFA:()=>uI,eJc:()=>rE,ekj:()=>F_,eoX:()=>iI,f3M:()=>Mt,g9A:()=>Cp,h0i:()=>bh,hGG:()=>NT,hij:()=>Gy,iGM:()=>Tw,ifc:()=>ut,ip1:()=>Yw,jDz:()=>J0,kL8:()=>w0,l5B:()=>uw,lG2:()=>vo,lqb:()=>Bu,lri:()=>nI,mCW:()=>Bd,n5z:()=>Wc,oAB:()=>So,oJD:()=>Ac,oxw:()=>e,pB0:()=>Fd,q3G:()=>Sc,q4F:()=>xm,qFp:()=>HT,qLn:()=>kc,qOj:()=>vy,qZA:()=>Tg,qzn:()=>ic,rWj:()=>rI,rg0:()=>de,sBO:()=>pT,s_b:()=>Xy,soG:()=>ev,tb:()=>fE,tp0:()=>Ut,uIk:()=>bf,vHH:()=>le,vpe:()=>Uu,wAp:()=>Of,xp6:()=>yf,ynx:()=>Sg,z2F:()=>Lf,z3N:()=>Vu,zSh:()=>qd,zs3:()=>ca});var p=z(8645),W=z(7394),ae=z(5592),he=z(3019),fe=z(5619),xe=z(2096),Me=z(3020),Ee=z(4664),ze=z(3997);function oe(t){for(let r in t)if(t[r]===oe)return r;throw Error("Could not find renamed property on target object.")}function pe(t,r){for(const s in r)r.hasOwnProperty(s)&&!t.hasOwnProperty(s)&&(t[s]=r[s])}function Te(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(Te).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const r=t.toString();if(null==r)return""+r;const s=r.indexOf("\n");return-1===s?r:r.substring(0,s)}function et(t,r){return null==t||""===t?null===r?"":r:null==r||""===r?t:t+" "+r}const rt=oe({__forward_ref__:oe});function mt(t){return t.__forward_ref__=mt,t.toString=function(){return Te(this())},t}function ht(t){return Qt(t)?t():t}function Qt(t){return"function"==typeof t&&t.hasOwnProperty(rt)&&t.__forward_ref__===mt}function Rt(t){return t&&!!t.\u0275providers}const bt="https://g.co/ng/security#xss";class le extends Error{constructor(r,s){super(function Ve(t,r){return`NG0${Math.abs(t)}${r?": "+r:""}`}(r,s)),this.code=r}}function Oe(t){return"string"==typeof t?t:null==t?"":String(t)}function en(t,r){throw new le(-201,!1)}function Tt(t,r){null==t&&function Et(t,r,s,a){throw new Error(`ASSERTION ERROR: ${t}`+(null==a?"":` [Expected=> ${s} ${a} ${r} <=Actual]`))}(r,t,null,"!=")}function Ht(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function lr(t){return{providers:t.providers||[],imports:t.imports||[]}}function Qn(t){return Vt(t,Ln)||Vt(t,si)}function er(t){return null!==Qn(t)}function Vt(t,r){return t.hasOwnProperty(r)?t[r]:null}function Ki(t){return t&&(t.hasOwnProperty($r)||t.hasOwnProperty(nr))?t[$r]:null}const Ln=oe({\u0275prov:oe}),$r=oe({\u0275inj:oe}),si=oe({ngInjectableDef:oe}),nr=oe({ngInjectorDef:oe});var Xt=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Xt||{});let gn;function vn(t){const r=gn;return gn=t,r}function _r(t,r,s){const a=Qn(t);return a&&"root"==a.providedIn?void 0===a.value?a.value=a.factory():a.value:s&Xt.Optional?null:void 0!==r?r:void en(Te(t))}const Vn=globalThis,Zn={},wn="__NG_DI_FLAG__",Jt="ngTempTokenPath",me=/\n/gm,ee="__source";let K;function Ie(t){const r=K;return K=t,r}function at(t,r=Xt.Default){if(void 0===K)throw new le(-203,!1);return null===K?_r(t,void 0,r):K.get(t,r&Xt.Optional?null:void 0,r)}function yt(t,r=Xt.Default){return(function tn(){return gn}()||at)(ht(t),r)}function Mt(t,r=Xt.Default){return yt(t,_n(r))}function _n(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function In(t){const r=[];for(let s=0;s<t.length;s++){const a=ht(t[s]);if(Array.isArray(a)){if(0===a.length)throw new le(900,!1);let c,d=Xt.Default;for(let m=0;m<a.length;m++){const E=a[m],M=Ni(E);"number"==typeof M?-1===M?c=E.token:d|=M:c=E}r.push(yt(c,d))}else r.push(yt(a))}return r}function dr(t,r){return t[wn]=r,t.prototype[wn]=r,t}function Ni(t){return t[wn]}function We(t){return{toString:t}.toString()}var Re=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Re||{}),ut=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(ut||{});const kt={},wt=[],mn=oe({\u0275cmp:oe}),En=oe({\u0275dir:oe}),Tr=oe({\u0275pipe:oe}),hr=oe({\u0275mod:oe}),Rr=oe({\u0275fac:oe}),xi=oe({__NG_ELEMENT_ID__:oe}),ys=oe({__NG_ENV_ID__:oe});function fi(t,r,s){let a=t.length;for(;;){const c=t.indexOf(r,s);if(-1===c)return c;if(0===c||t.charCodeAt(c-1)<=32){const d=r.length;if(c+d===a||t.charCodeAt(c+d)<=32)return c}s=c+1}}function Rs(t,r,s){let a=0;for(;a<s.length;){const c=s[a];if("number"==typeof c){if(0!==c)break;a++;const d=s[a++],m=s[a++],E=s[a++];t.setAttribute(r,m,E,d)}else{const d=c,m=s[++a];Os(d)?t.setProperty(r,d,m):t.setAttribute(r,d,m),a++}}return a}function oi(t){return 3===t||4===t||6===t}function Os(t){return 64===t.charCodeAt(0)}function To(t,r){if(null!==r&&0!==r.length)if(null===t||0===t.length)t=r.slice();else{let s=-1;for(let a=0;a<r.length;a++){const c=r[a];"number"==typeof c?s=c:0===s||Ts(t,s,c,null,-1===s||2===s?r[++a]:null)}}return t}function Ts(t,r,s,a,c){let d=0,m=t.length;if(-1===r)m=-1;else for(;d<t.length;){const E=t[d++];if("number"==typeof E){if(E===r){m=-1;break}if(E>r){m=d-1;break}}}for(;d<t.length;){const E=t[d];if("number"==typeof E)break;if(E===s){if(null===a)return void(null!==c&&(t[d+1]=c));if(a===t[d+1])return void(t[d+2]=c)}d++,null!==a&&d++,null!==c&&d++}-1!==m&&(t.splice(m,0,r),d=m+1),t.splice(d++,0,s),null!==a&&t.splice(d++,0,a),null!==c&&t.splice(d++,0,c)}const Lr="ng-template";function ns(t,r,s){let a=0,c=!0;for(;a<t.length;){let d=t[a++];if("string"==typeof d&&c){const m=t[a++];if(s&&"class"===d&&-1!==fi(m.toLowerCase(),r,0))return!0}else{if(1===d){for(;a<t.length&&"string"==typeof(d=t[a++]);)if(d.toLowerCase()===r)return!0;return!1}"number"==typeof d&&(c=!1)}}return!1}function Zi(t){return 4===t.type&&t.value!==Lr}function mo(t,r,s){return r===(4!==t.type||s?t.value:Lr)}function yo(t,r,s){let a=4;const c=t.attrs||[],d=function vt(t){for(let r=0;r<t.length;r++)if(oi(t[r]))return r;return t.length}(c);let m=!1;for(let E=0;E<r.length;E++){const M=r[E];if("number"!=typeof M){if(!m)if(4&a){if(a=2|1&a,""!==M&&!mo(t,M,s)||""===M&&1===r.length){if(De(a))return!1;m=!0}}else{const F=8&a?M:r[++E];if(8&a&&null!==t.attrs){if(!ns(t.attrs,F,s)){if(De(a))return!1;m=!0}continue}const ue=we(8&a?"class":M,c,Zi(t),s);if(-1===ue){if(De(a))return!1;m=!0;continue}if(""!==F){let Ce;Ce=ue>d?"":c[ue+1].toLowerCase();const Pe=8&a?Ce:null;if(Pe&&-1!==fi(Pe,F,0)||2&a&&F!==Ce){if(De(a))return!1;m=!0}}}}else{if(!m&&!De(a)&&!De(M))return!1;if(m&&De(M))continue;m=!1,a=M|1&a}}return De(a)||m}function De(t){return 0==(1&t)}function we(t,r,s,a){if(null===r)return-1;let c=0;if(a||!s){let d=!1;for(;c<r.length;){const m=r[c];if(m===t)return c;if(3===m||6===m)d=!0;else{if(1===m||2===m){let E=r[++c];for(;"string"==typeof E;)E=r[++c];continue}if(4===m)break;if(0===m){c+=4;continue}}c+=d?1:2}return-1}return function Zt(t,r){let s=t.indexOf(4);if(s>-1)for(s++;s<t.length;){const a=t[s];if("number"==typeof a)return-1;if(a===r)return s;s++}return-1}(r,t)}function Ne(t,r,s=!1){for(let a=0;a<r.length;a++)if(yo(t,r[a],s))return!0;return!1}function Bn(t,r){e:for(let s=0;s<r.length;s++){const a=r[s];if(t.length===a.length){for(let c=0;c<t.length;c++)if(t[c]!==a[c])continue e;return!0}}return!1}function Dn(t,r){return t?":not("+r.trim()+")":r}function $n(t){let r=t[0],s=1,a=2,c="",d=!1;for(;s<t.length;){let m=t[s];if("string"==typeof m)if(2&a){const E=t[++s];c+="["+m+(E.length>0?'="'+E+'"':"")+"]"}else 8&a?c+="."+m:4&a&&(c+=" "+m);else""!==c&&!De(m)&&(r+=Dn(d,c),c=""),a=m,d=d||!De(a);s++}return""!==c&&(r+=Dn(d,c)),r}function $i(t){return We(()=>{const r=Ws(t),s={...r,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Re.OnPush,directiveDefs:null,pipeDefs:null,dependencies:r.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||ut.Emulated,styles:t.styles||wt,_:null,schemas:t.schemas||null,tView:null,id:""};_o(s);const a=t.dependencies;return s.directiveDefs=As(a,!1),s.pipeDefs=As(a,!0),s.id=function Oi(t){let r=0;const s=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const c of s)r=Math.imul(31,r)+c.charCodeAt(0)<<0;return r+=2147483648,"c"+r}(s),s})}function Jo(t){return Hn(t)||ti(t)}function Gs(t){return null!==t}function So(t){return We(()=>({type:t.type,bootstrap:t.bootstrap||wt,declarations:t.declarations||wt,imports:t.imports||wt,exports:t.exports||wt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function so(t,r){if(null==t)return kt;const s={};for(const a in t)if(t.hasOwnProperty(a)){let c=t[a],d=c;Array.isArray(c)&&(d=c[1],c=c[0]),s[c]=a,r&&(r[c]=d)}return s}function vo(t){return We(()=>{const r=Ws(t);return _o(r),r})}function Uo(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function Hn(t){return t[mn]||null}function ti(t){return t[En]||null}function Ci(t){return t[Tr]||null}function vs(t){const r=Hn(t)||ti(t)||Ci(t);return null!==r&&r.standalone}function Vr(t,r){const s=t[hr]||null;if(!s&&!0===r)throw new Error(`Type ${Te(t)} does not have '\u0275mod' property.`);return s}function Ws(t){const r={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:r,inputTransforms:null,inputConfig:t.inputs||kt,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||wt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:so(t.inputs,r),outputs:so(t.outputs)}}function _o(t){t.features?.forEach(r=>r(t))}function As(t,r){if(!t)return null;const s=r?Ci:Jo;return()=>("function"==typeof t?t():t).map(a=>s(a)).filter(Gs)}const ar=0,It=1,Cn=2,Er=3,ai=4,ks=5,Pi=6,Ms=7,Sr=8,gi=9,ui=10,nn=11,bi=12,rs=13,Fs=14,Yr=15,Ns=16,is=17,mi=18,Yi=19,Ao=20,ss=21,Hi=22,os=23,Hr=24,Rn=25,ta=1,qs=2,ci=7,as=9,Gr=11;function ki(t){return Array.isArray(t)&&"object"==typeof t[ta]}function zn(t){return Array.isArray(t)&&!0===t[ta]}function zi(t){return 0!=(4&t.flags)}function _s(t){return t.componentOffset>-1}function Ti(t){return 1==(1&t.flags)}function Es(t){return!!t.template}function Eo(t){return 0!=(512&t[Cn])}function cs(t,r){return t.hasOwnProperty(Rr)?t[Rr]:null}let Wr=null,ha=!1;function Qi(t){const r=Wr;return Wr=t,r}const na={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function ra(t){if(!Xs(t)||t.dirty){if(!t.producerMustRecompute(t)&&!Qs(t))return void(t.dirty=!1);t.producerRecomputeValue(t),t.dirty=!1}}function pa(t){t.dirty=!0,function xs(t){if(void 0===t.liveConsumerNode)return;const r=ha;ha=!0;try{for(const s of t.liveConsumerNode)s.dirty||pa(s)}finally{ha=r}}(t),t.consumerMarkedDirty?.(t)}function Ys(t){return t&&(t.nextProducerIndex=0),Qi(t)}function vi(t,r){if(Qi(r),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(Xs(t))for(let s=t.nextProducerIndex;s<t.producerNode.length;s++)Ls(t.producerNode[s],t.producerIndexOfThis[s]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Qs(t){_i(t);for(let r=0;r<t.producerNode.length;r++){const s=t.producerNode[r],a=t.producerLastReadVersion[r];if(a!==s.version||(ra(s),a!==s.version))return!0}return!1}function $o(t){if(_i(t),Xs(t))for(let r=0;r<t.producerNode.length;r++)Ls(t.producerNode[r],t.producerIndexOfThis[r]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Ls(t,r){if(function ga(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}(t),_i(t),1===t.liveConsumerNode.length)for(let a=0;a<t.producerNode.length;a++)Ls(t.producerNode[a],t.producerIndexOfThis[a]);const s=t.liveConsumerNode.length-1;if(t.liveConsumerNode[r]=t.liveConsumerNode[s],t.liveConsumerIndexOfThis[r]=t.liveConsumerIndexOfThis[s],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,r<t.liveConsumerNode.length){const a=t.liveConsumerIndexOfThis[r],c=t.liveConsumerNode[r];_i(c),c.producerIndexOfThis[a]=r}}function Xs(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function _i(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}let Vi=null;function de(t){const r=Qi(null);try{return t()}finally{Qi(r)}}const st=()=>{},sn=(()=>({...na,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{t.schedule(t.ref)},hasRun:!1,cleanupFn:st}))();class rr{constructor(r,s,a){this.previousValue=r,this.currentValue=s,this.firstChange=a}isFirstChange(){return this.firstChange}}function ir(){return un}function un(t){return t.type.prototype.ngOnChanges&&(t.setInput=Gn),Br}function Br(){const t=Js(this),r=t?.current;if(r){const s=t.previous;if(s===kt)t.previous=r;else for(let a in r)s[a]=r[a];t.current=null,this.ngOnChanges(r)}}function Gn(t,r,s,a){const c=this.declaredInputs[s],d=Js(t)||function dt(t,r){return t[qr]=r}(t,{previous:kt,current:null}),m=d.current||(d.current={}),E=d.previous,M=E[c];m[c]=new rr(M&&M.currentValue,r,E===kt),t[a]=r}ir.ngInherit=!0;const qr="__ngSimpleChanges__";function Js(t){return t[qr]||null}const Fi=function(t,r,s){},Bt="svg";function Ur(t){for(;Array.isArray(t);)t=t[ar];return t}function Ue(t,r){return Ur(r[t])}function ot(t,r){return Ur(r[t.index])}function Iu(t,r){return t.data[r]}function Bs(t,r){const s=r[t];return ki(s)?s:s[ar]}function Fo(t,r){return null==r?null:t[r]}function gc(t){t[is]=0}function Wa(t){1024&t[Cn]||(t[Cn]|=1024,Wi(t,1))}function Ku(t){1024&t[Cn]&&(t[Cn]&=-1025,Wi(t,-1))}function Wi(t,r){let s=t[Er];if(null===s)return;s[ks]+=r;let a=s;for(s=s[Er];null!==s&&(1===r&&1===a[ks]||-1===r&&0===a[ks]);)s[ks]+=r,a=s,s=s[Er]}const bn={lFrame:k(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function tr(){return bn.bindingsEnabled}function Ot(){return null!==bn.skipHydrationRootTNode}function lt(){return bn.lFrame.lView}function sr(){return bn.lFrame.tView}function zo(t){return bn.lFrame.contextLView=t,t[Sr]}function H(t){return bn.lFrame.contextLView=null,t}function y(){let t=I();for(;null!==t&&64===t.type;)t=t.parent;return t}function I(){return bn.lFrame.currentTNode}function G(t,r){const s=bn.lFrame;s.currentTNode=t,s.isParent=r}function ie(){return bn.lFrame.isParent}function ve(){bn.lFrame.isParent=!1}function Dt(){const t=bn.lFrame;let r=t.bindingRootIndex;return-1===r&&(r=t.bindingRootIndex=t.tView.bindingStartIndex),r}function Tn(){return bn.lFrame.bindingIndex++}function Kt(t){const r=bn.lFrame,s=r.bindingIndex;return r.bindingIndex=r.bindingIndex+t,s}function Bi(t,r){const s=bn.lFrame;s.bindingIndex=s.bindingRootIndex=t,Pr(r)}function Pr(t){bn.lFrame.currentDirectiveIndex=t}function lo(){return bn.lFrame.currentQueryIndex}function ho(t){bn.lFrame.currentQueryIndex=t}function _(t){const r=t[It];return 2===r.type?r.declTNode:1===r.type?t[Pi]:null}function S(t,r,s){if(s&Xt.SkipSelf){let c=r,d=t;for(;!(c=c.parent,null!==c||s&Xt.Host||(c=_(d),null===c||(d=d[Fs],10&c.type))););if(null===c)return!1;r=c,t=d}const a=bn.lFrame=A();return a.currentTNode=r,a.lView=t,!0}function v(t){const r=A(),s=t[It];bn.lFrame=r,r.currentTNode=s.firstChild,r.lView=t,r.tView=s,r.contextLView=t,r.bindingIndex=s.bindingStartIndex,r.inI18n=!1}function A(){const t=bn.lFrame,r=null===t?null:t.child;return null===r?k(t):r}function k(t){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=r),r}function Z(){const t=bn.lFrame;return bn.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const ce=Z;function $e(){const t=Z();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function ft(){return bn.lFrame.selectedIndex}function xt(t){bn.lFrame.selectedIndex=t}function At(){const t=bn.lFrame;return Iu(t.tView,t.selectedIndex)}function fr(){bn.lFrame.currentNamespace=Bt}let ia=!0;function eu(){return ia}function Ai(t){ia=t}function Ji(t,r){for(let s=r.directiveStart,a=r.directiveEnd;s<a;s++){const d=t.data[s].type.prototype,{ngAfterContentInit:m,ngAfterContentChecked:E,ngAfterViewInit:M,ngAfterViewChecked:F,ngOnDestroy:Y}=d;m&&(t.contentHooks??=[]).push(-s,m),E&&((t.contentHooks??=[]).push(s,E),(t.contentCheckHooks??=[]).push(s,E)),M&&(t.viewHooks??=[]).push(-s,M),F&&((t.viewHooks??=[]).push(s,F),(t.viewCheckHooks??=[]).push(s,F)),null!=Y&&(t.destroyHooks??=[]).push(s,Y)}}function tu(t,r,s){zc(t,r,3,s)}function wa(t,r,s,a){(3&t[Cn])===s&&zc(t,r,s,a)}function yc(t,r){let s=t[Cn];(3&s)===r&&(s&=8191,s+=1,t[Cn]=s)}function zc(t,r,s,a){const d=a??-1,m=r.length-1;let E=0;for(let M=void 0!==a?65535&t[is]:0;M<m;M++)if("number"==typeof r[M+1]){if(E=r[M],null!=a&&E>=a)break}else r[M]<0&&(t[is]+=65536),(E<d||-1==d)&&(js(t,s,r,M),t[is]=(4294901760&t[is])+M+2),M++}function Du(t,r){Fi(4,t,r);const s=Qi(null);try{r.call(t)}finally{Qi(s),Fi(5,t,r)}}function js(t,r,s,a){const c=s[a]<0,d=s[a+1],E=t[c?-s[a]:s[a]];c?t[Cn]>>13<t[is]>>16&&(3&t[Cn])===r&&(t[Cn]+=8192,Du(E,d)):Du(E,d)}const Go=-1;class Ia{constructor(r,s,a){this.factory=r,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=a}}function Zu(t){return t!==Go}function bu(t){return 32767&t}function Yu(t,r){let s=function hs(t){return t>>16}(t),a=r;for(;s>0;)a=a[Fs],s--;return a}let ka=!0;function wi(t){const r=ka;return ka=t,r}const Qu=255,Tu=5;let Xu=0;const qo={};function Lo(t,r){const s=Da(t,r);if(-1!==s)return s;const a=r[It];a.firstCreatePass&&(t.injectorIndex=r.length,ru(a.data,t),ru(r,null),ru(a.blueprint,null));const c=Co(t,r),d=t.injectorIndex;if(Zu(c)){const m=bu(c),E=Yu(c,r),M=E[It].data;for(let F=0;F<8;F++)r[d+F]=E[m+F]|M[m+F]}return r[d+8]=c,d}function ru(t,r){t.push(0,0,0,0,0,0,0,0,r)}function Da(t,r){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===r[t.injectorIndex+8]?-1:t.injectorIndex}function Co(t,r){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let s=0,a=null,c=r;for(;null!==c;){if(a=Nl(c),null===a)return Go;if(s++,c=c[Fs],-1!==a.injectorIndex)return a.injectorIndex|s<<16}return Go}function La(t,r,s){!function Fa(t,r,s){let a;"string"==typeof s?a=s.charCodeAt(0)||0:s.hasOwnProperty(xi)&&(a=s[xi]),null==a&&(a=s[xi]=Xu++);const c=a&Qu;r.data[t+(c>>Tu)]|=1<<c}(t,r,s)}function Su(t,r,s){if(s&Xt.Optional||void 0!==t)return t;en()}function qa(t,r,s,a){if(s&Xt.Optional&&void 0===a&&(a=null),!(s&(Xt.Self|Xt.Host))){const c=t[gi],d=vn(void 0);try{return c?c.get(r,a,s&Xt.Optional):_r(r,a,s&Xt.Optional)}finally{vn(d)}}return Su(a,0,s)}function hu(t,r,s,a=Xt.Default,c){if(null!==t){if(2048&r[Cn]&&!(a&Xt.Self)){const m=function fo(t,r,s,a,c){let d=t,m=r;for(;null!==d&&null!==m&&2048&m[Cn]&&!(512&m[Cn]);){const E=Ka(d,m,s,a|Xt.Self,qo);if(E!==qo)return E;let M=d.parent;if(!M){const F=m[Ao];if(F){const Y=F.get(s,qo,a);if(Y!==qo)return Y}M=Nl(m),m=m[Fs]}d=M}return c}(t,r,s,a,qo);if(m!==qo)return m}const d=Ka(t,r,s,a,qo);if(d!==qo)return d}return qa(r,s,a,c)}function Ka(t,r,s,a,c){const d=function vc(t){if("string"==typeof t)return t.charCodeAt(0)||0;const r=t.hasOwnProperty(xi)?t[xi]:void 0;return"number"==typeof r?r>=0?r&Qu:fu:r}(s);if("function"==typeof d){if(!S(r,t,a))return a&Xt.Host?Su(c,0,a):qa(r,s,a,c);try{let m;if(m=d(a),null!=m||a&Xt.Optional)return m;en()}finally{ce()}}else if("number"==typeof d){let m=null,E=Da(t,r),M=Go,F=a&Xt.Host?r[Yr][Pi]:null;for((-1===E||a&Xt.SkipSelf)&&(M=-1===E?Co(t,r):r[E+8],M!==Go&&Ba(a,!1)?(m=r[It],E=bu(M),r=Yu(M,r)):E=-1);-1!==E;){const Y=r[It];if(Gc(d,E,Y.data)){const ue=Au(E,r,s,m,a,F);if(ue!==qo)return ue}M=r[E+8],M!==Go&&Ba(a,r[It].data[E+8]===F)&&Gc(d,E,r)?(m=Y,E=bu(M),r=Yu(M,r)):E=-1}}return c}function Au(t,r,s,a,c,d){const m=r[It],E=m.data[t+8],Y=Ju(E,m,s,null==a?_s(E)&&ka:a!=m&&0!=(3&E.type),c&Xt.Host&&d===E);return null!==Y?Va(r,m,Y,E):qo}function Ju(t,r,s,a,c){const d=t.providerIndexes,m=r.data,E=1048575&d,M=t.directiveStart,Y=d>>20,Ce=c?E+Y:t.directiveEnd;for(let Pe=a?E:E+Y;Pe<Ce;Pe++){const ct=m[Pe];if(Pe<M&&s===ct||Pe>=M&&ct.type===s)return Pe}if(c){const Pe=m[M];if(Pe&&Es(Pe)&&Pe.type===s)return M}return null}function Va(t,r,s,a){let c=t[s];const d=r.data;if(function gd(t){return t instanceof Ia}(c)){const m=c;m.resolving&&function pt(t,r){const s=r?`. Dependency path: ${r.join(" > ")} > ${t}`:"";throw new le(-200,`Circular dependency in DI detected for ${t}${s}`)}(function Ze(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Oe(t)}(d[s]));const E=wi(m.canSeeViewProviders);m.resolving=!0;const F=m.injectImpl?vn(m.injectImpl):null;S(t,a,Xt.Default);try{c=t[s]=m.factory(void 0,d,t,a),r.firstCreatePass&&s>=a.directiveStart&&function Us(t,r,s){const{ngOnChanges:a,ngOnInit:c,ngDoCheck:d}=r.type.prototype;if(a){const m=un(r);(s.preOrderHooks??=[]).push(t,m),(s.preOrderCheckHooks??=[]).push(t,m)}c&&(s.preOrderHooks??=[]).push(0-t,c),d&&((s.preOrderHooks??=[]).push(t,d),(s.preOrderCheckHooks??=[]).push(t,d))}(s,d[s],r)}finally{null!==F&&vn(F),wi(E),m.resolving=!1,ce()}}return c}function Gc(t,r,s){return!!(s[r+(t>>Tu)]&1<<t)}function Ba(t,r){return!(t&Xt.Self||t&Xt.Host&&r)}class $s{constructor(r,s){this._tNode=r,this._lView=s}get(r,s,a){return hu(this._tNode,this._lView,r,_n(a),s)}}function fu(){return new $s(y(),lt())}function Wc(t){return We(()=>{const r=t.prototype.constructor,s=r[Rr]||Ua(r),a=Object.prototype;let c=Object.getPrototypeOf(t.prototype).constructor;for(;c&&c!==a;){const d=c[Rr]||Ua(c);if(d&&d!==s)return d;c=Object.getPrototypeOf(c)}return d=>new d})}function Ua(t){return Qt(t)?()=>{const r=Ua(ht(t));return r&&r()}:cs(t)}function Nl(t){const r=t[It],s=r.type;return 2===s?r.declTNode:1===s?t[Pi]:null}function li(t){return function Ca(t,r){if("class"===r)return t.classes;if("style"===r)return t.styles;const s=t.attrs;if(s){const a=s.length;let c=0;for(;c<a;){const d=s[c];if(oi(d))break;if(0===d)c+=2;else if("number"==typeof d)for(c++;c<a&&"string"==typeof s[c];)c++;else{if(d===r)return s[c+1];c+=2}}}return null}(y(),t)}const pu="__parameters__";function B(t,r,s){return We(()=>{const a=function N(t){return function(...s){if(t){const a=t(...s);for(const c in a)this[c]=a[c]}}}(r);function c(...d){if(this instanceof c)return a.apply(this,d),this;const m=new c(...d);return E.annotation=m,E;function E(M,F,Y){const ue=M.hasOwnProperty(pu)?M[pu]:Object.defineProperty(M,pu,{value:[]})[pu];for(;ue.length<=Y;)ue.push(null);return(ue[Y]=ue[Y]||[]).push(m),M}}return s&&(c.prototype=Object.create(s.prototype)),c.prototype.ngMetadataName=t,c.annotationCls=c,c})}function gu(t,r){t.forEach(s=>Array.isArray(s)?gu(s,r):r(s))}function Bf(t,r,s){r>=t.length?t.push(s):t.splice(r,0,s)}function _c(t,r){return r>=t.length-1?t.pop():t.splice(r,1)[0]}function Mu(t,r){const s=[];for(let a=0;a<t;a++)s.push(r);return s}function sa(t,r,s){let a=oa(t,r);return a>=0?t[1|a]=s:(a=~a,function Zc(t,r,s,a){let c=t.length;if(c==r)t.push(s,a);else if(1===c)t.push(a,t[0]),t[0]=s;else{for(c--,t.push(t[c-1],t[c]);c>r;)t[c]=t[c-2],c--;t[r]=s,t[r+1]=a}}(t,a,r,s)),a}function xl(t,r){const s=oa(t,r);if(s>=0)return t[1|s]}function oa(t,r){return function Nu(t,r,s){let a=0,c=t.length>>s;for(;c!==a;){const d=a+(c-a>>1),m=t[d<<s];if(r===m)return d<<s;m>r?c=d:a=d+1}return~(c<<s)}(t,r,1)}const Ye=dr(B("Optional"),8),Ut=dr(B("SkipSelf"),4);function su(t){return 128==(128&t.flags)}var Cd=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Cd||{});const Gg=/^>|^->|<!--|-->|--!>|<!-$/g,Ll=/(<|>)/g,Gf="\u200b$1\u200b";const bd=new Map;let Wf=0;const Rh="__ngContext__";function aa(t,r){ki(r)?(t[Rh]=r[Yi],function dv(t){bd.set(t[Yi],t)}(r)):t[Rh]=r}let Ph;function kh(t,r){return Ph(t,r)}function xd(t){const r=t[Er];return zn(r)?r[Er]:r}function Fh(t){return Zf(t[bi])}function tl(t){return Zf(t[ai])}function Zf(t){for(;null!==t&&!zn(t);)t=t[ai];return t}function Ul(t,r,s,a,c){if(null!=a){let d,m=!1;zn(a)?d=a:ki(a)&&(m=!0,a=a[ar]);const E=Ur(a);0===t&&null!==s?null==c?Xg(r,s,E):Ic(r,s,E,c||null,!0):1===t&&null!==s?Ic(r,s,E,c||null,!0):2===t?function Ou(t,r,s){const a=$h(t,r);a&&function yv(t,r,s,a){t.removeChild(r,s,a)}(t,a,r,s)}(r,E,m):3===t&&r.destroyNode(E),null!=d&&function rp(t,r,s,a,c){const d=s[ci];d!==Ur(s)&&Ul(r,t,a,d,c);for(let E=Gr;E<s.length;E++){const M=s[E];rc(M[It],M,t,r,a,d)}}(r,t,d,s,c)}}function Vh(t,r){return t.createComment(function xh(t){return t.replace(Gg,r=>r.replace(Ll,Gf))}(r))}function wc(t,r,s){return t.createElement(r,s)}function Qf(t,r){const s=t[as],a=s.indexOf(r);Ku(r),s.splice(a,1)}function Bh(t,r){if(t.length<=Gr)return;const s=Gr+r,a=t[s];if(a){const c=a[Ns];null!==c&&c!==t&&Qf(c,a),r>0&&(t[s-1][ai]=a[ai]);const d=_c(t,Gr+r);!function xu(t,r){rc(t,r,r[nn],2,null,null),r[ar]=null,r[Pi]=null}(a[It],a);const m=d[mi];null!==m&&m.detachView(d[It]),a[Er]=null,a[ai]=null,a[Cn]&=-129}return a}function Xf(t,r){if(!(256&r[Cn])){const s=r[nn];r[os]&&$o(r[os]),r[Hr]&&$o(r[Hr]),s.destroyNode&&rc(t,r,s,3,null,null),function Rd(t){let r=t[bi];if(!r)return nl(t[It],t);for(;r;){let s=null;if(ki(r))s=r[bi];else{const a=r[Gr];a&&(s=a)}if(!s){for(;r&&!r[ai]&&r!==t;)ki(r)&&nl(r[It],r),r=r[Er];null===r&&(r=t),ki(r)&&nl(r[It],r),s=r&&r[ai]}r=s}}(r)}}function nl(t,r){if(!(256&r[Cn])){r[Cn]&=-129,r[Cn]|=256,function mv(t,r){let s;if(null!=t&&null!=(s=t.destroyHooks))for(let a=0;a<s.length;a+=2){const c=r[s[a]];if(!(c instanceof Ia)){const d=s[a+1];if(Array.isArray(d))for(let m=0;m<d.length;m+=2){const E=c[d[m]],M=d[m+1];Fi(4,E,M);try{M.call(E)}finally{Fi(5,E,M)}}else{Fi(4,c,d);try{d.call(c)}finally{Fi(5,c,d)}}}}}(t,r),function Jf(t,r){const s=t.cleanup,a=r[Ms];if(null!==s)for(let d=0;d<s.length-1;d+=2)if("string"==typeof s[d]){const m=s[d+3];m>=0?a[m]():a[-m].unsubscribe(),d+=2}else s[d].call(a[s[d+1]]);null!==a&&(r[Ms]=null);const c=r[ss];if(null!==c){r[ss]=null;for(let d=0;d<c.length;d++)(0,c[d])()}}(t,r),1===r[It].type&&r[nn].destroy();const s=r[Ns];if(null!==s&&zn(r[Er])){s!==r[Er]&&Qf(s,r);const a=r[mi];null!==a&&a.detachView(t)}!function Xr(t){bd.delete(t[Yi])}(r)}}function Uh(t,r,s){return function jh(t,r,s){let a=r;for(;null!==a&&40&a.type;)a=(r=a).parent;if(null===a)return s[ar];{const{componentOffset:c}=a;if(c>-1){const{encapsulation:d}=t.data[a.directiveStart+c];if(d===ut.None||d===ut.Emulated)return null}return ot(a,s)}}(t,r.parent,s)}function Ic(t,r,s,a,c){t.insertBefore(r,s,a,c)}function Xg(t,r,s){t.appendChild(r,s)}function ep(t,r,s,a,c){null!==a?Ic(t,r,s,a,c):Xg(t,r,s)}function $h(t,r){return t.parentNode(r)}function rl(t,r,s){return Jg(t,r,s)}let Hh,kd,sp,Fu,Jg=function tp(t,r,s){return 40&t.type?ot(t,s):null};function Od(t,r,s,a){const c=Uh(t,a,r),d=r[nn],E=rl(a.parent||r[Pi],a,r);if(null!=c)if(Array.isArray(s))for(let M=0;M<s.length;M++)ep(d,c,s[M],E,!1);else ep(d,c,s,E,!1);void 0!==Hh&&Hh(d,a,r,s,c)}function Pd(t,r){if(null!==r){const s=r.type;if(3&s)return ot(r,t);if(4&s)return jl(-1,t[r.index]);if(8&s){const a=r.child;if(null!==a)return Pd(t,a);{const c=t[r.index];return zn(c)?jl(-1,c):Ur(c)}}if(32&s)return kh(r,t)()||Ur(t[r.index]);{const a=np(t,r);return null!==a?Array.isArray(a)?a[0]:Pd(xd(t[Yr]),a):Pd(t,r.next)}}return null}function np(t,r){return null!==r?t[Yr][Pi].projection[r.projection]:null}function jl(t,r){const s=Gr+t+1;if(s<r.length){const a=r[s],c=a[It].firstChild;if(null!==c)return Pd(a,c)}return r[ci]}function nc(t,r,s,a,c,d,m){for(;null!=s;){const E=a[s.index],M=s.type;if(m&&0===r&&(E&&aa(Ur(E),a),s.flags|=2),32!=(32&s.flags))if(8&M)nc(t,r,s.child,a,c,d,!1),Ul(r,t,c,E,d);else if(32&M){const F=kh(s,a);let Y;for(;Y=F();)Ul(r,t,c,Y,d);Ul(r,t,c,E,d)}else 16&M?zh(t,r,a,s,c,d):Ul(r,t,c,E,d);s=m?s.projectionNext:s.next}}function rc(t,r,s,a,c,d){nc(s,a,t.firstChild,r,c,d,!1)}function zh(t,r,s,a,c,d){const m=s[Yr],M=m[Pi].projection[a.projection];if(Array.isArray(M))for(let F=0;F<M.length;F++)Ul(r,t,c,M[F],d);else{let F=M;const Y=m[Er];su(a)&&(F.flags|=128),nc(t,r,F,Y,c,d,!0)}}function rm(t,r,s){""===s?t.removeAttribute(r,"class"):t.setAttribute(r,"class",s)}function ip(t,r,s){const{mergedAttrs:a,classes:c,styles:d}=s;null!==a&&Rs(t,r,a),null!==c&&rm(t,r,c),null!==d&&function nm(t,r,s){t.setAttribute(r,"style",s)}(t,r,d)}function $l(){if(void 0===kd&&(kd=null,Vn.trustedTypes))try{kd=Vn.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return kd}function Pu(t){return $l()?.createHTML(t)||t}function wv(t){sp=t}function ku(){if(void 0!==sp)return sp;if(typeof document<"u")return document;throw new le(210,!1)}function Lu(){if(void 0===Fu&&(Fu=null,Vn.trustedTypes))try{Fu=Vn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Fu}function op(t){return Lu()?.createHTML(t)||t}function ap(t){return Lu()?.createScriptURL(t)||t}class sl{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${bt})`}}class up extends sl{getTypeName(){return"HTML"}}class cp extends sl{getTypeName(){return"Style"}}class sm extends sl{getTypeName(){return"Script"}}class lp extends sl{getTypeName(){return"URL"}}class dp extends sl{getTypeName(){return"ResourceURL"}}function Vu(t){return t instanceof sl?t.changingThisBreaksApplicationSecurity:t}function ic(t,r){const s=function Iv(t){return t instanceof sl&&t.getTypeName()||null}(t);if(null!=s&&s!==r){if("ResourceURL"===s&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${s} (see ${bt})`)}return s===r}function hp(t){return new up(t)}function Gh(t){return new cp(t)}function Dv(t){return new sm(t)}function om(t){return new lp(t)}function Fd(t){return new dp(t)}class Vd{constructor(r){this.inertDocumentHelper=r}getInertBodyElement(r){r="<body><remove></remove>"+r;try{const s=(new window.DOMParser).parseFromString(Pu(r),"text/html").body;return null===s?this.inertDocumentHelper.getInertBodyElement(r):(s.removeChild(s.firstChild),s)}catch{return null}}}class am{constructor(r){this.defaultDoc=r,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(r){const s=this.inertDocument.createElement("template");return s.innerHTML=Pu(r),s}}const ua=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Bd(t){return(t=String(t)).match(ua)?t:"unsafe:"+t}function ou(t){const r={};for(const s of t.split(","))r[s]=!0;return r}function bc(...t){const r={};for(const s of t)for(const a in s)s.hasOwnProperty(a)&&(r[a]=!0);return r}const fp=ou("area,br,col,hr,img,wbr"),sc=ou("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),ol=ou("rp,rt"),Tc=bc(fp,bc(sc,ou("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),bc(ol,ou("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),bc(ol,sc)),Wh=ou("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),cm=bc(Wh,ou("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ou("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),lm=ou("script,style,template");class Tv{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(r){let s=r.firstChild,a=!0;for(;s;)if(s.nodeType===Node.ELEMENT_NODE?a=this.startElement(s):s.nodeType===Node.TEXT_NODE?this.chars(s.nodeValue):this.sanitizedSomething=!0,a&&s.firstChild)s=s.firstChild;else for(;s;){s.nodeType===Node.ELEMENT_NODE&&this.endElement(s);let c=this.checkClobberedElement(s,s.nextSibling);if(c){s=c;break}s=this.checkClobberedElement(s,s.parentNode)}return this.buf.join("")}startElement(r){const s=r.nodeName.toLowerCase();if(!Tc.hasOwnProperty(s))return this.sanitizedSomething=!0,!lm.hasOwnProperty(s);this.buf.push("<"),this.buf.push(s);const a=r.attributes;for(let c=0;c<a.length;c++){const d=a.item(c),m=d.name,E=m.toLowerCase();if(!cm.hasOwnProperty(E)){this.sanitizedSomething=!0;continue}let M=d.value;Wh[E]&&(M=Bd(M)),this.buf.push(" ",m,'="',Ud(M),'"')}return this.buf.push(">"),!0}endElement(r){const s=r.nodeName.toLowerCase();Tc.hasOwnProperty(s)&&!fp.hasOwnProperty(s)&&(this.buf.push("</"),this.buf.push(s),this.buf.push(">"))}chars(r){this.buf.push(Ud(r))}checkClobberedElement(r,s){if(s&&(r.compareDocumentPosition(s)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${r.outerHTML}`);return s}}const dm=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Sv=/([^\#-~ |!])/g;function Ud(t){return t.replace(/&/g,"&amp;").replace(dm,function(r){return"&#"+(1024*(r.charCodeAt(0)-55296)+(r.charCodeAt(1)-56320)+65536)+";"}).replace(Sv,function(r){return"&#"+r.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let jd;function hm(t,r){let s=null;try{jd=jd||function Ld(t){const r=new am(t);return function um(){try{return!!(new window.DOMParser).parseFromString(Pu(""),"text/html")}catch{return!1}}()?new Vd(r):r}(t);let a=r?String(r):"";s=jd.getInertBodyElement(a);let c=5,d=a;do{if(0===c)throw new Error("Failed to sanitize html because the input is unstable");c--,a=d,d=s.innerHTML,s=jd.getInertBodyElement(a)}while(a!==d);return Pu((new Tv).sanitizeChildren(qh(s)||s))}finally{if(s){const a=qh(s)||s;for(;a.firstChild;)a.removeChild(a.firstChild)}}}function qh(t){return"content"in t&&function Av(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var Sc=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Sc||{});function Ac(t){const r=Hd();return r?op(r.sanitize(Sc.HTML,t)||""):ic(t,"HTML")?op(Vu(t)):hm(ku(),Oe(t))}function pp(t){const r=Hd();return r?r.sanitize(Sc.URL,t)||"":ic(t,"URL")?Vu(t):Bd(Oe(t))}function gp(t){const r=Hd();if(r)return ap(r.sanitize(Sc.RESOURCE_URL,t)||"");if(ic(t,"ResourceURL"))return ap(Vu(t));throw new le(904,!1)}function pm(t){return function vv(t){return $l()?.createScriptURL(t)||t}(t[0])}function Kh(t,r,s){return function Nv(t,r){return"src"===r&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===r&&("base"===t||"link"===t)?gp:pp}(r,s)(t)}function Hd(){const t=lt();return t&&t[ui].sanitizer}class Ii{constructor(r,s){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=Ht({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const zd=new Ii("ENVIRONMENT_INITIALIZER"),Zh=new Ii("INJECTOR",-1),gm=new Ii("INJECTOR_DEF_TYPES");class zl{get(r,s=Zn){if(s===Zn){const a=new Error(`NullInjectorError: No provider for ${Te(r)}!`);throw a.name="NullInjectorError",a}return s}}function xv(...t){return{\u0275providers:mp(0,t),\u0275fromNgModule:!0}}function mp(t,...r){const s=[],a=new Set;let c;const d=m=>{s.push(m)};return gu(r,m=>{const E=m;Gl(E,d,[],a)&&(c||=[],c.push(E))}),void 0!==c&&Yh(c,d),s}function Yh(t,r){for(let s=0;s<t.length;s++){const{ngModule:a,providers:c}=t[s];Wl(c,d=>{r(d,a)})}}function Gl(t,r,s,a){if(!(t=ht(t)))return!1;let c=null,d=Ki(t);const m=!d&&Hn(t);if(d||m){if(m&&!m.standalone)return!1;c=t}else{const M=t.ngModule;if(d=Ki(M),!d)return!1;c=M}const E=a.has(c);if(m){if(E)return!1;if(a.add(c),m.dependencies){const M="function"==typeof m.dependencies?m.dependencies():m.dependencies;for(const F of M)Gl(F,r,s,a)}}else{if(!d)return!1;{if(null!=d.imports&&!E){let F;a.add(c);try{gu(d.imports,Y=>{Gl(Y,r,s,a)&&(F||=[],F.push(Y))})}finally{}void 0!==F&&Yh(F,r)}if(!E){const F=cs(c)||(()=>new c);r({provide:c,useFactory:F,deps:wt},c),r({provide:gm,useValue:c,multi:!0},c),r({provide:zd,useValue:()=>yt(c),multi:!0},c)}const M=d.providers;if(null!=M&&!E){const F=t;Wl(M,Y=>{r(Y,F)})}}}return c!==t&&void 0!==t.providers}function Wl(t,r){for(let s of t)Rt(s)&&(s=s.\u0275providers),Array.isArray(s)?Wl(s,r):r(s)}const yp=oe({provide:String,useValue:oe});function Wd(t){return null!==t&&"object"==typeof t&&yp in t}function Mc(t){return"function"==typeof t}const qd=new Ii("Set Injector scope."),Xh={},vm={};let _p;function Kd(){return void 0===_p&&(_p=new zl),_p}class Bu{}class oc extends Bu{get destroyed(){return this._destroyed}constructor(r,s,a,c){super(),this.parent=s,this.source=a,this.scopes=c,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Dp(r,m=>this.processProvider(m)),this.records.set(Zh,ul(void 0,this)),c.has("environment")&&this.records.set(Bu,ul(void 0,this));const d=this.records.get(qd);null!=d&&"string"==typeof d.value&&this.scopes.add(d.value),this.injectorDefTypes=new Set(this.get(gm.multi,wt,Xt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const s of this._ngOnDestroyHooks)s.ngOnDestroy();const r=this._onDestroyHooks;this._onDestroyHooks=[];for(const s of r)s()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(r){return this.assertNotDestroyed(),this._onDestroyHooks.push(r),()=>this.removeOnDestroy(r)}runInContext(r){this.assertNotDestroyed();const s=Ie(this),a=vn(void 0);try{return r()}finally{Ie(s),vn(a)}}get(r,s=Zn,a=Xt.Default){if(this.assertNotDestroyed(),r.hasOwnProperty(ys))return r[ys](this);a=_n(a);const d=Ie(this),m=vn(void 0);try{if(!(a&Xt.SkipSelf)){let M=this.records.get(r);if(void 0===M){const F=function Ip(t){return"function"==typeof t||"object"==typeof t&&t instanceof Ii}(r)&&Qn(r);M=F&&this.injectableDefInScope(F)?ul(Nc(r),Xh):null,this.records.set(r,M)}if(null!=M)return this.hydrate(r,M)}return(a&Xt.Self?Kd():this.parent).get(r,s=a&Xt.Optional&&s===Zn?null:s)}catch(E){if("NullInjectorError"===E.name){if((E[Jt]=E[Jt]||[]).unshift(Te(r)),d)throw E;return function ms(t,r,s,a){const c=t[Jt];throw r[ee]&&c.unshift(r[ee]),t.message=function ts(t,r,s,a=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let c=Te(r);if(Array.isArray(r))c=r.map(Te).join(" -> ");else if("object"==typeof r){let d=[];for(let m in r)if(r.hasOwnProperty(m)){let E=r[m];d.push(m+":"+("string"==typeof E?JSON.stringify(E):Te(E)))}c=`{${d.join(", ")}}`}return`${s}${a?"("+a+")":""}[${c}]: ${t.replace(me,"\n  ")}`}("\n"+t.message,c,s,a),t.ngTokenPath=c,t[Jt]=null,t}(E,r,"R3InjectorError",this.source)}throw E}finally{vn(m),Ie(d)}}resolveInjectorInitializers(){const r=Ie(this),s=vn(void 0);try{const c=this.get(zd.multi,wt,Xt.Self);for(const d of c)d()}finally{Ie(r),vn(s)}}toString(){const r=[],s=this.records;for(const a of s.keys())r.push(Te(a));return`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new le(205,!1)}processProvider(r){let s=Mc(r=ht(r))?r:ht(r&&r.provide);const a=function Jh(t){return Wd(t)?ul(void 0,t.useValue):ul(wp(t),Xh)}(r);if(Mc(r)||!0!==r.multi)this.records.get(s);else{let c=this.records.get(s);c||(c=ul(void 0,Xh,!0),c.factory=()=>In(c.multi),this.records.set(s,c)),s=r,c.multi.push(r)}this.records.set(s,a)}hydrate(r,s){return s.value===Xh&&(s.value=vm,s.value=s.factory()),"object"==typeof s.value&&s.value&&function Rv(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(s.value)&&this._ngOnDestroyHooks.add(s.value),s.value}injectableDefInScope(r){if(!r.providedIn)return!1;const s=ht(r.providedIn);return"string"==typeof s?"any"===s||this.scopes.has(s):this.injectorDefTypes.has(s)}removeOnDestroy(r){const s=this._onDestroyHooks.indexOf(r);-1!==s&&this._onDestroyHooks.splice(s,1)}}function Nc(t){const r=Qn(t),s=null!==r?r.factory:cs(t);if(null!==s)return s;if(t instanceof Ii)throw new le(204,!1);if(t instanceof Function)return function Ep(t){const r=t.length;if(r>0)throw Mu(r,"?"),new le(204,!1);const s=function Nr(t){return t&&(t[Ln]||t[si])||null}(t);return null!==s?()=>s.factory(t):()=>new t}(t);throw new le(204,!1)}function wp(t,r,s){let a;if(Mc(t)){const c=ht(t);return cs(c)||Nc(c)}if(Wd(t))a=()=>ht(t.useValue);else if(function mm(t){return!(!t||!t.useFactory)}(t))a=()=>t.useFactory(...In(t.deps||[]));else if(function vp(t){return!(!t||!t.useExisting)}(t))a=()=>yt(ht(t.useExisting));else{const c=ht(t&&(t.useClass||t.provide));if(!function _m(t){return!!t.deps}(t))return cs(c)||Nc(c);a=()=>new c(...In(t.deps))}return a}function ul(t,r,s=!1){return{factory:t,value:r,multi:s?[]:void 0}}function Dp(t,r){for(const s of t)Array.isArray(s)?Dp(s,r):s&&Rt(s)?Dp(s.\u0275providers,r):r(s)}const ef=new Ii("AppId",{providedIn:"root",factory:()=>Em}),Em="ng",Cp=new Ii("Platform Initializer"),Zd=new Ii("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Yd=new Ii("AnimationModuleType"),tf=new Ii("CSP nonce",{providedIn:"root",factory:()=>ku().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let Dm=(t,r,s)=>null;function xp(t,r,s=!1){return Dm(t,r,s)}class Tm{}class Sm{}class Lv{resolveComponentFactory(r){throw function Op(t){const r=Error(`No component factory found for ${Te(t)}.`);return r.ngComponent=t,r}(r)}}let Xl=(()=>{class t{static#e=this.NULL=new Lv}return t})();function uf(){return Oc(y(),lt())}function Oc(t,r){return new Jl(ot(t,r))}let Jl=(()=>{class t{constructor(s){this.nativeElement=s}static#e=this.__NG_ELEMENT_ID__=uf}return t})();function ed(t){return t instanceof Jl?t.nativeElement:t}class cf{}let Vv=(()=>{class t{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function Bv(){const t=lt(),s=Bs(y().index,t);return(ki(s)?s:t)[nn]}()}return t})(),Nm=(()=>{class t{static#e=this.\u0275prov=Ht({token:t,providedIn:"root",factory:()=>null})}return t})();class Pp{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const xm=new Pp("16.2.10"),th={};function ac(t,r=null,s=null,a){const c=hf(t,r,s,a);return c.resolveInjectorInitializers(),c}function hf(t,r=null,s=null,a,c=new Set){const d=[s||wt,xv(t)];return a=a||("object"==typeof t?void 0:Te(t)),new oc(d,r||Kd(),a||null,c)}let ca=(()=>{class t{static#e=this.THROW_IF_NOT_FOUND=Zn;static#t=this.NULL=new zl;static create(s,a){if(Array.isArray(s))return ac({name:""},a,s,"");{const c=s.name??"";return ac({name:c},s.parent,s.providers,c)}}static#n=this.\u0275prov=Ht({token:t,providedIn:"any",factory:()=>yt(Zh)});static#r=this.__NG_ELEMENT_ID__=-1}return t})();function Pc(t){return t.ngOriginalError}class kc{constructor(){this._console=console}handleError(r){const s=this._findOriginalError(r);this._console.error("ERROR",r),s&&this._console.error("ORIGINAL ERROR",s)}_findOriginalError(r){let s=r&&Pc(r);for(;s&&Pc(s);)s=Pc(s);return s||null}}function ih(t){return r=>{setTimeout(t,void 0,r)}}const Uu=class Up extends p.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,s,a){let c=r,d=s||(()=>null),m=a;if(r&&"object"==typeof r){const M=r;c=M.next?.bind(M),d=M.error?.bind(M),m=M.complete?.bind(M)}this.__isAsync&&(d=ih(d),c&&(c=ih(c)),m&&(m=ih(m)));const E=super.subscribe({next:c,error:d,complete:m});return r instanceof W.w0&&r.add(E),E}};function km(...t){}class Bo{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:a=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Uu(!1),this.onMicrotaskEmpty=new Uu(!1),this.onStable=new Uu(!1),this.onError=new Uu(!1),typeof Zone>"u")throw new le(908,!1);Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!a&&s,c.shouldCoalesceRunChangeDetection=a,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function jp(){const t="function"==typeof Vn.requestAnimationFrame;let r=Vn[t?"requestAnimationFrame":"setTimeout"],s=Vn[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&r&&s){const a=r[Zone.__symbol__("OriginalDelegate")];a&&(r=a);const c=s[Zone.__symbol__("OriginalDelegate")];c&&(s=c)}return{nativeRequestAnimationFrame:r,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function Bm(t){const r=()=>{!function Vm(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Vn,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,ff(t),t.isCheckStableRunning=!0,$p(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),ff(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,a,c,d,m,E)=>{if(function zp(t){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0].data?.__ignore_ng_zone__}(E))return s.invokeTask(c,d,m,E);try{return Hp(t),s.invokeTask(c,d,m,E)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===d.type||t.shouldCoalesceRunChangeDetection)&&r(),Um(t)}},onInvoke:(s,a,c,d,m,E,M)=>{try{return Hp(t),s.invoke(c,d,m,E,M)}finally{t.shouldCoalesceRunChangeDetection&&r(),Um(t)}},onHasTask:(s,a,c,d)=>{s.hasTask(c,d),a===c&&("microTask"==d.change?(t._hasPendingMicrotasks=d.microTask,ff(t),$p(t)):"macroTask"==d.change&&(t.hasPendingMacrotasks=d.macroTask))},onHandleError:(s,a,c,d)=>(s.handleError(c,d),t.runOutsideAngular(()=>t.onError.emit(d)),!1)})}(c)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Bo.isInAngularZone())throw new le(909,!1)}static assertNotInAngularZone(){if(Bo.isInAngularZone())throw new le(909,!1)}run(r,s,a){return this._inner.run(r,s,a)}runTask(r,s,a,c){const d=this._inner,m=d.scheduleEventTask("NgZoneEvent: "+c,r,Lm,km,km);try{return d.runTask(m,s,a)}finally{d.cancelTask(m)}}runGuarded(r,s,a){return this._inner.runGuarded(r,s,a)}runOutsideAngular(r){return this._outer.run(r)}}const Lm={};function $p(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function ff(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function Hp(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Um(t){t._nesting--,$p(t)}class $v{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Uu,this.onMicrotaskEmpty=new Uu,this.onStable=new Uu,this.onError=new Uu}run(r,s,a){return r.apply(s,a)}runGuarded(r,s,a){return r.apply(s,a)}runOutsideAngular(r){return r()}runTask(r,s,a,c){return r.apply(s,a)}}const jm=new Ii("",{providedIn:"root",factory:$m});function $m(){const t=Mt(Bo);let r=!0;const s=new ae.y(c=>{r=t.isStable&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks,t.runOutsideAngular(()=>{c.next(r),c.complete()})}),a=new ae.y(c=>{let d;t.runOutsideAngular(()=>{d=t.onStable.subscribe(()=>{Bo.assertNotInAngularZone(),queueMicrotask(()=>{!r&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks&&(r=!0,c.next(!0))})})});const m=t.onUnstable.subscribe(()=>{Bo.assertInAngularZone(),r&&(r=!1,t.runOutsideAngular(()=>{c.next(!1)}))});return()=>{d.unsubscribe(),m.unsubscribe()}});return(0,he.T)(s,a.pipe((0,Me.B)()))}function uc(t){return t instanceof Function?t():t}let sh=(()=>{class t{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=Ht({token:t,providedIn:"root",factory:()=>new t})}return t})();function oh(t){for(;t;){t[Cn]|=64;const r=xd(t);if(Eo(t)&&!r)return t;t=r}return null}const pf=new Ii("",{providedIn:"root",factory:()=>!1});let nd=null;function Km(t,r){return t[r]??mf()}function Zm(t,r){const s=mf();s.producerNode?.length&&(t[r]=nd,s.lView=t,nd=Ym())}const Jp={...na,consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{oh(t.lView)},lView:null};function Ym(){return Object.create(Jp)}function mf(){return nd??=Ym(),nd}const cr={};function yf(t){Qm(sr(),lt(),ft()+t,!1)}function Qm(t,r,s,a){if(!a)if(3==(3&r[Cn])){const d=t.preOrderCheckHooks;null!==d&&tu(r,d,s)}else{const d=t.preOrderHooks;null!==d&&wa(r,d,0,s)}xt(s)}function Vc(t,r=Xt.Default){const s=lt();return null===s?yt(t,r):hu(y(),s,ht(t),r)}function eg(){throw new Error("invalid")}function ah(t,r,s,a,c,d,m,E,M,F,Y){const ue=r.blueprint.slice();return ue[ar]=c,ue[Cn]=140|a,(null!==F||t&&2048&t[Cn])&&(ue[Cn]|=2048),gc(ue),ue[Er]=ue[Fs]=t,ue[Sr]=s,ue[ui]=m||t&&t[ui],ue[nn]=E||t&&t[nn],ue[gi]=M||t&&t[gi]||null,ue[Pi]=d,ue[Yi]=function lv(){return Wf++}(),ue[Hi]=Y,ue[Ao]=F,ue[Yr]=2==r.type?t[Yr]:ue,ue}function rd(t,r,s,a,c){let d=t.data[r];if(null===d)d=function ng(t,r,s,a,c){const d=I(),m=ie(),M=t.data[r]=function qv(t,r,s,a,c,d){let m=r?r.injectorIndex:-1,E=0;return Ot()&&(E|=128),{type:s,index:a,insertBeforeIndex:null,injectorIndex:m,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:E,providerIndexes:0,value:c,attrs:d,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,m?d:d&&d.parent,s,r,a,c);return null===t.firstChild&&(t.firstChild=M),null!==d&&(m?null==d.child&&null!==M.parent&&(d.child=M):null===d.next&&(d.next=M,M.prev=d)),M}(t,r,s,a,c),function Fn(){return bn.lFrame.inI18n}()&&(d.flags|=32);else if(64&d.type){d.type=s,d.value=a,d.attrs=c;const m=function R(){const t=bn.lFrame,r=t.currentTNode;return t.isParent?r:r.parent}();d.injectorIndex=null===m?-1:m.injectorIndex}return G(d,!0),d}function fl(t,r,s,a){if(0===s)return-1;const c=r.length;for(let d=0;d<s;d++)r.push(a),t.blueprint.push(a),t.data.push(null);return c}function Xm(t,r,s,a,c){const d=Km(r,os),m=ft(),E=2&a;try{xt(-1),E&&r.length>Rn&&Qm(t,r,Rn,!1),Fi(E?2:0,c);const F=E?d:null,Y=Ys(F);try{null!==F&&(F.dirty=!1),s(a,c)}finally{vi(F,Y)}}finally{E&&null===r[os]&&Zm(r,os),xt(m),Fi(E?3:1,c)}}function uh(t,r,s){if(zi(r)){const a=Qi(null);try{const d=r.directiveEnd;for(let m=r.directiveStart;m<d;m++){const E=t.data[m];E.contentQueries&&E.contentQueries(1,s[m],m)}}finally{Qi(a)}}}function ch(t,r,s){tr()&&(function Ef(t,r,s,a){const c=s.directiveStart,d=s.directiveEnd;_s(s)&&function uy(t,r,s){const a=ot(r,t),c=Jm(s);let m=16;s.signals?m=4096:s.onPush&&(m=64);const E=fh(t,ah(t,c,null,m,a,r,null,t[ui].rendererFactory.createRenderer(a,s),null,null,null));t[r.index]=E}(r,s,t.data[c+s.componentOffset]),t.firstCreatePass||Lo(s,r),aa(a,r);const m=s.initialInputs;for(let E=c;E<d;E++){const M=t.data[E],F=Va(r,t,E,s);aa(F,r),null!==m&&Qv(0,E-c,F,M,0,m),Es(M)&&(Bs(s.index,r)[Sr]=Va(r,t,E,s))}}(t,r,s,ot(s,r)),64==(64&s.flags)&&ag(t,r,s))}function lh(t,r,s=ot){const a=r.localNames;if(null!==a){let c=r.index+1;for(let d=0;d<a.length;d+=2){const m=a[d+1],E=-1===m?s(r,t):t[m];t[c++]=E}}}function Jm(t){const r=t.tView;return null===r||r.incompleteFirstPass?t.tView=pl(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):r}function pl(t,r,s,a,c,d,m,E,M,F,Y){const ue=Rn+a,Ce=ue+c,Pe=function Gv(t,r){const s=[];for(let a=0;a<r;a++)s.push(a<t?null:cr);return s}(ue,Ce),ct="function"==typeof F?F():F;return Pe[It]={type:t,blueprint:Pe,template:s,queries:null,viewQuery:E,declTNode:r,data:Pe.slice().fill(null,ue),bindingStartIndex:ue,expandoStartIndex:Ce,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof d?d():d,pipeRegistry:"function"==typeof m?m():m,firstChild:null,schemas:M,consts:ct,incompleteFirstPass:!1,ssrId:Y}}let gl=t=>null;function ny(t,r,s,a){for(let c in t)if(t.hasOwnProperty(c)){s=null===s?{}:s;const d=t[c];null===a?ry(s,r,c,d):a.hasOwnProperty(c)&&ry(s,r,a[c],d)}return s}function ry(t,r,s,a){t.hasOwnProperty(s)?t[s].push(r,a):t[s]=[r,a]}function dh(t,r,s,a){if(tr()){const c=null===a?null:{"":-1},d=function ay(t,r){const s=t.directiveRegistry;let a=null,c=null;if(s)for(let d=0;d<s.length;d++){const m=s[d];if(Ne(r,m.selectors,!1))if(a||(a=[]),Es(m))if(null!==m.findHostDirectiveDefs){const E=[];c=c||new Map,m.findHostDirectiveDefs(m,E,c),a.unshift(...E,m),Bc(t,r,E.length)}else a.unshift(m),Bc(t,r,0);else c=c||new Map,m.findHostDirectiveDefs?.(m,a,c),a.push(m)}return null===a?null:[a,c]}(t,s);let m,E;null===d?m=E=null:[m,E]=d,null!==m&&hh(t,r,s,m,c,E),c&&function cg(t,r,s){if(r){const a=t.localNames=[];for(let c=0;c<r.length;c+=2){const d=s[r[c+1]];if(null==d)throw new le(-301,!1);a.push(r[c],d)}}}(s,a,c)}s.mergedAttrs=To(s.mergedAttrs,s.attrs)}function hh(t,r,s,a,c,d){for(let F=0;F<a.length;F++)La(Lo(s,r),t,a[F].type);!function Zv(t,r,s){t.flags|=1,t.directiveStart=r,t.directiveEnd=r+s,t.providerIndexes=r}(s,t.data.length,a.length);for(let F=0;F<a.length;F++){const Y=a[F];Y.providersResolver&&Y.providersResolver(Y)}let m=!1,E=!1,M=fl(t,r,a.length,null);for(let F=0;F<a.length;F++){const Y=a[F];s.mergedAttrs=To(s.mergedAttrs,Y.hostAttrs),Yv(t,s,r,M,Y),Kv(M,Y,c),null!==Y.contentQueries&&(s.flags|=4),(null!==Y.hostBindings||null!==Y.hostAttrs||0!==Y.hostVars)&&(s.flags|=64);const ue=Y.type.prototype;!m&&(ue.ngOnChanges||ue.ngOnInit||ue.ngDoCheck)&&((t.preOrderHooks??=[]).push(s.index),m=!0),!E&&(ue.ngOnChanges||ue.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(s.index),E=!0),M++}!function _f(t,r,s){const c=r.directiveEnd,d=t.data,m=r.attrs,E=[];let M=null,F=null;for(let Y=r.directiveStart;Y<c;Y++){const ue=d[Y],Ce=s?s.get(ue):null,ct=Ce?Ce.outputs:null;M=ny(ue.inputs,Y,M,Ce?Ce.inputs:null),F=ny(ue.outputs,Y,F,ct);const Ct=null===M||null===m||Zi(r)?null:Xv(M,Y,m);E.push(Ct)}null!==M&&(M.hasOwnProperty("class")&&(r.flags|=8),M.hasOwnProperty("style")&&(r.flags|=16)),r.initialInputs=E,r.inputs=M,r.outputs=F}(t,s,d)}function ag(t,r,s){const a=s.directiveStart,c=s.directiveEnd,d=s.index,m=function ds(){return bn.lFrame.currentDirectiveIndex}();try{xt(d);for(let E=a;E<c;E++){const M=t.data[E],F=r[E];Pr(E),(null!==M.hostBindings||0!==M.hostVars||null!==M.hostAttrs)&&ug(M,F)}}finally{xt(-1),Pr(m)}}function ug(t,r){null!==t.hostBindings&&t.hostBindings(1,r)}function Bc(t,r,s){r.componentOffset=s,(t.components??=[]).push(r.index)}function Kv(t,r,s){if(s){if(r.exportAs)for(let a=0;a<r.exportAs.length;a++)s[r.exportAs[a]]=t;Es(r)&&(s[""]=t)}}function Yv(t,r,s,a,c){t.data[a]=c;const d=c.factory||(c.factory=cs(c.type)),m=new Ia(d,Es(c),Vc);t.blueprint[a]=m,s[a]=m,function og(t,r,s,a,c){const d=c.hostBindings;if(d){let m=t.hostBindingOpCodes;null===m&&(m=t.hostBindingOpCodes=[]);const E=~r.index;(function oy(t){let r=t.length;for(;r>0;){const s=t[--r];if("number"==typeof s&&s<0)return s}return 0})(m)!=E&&m.push(E),m.push(s,a,d)}}(t,r,a,fl(t,s,c.hostVars,cr),c)}function $u(t,r,s,a,c,d){const m=ot(t,r);!function wf(t,r,s,a,c,d,m){if(null==d)t.removeAttribute(r,c,s);else{const E=null==m?Oe(d):m(d,a||"",c);t.setAttribute(r,c,E,s)}}(r[nn],m,d,t.value,s,a,c)}function Qv(t,r,s,a,c,d){const m=d[r];if(null!==m)for(let E=0;E<m.length;)cy(a,s,m[E++],m[E++],m[E++])}function cy(t,r,s,a,c){const d=Qi(null);try{const m=t.inputTransforms;null!==m&&m.hasOwnProperty(a)&&(c=m[a].call(r,c)),null!==t.setInput?t.setInput(r,c,s,a):r[a]=c}finally{Qi(d)}}function Xv(t,r,s){let a=null,c=0;for(;c<s.length;){const d=s[c];if(0!==d)if(5!==d){if("number"==typeof d)break;if(t.hasOwnProperty(d)){null===a&&(a=[]);const m=t[d];for(let E=0;E<m.length;E+=2)if(m[E]===r){a.push(d,m[E+1],s[c+1]);break}}c+=2}else c+=2;else c+=4}return a}function ly(t,r,s,a){return[t,!0,!1,r,null,0,a,s,null,null,null]}function lg(t,r){const s=t.contentQueries;if(null!==s)for(let a=0;a<s.length;a+=2){const d=s[a+1];if(-1!==d){const m=t.data[d];ho(s[a]),m.contentQueries(2,r[d],d)}}}function fh(t,r){return t[bi]?t[rs][ai]=r:t[bi]=r,t[rs]=r,r}function ph(t,r,s){ho(0);const a=Qi(null);try{r(t,s)}finally{Qi(a)}}function dg(t){return t[Ms]||(t[Ms]=[])}function hg(t){return t.cleanup||(t.cleanup=[])}function jr(t,r){const s=t[gi],a=s?s.get(kc,null):null;a&&a.handleError(r)}function If(t,r,s,a,c){for(let d=0;d<s.length;){const m=s[d++],E=s[d++];cy(t.data[m],r[m],a,E,c)}}function Hu(t,r,s){const a=Ue(r,t);!function Lh(t,r,s){t.setValue(r,s)}(t[nn],a,s)}function mh(t,r){const s=Bs(r,t),a=s[It];!function dy(t,r){for(let s=r.length;s<t.blueprint.length;s++)r.push(t.blueprint[s])}(a,s);const c=s[ar];null!==c&&null===s[Hi]&&(s[Hi]=xp(c,s[gi])),bs(a,s,s[Sr])}function bs(t,r,s){v(r);try{const a=t.viewQuery;null!==a&&ph(1,a,s);const c=t.template;null!==c&&Xm(t,r,c,1,s),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&lg(t,r),t.staticViewQueries&&ph(2,t.viewQuery,s);const d=t.components;null!==d&&function Qo(t,r){for(let s=0;s<r.length;s++)mh(t,r[s])}(r,d)}catch(a){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),a}finally{r[Cn]&=-5,$e()}}let yu=(()=>{class t{constructor(){this.all=new Set,this.queue=new Map}create(s,a,c){const d=typeof Zone>"u"?null:Zone.current,m=function Ke(t,r,s){const a=Object.create(sn);s&&(a.consumerAllowSignalWrites=!0),a.fn=t,a.schedule=r;const c=m=>{a.cleanupFn=m};return a.ref={notify:()=>pa(a),run:()=>{if(a.dirty=!1,a.hasRun&&!Qs(a))return;a.hasRun=!0;const m=Ys(a);try{a.cleanupFn(),a.cleanupFn=st,a.fn(c)}finally{vi(a,m)}},cleanup:()=>a.cleanupFn()},a.ref}(s,F=>{this.all.has(F)&&this.queue.set(F,d)},c);let E;this.all.add(m),m.notify();const M=()=>{m.cleanup(),E?.(),this.all.delete(m),this.queue.delete(m)};return E=a?.onDestroy(M),{destroy:M}}flush(){if(0!==this.queue.size)for(const[s,a]of this.queue)this.queue.delete(s),a?a.run(()=>s.run()):s.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=Ht({token:t,providedIn:"root",factory:()=>new t})}return t})();function Df(t,r,s){let a=s?t.styles:null,c=s?t.classes:null,d=0;if(null!==r)for(let m=0;m<r.length;m++){const E=r[m];"number"==typeof E?d=E:1==d?c=et(c,E):2==d&&(a=et(a,E+": "+r[++m]+";"))}s?t.styles=a:t.stylesWithoutHost=a,s?t.classes=c:t.classesWithoutHost=c}function id(t,r,s,a,c=!1){for(;null!==s;){const d=r[s.index];null!==d&&a.push(Ur(d)),zn(d)&&hy(d,a);const m=s.type;if(8&m)id(t,r,s.child,a);else if(32&m){const E=kh(s,r);let M;for(;M=E();)a.push(M)}else if(16&m){const E=np(r,s);if(Array.isArray(E))a.push(...E);else{const M=xd(r[Yr]);id(M[It],M,E,a,!0)}}s=c?s.projectionNext:s.next}return a}function hy(t,r){for(let s=Gr;s<t.length;s++){const a=t[s],c=a[It].firstChild;null!==c&&id(a[It],a,c,r)}t[ci]!==t[ar]&&r.push(t[ci])}function sd(t,r,s,a=!0){const c=r[ui],d=c.rendererFactory,m=c.afterRenderEventManager;d.begin?.(),m?.begin();try{fy(t,r,t.template,s)}catch(M){throw a&&jr(r,M),M}finally{d.end?.(),c.effectManager?.flush(),m?.end()}}function fy(t,r,s,a){const c=r[Cn];if(256!=(256&c)){r[ui].effectManager?.flush(),v(r);try{gc(r),function Un(t){return bn.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==s&&Xm(t,r,s,2,a);const m=3==(3&c);if(m){const F=t.preOrderCheckHooks;null!==F&&tu(r,F,null)}else{const F=t.preOrderHooks;null!==F&&wa(r,F,0,null),yc(r,0)}if(function fs(t){for(let r=Fh(t);null!==r;r=tl(r)){if(!r[qs])continue;const s=r[as];for(let a=0;a<s.length;a++){Wa(s[a])}}}(r),py(r,2),null!==t.contentQueries&&lg(t,r),m){const F=t.contentCheckHooks;null!==F&&tu(r,F)}else{const F=t.contentHooks;null!==F&&wa(r,F,1),yc(r,1)}!function tg(t,r){const s=t.hostBindingOpCodes;if(null===s)return;const a=Km(r,Hr);try{for(let c=0;c<s.length;c++){const d=s[c];if(d<0)xt(~d);else{const m=d,E=s[++c],M=s[++c];Bi(E,m),a.dirty=!1;const F=Ys(a);try{M(2,r[m])}finally{vi(a,F)}}}}finally{null===r[Hr]&&Zm(r,Hr),xt(-1)}}(t,r);const E=t.components;null!==E&&Hs(r,E,0);const M=t.viewQuery;if(null!==M&&ph(2,M,a),m){const F=t.viewCheckHooks;null!==F&&tu(r,F)}else{const F=t.viewHooks;null!==F&&wa(r,F,2),yc(r,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),r[Cn]&=-73,Ku(r)}finally{$e()}}}function py(t,r){for(let s=Fh(t);null!==s;s=tl(s))for(let a=Gr;a<s.length;a++)gy(s[a],r)}function OE(t,r,s){gy(Bs(r,t),s)}function gy(t,r){if(!function qu(t){return 128==(128&t[Cn])}(t))return;const s=t[It],a=t[Cn];if(80&a&&0===r||1024&a||2===r)fy(s,t,s.template,t[Sr]);else if(t[ks]>0){py(t,1);const c=s.components;null!==c&&Hs(t,c,1)}}function Hs(t,r,s){for(let a=0;a<r.length;a++)OE(t,r[a],s)}class od{get rootNodes(){const r=this._lView,s=r[It];return id(s,r,s.firstChild,[])}constructor(r,s){this._lView=r,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Sr]}set context(r){this._lView[Sr]=r}get destroyed(){return 256==(256&this._lView[Cn])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[Er];if(zn(r)){const s=r[8],a=s?s.indexOf(this):-1;a>-1&&(Bh(r,a),_c(s,a))}this._attachedToViewContainer=!1}Xf(this._lView[It],this._lView)}onDestroy(r){!function On(t,r){if(256==(256&t[Cn]))throw new le(911,!1);null===t[ss]&&(t[ss]=[]),t[ss].push(r)}(this._lView,r)}markForCheck(){oh(this._cdRefInjectingView||this._lView)}detach(){this._lView[Cn]&=-129}reattach(){this._lView[Cn]|=128}detectChanges(){sd(this._lView[It],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new le(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Zg(t,r){rc(t,r,r[nn],2,null,null)}(this._lView[It],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new le(902,!1);this._appRef=r}}class t_ extends od{constructor(r){super(r),this._view=r}detectChanges(){const r=this._view;sd(r[It],r,r[Sr],!1)}checkNoChanges(){}get context(){return null}}class my extends Xl{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const s=Hn(r);return new yh(s,this.ngModule)}}function pg(t){const r=[];for(let s in t)t.hasOwnProperty(s)&&r.push({propName:t[s],templateName:s});return r}class r_{constructor(r,s){this.injector=r,this.parentInjector=s}get(r,s,a){a=_n(a);const c=this.injector.get(r,th,a);return c!==th||s===th?c:this.parentInjector.get(r,s,a)}}class yh extends Sm{get inputs(){const r=this.componentDef,s=r.inputTransforms,a=pg(r.inputs);if(null!==s)for(const c of a)s.hasOwnProperty(c.propName)&&(c.transform=s[c.propName]);return a}get outputs(){return pg(this.componentDef.outputs)}constructor(r,s){super(),this.componentDef=r,this.ngModule=s,this.componentType=r.type,this.selector=function Ps(t){return t.map($n).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!s}create(r,s,a,c){let d=(c=c||this.ngModule)instanceof Bu?c:c?.injector;d&&null!==this.componentDef.getStandaloneInjector&&(d=this.componentDef.getStandaloneInjector(d)||d);const m=d?new r_(r,d):r,E=m.get(cf,null);if(null===E)throw new le(407,!1);const ue={rendererFactory:E,sanitizer:m.get(Nm,null),effectManager:m.get(yu,null),afterRenderEventManager:m.get(sh,null)},Ce=E.createRenderer(null,this.componentDef),Pe=this.componentDef.selectors[0][0]||"div",ct=a?function rg(t,r,s,a){const d=a.get(pf,!1)||s===ut.ShadowDom,m=t.selectRootElement(r,d);return function ey(t){gl(t)}(m),m}(Ce,a,this.componentDef.encapsulation,m):wc(Ce,Pe,function n_(t){const r=t.toLowerCase();return"svg"===r?Bt:"math"===r?"math":null}(Pe)),An=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let _t=null;null!==ct&&(_t=xp(ct,m,!0));const or=pl(0,null,null,1,0,null,null,null,null,null,null),Fr=ah(null,or,null,An,null,null,ue,Ce,m,null,_t);let qi,cu;v(Fr);try{const Sl=this.componentDef;let Vf,IE=null;Sl.findHostDirectiveDefs?(Vf=[],IE=new Map,Sl.findHostDirectiveDefs(Sl,Vf,IE),Vf.push(Sl)):Vf=[Sl];const zT=function PE(t,r){const s=t[It],a=Rn;return t[a]=r,rd(s,a,2,"#host",null)}(Fr,ct),GT=function s_(t,r,s,a,c,d,m){const E=c[It];!function o_(t,r,s,a){for(const c of t)r.mergedAttrs=To(r.mergedAttrs,c.hostAttrs);null!==r.mergedAttrs&&(Df(r,r.mergedAttrs,!0),null!==s&&ip(a,s,r))}(a,t,r,m);let M=null;null!==r&&(M=xp(r,c[gi]));const F=d.rendererFactory.createRenderer(r,s);let Y=16;s.signals?Y=4096:s.onPush&&(Y=64);const ue=ah(c,Jm(s),null,Y,c[t.index],t,d,F,null,null,M);return E.firstCreatePass&&Bc(E,t,a.length-1),fh(c,ue),c[t.index]=ue}(zT,ct,Sl,Vf,Fr,ue,Ce);cu=Iu(or,Rn),ct&&function vh(t,r,s,a){if(a)Rs(t,s,["ng-version",xm.full]);else{const{attrs:c,classes:d}=function Ri(t){const r=[],s=[];let a=1,c=2;for(;a<t.length;){let d=t[a];if("string"==typeof d)2===c?""!==d&&r.push(d,t[++a]):8===c&&s.push(d);else{if(!De(c))break;c=d}a++}return{attrs:r,classes:s}}(r.selectors[0]);c&&Rs(t,s,c),d&&d.length>0&&rm(t,s,d.join(" "))}}(Ce,Sl,ct,a),void 0!==s&&function a_(t,r,s){const a=t.projection=[];for(let c=0;c<r.length;c++){const d=s[c];a.push(null!=d?Array.from(d):null)}}(cu,this.ngContentSelectors,s),qi=function yy(t,r,s,a,c,d){const m=y(),E=c[It],M=ot(m,c);hh(E,c,m,s,null,a);for(let Y=0;Y<s.length;Y++)aa(Va(c,E,m.directiveStart+Y,m),c);ag(E,c,m),M&&aa(M,c);const F=Va(c,E,m.directiveStart+m.componentOffset,m);if(t[Sr]=c[Sr]=F,null!==d)for(const Y of d)Y(F,r);return uh(E,m,t),F}(GT,Sl,Vf,IE,Fr,[Uc]),bs(or,Fr,null)}finally{$e()}return new i_(this.componentType,qi,Oc(cu,Fr),Fr,cu)}}class i_ extends Tm{constructor(r,s,a,c,d){super(),this.location=a,this._rootLView=c,this._tNode=d,this.previousInputValues=null,this.instance=s,this.hostView=this.changeDetectorRef=new t_(c),this.componentType=r}setInput(r,s){const a=this._tNode.inputs;let c;if(null!==a&&(c=a[r])){if(this.previousInputValues??=new Map,this.previousInputValues.has(r)&&Object.is(this.previousInputValues.get(r),s))return;const d=this._rootLView;If(d[It],d,c,r,s),this.previousInputValues.set(r,s),oh(Bs(this._tNode.index,d))}}get injector(){return new $s(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}function Uc(){const t=y();Ji(lt()[It],t)}function vy(t){let r=function cc(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),s=!0;const a=[t];for(;r;){let c;if(Es(t))c=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new le(903,!1);c=r.\u0275dir}if(c){if(s){a.push(c);const m=t;m.inputs=yl(t.inputs),m.inputTransforms=yl(t.inputTransforms),m.declaredInputs=yl(t.declaredInputs),m.outputs=yl(t.outputs);const E=c.hostBindings;E&&_y(t,E);const M=c.viewQuery,F=c.contentQueries;if(M&&u_(t,M),F&&c_(t,F),pe(t.inputs,c.inputs),pe(t.declaredInputs,c.declaredInputs),pe(t.outputs,c.outputs),null!==c.inputTransforms&&(null===m.inputTransforms&&(m.inputTransforms={}),pe(m.inputTransforms,c.inputTransforms)),Es(c)&&c.data.animation){const Y=t.data;Y.animation=(Y.animation||[]).concat(c.data.animation)}}const d=c.features;if(d)for(let m=0;m<d.length;m++){const E=d[m];E&&E.ngInherit&&E(t),E===vy&&(s=!1)}}r=Object.getPrototypeOf(r)}!function ml(t){let r=0,s=null;for(let a=t.length-1;a>=0;a--){const c=t[a];c.hostVars=r+=c.hostVars,c.hostAttrs=To(c.hostAttrs,s=To(s,c.hostAttrs))}}(a)}function yl(t){return t===kt?{}:t===wt?[]:t}function u_(t,r){const s=t.viewQuery;t.viewQuery=s?(a,c)=>{r(a,c),s(a,c)}:r}function c_(t,r){const s=t.contentQueries;t.contentQueries=s?(a,c,d)=>{r(a,c,d),s(a,c,d)}:r}function _y(t,r){const s=t.hostBindings;t.hostBindings=s?(a,c)=>{r(a,c),s(a,c)}:r}function Cy(t){const r=t.inputConfig,s={};for(const a in r)if(r.hasOwnProperty(a)){const c=r[a];Array.isArray(c)&&c[2]&&(s[a]=c[2])}t.inputTransforms=s}function ud(t){return!!lc(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function lc(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function vu(t,r,s){return t[r]=s}function go(t,r,s){return!Object.is(t[r],s)&&(t[r]=s,!0)}function El(t,r,s,a){const c=go(t,r,s);return go(t,r+1,a)||c}function Na(t,r,s,a,c,d){const m=El(t,r,s,a);return El(t,r+2,c,d)||m}function bf(t,r,s,a){const c=lt();return go(c,Tn(),r)&&(sr(),$u(At(),c,t,r,s,a)),bf}function dc(t,r,s,a,c,d){const E=El(t,function Pt(){return bn.lFrame.bindingIndex}(),s,c);return Kt(2),E?r+Oe(s)+a+Oe(c)+d:cr}function Ly(t,r,s,a,c,d,m,E){const M=lt(),F=sr(),Y=t+Rn,ue=F.firstCreatePass?function C_(t,r,s,a,c,d,m,E,M){const F=r.consts,Y=rd(r,t,4,m||null,Fo(F,E));dh(r,s,Y,Fo(F,M)),Ji(r,Y);const ue=Y.tView=pl(2,Y,a,c,d,r.directiveRegistry,r.pipeRegistry,null,r.schemas,F,null);return null!==r.queries&&(r.queries.template(r,Y),ue.queries=r.queries.embeddedTView(Y)),Y}(Y,F,M,r,s,a,c,d,m):F.data[Y];G(ue,!1);const Ce=Vy(F,M,ue,t);eu()&&Od(F,M,Ce,ue),aa(Ce,M),fh(M,M[Y]=ly(Ce,M,Ce,ue)),Ti(ue)&&ch(F,M,ue),null!=m&&lh(M,ue,E)}let Vy=function Tl(t,r,s,a){return Ai(!0),r[nn].createComment("")};function By(t){return function Oa(t,r){return t[r]}(function Q(){return bn.lFrame.contextLView}(),Rn+t)}function Dg(t,r,s){const a=lt();return go(a,Tn(),r)&&function Ma(t,r,s,a,c,d,m,E){const M=ot(r,s);let Y,F=r.inputs;!E&&null!=F&&(Y=F[a])?(If(t,s,Y,a,c),_s(r)&&function sg(t,r){const s=Bs(r,t);16&s[Cn]||(s[Cn]|=64)}(s,r.index)):3&r.type&&(a=function ig(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(a),c=null!=m?m(c,r.value||"",a):c,d.setProperty(M,a,c))}(sr(),At(),a,t,r,a[nn],s,!1),Dg}function Cg(t,r,s,a,c){const m=c?"class":"style";If(t,s,r.inputs[m],m,a)}function bg(t,r,s,a){const c=lt(),d=sr(),m=Rn+t,E=c[nn],M=d.firstCreatePass?function T_(t,r,s,a,c,d){const m=r.consts,M=rd(r,t,2,a,Fo(m,c));return dh(r,s,M,Fo(m,d)),null!==M.attrs&&Df(M,M.attrs,!1),null!==M.mergedAttrs&&Df(M,M.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,M),M}(m,d,c,r,s,a):d.data[m],F=S_(d,c,M,E,r,t);c[m]=F;const Y=Ti(M);return G(M,!0),ip(E,F,M),32!=(32&M.flags)&&eu()&&Od(d,c,F,M),0===function va(){return bn.lFrame.elementDepthCount}()&&aa(F,c),function on(){bn.lFrame.elementDepthCount++}(),Y&&(ch(d,c,M),uh(d,M,c)),null!==a&&lh(c,M),bg}function Tg(){let t=y();ie()?ve():(t=t.parent,G(t,!1));const r=t;(function _a(t){return bn.skipHydrationRootTNode===t})(r)&&function Ja(){bn.skipHydrationRootTNode=null}(),function mc(){bn.lFrame.elementDepthCount--}();const s=sr();return s.firstCreatePass&&(Ji(s,t),zi(t)&&s.queries.elementEnd(t)),null!=r.classesWithoutHost&&function Ui(t){return 0!=(8&t.flags)}(r)&&Cg(s,r,lt(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function Al(t){return 0!=(16&t.flags)}(r)&&Cg(s,r,lt(),r.stylesWithoutHost,!1),Tg}function Uy(t,r,s,a){return bg(t,r,s,a),Tg(),Uy}let S_=(t,r,s,a,c,d)=>(Ai(!0),wc(a,c,function kr(){return bn.lFrame.currentNamespace}()));function Sg(t,r,s){const a=lt(),c=sr(),d=t+Rn,m=c.firstCreatePass?function N_(t,r,s,a,c){const d=r.consts,m=Fo(d,a),E=rd(r,t,8,"ng-container",m);return null!==m&&Df(E,m,!0),dh(r,s,E,Fo(d,c)),null!==r.queries&&r.queries.elementStart(r,E),E}(d,c,a,r,s):c.data[d];G(m,!0);const E=hc(c,a,m,t);return a[d]=E,eu()&&Od(c,a,E,m),aa(E,a),Ti(m)&&(ch(c,a,m),uh(c,m,a)),null!=s&&lh(a,m),Sg}function Mf(){let t=y();const r=sr();return ie()?ve():(t=t.parent,G(t,!1)),r.firstCreatePass&&(Ji(r,t),zi(t)&&r.queries.elementEnd(t)),Mf}function Nf(t,r,s){return Sg(t,r,s),Mf(),Nf}let hc=(t,r,s,a)=>(Ai(!0),Vh(r[nn],""));function jy(){return lt()}function Ag(t){return!!t&&"function"==typeof t.then}function $y(t){return!!t&&"function"==typeof t.subscribe}function Mg(t,r,s,a){const c=lt(),d=sr(),m=y();return function O_(t,r,s,a,c,d,m){const E=Ti(a),F=t.firstCreatePass&&hg(t),Y=r[Sr],ue=dg(r);let Ce=!0;if(3&a.type||m){const Ct=ot(a,r),Yt=m?m(Ct):Ct,An=ue.length,_t=m?Fr=>m(Ur(Fr[a.index])):a.index;let or=null;if(!m&&E&&(or=function BE(t,r,s,a){const c=t.cleanup;if(null!=c)for(let d=0;d<c.length-1;d+=2){const m=c[d];if(m===s&&c[d+1]===a){const E=r[Ms],M=c[d+2];return E.length>M?E[M]:null}"string"==typeof m&&(d+=2)}return null}(t,r,c,a.index)),null!==or)(or.__ngLastListenerFn__||or).__ngNextListenerFn__=d,or.__ngLastListenerFn__=d,Ce=!1;else{d=i(a,r,Y,d,!1);const Fr=s.listen(Yt,c,d);ue.push(d,Fr),F&&F.push(c,_t,An,An+1)}}else d=i(a,r,Y,d,!1);const Pe=a.outputs;let ct;if(Ce&&null!==Pe&&(ct=Pe[c])){const Ct=ct.length;if(Ct)for(let Yt=0;Yt<Ct;Yt+=2){const qi=r[ct[Yt]][ct[Yt+1]].subscribe(d),cu=ue.length;ue.push(d,qi),F&&F.push(c,a.index,cu,-(cu+1))}}}(d,c,c[nn],m,t,r,a),Mg}function Ng(t,r,s,a){try{return Fi(6,r,s),!1!==s(a)}catch(c){return jr(t,c),!1}finally{Fi(7,r,s)}}function i(t,r,s,a,c){return function d(m){if(m===Function)return a;oh(t.componentOffset>-1?Bs(t.index,r):r);let M=Ng(r,s,a,m),F=d.__ngNextListenerFn__;for(;F;)M=Ng(r,s,F,m)&&M,F=F.__ngNextListenerFn__;return c&&!1===M&&m.preventDefault(),M}}function e(t=1){return function Fe(t){return(bn.lFrame.contextLView=function Xe(t,r){for(;t>0;)r=r[Fs],t--;return r}(t,bn.lFrame.contextLView))[Sr]}(t)}function n(t,r){let s=null;const a=function nt(t){const r=t.attrs;if(null!=r){const s=r.indexOf(5);if(!(1&s))return r[s+1]}return null}(t);for(let c=0;c<r.length;c++){const d=r[c];if("*"!==d){if(null===a?Ne(t,d,!0):Bn(a,d))return c}else s=c}return s}function o(t){const r=lt()[Yr][Pi];if(!r.projection){const a=r.projection=Mu(t?t.length:1,null),c=a.slice();let d=r.child;for(;null!==d;){const m=t?n(d,t):0;null!==m&&(c[m]?c[m].projectionNext=d:a[m]=d,c[m]=d),d=d.next}}}function u(t,r=0,s){const a=lt(),c=sr(),d=rd(c,Rn+t,16,null,s||null);null===d.projection&&(d.projection=r),ve(),(!a[Hi]||Ot())&&32!=(32&d.flags)&&function em(t,r,s){zh(r[nn],0,r,s,Uh(t,s,r),rl(s.parent||r[Pi],s,r))}(c,a,d)}function Gt(t,r){return t<<17|r<<2}function Wt(t){return t>>17&32767}function Ir(t){return 2|t}function ps(t){return(131068&t)>>2}function zs(t,r){return-131069&t|r<<2}function la(t){return 1|t}function UE(t,r,s,a,c){const d=t[s+1],m=null===r;let E=a?Wt(d):ps(d),M=!1;for(;0!==E&&(!1===M||m);){const Y=t[E+1];FI(t[E],r)&&(M=!0,t[E+1]=a?la(Y):Ir(Y)),E=a?Wt(Y):ps(Y)}M&&(t[s+1]=a?Ir(d):la(d))}function FI(t,r){return null===t||null==r||(Array.isArray(t)?t[1]:t)===r||!(!Array.isArray(t)||"string"!=typeof r)&&oa(t,r)>=0}const Xo={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function jE(t){return t.substring(Xo.key,Xo.keyEnd)}function $E(t,r){const s=Xo.textEnd;return s===r?-1:(r=Xo.keyEnd=function UI(t,r,s){for(;r<s&&t.charCodeAt(r)>32;)r++;return r}(t,Xo.key=r,s),xf(t,r,s))}function xf(t,r,s){for(;r<s&&t.charCodeAt(r)<=32;)r++;return r}function k_(t,r,s){return fc(t,r,s,!1),k_}function F_(t,r){return fc(t,r,null,!0),F_}function qE(t){!function pc(t,r,s,a){const c=sr(),d=Kt(2);c.firstUpdatePass&&ZE(c,null,d,a);const m=lt();if(s!==cr&&go(m,d,s)){const E=c.data[ft()];if(JE(E,a)&&!KE(c,d)){let M=a?E.classesWithoutHost:E.stylesWithoutHost;null!==M&&(s=et(M,s||"")),Cg(c,E,m,s,a)}else!function YI(t,r,s,a,c,d,m,E){c===cr&&(c=wt);let M=0,F=0,Y=0<c.length?c[0]:null,ue=0<d.length?d[0]:null;for(;null!==Y||null!==ue;){const Ce=M<c.length?c[M+1]:void 0,Pe=F<d.length?d[F+1]:void 0;let Ct,ct=null;Y===ue?(M+=2,F+=2,Ce!==Pe&&(ct=ue,Ct=Pe)):null===ue||null!==Y&&Y<ue?(M+=2,ct=Y):(F+=2,ct=ue,Ct=Pe),null!==ct&&QE(t,r,s,a,ct,Ct,m,E),Y=M<c.length?c[M]:null,ue=F<d.length?d[F]:null}}(c,E,m,m[nn],m[d+1],m[d+1]=function KI(t,r,s){if(null==s||""===s)return wt;const a=[],c=Vu(s);if(Array.isArray(c))for(let d=0;d<c.length;d++)t(a,c[d],!0);else if("object"==typeof c)for(const d in c)c.hasOwnProperty(d)&&t(a,d,c[d]);else"string"==typeof c&&r(a,c);return a}(t,r,s),a,d)}}(ZI,Hc,t,!0)}function Hc(t,r){for(let s=function VI(t){return function zE(t){Xo.key=0,Xo.keyEnd=0,Xo.value=0,Xo.valueEnd=0,Xo.textEnd=t.length}(t),$E(t,xf(t,0,Xo.textEnd))}(r);s>=0;s=$E(r,s))sa(t,jE(r),!0)}function fc(t,r,s,a){const c=lt(),d=sr(),m=Kt(2);d.firstUpdatePass&&ZE(d,t,m,a),r!==cr&&go(c,m,r)&&QE(d,d.data[ft()],c,c[nn],t,c[m+1]=function QI(t,r){return null==t||""===t||("string"==typeof r?t+=r:"object"==typeof t&&(t=Te(Vu(t)))),t}(r,s),a,m)}function KE(t,r){return r>=t.expandoStartIndex}function ZE(t,r,s,a){const c=t.data;if(null===c[s+1]){const d=c[ft()],m=KE(t,s);JE(d,a)&&null===r&&!m&&(r=!1),r=function zI(t,r,s,a){const c=function Ei(t){const r=bn.lFrame.currentDirectiveIndex;return-1===r?null:t[r]}(t);let d=a?r.residualClasses:r.residualStyles;if(null===c)0===(a?r.classBindings:r.styleBindings)&&(s=xg(s=L_(null,t,r,s,a),r.attrs,a),d=null);else{const m=r.directiveStylingLast;if(-1===m||t[m]!==c)if(s=L_(c,t,r,s,a),null===d){let M=function GI(t,r,s){const a=s?r.classBindings:r.styleBindings;if(0!==ps(a))return t[Wt(a)]}(t,r,a);void 0!==M&&Array.isArray(M)&&(M=L_(null,t,r,M[1],a),M=xg(M,r.attrs,a),function WI(t,r,s,a){t[Wt(s?r.classBindings:r.styleBindings)]=a}(t,r,a,M))}else d=function qI(t,r,s){let a;const c=r.directiveEnd;for(let d=1+r.directiveStylingLast;d<c;d++)a=xg(a,t[d].hostAttrs,s);return xg(a,r.attrs,s)}(t,r,a)}return void 0!==d&&(a?r.residualClasses=d:r.residualStyles=d),s}(c,d,r,a),function PI(t,r,s,a,c,d){let m=d?r.classBindings:r.styleBindings,E=Wt(m),M=ps(m);t[a]=s;let Y,F=!1;if(Array.isArray(s)?(Y=s[1],(null===Y||oa(s,Y)>0)&&(F=!0)):Y=s,c)if(0!==M){const Ce=Wt(t[E+1]);t[a+1]=Gt(Ce,E),0!==Ce&&(t[Ce+1]=zs(t[Ce+1],a)),t[E+1]=function Jr(t,r){return 131071&t|r<<17}(t[E+1],a)}else t[a+1]=Gt(E,0),0!==E&&(t[E+1]=zs(t[E+1],a)),E=a;else t[a+1]=Gt(M,0),0===E?E=a:t[M+1]=zs(t[M+1],a),M=a;F&&(t[a+1]=Ir(t[a+1])),UE(t,Y,a,!0),UE(t,Y,a,!1),function kI(t,r,s,a,c){const d=c?t.residualClasses:t.residualStyles;null!=d&&"string"==typeof r&&oa(d,r)>=0&&(s[a+1]=la(s[a+1]))}(r,Y,t,a,d),m=Gt(E,M),d?r.classBindings=m:r.styleBindings=m}(c,d,r,s,m,a)}}function L_(t,r,s,a,c){let d=null;const m=s.directiveEnd;let E=s.directiveStylingLast;for(-1===E?E=s.directiveStart:E++;E<m&&(d=r[E],a=xg(a,d.hostAttrs,c),d!==t);)E++;return null!==t&&(s.directiveStylingLast=E),a}function xg(t,r,s){const a=s?1:2;let c=-1;if(null!==r)for(let d=0;d<r.length;d++){const m=r[d];"number"==typeof m?c=m:c===a&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),sa(t,m,!!s||r[++d]))}return void 0===t?null:t}function ZI(t,r,s){const a=String(r);""!==a&&!a.includes(" ")&&sa(t,a,s)}function QE(t,r,s,a,c,d,m,E){if(!(3&r.type))return;const M=t.data,F=M[E+1],Y=function gs(t){return 1==(1&t)}(F)?XE(M,r,s,c,ps(F),m):void 0;zy(Y)||(zy(d)||function yr(t){return 2==(2&t)}(F)&&(d=XE(M,null,s,c,E,m)),function tm(t,r,s,a,c){if(r)c?t.addClass(s,a):t.removeClass(s,a);else{let d=-1===a.indexOf("-")?void 0:Cd.DashCase;null==c?t.removeStyle(s,a,d):("string"==typeof c&&c.endsWith("!important")&&(c=c.slice(0,-10),d|=Cd.Important),t.setStyle(s,a,c,d))}}(a,m,Ue(ft(),s),c,d))}function XE(t,r,s,a,c,d){const m=null===r;let E;for(;c>0;){const M=t[c],F=Array.isArray(M),Y=F?M[1]:M,ue=null===Y;let Ce=s[c+1];Ce===cr&&(Ce=ue?wt:void 0);let Pe=ue?xl(Ce,a):Y===a?Ce:void 0;if(F&&!zy(Pe)&&(Pe=xl(M,a)),zy(Pe)&&(E=Pe,m))return E;const ct=t[c+1];c=m?Wt(ct):ps(ct)}if(null!==r){let M=d?r.residualClasses:r.residualStyles;null!=M&&(E=xl(M,a))}return E}function zy(t){return void 0!==t}function JE(t,r){return 0!=(t.flags&(r?8:16))}function e0(t,r=""){const s=lt(),a=sr(),c=t+Rn,d=a.firstCreatePass?rd(a,c,1,r,null):a.data[c],m=t0(a,s,d,r,t);s[c]=m,eu()&&Od(a,s,m,d),G(d,!1)}let t0=(t,r,s,a,c)=>(Ai(!0),function Cs(t,r){return t.createText(r)}(r[nn],a));function V_(t){return Gy("",t,""),V_}function Gy(t,r,s){const a=lt(),c=function cd(t,r,s,a){return go(t,Tn(),s)?r+Oe(s)+a:cr}(a,t,r,s);return c!==cr&&Hu(a,ft(),c),Gy}function B_(t,r,s,a,c){const d=lt(),m=dc(d,t,r,s,a,c);return m!==cr&&Hu(d,ft(),m),B_}const Ch=void 0;var _D=["en",[["a","p"],["AM","PM"],Ch],[["AM","PM"],Ch,Ch],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ch,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ch,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ch,"{1} 'at' {0}",Ch],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function vD(t){const s=Math.floor(Math.abs(t)),a=t.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===a?1:5}];let Rf={};function U_(t){const r=function ED(t){return t.toLowerCase().replace(/_/g,"-")}(t);let s=I0(r);if(s)return s;const a=r.split("-")[0];if(s=I0(a),s)return s;if("en"===a)return _D;throw new le(701,!1)}function w0(t){return U_(t)[Of.PluralCase]}function I0(t){return t in Rf||(Rf[t]=Vn.ng&&Vn.ng.common&&Vn.ng.common.locales&&Vn.ng.common.locales[t]),Rf[t]}var Of=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(Of||{});const Pf="en-US";let D0=Pf;function H_(t,r,s,a,c){if(t=ht(t),Array.isArray(t))for(let d=0;d<t.length;d++)H_(t[d],r,s,a,c);else{const d=sr(),m=lt(),E=y();let M=Mc(t)?t:ht(t.provide);const F=wp(t),Y=1048575&E.providerIndexes,ue=E.directiveStart,Ce=E.providerIndexes>>20;if(Mc(t)||!t.multi){const Pe=new Ia(F,c,Vc),ct=G_(M,r,c?Y:Y+Ce,ue);-1===ct?(La(Lo(E,m),d,M),z_(d,t,r.length),r.push(M),E.directiveStart++,E.directiveEnd++,c&&(E.providerIndexes+=1048576),s.push(Pe),m.push(Pe)):(s[ct]=Pe,m[ct]=Pe)}else{const Pe=G_(M,r,Y+Ce,ue),ct=G_(M,r,Y,Y+Ce),Yt=ct>=0&&s[ct];if(c&&!Yt||!c&&!(Pe>=0&&s[Pe])){La(Lo(E,m),d,M);const An=function vC(t,r,s,a,c){const d=new Ia(t,s,Vc);return d.multi=[],d.index=r,d.componentProviders=0,K0(d,c,a&&!s),d}(c?yC:mC,s.length,c,a,F);!c&&Yt&&(s[ct].providerFactory=An),z_(d,t,r.length,0),r.push(M),E.directiveStart++,E.directiveEnd++,c&&(E.providerIndexes+=1048576),s.push(An),m.push(An)}else z_(d,t,Pe>-1?Pe:ct,K0(s[c?ct:Pe],F,!c&&a));!c&&a&&Yt&&s[ct].componentProviders++}}}function z_(t,r,s,a){const c=Mc(r),d=function ym(t){return!!t.useClass}(r);if(c||d){const M=(d?ht(r.useClass):r).prototype.ngOnDestroy;if(M){const F=t.destroyHooks||(t.destroyHooks=[]);if(!c&&r.multi){const Y=F.indexOf(s);-1===Y?F.push(s,[a,M]):F[Y+1].push(a,M)}else F.push(s,M)}}}function K0(t,r,s){return s&&t.componentProviders++,t.multi.push(r)-1}function G_(t,r,s,a){for(let c=s;c<a;c++)if(r[c]===t)return c;return-1}function mC(t,r,s,a){return W_(this.multi,[])}function yC(t,r,s,a){const c=this.multi;let d;if(this.providerFactory){const m=this.providerFactory.componentProviders,E=Va(s,s[It],this.providerFactory.index,a);d=E.slice(0,m),W_(c,d);for(let M=m;M<E.length;M++)d.push(E[M])}else d=[],W_(c,d);return d}function W_(t,r){for(let s=0;s<t.length;s++)r.push((0,t[s])());return r}function Z0(t,r=[]){return s=>{s.providersResolver=(a,c)=>function gC(t,r,s){const a=sr();if(a.firstCreatePass){const c=Es(t);H_(s,a.data,a.blueprint,c,!0),H_(r,a.data,a.blueprint,c,!1)}}(a,c?c(t):t,r)}}class bh{}class Y0{}function _C(t,r){return new q_(t,r??null,[])}class q_ extends bh{constructor(r,s,a){super(),this._parent=s,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new my(this);const c=Vr(r);this._bootstrapComponents=uc(c.bootstrap),this._r3Injector=hf(r,s,[{provide:bh,useValue:this},{provide:Xl,useValue:this.componentFactoryResolver},...a],Te(r),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(r)}get injector(){return this._r3Injector}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class K_ extends Y0{constructor(r){super(),this.moduleType=r}create(r){return new q_(this.moduleType,r,[])}}class Q0 extends bh{constructor(r){super(),this.componentFactoryResolver=new my(this),this.instance=null;const s=new oc([...r.providers,{provide:bh,useValue:this},{provide:Xl,useValue:this.componentFactoryResolver}],r.parent||Kd(),r.debugName,new Set(["environment"]));this.injector=s,r.runEnvironmentInitializers&&s.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(r){this.injector.onDestroy(r)}}function X0(t,r,s=null){return new Q0({providers:t,parent:r,debugName:s,runEnvironmentInitializers:!0}).injector}let wC=(()=>{class t{constructor(s){this._injector=s,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(s){if(!s.standalone)return null;if(!this.cachedInjectors.has(s)){const a=mp(0,s.type),c=a.length>0?X0([a],this._injector,`Standalone[${s.type.name}]`):null;this.cachedInjectors.set(s,c)}return this.cachedInjectors.get(s)}ngOnDestroy(){try{for(const s of this.cachedInjectors.values())null!==s&&s.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=Ht({token:t,providedIn:"environment",factory:()=>new t(yt(Bu))})}return t})();function J0(t){t.getStandaloneInjector=r=>r.get(wC).getOrCreateStandaloneInjector(t)}function ow(t,r,s,a){return function lw(t,r,s,a,c,d){const m=r+s;return go(t,m,c)?vu(t,m+1,d?a.call(d,c):a(c)):Lg(t,m+1)}(lt(),Dt(),t,r,s,a)}function aw(t,r,s,a,c){return function dw(t,r,s,a,c,d,m){const E=r+s;return El(t,E,c,d)?vu(t,E+2,m?a.call(m,c,d):a(c,d)):Lg(t,E+2)}(lt(),Dt(),t,r,s,a,c)}function uw(t,r,s,a,c,d,m){return function fw(t,r,s,a,c,d,m,E,M){const F=r+s;return Na(t,F,c,d,m,E)?vu(t,F+4,M?a.call(M,c,d,m,E):a(c,d,m,E)):Lg(t,F+4)}(lt(),Dt(),t,r,s,a,c,d,m)}function cw(t,r,s,a,c,d,m,E,M){const F=Dt()+t,Y=lt(),ue=Na(Y,F,s,a,c,d);return El(Y,F+4,m,E)||ue?vu(Y,F+6,M?r.call(M,s,a,c,d,m,E):r(s,a,c,d,m,E)):function _l(t,r){return t[r]}(Y,F+6)}function Lg(t,r){const s=t[r];return s===cr?void 0:s}function HC(){return this._results[Symbol.iterator]()}class Y_{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new Uu)}constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const s=Y_.prototype;s[Symbol.iterator]||(s[Symbol.iterator]=HC)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,s){return this._results.reduce(r,s)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,s){const a=this;a.dirty=!1;const c=function es(t){return t.flat(Number.POSITIVE_INFINITY)}(r);(this._changesDetected=!function Sa(t,r,s){if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++){let c=t[a],d=r[a];if(s&&(c=s(c),d=s(d)),d!==c)return!1}return!0}(a._results,c,s))&&(a._results=c,a.length=c.length,a.last=c[this.length-1],a.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function GC(t,r,s,a=!0){const c=r[It];if(function Yg(t,r,s,a){const c=Gr+a,d=s.length;a>0&&(s[c-1][ai]=r),a<d-Gr?(r[ai]=s[c],Bf(s,Gr+a,r)):(s.push(r),r[ai]=null),r[Er]=s;const m=r[Ns];null!==m&&s!==m&&function Qg(t,r){const s=t[as];r[Yr]!==r[Er][Er][Yr]&&(t[qs]=!0),null===s?t[as]=[r]:s.push(r)}(m,r);const E=r[mi];null!==E&&E.insertView(t),r[Cn]|=128}(c,r,t,s),a){const d=jl(s,t),m=r[nn],E=$h(m,t[ci]);null!==E&&function Yf(t,r,s,a,c,d){a[ar]=c,a[Pi]=r,rc(t,a,s,1,c,d)}(c,t[Pi],m,r,E,d)}}let Bg=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=KC}return t})();const WC=Bg,qC=class extends WC{constructor(r,s,a){super(),this._declarationLView=r,this._declarationTContainer=s,this.elementRef=a}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(r,s){return this.createEmbeddedViewImpl(r,s)}createEmbeddedViewImpl(r,s,a){const c=function zC(t,r,s,a){const c=r.tView,E=ah(t,c,s,4096&t[Cn]?4096:16,null,r,null,null,null,a?.injector??null,a?.hydrationInfo??null);E[Ns]=t[r.index];const F=t[mi];return null!==F&&(E[mi]=F.createEmbeddedView(c)),bs(c,E,s),E}(this._declarationLView,this._declarationTContainer,r,{injector:s,hydrationInfo:a});return new od(c)}};function KC(){return Yy(y(),lt())}function Yy(t,r){return 4&t.type?new qC(r,t,Oc(t,r)):null}let Xy=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=eb}return t})();function eb(){return ww(y(),lt())}const tb=Xy,_w=class extends tb{constructor(r,s,a){super(),this._lContainer=r,this._hostTNode=s,this._hostLView=a}get element(){return Oc(this._hostTNode,this._hostLView)}get injector(){return new $s(this._hostTNode,this._hostLView)}get parentInjector(){const r=Co(this._hostTNode,this._hostLView);if(Zu(r)){const s=Yu(r,this._hostLView),a=bu(r);return new $s(s[It].data[a+8],s)}return new $s(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const s=Ew(this._lContainer);return null!==s&&s[r]||null}get length(){return this._lContainer.length-Gr}createEmbeddedView(r,s,a){let c,d;"number"==typeof a?c=a:null!=a&&(c=a.index,d=a.injector);const E=r.createEmbeddedViewImpl(s||{},d,null);return this.insertImpl(E,c,false),E}createComponent(r,s,a,c,d){const m=r&&!function Ta(t){return"function"==typeof t}(r);let E;if(m)E=s;else{const Ct=s||{};E=Ct.index,a=Ct.injector,c=Ct.projectableNodes,d=Ct.environmentInjector||Ct.ngModuleRef}const M=m?r:new yh(Hn(r)),F=a||this.parentInjector;if(!d&&null==M.ngModule){const Yt=(m?F:this.parentInjector).get(Bu,null);Yt&&(d=Yt)}Hn(M.componentType??{});const Pe=M.create(F,c,null,d);return this.insertImpl(Pe.hostView,E,false),Pe}insert(r,s){return this.insertImpl(r,s,!1)}insertImpl(r,s,a){const c=r._lView;if(function lu(t){return zn(t[Er])}(c)){const M=this.indexOf(r);if(-1!==M)this.detach(M);else{const F=c[Er],Y=new _w(F,F[Pi],F[Er]);Y.detach(Y.indexOf(r))}}const m=this._adjustIndex(s),E=this._lContainer;return GC(E,c,m,!a),r.attachToViewContainerRef(),Bf(Q_(E),m,r),r}move(r,s){return this.insert(r,s)}indexOf(r){const s=Ew(this._lContainer);return null!==s?s.indexOf(r):-1}remove(r){const s=this._adjustIndex(r,-1),a=Bh(this._lContainer,s);a&&(_c(Q_(this._lContainer),s),Xf(a[It],a))}detach(r){const s=this._adjustIndex(r,-1),a=Bh(this._lContainer,s);return a&&null!=_c(Q_(this._lContainer),s)?new od(a):null}_adjustIndex(r,s=0){return r??this.length+s}};function Ew(t){return t[8]}function Q_(t){return t[8]||(t[8]=[])}function ww(t,r){let s;const a=r[t.index];return zn(a)?s=a:(s=ly(a,r,null,t),r[t.index]=s,fh(r,s)),Iw(s,r,t,a),new _w(s,t,r)}let Iw=function Dw(t,r,s,a){if(t[ci])return;let c;c=8&s.type?Ur(a):function nb(t,r){const s=t[nn],a=s.createComment(""),c=ot(r,t);return Ic(s,$h(s,c),a,function Dc(t,r){return t.nextSibling(r)}(s,c),!1),a}(r,s),t[ci]=c};class X_{constructor(r){this.queryList=r,this.matches=null}clone(){return new X_(this.queryList)}setDirty(){this.queryList.setDirty()}}class J_{constructor(r=[]){this.queries=r}createEmbeddedView(r){const s=r.queries;if(null!==s){const a=null!==r.contentQueries?r.contentQueries[0]:s.length,c=[];for(let d=0;d<a;d++){const m=s.getByIndex(d);c.push(this.queries[m.indexInDeclarationView].clone())}return new J_(c)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let s=0;s<this.queries.length;s++)null!==Rw(r,s).matches&&this.queries[s].setDirty()}}class Cw{constructor(r,s,a=null){this.predicate=r,this.flags=s,this.read=a}}class eE{constructor(r=[]){this.queries=r}elementStart(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementStart(r,s)}elementEnd(r){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(r)}embeddedTView(r){let s=null;for(let a=0;a<this.length;a++){const c=null!==s?s.length:0,d=this.getByIndex(a).embeddedTView(r,c);d&&(d.indexInDeclarationView=a,null!==s?s.push(d):s=[d])}return null!==s?new eE(s):null}template(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].template(r,s)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class tE{constructor(r,s=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(r,s){this.isApplyingToNode(s)&&this.matchTNode(r,s)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,s){this.elementStart(r,s)}embeddedTView(r,s){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,s),new tE(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let a=r.parent;for(;null!==a&&8&a.type&&a.index!==s;)a=a.parent;return s===(null!==a?a.index:-1)}return this._appliesToNextNode}matchTNode(r,s){const a=this.metadata.predicate;if(Array.isArray(a))for(let c=0;c<a.length;c++){const d=a[c];this.matchTNodeWithReadOption(r,s,sb(s,d)),this.matchTNodeWithReadOption(r,s,Ju(s,r,d,!1,!1))}else a===Bg?4&s.type&&this.matchTNodeWithReadOption(r,s,-1):this.matchTNodeWithReadOption(r,s,Ju(s,r,a,!1,!1))}matchTNodeWithReadOption(r,s,a){if(null!==a){const c=this.metadata.read;if(null!==c)if(c===Jl||c===Xy||c===Bg&&4&s.type)this.addMatch(s.index,-2);else{const d=Ju(s,r,c,!1,!1);null!==d&&this.addMatch(s.index,d)}else this.addMatch(s.index,a)}}addMatch(r,s){null===this.matches?this.matches=[r,s]:this.matches.push(r,s)}}function sb(t,r){const s=t.localNames;if(null!==s)for(let a=0;a<s.length;a+=2)if(s[a]===r)return s[a+1];return null}function ab(t,r,s,a){return-1===s?function ob(t,r){return 11&t.type?Oc(t,r):4&t.type?Yy(t,r):null}(r,t):-2===s?function ub(t,r,s){return s===Jl?Oc(r,t):s===Bg?Yy(r,t):s===Xy?ww(r,t):void 0}(t,r,a):Va(t,t[It],s,r)}function bw(t,r,s,a){const c=r[mi].queries[a];if(null===c.matches){const d=t.data,m=s.matches,E=[];for(let M=0;M<m.length;M+=2){const F=m[M];E.push(F<0?null:ab(r,d[F],m[M+1],s.metadata.read))}c.matches=E}return c.matches}function nE(t,r,s,a){const c=t.queries.getByIndex(s),d=c.matches;if(null!==d){const m=bw(t,r,c,s);for(let E=0;E<d.length;E+=2){const M=d[E];if(M>0)a.push(m[E/2]);else{const F=d[E+1],Y=r[-M];for(let ue=Gr;ue<Y.length;ue++){const Ce=Y[ue];Ce[Ns]===Ce[Er]&&nE(Ce[It],Ce,F,a)}if(null!==Y[as]){const ue=Y[as];for(let Ce=0;Ce<ue.length;Ce++){const Pe=ue[Ce];nE(Pe[It],Pe,F,a)}}}}}return a}function Tw(t){const r=lt(),s=sr(),a=lo();ho(a+1);const c=Rw(s,a);if(t.dirty&&function eo(t){return 4==(4&t[Cn])}(r)===(2==(2&c.metadata.flags))){if(null===c.matches)t.reset([]);else{const d=c.crossesNgTemplate?nE(s,r,a,[]):bw(s,r,c,a);t.reset(d,ed),t.notifyOnChanges()}return!0}return!1}function Sw(t,r,s){const a=sr();a.firstCreatePass&&(xw(a,new Cw(t,r,s),-1),2==(2&r)&&(a.staticViewQueries=!0)),Nw(a,lt(),r)}function Aw(t,r,s,a){const c=sr();if(c.firstCreatePass){const d=y();xw(c,new Cw(r,s,a),d.index),function lb(t,r){const s=t.contentQueries||(t.contentQueries=[]);r!==(s.length?s[s.length-1]:-1)&&s.push(t.queries.length-1,r)}(c,t),2==(2&s)&&(c.staticContentQueries=!0)}Nw(c,lt(),s)}function Mw(){return function cb(t,r){return t[mi].queries[r].queryList}(lt(),lo())}function Nw(t,r,s){const a=new Y_(4==(4&s));(function Wv(t,r,s,a){const c=dg(r);c.push(s),t.firstCreatePass&&hg(t).push(a,c.length-1)})(t,r,a,a.destroy),null===r[mi]&&(r[mi]=new J_),r[mi].queries.push(new X_(a))}function xw(t,r,s){null===t.queries&&(t.queries=new eE),t.queries.track(new tE(r,s))}function Rw(t,r){return t.queries.getByIndex(r)}function Ow(t,r){return Yy(t,r)}function rE(t){return!!Vr(t)}const Yw=new Ii("Application Initializer");let uE=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((s,a)=>{this.resolve=s,this.reject=a}),this.appInits=Mt(Yw,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const s=[];for(const c of this.appInits){const d=c();if(Ag(d))s.push(d);else if($y(d)){const m=new Promise((E,M)=>{d.subscribe({complete:E,error:M})});s.push(m)}}const a=()=>{this.done=!0,this.resolve()};Promise.all(s).then(()=>{a()}).catch(c=>{this.reject(c)}),0===s.length&&a(),this.initialized=!0}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=Ht({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Qw=(()=>{class t{log(s){console.log(s)}warn(s){console.warn(s)}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=Ht({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();const ev=new Ii("LocaleId",{providedIn:"root",factory:()=>Mt(ev,Xt.Optional|Xt.SkipSelf)||function xb(){return typeof $localize<"u"&&$localize.locale||Pf}()}),Rb=new Ii("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let Xw=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new fe.X(!1)}add(){this.hasPendingTasks.next(!0);const s=this.taskId++;return this.pendingTasks.add(s),s}remove(s){this.pendingTasks.delete(s),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=Ht({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class Pb{constructor(r,s){this.ngModuleFactory=r,this.componentFactories=s}}let kb=(()=>{class t{compileModuleSync(s){return new K_(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const a=this.compileModuleSync(s),d=uc(Vr(s).declarations).reduce((m,E)=>{const M=Hn(E);return M&&m.push(new yh(M)),m},[]);return new Pb(a,d)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=Ht({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const nI=new Ii(""),rI=new Ii("");let dE,tT=(()=>{class t{constructor(s,a,c){this._ngZone=s,this.registry=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,dE||(function nT(t){dE=t}(c),c.addToWindow(a)),this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Bo.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb(this._didWork)}this._didWork=!1});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(a=>!a.updateCb||!a.updateCb(s)||(clearTimeout(a.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,a,c){let d=-1;a&&a>0&&(d=setTimeout(()=>{this._callbacks=this._callbacks.filter(m=>m.timeoutId!==d),s(this._didWork,this.getPendingTasks())},a)),this._callbacks.push({doneCb:s,timeoutId:d,updateCb:c})}whenStable(s,a,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,a,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(s){this.registry.registerApplication(s,this)}unregisterApplication(s){this.registry.unregisterApplication(s)}findProviders(s,a,c){return[]}static#e=this.\u0275fac=function(a){return new(a||t)(yt(Bo),yt(iI),yt(rI))};static#t=this.\u0275prov=Ht({token:t,factory:t.\u0275fac})}return t})(),iI=(()=>{class t{constructor(){this._applications=new Map}registerApplication(s,a){this._applications.set(s,a)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,a=!0){return dE?.findTestabilityInTree(this,s,a)??null}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=Ht({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})(),pd=null;const sI=new Ii("AllowMultipleToken"),hE=new Ii("PlatformDestroyListeners"),fE=new Ii("appBootstrapListener");class sT{constructor(r,s){this.name=r,this.token=s}}function uI(t,r,s=[]){const a=`Platform: ${r}`,c=new Ii(a);return(d=[])=>{let m=pE();if(!m||m.injector.get(sI,!1)){const E=[...s,...d,{provide:c,useValue:!0}];t?t(E):function oT(t){if(pd&&!pd.get(sI,!1))throw new le(400,!1);(function oI(){!function ma(t){Vi=t}(()=>{throw new le(600,!1)})})(),pd=t;const r=t.get(lI);(function aI(t){t.get(Cp,null)?.forEach(s=>s())})(t)}(function cI(t=[],r){return ca.create({name:r,providers:[{provide:qd,useValue:"platform"},{provide:hE,useValue:new Set([()=>pd=null])},...t]})}(E,a))}return function uT(t){const r=pE();if(!r)throw new le(401,!1);return r}()}}function pE(){return pd?.get(lI)??null}let lI=(()=>{class t{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,a){const c=function cT(t="zone.js",r){return"noop"===t?new $v:"zone.js"===t?new Bo(r):t}(a?.ngZone,function dI(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:a?.ngZoneEventCoalescing,runCoalescing:a?.ngZoneRunCoalescing}));return c.run(()=>{const d=function EC(t,r,s){return new q_(t,r,s)}(s.moduleType,this.injector,function mI(t){return[{provide:Bo,useFactory:t},{provide:zd,multi:!0,useFactory:()=>{const r=Mt(dT,{optional:!0});return()=>r.initialize()}},{provide:gI,useFactory:lT},{provide:jm,useFactory:$m}]}(()=>c)),m=d.injector.get(kc,null);return c.runOutsideAngular(()=>{const E=c.onError.subscribe({next:M=>{m.handleError(M)}});d.onDestroy(()=>{nv(this._modules,d),E.unsubscribe()})}),function hI(t,r,s){try{const a=s();return Ag(a)?a.catch(c=>{throw r.runOutsideAngular(()=>t.handleError(c)),c}):a}catch(a){throw r.runOutsideAngular(()=>t.handleError(a)),a}}(m,c,()=>{const E=d.injector.get(uE);return E.runInitializers(),E.donePromise.then(()=>(function C0(t){Tt(t,"Expected localeId to be defined"),"string"==typeof t&&(D0=t.toLowerCase().replace(/_/g,"-"))}(d.injector.get(ev,Pf)||Pf),this._moduleDoBootstrap(d),d))})})}bootstrapModule(s,a=[]){const c=fI({},a);return function rT(t,r,s){const a=new K_(s);return Promise.resolve(a)}(0,0,s).then(d=>this.bootstrapModuleFactory(d,c))}_moduleDoBootstrap(s){const a=s.injector.get(Lf);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(c=>a.bootstrap(c));else{if(!s.instance.ngDoBootstrap)throw new le(-403,!1);s.instance.ngDoBootstrap(a)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new le(404,!1);this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a());const s=this._injector.get(hE,null);s&&(s.forEach(a=>a()),s.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(a){return new(a||t)(yt(ca))};static#t=this.\u0275prov=Ht({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();function fI(t,r){return Array.isArray(r)?r.reduce(fI,t):{...t,...r}}let Lf=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Mt(gI),this.zoneIsStable=Mt(jm),this.componentTypes=[],this.components=[],this.isStable=Mt(Xw).hasPendingTasks.pipe((0,Ee.w)(s=>s?(0,xe.of)(!1):this.zoneIsStable),(0,ze.x)(),(0,Me.B)()),this._injector=Mt(Bu)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(s,a){const c=s instanceof Sm;if(!this._injector.get(uE).done)throw!c&&vs(s),new le(405,!1);let m;m=c?s:this._injector.get(Xl).resolveComponentFactory(s),this.componentTypes.push(m.componentType);const E=function iT(t){return t.isBoundToModule}(m)?void 0:this._injector.get(bh),F=m.create(ca.NULL,[],a||m.selector,E),Y=F.location.nativeElement,ue=F.injector.get(nI,null);return ue?.registerApplication(Y),F.onDestroy(()=>{this.detachView(F.hostView),nv(this.components,F),ue?.unregisterApplication(Y)}),this._loadComponent(F),F}tick(){if(this._runningTick)throw new le(101,!1);try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this.internalErrorHandler(s)}finally{this._runningTick=!1}}attachView(s){const a=s;this._views.push(a),a.attachToAppRef(this)}detachView(s){const a=s;nv(this._views,a),a.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s);const a=this._injector.get(fE,[]);a.push(...this._bootstrapListeners),a.forEach(c=>c(s))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(s=>s()),this._views.slice().forEach(s=>s.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(s){return this._destroyListeners.push(s),()=>nv(this._destroyListeners,s)}destroy(){if(this._destroyed)throw new le(406,!1);const s=this._injector;s.destroy&&!s.destroyed&&s.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=Ht({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function nv(t,r){const s=t.indexOf(r);s>-1&&t.splice(s,1)}const gI=new Ii("",{providedIn:"root",factory:()=>Mt(kc).handleError.bind(void 0)});function lT(){const t=Mt(Bo),r=Mt(kc);return s=>t.runOutsideAngular(()=>r.handleError(s))}let dT=(()=>{class t{constructor(){this.zone=Mt(Bo),this.applicationRef=Mt(Lf)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=Ht({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function fT(){return!1}let pT=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=gT}return t})();function gT(t){return function mT(t,r,s){if(_s(t)&&!s){const a=Bs(t.index,r);return new od(a,a)}return 47&t.type?new od(r[Yr],r):null}(y(),lt(),16==(16&t))}class EI{constructor(){}supports(r){return ud(r)}create(r){return new IT(r)}}const wT=(t,r)=>r;class IT{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||wT}forEachItem(r){let s;for(s=this._itHead;null!==s;s=s._next)r(s)}forEachOperation(r){let s=this._itHead,a=this._removalsHead,c=0,d=null;for(;s||a;){const m=!a||s&&s.currentIndex<II(a,c,d)?s:a,E=II(m,c,d),M=m.currentIndex;if(m===a)c--,a=a._nextRemoved;else if(s=s._next,null==m.previousIndex)c++;else{d||(d=[]);const F=E-c,Y=M-c;if(F!=Y){for(let Ce=0;Ce<F;Ce++){const Pe=Ce<d.length?d[Ce]:d[Ce]=0,ct=Pe+Ce;Y<=ct&&ct<F&&(d[Ce]=Pe+1)}d[m.previousIndex]=Y-F}}E!==M&&r(m,E,M)}}forEachPreviousItem(r){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachMovedItem(r){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}forEachIdentityChange(r){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)r(s)}diff(r){if(null==r&&(r=[]),!ud(r))throw new le(900,!1);return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let c,d,m,s=this._itHead,a=!1;if(Array.isArray(r)){this.length=r.length;for(let E=0;E<this.length;E++)d=r[E],m=this._trackByFn(E,d),null!==s&&Object.is(s.trackById,m)?(a&&(s=this._verifyReinsertion(s,d,m,E)),Object.is(s.item,d)||this._addIdentityChange(s,d)):(s=this._mismatch(s,d,m,E),a=!0),s=s._next}else c=0,function by(t,r){if(Array.isArray(t))for(let s=0;s<t.length;s++)r(t[s]);else{const s=t[Symbol.iterator]();let a;for(;!(a=s.next()).done;)r(a.value)}}(r,E=>{m=this._trackByFn(c,E),null!==s&&Object.is(s.trackById,m)?(a&&(s=this._verifyReinsertion(s,E,m,c)),Object.is(s.item,E)||this._addIdentityChange(s,E)):(s=this._mismatch(s,E,m,c),a=!0),s=s._next,c++}),this.length=c;return this._truncate(s),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,s,a,c){let d;return null===r?d=this._itTail:(d=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._reinsertAfter(r,d,c)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(a,c))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._moveAfter(r,d,c)):r=this._addAfter(new DT(s,a),d,c),r}_verifyReinsertion(r,s,a,c){let d=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null);return null!==d?r=this._reinsertAfter(d,r._prev,c):r.currentIndex!=c&&(r.currentIndex=c,this._addToMoves(r,c)),r}_truncate(r){for(;null!==r;){const s=r._next;this._addToRemovals(this._unlink(r)),r=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,s,a){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const c=r._prevRemoved,d=r._nextRemoved;return null===c?this._removalsHead=d:c._nextRemoved=d,null===d?this._removalsTail=c:d._prevRemoved=c,this._insertAfter(r,s,a),this._addToMoves(r,a),r}_moveAfter(r,s,a){return this._unlink(r),this._insertAfter(r,s,a),this._addToMoves(r,a),r}_addAfter(r,s,a){return this._insertAfter(r,s,a),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,s,a){const c=null===s?this._itHead:s._next;return r._next=c,r._prev=s,null===c?this._itTail=r:c._prev=r,null===s?this._itHead=r:s._next=r,null===this._linkedRecords&&(this._linkedRecords=new wI),this._linkedRecords.put(r),r.currentIndex=a,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const s=r._prev,a=r._next;return null===s?this._itHead=a:s._next=a,null===a?this._itTail=s:a._prev=s,r}_addToMoves(r,s){return r.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new wI),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,s){return r.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class DT{constructor(r,s){this.item=r,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class CT{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,s){let a;for(a=this._head;null!==a;a=a._nextDup)if((null===s||s<=a.currentIndex)&&Object.is(a.trackById,r))return a;return null}remove(r){const s=r._prevDup,a=r._nextDup;return null===s?this._head=a:s._nextDup=a,null===a?this._tail=s:a._prevDup=s,null===this._head}}class wI{constructor(){this.map=new Map}put(r){const s=r.trackById;let a=this.map.get(s);a||(a=new CT,this.map.set(s,a)),a.add(r)}get(r,s){const c=this.map.get(r);return c?c.get(r,s):null}remove(r){const s=r.trackById;return this.map.get(s).remove(r)&&this.map.delete(s),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function II(t,r,s){const a=t.previousIndex;if(null===a)return a;let c=0;return s&&a<s.length&&(c=s[a]),a+r+c}class DI{constructor(){}supports(r){return r instanceof Map||lc(r)}create(){return new bT}}class bT{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let s;for(s=this._mapHead;null!==s;s=s._next)r(s)}forEachPreviousItem(r){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)r(s)}forEachChangedItem(r){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}diff(r){if(r){if(!(r instanceof Map||lc(r)))throw new le(900,!1)}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(r,(a,c)=>{if(s&&s.key===c)this._maybeAddToChanges(s,a),this._appendAfter=s,s=s._next;else{const d=this._getOrCreateRecordForKey(c,a);s=this._insertBeforeOrAppend(s,d)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let a=s;null!==a;a=a._nextRemoved)a===this._mapHead&&(this._mapHead=null),this._records.delete(a.key),a._nextRemoved=a._next,a.previousValue=a.currentValue,a.currentValue=null,a._prev=null,a._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,s){if(r){const a=r._prev;return s._next=r,s._prev=a,r._prev=s,a&&(a._next=s),r===this._mapHead&&(this._mapHead=s),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(r,s){if(this._records.has(r)){const c=this._records.get(r);this._maybeAddToChanges(c,s);const d=c._prev,m=c._next;return d&&(d._next=m),m&&(m._prev=d),c._next=null,c._prev=null,c}const a=new TT(r);return this._records.set(r,a),a.currentValue=s,this._addToAdditions(a),a}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,s){Object.is(s,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=s,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,s){r instanceof Map?r.forEach(s):Object.keys(r).forEach(a=>s(r[a],a))}}class TT{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function CI(){return new _E([new EI])}let _E=(()=>{class t{static#e=this.\u0275prov=Ht({token:t,providedIn:"root",factory:CI});constructor(s){this.factories=s}static create(s,a){if(null!=a){const c=a.factories.slice();s=s.concat(c)}return new t(s)}static extend(s){return{provide:t,useFactory:a=>t.create(s,a||CI()),deps:[[t,new Ut,new Ye]]}}find(s){const a=this.factories.find(c=>c.supports(s));if(null!=a)return a;throw new le(901,!1)}}return t})();function bI(){return new EE([new DI])}let EE=(()=>{class t{static#e=this.\u0275prov=Ht({token:t,providedIn:"root",factory:bI});constructor(s){this.factories=s}static create(s,a){if(a){const c=a.factories.slice();s=s.concat(c)}return new t(s)}static extend(s){return{provide:t,useFactory:a=>t.create(s,a||bI()),deps:[[t,new Ut,new Ye]]}}find(s){const a=this.factories.find(c=>c.supports(s));if(a)return a;throw new le(901,!1)}}return t})();const MT=uI(null,"core",[]);let NT=(()=>{class t{constructor(s){}static#e=this.\u0275fac=function(a){return new(a||t)(yt(Lf))};static#t=this.\u0275mod=So({type:t});static#n=this.\u0275inj=lr({})}return t})();function jT(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}function HT(t){const r=Hn(t);if(!r)return null;const s=new yh(r);return{get selector(){return s.selector},get type(){return s.componentType},get inputs(){return s.inputs},get outputs(){return s.outputs},get ngContentSelectors(){return s.ngContentSelectors},get isStandalone(){return r.standalone},get isSignal(){return r.signals}}}},95:($t,Ge,z)=>{z.d(Ge,{Fj:()=>le,u5:()=>No,Cf:()=>Ze,JU:()=>mt,JJ:()=>gn,On:()=>so});var p=z(5879),W=z(6814),ae=z(2459),he=z(5592),fe=z(7453),xe=z(4829),Me=z(4564),Ee=z(8251),ze=z(7400),oe=z(2714),Te=z(7398);let et=(()=>{class L{constructor(x,te){this._renderer=x,this._elementRef=te,this.onChange=_e=>{},this.onTouched=()=>{}}setProperty(x,te){this._renderer.setProperty(this._elementRef.nativeElement,x,te)}registerOnTouched(x){this.onTouched=x}registerOnChange(x){this.onChange=x}setDisabledState(x){this.setProperty("disabled",x)}static#e=this.\u0275fac=function(te){return new(te||L)(p.Y36(p.Qsj),p.Y36(p.SBq))};static#t=this.\u0275dir=p.lG2({type:L})}return L})(),rt=(()=>{class L extends et{static#e=this.\u0275fac=function(){let x;return function(_e){return(x||(x=p.n5z(L)))(_e||L)}}();static#t=this.\u0275dir=p.lG2({type:L,features:[p.qOj]})}return L})();const mt=new p.OlP("NgValueAccessor"),Rt={provide:mt,useExisting:(0,p.Gpc)(()=>le),multi:!0},bt=new p.OlP("CompositionEventMode");let le=(()=>{class L extends et{constructor(x,te,_e){super(x,te),this._compositionMode=_e,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Mn(){const L=(0,W.q)()?(0,W.q)().getUserAgent():"";return/android (\d+)/.test(L.toLowerCase())}())}writeValue(x){this.setProperty("value",x??"")}_handleInput(x){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(x)}_compositionStart(){this._composing=!0}_compositionEnd(x){this._composing=!1,this._compositionMode&&this.onChange(x)}static#e=this.\u0275fac=function(te){return new(te||L)(p.Y36(p.Qsj),p.Y36(p.SBq),p.Y36(bt,8))};static#t=this.\u0275dir=p.lG2({type:L,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(te,_e){1&te&&p.NdJ("input",function(cn){return _e._handleInput(cn.target.value)})("blur",function(){return _e.onTouched()})("compositionstart",function(){return _e._compositionStart()})("compositionend",function(cn){return _e._compositionEnd(cn.target.value)})},features:[p._Bn([Rt]),p.qOj]})}return L})();const Ze=new p.OlP("NgValidators"),pt=new p.OlP("NgAsyncValidators");function He(L){return null!=L}function qe(L){return(0,p.QGY)(L)?(0,ae.D)(L):L}function Be(L){let U={};return L.forEach(x=>{U=null!=x?{...U,...x}:U}),0===Object.keys(U).length?null:U}function Je(L,U){return U.map(x=>x(L))}function Tt(L){return L.map(U=>function gt(L){return!L.validate}(U)?U:x=>U.validate(x))}function Wn(L){return null!=L?function Et(L){if(!L)return null;const U=L.filter(He);return 0==U.length?null:function(x){return Be(Je(x,U))}}(Tt(L)):null}function xn(L){return null!=L?function rn(L){if(!L)return null;const U=L.filter(He);return 0==U.length?null:function(x){return function pe(...L){const U=(0,Me.jO)(L),{args:x,keys:te}=(0,fe.D)(L),_e=new he.y(qt=>{const{length:cn}=x;if(!cn)return void qt.complete();const Li=new Array(cn);let ws=cn,yi=cn;for(let cs=0;cs<cn;cs++){let Gi=!1;(0,xe.Xf)(x[cs]).subscribe((0,Ee.x)(qt,Io=>{Gi||(Gi=!0,yi--),Li[cs]=Io},()=>ws--,void 0,()=>{(!ws||!Gi)&&(yi||qt.next(te?(0,oe.n)(te,Li):Li),qt.complete())}))}});return U?_e.pipe((0,ze.Z)(U)):_e}(Je(x,U).map(qe)).pipe((0,Te.U)(Be))}}(Tt(L)):null}function Ht(L,U){return null===L?[U]:Array.isArray(L)?[...L,U]:[L,U]}function Qn(L){return L?Array.isArray(L)?L:[L]:[]}function er(L,U){return Array.isArray(L)?L.includes(U):L===U}function Vt(L,U){const x=Qn(U);return Qn(L).forEach(_e=>{er(x,_e)||x.push(_e)}),x}function Nr(L,U){return Qn(U).filter(x=>!er(L,x))}class Ki{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(U){this._rawValidators=U||[],this._composedValidatorFn=Wn(this._rawValidators)}_setAsyncValidators(U){this._rawAsyncValidators=U||[],this._composedAsyncValidatorFn=xn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(U){this._onDestroyCallbacks.push(U)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(U=>U()),this._onDestroyCallbacks=[]}reset(U=void 0){this.control&&this.control.reset(U)}hasError(U,x){return!!this.control&&this.control.hasError(U,x)}getError(U,x){return this.control?this.control.getError(U,x):null}}class Ln extends Ki{get formDirective(){return null}get path(){return null}}class $r extends Ki{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class si{constructor(U){this._cd=U}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let gn=(()=>{class L extends si{constructor(x){super(x)}static#e=this.\u0275fac=function(te){return new(te||L)(p.Y36($r,2))};static#t=this.\u0275dir=p.lG2({type:L,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(te,_e){2&te&&p.ekj("ng-untouched",_e.isUntouched)("ng-touched",_e.isTouched)("ng-pristine",_e.isPristine)("ng-dirty",_e.isDirty)("ng-valid",_e.isValid)("ng-invalid",_e.isInvalid)("ng-pending",_e.isPending)},features:[p.qOj]})}return L})();const Zn="VALID",wn="INVALID",Jt="PENDING",Yn="DISABLED";function J(L){return null!=L&&!Array.isArray(L)&&"object"==typeof L}class yt{constructor(U,x){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(U),this._assignAsyncValidators(x)}get validator(){return this._composedValidatorFn}set validator(U){this._rawValidators=this._composedValidatorFn=U}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(U){this._rawAsyncValidators=this._composedAsyncValidatorFn=U}get parent(){return this._parent}get valid(){return this.status===Zn}get invalid(){return this.status===wn}get pending(){return this.status==Jt}get disabled(){return this.status===Yn}get enabled(){return this.status!==Yn}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(U){this._assignValidators(U)}setAsyncValidators(U){this._assignAsyncValidators(U)}addValidators(U){this.setValidators(Vt(U,this._rawValidators))}addAsyncValidators(U){this.setAsyncValidators(Vt(U,this._rawAsyncValidators))}removeValidators(U){this.setValidators(Nr(U,this._rawValidators))}removeAsyncValidators(U){this.setAsyncValidators(Nr(U,this._rawAsyncValidators))}hasValidator(U){return er(this._rawValidators,U)}hasAsyncValidator(U){return er(this._rawAsyncValidators,U)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(U={}){this.touched=!0,this._parent&&!U.onlySelf&&this._parent.markAsTouched(U)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(U=>U.markAllAsTouched())}markAsUntouched(U={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(x=>{x.markAsUntouched({onlySelf:!0})}),this._parent&&!U.onlySelf&&this._parent._updateTouched(U)}markAsDirty(U={}){this.pristine=!1,this._parent&&!U.onlySelf&&this._parent.markAsDirty(U)}markAsPristine(U={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(x=>{x.markAsPristine({onlySelf:!0})}),this._parent&&!U.onlySelf&&this._parent._updatePristine(U)}markAsPending(U={}){this.status=Jt,!1!==U.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!U.onlySelf&&this._parent.markAsPending(U)}disable(U={}){const x=this._parentMarkedDirty(U.onlySelf);this.status=Yn,this.errors=null,this._forEachChild(te=>{te.disable({...U,onlySelf:!0})}),this._updateValue(),!1!==U.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...U,skipPristineCheck:x}),this._onDisabledChange.forEach(te=>te(!0))}enable(U={}){const x=this._parentMarkedDirty(U.onlySelf);this.status=Zn,this._forEachChild(te=>{te.enable({...U,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:U.emitEvent}),this._updateAncestors({...U,skipPristineCheck:x}),this._onDisabledChange.forEach(te=>te(!1))}_updateAncestors(U){this._parent&&!U.onlySelf&&(this._parent.updateValueAndValidity(U),U.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(U){this._parent=U}getRawValue(){return this.value}updateValueAndValidity(U={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Zn||this.status===Jt)&&this._runAsyncValidator(U.emitEvent)),!1!==U.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!U.onlySelf&&this._parent.updateValueAndValidity(U)}_updateTreeValidity(U={emitEvent:!0}){this._forEachChild(x=>x._updateTreeValidity(U)),this.updateValueAndValidity({onlySelf:!0,emitEvent:U.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Yn:Zn}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(U){if(this.asyncValidator){this.status=Jt,this._hasOwnPendingAsyncValidator=!0;const x=qe(this.asyncValidator(this));this._asyncValidationSubscription=x.subscribe(te=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(te,{emitEvent:U})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(U,x={}){this.errors=U,this._updateControlsErrors(!1!==x.emitEvent)}get(U){let x=U;return null==x||(Array.isArray(x)||(x=x.split(".")),0===x.length)?null:x.reduce((te,_e)=>te&&te._find(_e),this)}getError(U,x){const te=x?this.get(x):this;return te&&te.errors?te.errors[U]:null}hasError(U,x){return!!this.getError(U,x)}get root(){let U=this;for(;U._parent;)U=U._parent;return U}_updateControlsErrors(U){this.status=this._calculateStatus(),U&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(U)}_initObservables(){this.valueChanges=new p.vpe,this.statusChanges=new p.vpe}_calculateStatus(){return this._allControlsDisabled()?Yn:this.errors?wn:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Jt)?Jt:this._anyControlsHaveStatus(wn)?wn:Zn}_anyControlsHaveStatus(U){return this._anyControls(x=>x.status===U)}_anyControlsDirty(){return this._anyControls(U=>U.dirty)}_anyControlsTouched(){return this._anyControls(U=>U.touched)}_updatePristine(U={}){this.pristine=!this._anyControlsDirty(),this._parent&&!U.onlySelf&&this._parent._updatePristine(U)}_updateTouched(U={}){this.touched=this._anyControlsTouched(),this._parent&&!U.onlySelf&&this._parent._updateTouched(U)}_registerOnCollectionChange(U){this._onCollectionChange=U}_setUpdateStrategy(U){J(U)&&null!=U.updateOn&&(this._updateOn=U.updateOn)}_parentMarkedDirty(U){return!U&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(U){return null}_assignValidators(U){this._rawValidators=Array.isArray(U)?U.slice():U,this._composedValidatorFn=function X(L){return Array.isArray(L)?Wn(L):L||null}(this._rawValidators)}_assignAsyncValidators(U){this._rawAsyncValidators=Array.isArray(U)?U.slice():U,this._composedAsyncValidatorFn=function K(L){return Array.isArray(L)?xn(L):L||null}(this._rawAsyncValidators)}}const Ni=new p.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>ms}),ms="always";function We(L,U,x=ms){(function wt(L,U){const x=function Kn(L){return L._rawValidators}(L);null!==U.validator?L.setValidators(Ht(x,U.validator)):"function"==typeof x&&L.setValidators([x]);const te=function lr(L){return L._rawAsyncValidators}(L);null!==U.asyncValidator?L.setAsyncValidators(Ht(te,U.asyncValidator)):"function"==typeof te&&L.setAsyncValidators([te]);const _e=()=>L.updateValueAndValidity();ut(U._rawValidators,_e),ut(U._rawAsyncValidators,_e)})(L,U),U.valueAccessor.writeValue(L.value),(L.disabled||"always"===x)&&U.valueAccessor.setDisabledState?.(L.disabled),function En(L,U){U.valueAccessor.registerOnChange(x=>{L._pendingValue=x,L._pendingChange=!0,L._pendingDirty=!0,"change"===L.updateOn&&hr(L,U)})}(L,U),function Rr(L,U){const x=(te,_e)=>{U.valueAccessor.writeValue(te),_e&&U.viewToModelUpdate(te)};L.registerOnChange(x),U._registerOnDestroy(()=>{L._unregisterOnChange(x)})}(L,U),function Tr(L,U){U.valueAccessor.registerOnTouched(()=>{L._pendingTouched=!0,"blur"===L.updateOn&&L._pendingChange&&hr(L,U),"submit"!==L.updateOn&&L.markAsTouched()})}(L,U),function kt(L,U){if(U.valueAccessor.setDisabledState){const x=te=>{U.valueAccessor.setDisabledState(te)};L.registerOnDisabledChange(x),U._registerOnDestroy(()=>{L._unregisterOnDisabledChange(x)})}}(L,U)}function ut(L,U){L.forEach(x=>{x.registerOnValidatorChange&&x.registerOnValidatorChange(U)})}function hr(L,U){L._pendingDirty&&L.markAsDirty(),L.setValue(L._pendingValue,{emitModelToViewChange:!1}),U.viewToModelUpdate(L._pendingValue),L._pendingChange=!1}function nt(L,U){const x=L.indexOf(U);x>-1&&L.splice(x,1)}function vt(L){return"object"==typeof L&&null!==L&&2===Object.keys(L).length&&"value"in L&&"disabled"in L}const Zt=class extends yt{constructor(U=null,x,te){super(function me(L){return(J(L)?L.validators:L)||null}(x),function ee(L,U){return(J(U)?U.asyncValidators:L)||null}(te,x)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(U),this._setUpdateStrategy(x),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),J(x)&&(x.nonNullable||x.initialValueIsDefault)&&(this.defaultValue=vt(U)?U.value:U)}setValue(U,x={}){this.value=this._pendingValue=U,this._onChange.length&&!1!==x.emitModelToViewChange&&this._onChange.forEach(te=>te(this.value,!1!==x.emitViewToModelChange)),this.updateValueAndValidity(x)}patchValue(U,x={}){this.setValue(U,x)}reset(U=this.defaultValue,x={}){this._applyFormState(U),this.markAsPristine(x),this.markAsUntouched(x),this.setValue(this.value,x),this._pendingChange=!1}_updateValue(){}_anyControls(U){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(U){this._onChange.push(U)}_unregisterOnChange(U){nt(this._onChange,U)}registerOnDisabledChange(U){this._onDisabledChange.push(U)}_unregisterOnDisabledChange(U){nt(this._onDisabledChange,U)}_forEachChild(U){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(U){vt(U)?(this.value=this._pendingValue=U.value,U.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=U}},So={provide:$r,useExisting:(0,p.Gpc)(()=>so)},Ss=(()=>Promise.resolve())();let so=(()=>{class L extends $r{constructor(x,te,_e,qt,cn,Li){super(),this._changeDetectorRef=cn,this.callSetDisabledState=Li,this.control=new Zt,this._registered=!1,this.name="",this.update=new p.vpe,this._parent=x,this._setValidators(te),this._setAsyncValidators(_e),this.valueAccessor=function Zi(L,U){if(!U)return null;let x,te,_e;return Array.isArray(U),U.forEach(qt=>{qt.constructor===le?x=qt:function Lr(L){return Object.getPrototypeOf(L.constructor)===rt}(qt)?te=qt:_e=qt}),_e||te||x||null}(0,qt)}ngOnChanges(x){if(this._checkForErrors(),!this._registered||"name"in x){if(this._registered&&(this._checkName(),this.formDirective)){const te=x.name.previousValue;this.formDirective.removeControl({name:te,path:this._getPath(te)})}this._setUpControl()}"isDisabled"in x&&this._updateDisabled(x),function Ts(L,U){if(!L.hasOwnProperty("model"))return!1;const x=L.model;return!!x.isFirstChange()||!Object.is(U,x.currentValue)}(x,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(x){this.viewModel=x,this.update.emit(x)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){We(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(x){Ss.then(()=>{this.control.setValue(x,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(x){const te=x.isDisabled.currentValue,_e=0!==te&&(0,p.VuI)(te);Ss.then(()=>{_e&&!this.control.disabled?this.control.disable():!_e&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(x){return this._parent?function ts(L,U){return[...U.path,L]}(x,this._parent):[x]}static#e=this.\u0275fac=function(te){return new(te||L)(p.Y36(Ln,9),p.Y36(Ze,10),p.Y36(pt,10),p.Y36(mt,10),p.Y36(p.sBO,8),p.Y36(Ni,8))};static#t=this.\u0275dir=p.lG2({type:L,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[p._Bn([So]),p.qOj,p.TTD]})}return L})(),vs=(()=>{class L{static#e=this.\u0275fac=function(te){return new(te||L)};static#t=this.\u0275mod=p.oAB({type:L});static#n=this.\u0275inj=p.cJS({})}return L})(),wo=(()=>{class L{static#e=this.\u0275fac=function(te){return new(te||L)};static#t=this.\u0275mod=p.oAB({type:L});static#n=this.\u0275inj=p.cJS({imports:[vs]})}return L})(),No=(()=>{class L{static withConfig(x){return{ngModule:L,providers:[{provide:Ni,useValue:x.callSetDisabledState??ms}]}}static#e=this.\u0275fac=function(te){return new(te||L)};static#t=this.\u0275mod=p.oAB({type:L});static#n=this.\u0275inj=p.cJS({imports:[wo]})}return L})()},6593:($t,Ge,z)=>{z.d(Ge,{Dx:()=>$r,H7:()=>ei,b2:()=>er,q6:()=>Ht,se:()=>Se});var p=z(5879),W=z(6814);class ae extends W.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class he extends ae{static makeCurrent(){(0,W.HT)(new he)}onAndCancel(ee,K,J){return ee.addEventListener(K,J),()=>{ee.removeEventListener(K,J)}}dispatchEvent(ee,K){ee.dispatchEvent(K)}remove(ee){ee.parentNode&&ee.parentNode.removeChild(ee)}createElement(ee,K){return(K=K||this.getDefaultDocument()).createElement(ee)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(ee){return ee.nodeType===Node.ELEMENT_NODE}isShadowRoot(ee){return ee instanceof DocumentFragment}getGlobalEventTarget(ee,K){return"window"===K?window:"document"===K?ee:"body"===K?ee.body:null}getBaseHref(ee){const K=function xe(){return fe=fe||document.querySelector("base"),fe?fe.getAttribute("href"):null}();return null==K?null:function Ee(X){Me=Me||document.createElement("a"),Me.setAttribute("href",X);const ee=Me.pathname;return"/"===ee.charAt(0)?ee:`/${ee}`}(K)}resetBaseElement(){fe=null}getUserAgent(){return window.navigator.userAgent}getCookie(ee){return(0,W.Mx)(document.cookie,ee)}}let Me,fe=null,oe=(()=>{class X{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(J){return new(J||X)};static#t=this.\u0275prov=p.Yz7({token:X,factory:X.\u0275fac})}return X})();const pe=new p.OlP("EventManagerPlugins");let Te=(()=>{class X{constructor(K,J){this._zone=J,this._eventNameToPlugin=new Map,K.forEach(Ie=>{Ie.manager=this}),this._plugins=K.slice().reverse()}addEventListener(K,J,Ie){return this._findPluginFor(J).addEventListener(K,J,Ie)}getZone(){return this._zone}_findPluginFor(K){let J=this._eventNameToPlugin.get(K);if(J)return J;if(J=this._plugins.find(at=>at.supports(K)),!J)throw new p.vHH(5101,!1);return this._eventNameToPlugin.set(K,J),J}static#e=this.\u0275fac=function(J){return new(J||X)(p.LFG(pe),p.LFG(p.R0b))};static#t=this.\u0275prov=p.Yz7({token:X,factory:X.\u0275fac})}return X})();class et{constructor(ee){this._doc=ee}}const rt="ng-app-id";let mt=(()=>{class X{constructor(K,J,Ie,at={}){this.doc=K,this.appId=J,this.nonce=Ie,this.platformId=at,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=(0,W.PM)(at),this.resetHostNodes()}addStyles(K){for(const J of K)1===this.changeUsageCount(J,1)&&this.onStyleAdded(J)}removeStyles(K){for(const J of K)this.changeUsageCount(J,-1)<=0&&this.onStyleRemoved(J)}ngOnDestroy(){const K=this.styleNodesInDOM;K&&(K.forEach(J=>J.remove()),K.clear());for(const J of this.getAllStyles())this.onStyleRemoved(J);this.resetHostNodes()}addHost(K){this.hostNodes.add(K);for(const J of this.getAllStyles())this.addStyleToHost(K,J)}removeHost(K){this.hostNodes.delete(K)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(K){for(const J of this.hostNodes)this.addStyleToHost(J,K)}onStyleRemoved(K){const J=this.styleRef;J.get(K)?.elements?.forEach(Ie=>Ie.remove()),J.delete(K)}collectServerRenderedStyles(){const K=this.doc.head?.querySelectorAll(`style[${rt}="${this.appId}"]`);if(K?.length){const J=new Map;return K.forEach(Ie=>{null!=Ie.textContent&&J.set(Ie.textContent,Ie)}),J}return null}changeUsageCount(K,J){const Ie=this.styleRef;if(Ie.has(K)){const at=Ie.get(K);return at.usage+=J,at.usage}return Ie.set(K,{usage:J,elements:[]}),J}getStyleElement(K,J){const Ie=this.styleNodesInDOM,at=Ie?.get(J);if(at?.parentNode===K)return Ie.delete(J),at.removeAttribute(rt),at;{const yt=this.doc.createElement("style");return this.nonce&&yt.setAttribute("nonce",this.nonce),yt.textContent=J,this.platformIsServer&&yt.setAttribute(rt,this.appId),yt}}addStyleToHost(K,J){const Ie=this.getStyleElement(K,J);K.appendChild(Ie);const at=this.styleRef,yt=at.get(J)?.elements;yt?yt.push(Ie):at.set(J,{elements:[Ie],usage:1})}resetHostNodes(){const K=this.hostNodes;K.clear(),K.add(this.doc.head)}static#e=this.\u0275fac=function(J){return new(J||X)(p.LFG(W.K0),p.LFG(p.AFp),p.LFG(p.Ojb,8),p.LFG(p.Lbi))};static#t=this.\u0275prov=p.Yz7({token:X,factory:X.\u0275fac})}return X})();const ht={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Qt=/%COMP%/g,Ve=new p.OlP("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function pt(X,ee){return ee.map(K=>K.replace(Qt,X))}let Se=(()=>{class X{constructor(K,J,Ie,at,yt,pn,Mt,_n=null){this.eventManager=K,this.sharedStylesHost=J,this.appId=Ie,this.removeStylesOnCompDestroy=at,this.doc=yt,this.platformId=pn,this.ngZone=Mt,this.nonce=_n,this.rendererByCompId=new Map,this.platformIsServer=(0,W.PM)(pn),this.defaultRenderer=new ln(K,yt,Mt,this.platformIsServer)}createRenderer(K,J){if(!K||!J)return this.defaultRenderer;this.platformIsServer&&J.encapsulation===p.ifc.ShadowDom&&(J={...J,encapsulation:p.ifc.Emulated});const Ie=this.getOrCreateRenderer(K,J);return Ie instanceof br?Ie.applyToHost(K):Ie instanceof ii&&Ie.applyStyles(),Ie}getOrCreateRenderer(K,J){const Ie=this.rendererByCompId;let at=Ie.get(J.id);if(!at){const yt=this.doc,pn=this.ngZone,Mt=this.eventManager,_n=this.sharedStylesHost,In=this.removeStylesOnCompDestroy,dr=this.platformIsServer;switch(J.encapsulation){case p.ifc.Emulated:at=new br(Mt,_n,J,this.appId,In,yt,pn,dr);break;case p.ifc.ShadowDom:return new Dr(Mt,_n,K,J,yt,pn,this.nonce,dr);default:at=new ii(Mt,_n,J,In,yt,pn,dr)}Ie.set(J.id,at)}return at}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(J){return new(J||X)(p.LFG(Te),p.LFG(mt),p.LFG(p.AFp),p.LFG(Ve),p.LFG(W.K0),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(p.Ojb))};static#t=this.\u0275prov=p.Yz7({token:X,factory:X.\u0275fac})}return X})();class ln{constructor(ee,K,J,Ie){this.eventManager=ee,this.doc=K,this.ngZone=J,this.platformIsServer=Ie,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(ee,K){return K?this.doc.createElementNS(ht[K]||K,ee):this.doc.createElement(ee)}createComment(ee){return this.doc.createComment(ee)}createText(ee){return this.doc.createTextNode(ee)}appendChild(ee,K){(dn(ee)?ee.content:ee).appendChild(K)}insertBefore(ee,K,J){ee&&(dn(ee)?ee.content:ee).insertBefore(K,J)}removeChild(ee,K){ee&&ee.removeChild(K)}selectRootElement(ee,K){let J="string"==typeof ee?this.doc.querySelector(ee):ee;if(!J)throw new p.vHH(-5104,!1);return K||(J.textContent=""),J}parentNode(ee){return ee.parentNode}nextSibling(ee){return ee.nextSibling}setAttribute(ee,K,J,Ie){if(Ie){K=Ie+":"+K;const at=ht[Ie];at?ee.setAttributeNS(at,K,J):ee.setAttribute(K,J)}else ee.setAttribute(K,J)}removeAttribute(ee,K,J){if(J){const Ie=ht[J];Ie?ee.removeAttributeNS(Ie,K):ee.removeAttribute(`${J}:${K}`)}else ee.removeAttribute(K)}addClass(ee,K){ee.classList.add(K)}removeClass(ee,K){ee.classList.remove(K)}setStyle(ee,K,J,Ie){Ie&(p.JOm.DashCase|p.JOm.Important)?ee.style.setProperty(K,J,Ie&p.JOm.Important?"important":""):ee.style[K]=J}removeStyle(ee,K,J){J&p.JOm.DashCase?ee.style.removeProperty(K):ee.style[K]=""}setProperty(ee,K,J){ee[K]=J}setValue(ee,K){ee.nodeValue=K}listen(ee,K,J){if("string"==typeof ee&&!(ee=(0,W.q)().getGlobalEventTarget(this.doc,ee)))throw new Error(`Unsupported event target ${ee} for event ${K}`);return this.eventManager.addEventListener(ee,K,this.decoratePreventDefault(J))}decoratePreventDefault(ee){return K=>{if("__ngUnwrap__"===K)return ee;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>ee(K)):ee(K))&&K.preventDefault()}}}function dn(X){return"TEMPLATE"===X.tagName&&void 0!==X.content}class Dr extends ln{constructor(ee,K,J,Ie,at,yt,pn,Mt){super(ee,at,yt,Mt),this.sharedStylesHost=K,this.hostEl=J,this.shadowRoot=J.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const _n=pt(Ie.id,Ie.styles);for(const In of _n){const dr=document.createElement("style");pn&&dr.setAttribute("nonce",pn),dr.textContent=In,this.shadowRoot.appendChild(dr)}}nodeOrShadowRoot(ee){return ee===this.hostEl?this.shadowRoot:ee}appendChild(ee,K){return super.appendChild(this.nodeOrShadowRoot(ee),K)}insertBefore(ee,K,J){return super.insertBefore(this.nodeOrShadowRoot(ee),K,J)}removeChild(ee,K){return super.removeChild(this.nodeOrShadowRoot(ee),K)}parentNode(ee){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(ee)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class ii extends ln{constructor(ee,K,J,Ie,at,yt,pn,Mt){super(ee,at,yt,pn),this.sharedStylesHost=K,this.removeStylesOnCompDestroy=Ie,this.styles=Mt?pt(Mt,J.styles):J.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class br extends ii{constructor(ee,K,J,Ie,at,yt,pn,Mt){const _n=Ie+"-"+J.id;super(ee,K,J,at,yt,pn,Mt,_n),this.contentAttr=function Oe(X){return"_ngcontent-%COMP%".replace(Qt,X)}(_n),this.hostAttr=function Ze(X){return"_nghost-%COMP%".replace(Qt,X)}(_n)}applyToHost(ee){this.applyStyles(),this.setAttribute(ee,this.hostAttr,"")}createElement(ee,K){const J=super.createElement(ee,K);return super.setAttribute(J,this.contentAttr,""),J}}let Cr=(()=>{class X extends et{constructor(K){super(K)}supports(K){return!0}addEventListener(K,J,Ie){return K.addEventListener(J,Ie,!1),()=>this.removeEventListener(K,J,Ie)}removeEventListener(K,J,Ie){return K.removeEventListener(J,Ie)}static#e=this.\u0275fac=function(J){return new(J||X)(p.LFG(W.K0))};static#t=this.\u0275prov=p.Yz7({token:X,factory:X.\u0275fac})}return X})();const vr=["alt","control","meta","shift"],ke={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},He={alt:X=>X.altKey,control:X=>X.ctrlKey,meta:X=>X.metaKey,shift:X=>X.shiftKey};let qe=(()=>{class X extends et{constructor(K){super(K)}supports(K){return null!=X.parseEventName(K)}addEventListener(K,J,Ie){const at=X.parseEventName(J),yt=X.eventCallback(at.fullKey,Ie,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,W.q)().onAndCancel(K,at.domEventName,yt))}static parseEventName(K){const J=K.toLowerCase().split("."),Ie=J.shift();if(0===J.length||"keydown"!==Ie&&"keyup"!==Ie)return null;const at=X._normalizeKey(J.pop());let yt="",pn=J.indexOf("code");if(pn>-1&&(J.splice(pn,1),yt="code."),vr.forEach(_n=>{const In=J.indexOf(_n);In>-1&&(J.splice(In,1),yt+=_n+".")}),yt+=at,0!=J.length||0===at.length)return null;const Mt={};return Mt.domEventName=Ie,Mt.fullKey=yt,Mt}static matchEventFullKeyCode(K,J){let Ie=ke[K.key]||K.key,at="";return J.indexOf("code.")>-1&&(Ie=K.code,at="code."),!(null==Ie||!Ie)&&(Ie=Ie.toLowerCase()," "===Ie?Ie="space":"."===Ie&&(Ie="dot"),vr.forEach(yt=>{yt!==Ie&&(0,He[yt])(K)&&(at+=yt+".")}),at+=Ie,at===J)}static eventCallback(K,J,Ie){return at=>{X.matchEventFullKeyCode(at,K)&&Ie.runGuarded(()=>J(at))}}static _normalizeKey(K){return"esc"===K?"escape":K}static#e=this.\u0275fac=function(J){return new(J||X)(p.LFG(W.K0))};static#t=this.\u0275prov=p.Yz7({token:X,factory:X.\u0275fac})}return X})();const Ht=(0,p.eFA)(p._c5,"browser",[{provide:p.Lbi,useValue:W.bD},{provide:p.g9A,useValue:function Et(){he.makeCurrent()},multi:!0},{provide:W.K0,useFactory:function rn(){return(0,p.RDi)(document),document},deps:[]}]),Kn=new p.OlP(""),lr=[{provide:p.rWj,useClass:class ze{addToWindow(ee){p.dqk.getAngularTestability=(J,Ie=!0)=>{const at=ee.findTestabilityInTree(J,Ie);if(null==at)throw new p.vHH(5103,!1);return at},p.dqk.getAllAngularTestabilities=()=>ee.getAllTestabilities(),p.dqk.getAllAngularRootElements=()=>ee.getAllRootElements(),p.dqk.frameworkStabilizers||(p.dqk.frameworkStabilizers=[]),p.dqk.frameworkStabilizers.push(J=>{const Ie=p.dqk.getAllAngularTestabilities();let at=Ie.length,yt=!1;const pn=function(Mt){yt=yt||Mt,at--,0==at&&J(yt)};Ie.forEach(Mt=>{Mt.whenStable(pn)})})}findTestabilityInTree(ee,K,J){return null==K?null:ee.getTestability(K)??(J?(0,W.q)().isShadowRoot(K)?this.findTestabilityInTree(ee,K.host,!0):this.findTestabilityInTree(ee,K.parentElement,!0):null)}},deps:[]},{provide:p.lri,useClass:p.dDg,deps:[p.R0b,p.eoX,p.rWj]},{provide:p.dDg,useClass:p.dDg,deps:[p.R0b,p.eoX,p.rWj]}],Qn=[{provide:p.zSh,useValue:"root"},{provide:p.qLn,useFactory:function Wn(){return new p.qLn},deps:[]},{provide:pe,useClass:Cr,multi:!0,deps:[W.K0,p.R0b,p.Lbi]},{provide:pe,useClass:qe,multi:!0,deps:[W.K0]},Se,mt,Te,{provide:p.FYo,useExisting:Se},{provide:W.JF,useClass:oe,deps:[]},[]];let er=(()=>{class X{constructor(K){}static withServerTransition(K){return{ngModule:X,providers:[{provide:p.AFp,useValue:K.appId}]}}static#e=this.\u0275fac=function(J){return new(J||X)(p.LFG(Kn,12))};static#t=this.\u0275mod=p.oAB({type:X});static#n=this.\u0275inj=p.cJS({providers:[...Qn,...lr],imports:[W.ez,p.hGG]})}return X})(),$r=(()=>{class X{constructor(K){this._doc=K}getTitle(){return this._doc.title}setTitle(K){this._doc.title=K||""}static#e=this.\u0275fac=function(J){return new(J||X)(p.LFG(W.K0))};static#t=this.\u0275prov=p.Yz7({token:X,factory:function(J){let Ie=null;return Ie=J?new J:function Ln(){return new $r((0,p.LFG)(W.K0))}(),Ie},providedIn:"root"})}return X})();typeof window<"u"&&window;let ei=(()=>{class X{static#e=this.\u0275fac=function(J){return new(J||X)};static#t=this.\u0275prov=p.Yz7({token:X,factory:function(J){let Ie=null;return Ie=J?new(J||X):p.LFG(kn),Ie},providedIn:"root"})}return X})(),kn=(()=>{class X extends ei{constructor(K){super(),this._doc=K}sanitize(K,J){if(null==J)return null;switch(K){case p.q3G.NONE:return J;case p.q3G.HTML:return(0,p.qzn)(J,"HTML")?(0,p.z3N)(J):(0,p.EiD)(this._doc,String(J)).toString();case p.q3G.STYLE:return(0,p.qzn)(J,"Style")?(0,p.z3N)(J):J;case p.q3G.SCRIPT:if((0,p.qzn)(J,"Script"))return(0,p.z3N)(J);throw new p.vHH(5200,!1);case p.q3G.URL:return(0,p.qzn)(J,"URL")?(0,p.z3N)(J):(0,p.mCW)(String(J));case p.q3G.RESOURCE_URL:if((0,p.qzn)(J,"ResourceURL"))return(0,p.z3N)(J);throw new p.vHH(5201,!1);default:throw new p.vHH(5202,!1)}}bypassSecurityTrustHtml(K){return(0,p.JVY)(K)}bypassSecurityTrustStyle(K){return(0,p.L6k)(K)}bypassSecurityTrustScript(K){return(0,p.eBb)(K)}bypassSecurityTrustUrl(K){return(0,p.LAX)(K)}bypassSecurityTrustResourceUrl(K){return(0,p.pB0)(K)}static#e=this.\u0275fac=function(J){return new(J||X)(p.LFG(W.K0))};static#t=this.\u0275prov=p.Yz7({token:X,factory:function(J){let Ie=null;return Ie=J?new J:function Xn(X){return new kn(X.get(W.K0))}(p.LFG(p.zs3)),Ie},providedIn:"root"})}return X})()},639:($t,Ge,z)=>{z.d(Ge,{F0:()=>eo,rH:()=>Fo,Bz:()=>Qe,lC:()=>rs});var p=z(5879),W=z(2664),ae=z(2459),he=z(2096),fe=z(5619),xe=z(5592),Me=z(7453),Ee=z(2737),ze=z(7400),oe=z(4564),pe=z(2714),Te=z(8251),et=z(7103);function rt(..._){const S=(0,oe.yG)(_),v=(0,oe.jO)(_),{args:A,keys:k}=(0,Me.D)(_);if(0===A.length)return(0,ae.D)([],S);const Z=new xe.y(function mt(_,S,v=Ee.y){return A=>{ht(S,()=>{const{length:k}=_,Z=new Array(k);let ce=k,$e=k;for(let Fe=0;Fe<k;Fe++)ht(S,()=>{const Xe=(0,ae.D)(_[Fe],S);let ft=!1;Xe.subscribe((0,Te.x)(A,xt=>{Z[Fe]=xt,ft||(ft=!0,$e--),$e||A.next(v(Z.slice()))},()=>{--ce||A.complete()}))},A)},A)}}(A,S,k?ce=>(0,pe.n)(k,ce):Ee.y));return v?Z.pipe((0,ze.Z)(v)):Z}function ht(_,S,v){_?(0,et.f)(v,_,S):S()}var Qt=z(6973),Rt=z(5211),Mn=z(4911),bt=z(8407),le=z(4674);function Ve(_,S){const v=(0,le.m)(_)?_:()=>_,A=k=>k.error(v());return new xe.y(S?k=>S.schedule(A,0,k):A)}var Oe=z(6232),Ze=z(7394),pt=z(9360);function Se(){return(0,pt.e)((_,S)=>{let v=null;_._refCount++;const A=(0,Te.x)(S,void 0,void 0,void 0,()=>{if(!_||_._refCount<=0||0<--_._refCount)return void(v=null);const k=_._connection,Z=v;v=null,k&&(!Z||k===Z)&&k.unsubscribe(),S.unsubscribe()});_.subscribe(A),A.closed||(v=_.connect())})}class ln extends xe.y{constructor(S,v){super(),this.source=S,this.subjectFactory=v,this._subject=null,this._refCount=0,this._connection=null,(0,pt.A)(S)&&(this.lift=S.lift)}_subscribe(S){return this.getSubject().subscribe(S)}getSubject(){const S=this._subject;return(!S||S.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:S}=this;this._subject=this._connection=null,S?.unsubscribe()}connect(){let S=this._connection;if(!S){S=this._connection=new Ze.w0;const v=this.getSubject();S.add(this.source.subscribe((0,Te.x)(v,void 0,()=>{this._teardown(),v.complete()},A=>{this._teardown(),v.error(A)},()=>this._teardown()))),S.closed&&(this._connection=null,S=Ze.w0.EMPTY)}return S}refCount(){return Se()(this)}}var en=z(8645),Nn=z(6814),dn=z(7398),Dr=z(4664),ii=z(8180),br=z(7921),Cr=z(2181),vr=z(1631),ke=z(1374);function He(_,S){return(0,le.m)(S)?(0,vr.z)(_,S,1):(0,vr.z)(_,1)}var qe=z(9397),Be=z(4829);function Je(_){return(0,pt.e)((S,v)=>{let Z,A=null,k=!1;A=S.subscribe((0,Te.x)(v,void 0,void 0,ce=>{Z=(0,Be.Xf)(_(ce,Je(_)(S))),A?(A.unsubscribe(),A=null,Z.subscribe(v)):k=!0})),k&&(A.unsubscribe(),A=null,Z.subscribe(v))})}var gt=z(6699),Tt=z(3572);function Et(_){return _<=0?()=>Oe.E:(0,pt.e)((S,v)=>{let A=[];S.subscribe((0,Te.x)(v,k=>{A.push(k),_<A.length&&A.shift()},()=>{for(const k of A)v.next(k);v.complete()},void 0,()=>{A=null}))})}var Wn=z(3026);function Ht(_){return(0,pt.e)((S,v)=>{try{S.subscribe(v)}finally{v.add(_)}})}var Kn=z(2420),Qn=z(7537),er=z(6593);const Vt="primary",Nr=Symbol("RouteTitle");class Ki{constructor(S){this.params=S||{}}has(S){return Object.prototype.hasOwnProperty.call(this.params,S)}get(S){if(this.has(S)){const v=this.params[S];return Array.isArray(v)?v[0]:v}return null}getAll(S){if(this.has(S)){const v=this.params[S];return Array.isArray(v)?v:[v]}return[]}get keys(){return Object.keys(this.params)}}function Ln(_){return new Ki(_)}function $r(_,S,v){const A=v.path.split("/");if(A.length>_.length||"full"===v.pathMatch&&(S.hasChildren()||A.length<_.length))return null;const k={};for(let Z=0;Z<A.length;Z++){const ce=A[Z],$e=_[Z];if(ce.startsWith(":"))k[ce.substring(1)]=$e;else if(ce!==$e.path)return null}return{consumed:_.slice(0,A.length),posParams:k}}function nr(_,S){const v=_?Object.keys(_):void 0,A=S?Object.keys(S):void 0;if(!v||!A||v.length!=A.length)return!1;let k;for(let Z=0;Z<v.length;Z++)if(k=v[Z],!Xt(_[k],S[k]))return!1;return!0}function Xt(_,S){if(Array.isArray(_)&&Array.isArray(S)){if(_.length!==S.length)return!1;const v=[..._].sort(),A=[...S].sort();return v.every((k,Z)=>A[Z]===k)}return _===S}function gn(_){return _.length>0?_[_.length-1]:null}function tn(_){return(0,W.b)(_)?_:(0,p.QGY)(_)?(0,ae.D)(Promise.resolve(_)):(0,he.of)(_)}const vn={exact:function pr(_,S,v){if(!kn(_.segments,S.segments)||!fn(_.segments,S.segments,v)||_.numberOfChildren!==S.numberOfChildren)return!1;for(const A in S.children)if(!_.children[A]||!pr(_.children[A],S.children[A],v))return!1;return!0},subset:jn},_r={exact:function Vn(_,S){return nr(_,S)},subset:function Mi(_,S){return Object.keys(S).length<=Object.keys(_).length&&Object.keys(S).every(v=>Xt(_[v],S[v]))},ignored:()=>!0};function di(_,S,v){return vn[v.paths](_.root,S.root,v.matrixParams)&&_r[v.queryParams](_.queryParams,S.queryParams)&&!("exact"===v.fragment&&_.fragment!==S.fragment)}function jn(_,S,v){return Di(_,S,S.segments,v)}function Di(_,S,v,A){if(_.segments.length>v.length){const k=_.segments.slice(0,v.length);return!(!kn(k,v)||S.hasChildren()||!fn(k,v,A))}if(_.segments.length===v.length){if(!kn(_.segments,v)||!fn(_.segments,v,A))return!1;for(const k in S.children)if(!_.children[k]||!jn(_.children[k],S.children[k],A))return!1;return!0}{const k=v.slice(0,_.segments.length),Z=v.slice(_.segments.length);return!!(kn(_.segments,k)&&fn(_.segments,k,A)&&_.children[Vt])&&Di(_.children[Vt],S,Z,A)}}function fn(_,S,v){return S.every((A,k)=>_r[v](_[k].parameters,A.parameters))}class gr{constructor(S=new Pn([],{}),v={},A=null){this.root=S,this.queryParams=v,this.fragment=A}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ln(this.queryParams)),this._queryParamMap}toString(){return Zn.serialize(this)}}class Pn{constructor(S,v){this.segments=S,this.children=v,this.parent=null,Object.values(v).forEach(A=>A.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return wn(this)}}class ei{constructor(S,v){this.path=S,this.parameters=v}get parameterMap(){return this._parameterMap||(this._parameterMap=Ln(this.parameters)),this._parameterMap}toString(){return Ie(this)}}function kn(_,S){return _.length===S.length&&_.every((v,A)=>v.path===S[A].path)}let xr=(()=>{class _{static#e=this.\u0275fac=function(A){return new(A||_)};static#t=this.\u0275prov=p.Yz7({token:_,factory:function(){return new hi},providedIn:"root"})}return _})();class hi{parse(S){const v=new We(S);return new gr(v.parseRootSegment(),v.parseQueryParams(),v.parseFragment())}serialize(S){const v=`/${Jt(S.root,!0)}`,A=function yt(_){const S=Object.keys(_).map(v=>{const A=_[v];return Array.isArray(A)?A.map(k=>`${me(v)}=${me(k)}`).join("&"):`${me(v)}=${me(A)}`}).filter(v=>!!v);return S.length?`?${S.join("&")}`:""}(S.queryParams);return`${v}${A}${"string"==typeof S.fragment?`#${function X(_){return encodeURI(_)}(S.fragment)}`:""}`}}const Zn=new hi;function wn(_){return _.segments.map(S=>Ie(S)).join("/")}function Jt(_,S){if(!_.hasChildren())return wn(_);if(S){const v=_.children[Vt]?Jt(_.children[Vt],!1):"",A=[];return Object.entries(_.children).forEach(([k,Z])=>{k!==Vt&&A.push(`${k}:${Jt(Z,!1)}`)}),A.length>0?`${v}(${A.join("//")})`:v}{const v=function zr(_,S){let v=[];return Object.entries(_.children).forEach(([A,k])=>{A===Vt&&(v=v.concat(S(k,A)))}),Object.entries(_.children).forEach(([A,k])=>{A!==Vt&&(v=v.concat(S(k,A)))}),v}(_,(A,k)=>k===Vt?[Jt(_.children[Vt],!1)]:[`${k}:${Jt(A,!1)}`]);return 1===Object.keys(_.children).length&&null!=_.children[Vt]?`${wn(_)}/${v[0]}`:`${wn(_)}/(${v.join("//")})`}}function Yn(_){return encodeURIComponent(_).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function me(_){return Yn(_).replace(/%3B/gi,";")}function ee(_){return Yn(_).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function K(_){return decodeURIComponent(_)}function J(_){return K(_.replace(/\+/g,"%20"))}function Ie(_){return`${ee(_.path)}${function at(_){return Object.keys(_).map(S=>`;${ee(S)}=${ee(_[S])}`).join("")}(_.parameters)}`}const pn=/^[^\/()?;#]+/;function Mt(_){const S=_.match(pn);return S?S[0]:""}const _n=/^[^\/()?;=#]+/,dr=/^[^=?&#]+/,ms=/^[^&#]+/;class We{constructor(S){this.url=S,this.remaining=S}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Pn([],{}):new Pn([],this.parseChildren())}parseQueryParams(){const S={};if(this.consumeOptional("?"))do{this.parseQueryParam(S)}while(this.consumeOptional("&"));return S}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const S=[];for(this.peekStartsWith("(")||S.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),S.push(this.parseSegment());let v={};this.peekStartsWith("/(")&&(this.capture("/"),v=this.parseParens(!0));let A={};return this.peekStartsWith("(")&&(A=this.parseParens(!1)),(S.length>0||Object.keys(v).length>0)&&(A[Vt]=new Pn(S,v)),A}parseSegment(){const S=Mt(this.remaining);if(""===S&&this.peekStartsWith(";"))throw new p.vHH(4009,!1);return this.capture(S),new ei(K(S),this.parseMatrixParams())}parseMatrixParams(){const S={};for(;this.consumeOptional(";");)this.parseParam(S);return S}parseParam(S){const v=function In(_){const S=_.match(_n);return S?S[0]:""}(this.remaining);if(!v)return;this.capture(v);let A="";if(this.consumeOptional("=")){const k=Mt(this.remaining);k&&(A=k,this.capture(A))}S[K(v)]=K(A)}parseQueryParam(S){const v=function Ni(_){const S=_.match(dr);return S?S[0]:""}(this.remaining);if(!v)return;this.capture(v);let A="";if(this.consumeOptional("=")){const ce=function ts(_){const S=_.match(ms);return S?S[0]:""}(this.remaining);ce&&(A=ce,this.capture(A))}const k=J(v),Z=J(A);if(S.hasOwnProperty(k)){let ce=S[k];Array.isArray(ce)||(ce=[ce],S[k]=ce),ce.push(Z)}else S[k]=Z}parseParens(S){const v={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const A=Mt(this.remaining),k=this.remaining[A.length];if("/"!==k&&")"!==k&&";"!==k)throw new p.vHH(4010,!1);let Z;A.indexOf(":")>-1?(Z=A.slice(0,A.indexOf(":")),this.capture(Z),this.capture(":")):S&&(Z=Vt);const ce=this.parseChildren();v[Z]=1===Object.keys(ce).length?ce[Vt]:new Pn([],ce),this.consumeOptional("//")}return v}peekStartsWith(S){return this.remaining.startsWith(S)}consumeOptional(S){return!!this.peekStartsWith(S)&&(this.remaining=this.remaining.substring(S.length),!0)}capture(S){if(!this.consumeOptional(S))throw new p.vHH(4011,!1)}}function Re(_){return _.segments.length>0?new Pn([],{[Vt]:_}):_}function ut(_){const S={};for(const A of Object.keys(_.children)){const Z=ut(_.children[A]);if(A===Vt&&0===Z.segments.length&&Z.hasChildren())for(const[ce,$e]of Object.entries(Z.children))S[ce]=$e;else(Z.segments.length>0||Z.hasChildren())&&(S[A]=Z)}return function kt(_){if(1===_.numberOfChildren&&_.children[Vt]){const S=_.children[Vt];return new Pn(_.segments.concat(S.segments),S.children)}return _}(new Pn(_.segments,S))}function wt(_){return _ instanceof gr}function En(_){let S;const k=Re(function v(Z){const ce={};for(const Fe of Z.children){const Xe=v(Fe);ce[Fe.outlet]=Xe}const $e=new Pn(Z.url,ce);return Z===_&&(S=$e),$e}(_.root));return S??k}function Tr(_,S,v,A){let k=_;for(;k.parent;)k=k.parent;if(0===S.length)return xi(k,k,k,v,A);const Z=function Rs(_){if("string"==typeof _[0]&&1===_.length&&"/"===_[0])return new fi(!0,0,_);let S=0,v=!1;const A=_.reduce((k,Z,ce)=>{if("object"==typeof Z&&null!=Z){if(Z.outlets){const $e={};return Object.entries(Z.outlets).forEach(([Fe,Xe])=>{$e[Fe]="string"==typeof Xe?Xe.split("/"):Xe}),[...k,{outlets:$e}]}if(Z.segmentPath)return[...k,Z.segmentPath]}return"string"!=typeof Z?[...k,Z]:0===ce?(Z.split("/").forEach(($e,Fe)=>{0==Fe&&"."===$e||(0==Fe&&""===$e?v=!0:".."===$e?S++:""!=$e&&k.push($e))}),k):[...k,Z]},[]);return new fi(v,S,A)}(S);if(Z.toRoot())return xi(k,k,new Pn([],{}),v,A);const ce=function Os(_,S,v){if(_.isAbsolute)return new oi(S,!0,0);if(!v)return new oi(S,!1,NaN);if(null===v.parent)return new oi(v,!0,0);const A=hr(_.commands[0])?0:1;return function To(_,S,v){let A=_,k=S,Z=v;for(;Z>k;){if(Z-=k,A=A.parent,!A)throw new p.vHH(4005,!1);k=A.segments.length}return new oi(A,!1,k-Z)}(v,v.segments.length-1+A,_.numberOfDoubleDots)}(Z,k,_),$e=ce.processChildren?ns(ce.segmentGroup,ce.index,Z.commands):Lr(ce.segmentGroup,ce.index,Z.commands);return xi(k,ce.segmentGroup,$e,v,A)}function hr(_){return"object"==typeof _&&null!=_&&!_.outlets&&!_.segmentPath}function Rr(_){return"object"==typeof _&&null!=_&&_.outlets}function xi(_,S,v,A,k){let ce,Z={};A&&Object.entries(A).forEach(([Fe,Xe])=>{Z[Fe]=Array.isArray(Xe)?Xe.map(ft=>`${ft}`):`${Xe}`}),ce=_===S?v:ys(_,S,v);const $e=Re(ut(ce));return new gr($e,Z,k)}function ys(_,S,v){const A={};return Object.entries(_.children).forEach(([k,Z])=>{A[k]=Z===S?v:ys(Z,S,v)}),new Pn(_.segments,A)}class fi{constructor(S,v,A){if(this.isAbsolute=S,this.numberOfDoubleDots=v,this.commands=A,S&&A.length>0&&hr(A[0]))throw new p.vHH(4003,!1);const k=A.find(Rr);if(k&&k!==gn(A))throw new p.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class oi{constructor(S,v,A){this.segmentGroup=S,this.processChildren=v,this.index=A}}function Lr(_,S,v){if(_||(_=new Pn([],{})),0===_.segments.length&&_.hasChildren())return ns(_,S,v);const A=function Zi(_,S,v){let A=0,k=S;const Z={match:!1,pathIndex:0,commandIndex:0};for(;k<_.segments.length;){if(A>=v.length)return Z;const ce=_.segments[k],$e=v[A];if(Rr($e))break;const Fe=`${$e}`,Xe=A<v.length-1?v[A+1]:null;if(k>0&&void 0===Fe)break;if(Fe&&Xe&&"object"==typeof Xe&&void 0===Xe.outlets){if(!we(Fe,Xe,ce))return Z;A+=2}else{if(!we(Fe,{},ce))return Z;A++}k++}return{match:!0,pathIndex:k,commandIndex:A}}(_,S,v),k=v.slice(A.commandIndex);if(A.match&&A.pathIndex<_.segments.length){const Z=new Pn(_.segments.slice(0,A.pathIndex),{});return Z.children[Vt]=new Pn(_.segments.slice(A.pathIndex),_.children),ns(Z,0,k)}return A.match&&0===k.length?new Pn(_.segments,{}):A.match&&!_.hasChildren()?mo(_,S,v):A.match?ns(_,0,k):mo(_,S,v)}function ns(_,S,v){if(0===v.length)return new Pn(_.segments,{});{const A=function Ts(_){return Rr(_[0])?_[0].outlets:{[Vt]:_}}(v),k={};if(Object.keys(A).some(Z=>Z!==Vt)&&_.children[Vt]&&1===_.numberOfChildren&&0===_.children[Vt].segments.length){const Z=ns(_.children[Vt],S,v);return new Pn(_.segments,Z.children)}return Object.entries(A).forEach(([Z,ce])=>{"string"==typeof ce&&(ce=[ce]),null!==ce&&(k[Z]=Lr(_.children[Z],S,ce))}),Object.entries(_.children).forEach(([Z,ce])=>{void 0===A[Z]&&(k[Z]=ce)}),new Pn(_.segments,k)}}function mo(_,S,v){const A=_.segments.slice(0,S);let k=0;for(;k<v.length;){const Z=v[k];if(Rr(Z)){const Fe=yo(Z.outlets);return new Pn(A,Fe)}if(0===k&&hr(v[0])){A.push(new ei(_.segments[S].path,De(v[0]))),k++;continue}const ce=Rr(Z)?Z.outlets[Vt]:`${Z}`,$e=k<v.length-1?v[k+1]:null;ce&&$e&&hr($e)?(A.push(new ei(ce,De($e))),k+=2):(A.push(new ei(ce,{})),k++)}return new Pn(A,{})}function yo(_){const S={};return Object.entries(_).forEach(([v,A])=>{"string"==typeof A&&(A=[A]),null!==A&&(S[v]=mo(new Pn([],{}),0,A))}),S}function De(_){const S={};return Object.entries(_).forEach(([v,A])=>S[v]=`${A}`),S}function we(_,S,v){return _==v.path&&nr(S,v.parameters)}const Ne="imperative";class nt{constructor(S,v){this.id=S,this.url=v}}class vt extends nt{constructor(S,v,A="imperative",k=null){super(S,v),this.type=0,this.navigationTrigger=A,this.restoredState=k}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Zt extends nt{constructor(S,v,A){super(S,v),this.urlAfterRedirects=A,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Bn extends nt{constructor(S,v,A,k){super(S,v),this.reason=A,this.code=k,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Dn extends nt{constructor(S,v,A,k){super(S,v),this.reason=A,this.code=k,this.type=16}}class $n extends nt{constructor(S,v,A,k){super(S,v),this.error=A,this.target=k,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ps extends nt{constructor(S,v,A,k){super(S,v),this.urlAfterRedirects=A,this.state=k,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ri extends nt{constructor(S,v,A,k){super(S,v),this.urlAfterRedirects=A,this.state=k,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $i extends nt{constructor(S,v,A,k,Z){super(S,v),this.urlAfterRedirects=A,this.state=k,this.shouldActivate=Z,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class pi extends nt{constructor(S,v,A,k){super(S,v),this.urlAfterRedirects=A,this.state=k,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Jo extends nt{constructor(S,v,A,k){super(S,v),this.urlAfterRedirects=A,this.state=k,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Gs{constructor(S){this.route=S,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class So{constructor(S){this.route=S,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Ss{constructor(S){this.snapshot=S,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class so{constructor(S){this.snapshot=S,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class vo{constructor(S){this.snapshot=S,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Uo{constructor(S){this.snapshot=S,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Hn{constructor(S,v,A){this.routerEvent=S,this.position=v,this.anchor=A,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class ti{}class Ci{constructor(S){this.url=S}}class Vr{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Ws,this.attachRef=null}}let Ws=(()=>{class _{constructor(){this.contexts=new Map}onChildOutletCreated(v,A){const k=this.getOrCreateContext(v);k.outlet=A,this.contexts.set(v,k)}onChildOutletDestroyed(v){const A=this.getContext(v);A&&(A.outlet=null,A.attachRef=null)}onOutletDeactivated(){const v=this.contexts;return this.contexts=new Map,v}onOutletReAttached(v){this.contexts=v}getOrCreateContext(v){let A=this.getContext(v);return A||(A=new Vr,this.contexts.set(v,A)),A}getContext(v){return this.contexts.get(v)||null}static#e=this.\u0275fac=function(A){return new(A||_)};static#t=this.\u0275prov=p.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"})}return _})();class _o{constructor(S){this._root=S}get root(){return this._root.value}parent(S){const v=this.pathFromRoot(S);return v.length>1?v[v.length-2]:null}children(S){const v=As(S,this._root);return v?v.children.map(A=>A.value):[]}firstChild(S){const v=As(S,this._root);return v&&v.children.length>0?v.children[0].value:null}siblings(S){const v=Jn(S,this._root);return v.length<2?[]:v[v.length-2].children.map(k=>k.value).filter(k=>k!==S)}pathFromRoot(S){return Jn(S,this._root).map(v=>v.value)}}function As(_,S){if(_===S.value)return S;for(const v of S.children){const A=As(_,v);if(A)return A}return null}function Jn(_,S){if(_===S.value)return[S];for(const v of S.children){const A=Jn(_,v);if(A.length)return A.unshift(S),A}return[]}class Oi{constructor(S,v){this.value=S,this.children=v}toString(){return`TreeNode(${this.value})`}}function ar(_){const S={};return _&&_.children.forEach(v=>S[v.value.outlet]=v),S}class It extends _o{constructor(S,v){super(S),this.snapshot=v,gi(this,S)}toString(){return this.snapshot.toString()}}function Cn(_,S){const v=function Er(_,S){const ce=new Ms([],{},{},"",{},Vt,S,null,{});return new Sr("",new Oi(ce,[]))}(0,S),A=new fe.X([new ei("",{})]),k=new fe.X({}),Z=new fe.X({}),ce=new fe.X({}),$e=new fe.X(""),Fe=new ai(A,k,ce,$e,Z,Vt,S,v.root);return Fe.snapshot=v.root,new It(new Oi(Fe,[]),v)}class ai{constructor(S,v,A,k,Z,ce,$e,Fe){this.urlSubject=S,this.paramsSubject=v,this.queryParamsSubject=A,this.fragmentSubject=k,this.dataSubject=Z,this.outlet=ce,this.component=$e,this._futureSnapshot=Fe,this.title=this.dataSubject?.pipe((0,dn.U)(Xe=>Xe[Nr]))??(0,he.of)(void 0),this.url=S,this.params=v,this.queryParams=A,this.fragment=k,this.data=Z}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,dn.U)(S=>Ln(S)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,dn.U)(S=>Ln(S)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ks(_,S="emptyOnly"){const v=_.pathFromRoot;let A=0;if("always"!==S)for(A=v.length-1;A>=1;){const k=v[A],Z=v[A-1];if(k.routeConfig&&""===k.routeConfig.path)A--;else{if(Z.component)break;A--}}return function Pi(_){return _.reduce((S,v)=>({params:{...S.params,...v.params},data:{...S.data,...v.data},resolve:{...v.data,...S.resolve,...v.routeConfig?.data,...v._resolvedData}}),{params:{},data:{},resolve:{}})}(v.slice(A))}class Ms{get title(){return this.data?.[Nr]}constructor(S,v,A,k,Z,ce,$e,Fe,Xe){this.url=S,this.params=v,this.queryParams=A,this.fragment=k,this.data=Z,this.outlet=ce,this.component=$e,this.routeConfig=Fe,this._resolve=Xe}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ln(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ln(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(A=>A.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Sr extends _o{constructor(S,v){super(v),this.url=S,gi(this,v)}toString(){return ui(this._root)}}function gi(_,S){S.value._routerState=_,S.children.forEach(v=>gi(_,v))}function ui(_){const S=_.children.length>0?` { ${_.children.map(ui).join(", ")} } `:"";return`${_.value}${S}`}function nn(_){if(_.snapshot){const S=_.snapshot,v=_._futureSnapshot;_.snapshot=v,nr(S.queryParams,v.queryParams)||_.queryParamsSubject.next(v.queryParams),S.fragment!==v.fragment&&_.fragmentSubject.next(v.fragment),nr(S.params,v.params)||_.paramsSubject.next(v.params),function si(_,S){if(_.length!==S.length)return!1;for(let v=0;v<_.length;++v)if(!nr(_[v],S[v]))return!1;return!0}(S.url,v.url)||_.urlSubject.next(v.url),nr(S.data,v.data)||_.dataSubject.next(v.data)}else _.snapshot=_._futureSnapshot,_.dataSubject.next(_._futureSnapshot.data)}function bi(_,S){const v=nr(_.params,S.params)&&function Xn(_,S){return kn(_,S)&&_.every((v,A)=>nr(v.parameters,S[A].parameters))}(_.url,S.url);return v&&!(!_.parent!=!S.parent)&&(!_.parent||bi(_.parent,S.parent))}let rs=(()=>{class _{constructor(){this.activated=null,this._activatedRoute=null,this.name=Vt,this.activateEvents=new p.vpe,this.deactivateEvents=new p.vpe,this.attachEvents=new p.vpe,this.detachEvents=new p.vpe,this.parentContexts=(0,p.f3M)(Ws),this.location=(0,p.f3M)(p.s_b),this.changeDetector=(0,p.f3M)(p.sBO),this.environmentInjector=(0,p.f3M)(p.lqb),this.inputBinder=(0,p.f3M)(Yr,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(v){if(v.name){const{firstChange:A,previousValue:k}=v.name;if(A)return;this.isTrackedInParentContexts(k)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(k)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(v){return this.parentContexts.getContext(v)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const v=this.parentContexts.getContext(this.name);v?.route&&(v.attachRef?this.attach(v.attachRef,v.route):this.activateWith(v.route,v.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new p.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new p.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new p.vHH(4012,!1);this.location.detach();const v=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(v.instance),v}attach(v,A){this.activated=v,this._activatedRoute=A,this.location.insert(v.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(v.instance)}deactivate(){if(this.activated){const v=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(v)}}activateWith(v,A){if(this.isActivated)throw new p.vHH(4013,!1);this._activatedRoute=v;const k=this.location,ce=v.snapshot.component,$e=this.parentContexts.getOrCreateContext(this.name).children,Fe=new Fs(v,$e,k.injector);this.activated=k.createComponent(ce,{index:k.length,injector:Fe,environmentInjector:A??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(A){return new(A||_)};static#t=this.\u0275dir=p.lG2({type:_,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[p.TTD]})}return _})();class Fs{constructor(S,v,A){this.route=S,this.childContexts=v,this.parent=A}get(S,v){return S===ai?this.route:S===Ws?this.childContexts:this.parent.get(S,v)}}const Yr=new p.OlP("");let Ns=(()=>{class _{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(v){this.unsubscribeFromRouteData(v),this.subscribeToRouteData(v)}unsubscribeFromRouteData(v){this.outletDataSubscriptions.get(v)?.unsubscribe(),this.outletDataSubscriptions.delete(v)}subscribeToRouteData(v){const{activatedRoute:A}=v,k=rt([A.queryParams,A.params,A.data]).pipe((0,Dr.w)(([Z,ce,$e],Fe)=>($e={...Z,...ce,...$e},0===Fe?(0,he.of)($e):Promise.resolve($e)))).subscribe(Z=>{if(!v.isActivated||!v.activatedComponentRef||v.activatedRoute!==A||null===A.component)return void this.unsubscribeFromRouteData(v);const ce=(0,p.qFp)(A.component);if(ce)for(const{templateName:$e}of ce.inputs)v.activatedComponentRef.setInput($e,Z[$e]);else this.unsubscribeFromRouteData(v)});this.outletDataSubscriptions.set(v,k)}static#e=this.\u0275fac=function(A){return new(A||_)};static#t=this.\u0275prov=p.Yz7({token:_,factory:_.\u0275fac})}return _})();function mi(_,S,v){if(v&&_.shouldReuseRoute(S.value,v.value.snapshot)){const A=v.value;A._futureSnapshot=S.value;const k=function Yi(_,S,v){return S.children.map(A=>{for(const k of v.children)if(_.shouldReuseRoute(A.value,k.value.snapshot))return mi(_,A,k);return mi(_,A)})}(_,S,v);return new Oi(A,k)}{if(_.shouldAttach(S.value)){const Z=_.retrieve(S.value);if(null!==Z){const ce=Z.route;return ce.value._futureSnapshot=S.value,ce.children=S.children.map($e=>mi(_,$e)),ce}}const A=function Ao(_){return new ai(new fe.X(_.url),new fe.X(_.params),new fe.X(_.queryParams),new fe.X(_.fragment),new fe.X(_.data),_.outlet,_.component,_)}(S.value),k=S.children.map(Z=>mi(_,Z));return new Oi(A,k)}}const ss="ngNavigationCancelingError";function Hi(_,S){const{redirectTo:v,navigationBehaviorOptions:A}=wt(S)?{redirectTo:S,navigationBehaviorOptions:void 0}:S,k=os(!1,0,S);return k.url=v,k.navigationBehaviorOptions=A,k}function os(_,S,v){const A=new Error("NavigationCancelingError: "+(_||""));return A[ss]=!0,A.cancellationCode=S,v&&(A.url=v),A}function Rn(_){return _&&_[ss]}let ea=(()=>{class _{static#e=this.\u0275fac=function(A){return new(A||_)};static#t=this.\u0275cmp=p.Xpm({type:_,selectors:[["ng-component"]],standalone:!0,features:[p.jDz],decls:1,vars:0,template:function(A,k){1&A&&p._UZ(0,"router-outlet")},dependencies:[rs],encapsulation:2})}return _})();function zn(_){const S=_.children&&_.children.map(zn),v=S?{..._,children:S}:{..._};return!v.component&&!v.loadComponent&&(S||v.loadChildren)&&v.outlet&&v.outlet!==Vt&&(v.component=ea),v}function zi(_){return _.outlet||Vt}function Ti(_){if(!_)return null;if(_.routeConfig?._injector)return _.routeConfig._injector;for(let S=_.parent;S;S=S.parent){const v=S.routeConfig;if(v?._loadedInjector)return v._loadedInjector;if(v?._injector)return v._injector}return null}class Mo{constructor(S,v,A,k,Z){this.routeReuseStrategy=S,this.futureState=v,this.currState=A,this.forwardEvent=k,this.inputBindingEnabled=Z}activate(S){const v=this.futureState._root,A=this.currState?this.currState._root:null;this.deactivateChildRoutes(v,A,S),nn(this.futureState.root),this.activateChildRoutes(v,A,S)}deactivateChildRoutes(S,v,A){const k=ar(v);S.children.forEach(Z=>{const ce=Z.value.outlet;this.deactivateRoutes(Z,k[ce],A),delete k[ce]}),Object.values(k).forEach(Z=>{this.deactivateRouteAndItsChildren(Z,A)})}deactivateRoutes(S,v,A){const k=S.value,Z=v?v.value:null;if(k===Z)if(k.component){const ce=A.getContext(k.outlet);ce&&this.deactivateChildRoutes(S,v,ce.children)}else this.deactivateChildRoutes(S,v,A);else Z&&this.deactivateRouteAndItsChildren(v,A)}deactivateRouteAndItsChildren(S,v){S.value.component&&this.routeReuseStrategy.shouldDetach(S.value.snapshot)?this.detachAndStoreRouteSubtree(S,v):this.deactivateRouteAndOutlet(S,v)}detachAndStoreRouteSubtree(S,v){const A=v.getContext(S.value.outlet),k=A&&S.value.component?A.children:v,Z=ar(S);for(const ce of Object.keys(Z))this.deactivateRouteAndItsChildren(Z[ce],k);if(A&&A.outlet){const ce=A.outlet.detach(),$e=A.children.onOutletDeactivated();this.routeReuseStrategy.store(S.value.snapshot,{componentRef:ce,route:S,contexts:$e})}}deactivateRouteAndOutlet(S,v){const A=v.getContext(S.value.outlet),k=A&&S.value.component?A.children:v,Z=ar(S);for(const ce of Object.keys(Z))this.deactivateRouteAndItsChildren(Z[ce],k);A&&(A.outlet&&(A.outlet.deactivate(),A.children.onOutletDeactivated()),A.attachRef=null,A.route=null)}activateChildRoutes(S,v,A){const k=ar(v);S.children.forEach(Z=>{this.activateRoutes(Z,k[Z.value.outlet],A),this.forwardEvent(new Uo(Z.value.snapshot))}),S.children.length&&this.forwardEvent(new so(S.value.snapshot))}activateRoutes(S,v,A){const k=S.value,Z=v?v.value:null;if(nn(k),k===Z)if(k.component){const ce=A.getOrCreateContext(k.outlet);this.activateChildRoutes(S,v,ce.children)}else this.activateChildRoutes(S,v,A);else if(k.component){const ce=A.getOrCreateContext(k.outlet);if(this.routeReuseStrategy.shouldAttach(k.snapshot)){const $e=this.routeReuseStrategy.retrieve(k.snapshot);this.routeReuseStrategy.store(k.snapshot,null),ce.children.onOutletReAttached($e.contexts),ce.attachRef=$e.componentRef,ce.route=$e.route.value,ce.outlet&&ce.outlet.attach($e.componentRef,$e.route.value),nn($e.route.value),this.activateChildRoutes(S,null,ce.children)}else{const $e=Ti(k.snapshot);ce.attachRef=null,ce.route=k,ce.injector=$e,ce.outlet&&ce.outlet.activateWith(k,ce.injector),this.activateChildRoutes(S,null,ce.children)}}else this.activateChildRoutes(S,null,A)}}class wo{constructor(S){this.path=S,this.route=this.path[this.path.length-1]}}class uo{constructor(S,v){this.component=S,this.route=v}}function da(_,S,v){const A=_._root;return jo(A,S?S._root:null,v,[A.value])}function co(_,S){const v=Symbol(),A=S.get(_,v);return A===v?"function"!=typeof _||(0,p.Z0I)(_)?S.get(_):_:A}function jo(_,S,v,A,k={canDeactivateChecks:[],canActivateChecks:[]}){const Z=ar(S);return _.children.forEach(ce=>{(function $a(_,S,v,A,k={canDeactivateChecks:[],canActivateChecks:[]}){const Z=_.value,ce=S?S.value:null,$e=v?v.getContext(_.value.outlet):null;if(ce&&Z.routeConfig===ce.routeConfig){const Fe=function xa(_,S,v){if("function"==typeof v)return v(_,S);switch(v){case"pathParamsChange":return!kn(_.url,S.url);case"pathParamsOrQueryParamsChange":return!kn(_.url,S.url)||!nr(_.queryParams,S.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!bi(_,S)||!nr(_.queryParams,S.queryParams);default:return!bi(_,S)}}(ce,Z,Z.routeConfig.runGuardsAndResolvers);Fe?k.canActivateChecks.push(new wo(A)):(Z.data=ce.data,Z._resolvedData=ce._resolvedData),jo(_,S,Z.component?$e?$e.children:null:v,A,k),Fe&&$e&&$e.outlet&&$e.outlet.isActivated&&k.canDeactivateChecks.push(new uo($e.outlet.component,ce))}else ce&&mr(S,$e,k),k.canActivateChecks.push(new wo(A)),jo(_,null,Z.component?$e?$e.children:null:v,A,k)})(ce,Z[ce.value.outlet],v,A.concat([ce.value]),k),delete Z[ce.value.outlet]}),Object.entries(Z).forEach(([ce,$e])=>mr($e,v.getContext(ce),k)),k}function mr(_,S,v){const A=ar(_),k=_.value;Object.entries(A).forEach(([Z,ce])=>{mr(ce,k.component?S?S.children.getContext(Z):null:S,v)}),v.canDeactivateChecks.push(new uo(k.component&&S&&S.outlet&&S.outlet.isActivated?S.outlet.component:null,k))}function No(_){return"function"==typeof _}function Li(_){return _ instanceof Qt.K||"EmptyError"===_?.name}const ws=Symbol("INITIAL_VALUE");function yi(){return(0,Dr.w)(_=>rt(_.map(S=>S.pipe((0,ii.q)(1),(0,br.O)(ws)))).pipe((0,dn.U)(S=>{for(const v of S)if(!0!==v){if(v===ws)return ws;if(!1===v||v instanceof gr)return v}return!0}),(0,Cr.h)(S=>S!==ws),(0,ii.q)(1)))}function ra(_){return(0,bt.z)((0,qe.b)(S=>{if(wt(S))throw Hi(0,S)}),(0,dn.U)(S=>!0===S))}class Zs{constructor(S){this.segmentGroup=S||null}}class pa{constructor(S){this.urlTree=S}}function Ys(_){return Ve(new Zs(_))}function vi(_){return Ve(new pa(_))}class Ar{constructor(S,v){this.urlSerializer=S,this.urlTree=v}noMatchError(S){return new p.vHH(4002,!1)}lineralizeSegments(S,v){let A=[],k=v.root;for(;;){if(A=A.concat(k.segments),0===k.numberOfChildren)return(0,he.of)(A);if(k.numberOfChildren>1||!k.children[Vt])return Ve(new p.vHH(4e3,!1));k=k.children[Vt]}}applyRedirectCommands(S,v,A){return this.applyRedirectCreateUrlTree(v,this.urlSerializer.parse(v),S,A)}applyRedirectCreateUrlTree(S,v,A,k){const Z=this.createSegmentGroup(S,v.root,A,k);return new gr(Z,this.createQueryParams(v.queryParams,this.urlTree.queryParams),v.fragment)}createQueryParams(S,v){const A={};return Object.entries(S).forEach(([k,Z])=>{if("string"==typeof Z&&Z.startsWith(":")){const $e=Z.substring(1);A[k]=v[$e]}else A[k]=Z}),A}createSegmentGroup(S,v,A,k){const Z=this.createSegments(S,v.segments,A,k);let ce={};return Object.entries(v.children).forEach(([$e,Fe])=>{ce[$e]=this.createSegmentGroup(S,Fe,A,k)}),new Pn(Z,ce)}createSegments(S,v,A,k){return v.map(Z=>Z.path.startsWith(":")?this.findPosParam(S,Z,k):this.findOrReturn(Z,A))}findPosParam(S,v,A){const k=A[v.path.substring(1)];if(!k)throw new p.vHH(4001,!1);return k}findOrReturn(S,v){let A=0;for(const k of v){if(k.path===S.path)return v.splice(A),k;A++}return S}}const Ls={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Xs(_,S,v,A,k){const Z=_i(_,S,v);return Z.matched?(A=function ta(_,S){return _.providers&&!_._injector&&(_._injector=(0,p.MMx)(_.providers,S,`Route: ${_.path}`)),_._injector??S}(S,A),function xs(_,S,v,A){const k=S.canMatch;if(!k||0===k.length)return(0,he.of)(!0);const Z=k.map(ce=>{const $e=co(ce,_);return tn(function _e(_){return _&&No(_.canMatch)}($e)?$e.canMatch(S,v):_.runInContext(()=>$e(S,v)))});return(0,he.of)(Z).pipe(yi(),ra())}(A,S,v).pipe((0,dn.U)(ce=>!0===ce?Z:{...Ls}))):(0,he.of)(Z)}function _i(_,S,v){if(""===S.path)return"full"===S.pathMatch&&(_.hasChildren()||v.length>0)?{...Ls}:{matched:!0,consumedSegments:[],remainingSegments:v,parameters:{},positionalParamSegments:{}};const k=(S.matcher||$r)(v,_,S);if(!k)return{...Ls};const Z={};Object.entries(k.posParams??{}).forEach(([$e,Fe])=>{Z[$e]=Fe.path});const ce=k.consumed.length>0?{...Z,...k.consumed[k.consumed.length-1].parameters}:Z;return{matched:!0,consumedSegments:k.consumed,remainingSegments:v.slice(k.consumed.length),parameters:ce,positionalParamSegments:k.posParams??{}}}function ga(_,S,v,A){return v.length>0&&function Ra(_,S,v){return v.some(A=>ls(_,S,A)&&zi(A)!==Vt)}(_,v,A)?{segmentGroup:new Pn(S,Ro(A,new Pn(v,_.children))),slicedSegments:[]}:0===v.length&&function wu(_,S,v){return v.some(A=>ls(_,S,A))}(_,v,A)?{segmentGroup:new Pn(_.segments,xo(_,0,v,A,_.children)),slicedSegments:v}:{segmentGroup:new Pn(_.segments,_.children),slicedSegments:v}}function xo(_,S,v,A,k){const Z={};for(const ce of A)if(ls(_,v,ce)&&!k[zi(ce)]){const $e=new Pn([],{});Z[zi(ce)]=$e}return{...k,...Z}}function Ro(_,S){const v={};v[Vt]=S;for(const A of _)if(""===A.path&&zi(A)!==Vt){const k=new Pn([],{});v[zi(A)]=k}return v}function ls(_,S,v){return(!(_.hasChildren()||S.length>0)||"full"!==v.pathMatch)&&""===v.path}class ma{constructor(S,v,A,k,Z,ce,$e){this.injector=S,this.configLoader=v,this.rootComponentType=A,this.config=k,this.urlTree=Z,this.paramsInheritanceStrategy=ce,this.urlSerializer=$e,this.allowRedirects=!0,this.applyRedirects=new Ar(this.urlSerializer,this.urlTree)}noMatchError(S){return new p.vHH(4002,!1)}recognize(){const S=ga(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,S,Vt).pipe(Je(v=>{if(v instanceof pa)return this.allowRedirects=!1,this.urlTree=v.urlTree,this.match(v.urlTree);throw v instanceof Zs?this.noMatchError(v):v}),(0,dn.U)(v=>{const A=new Ms([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Vt,this.rootComponentType,null,{}),k=new Oi(A,v),Z=new Sr("",k),ce=function mn(_,S,v=null,A=null){return Tr(En(_),S,v,A)}(A,[],this.urlTree.queryParams,this.urlTree.fragment);return ce.queryParams=this.urlTree.queryParams,Z.url=this.urlSerializer.serialize(ce),this.inheritParamsAndData(Z._root),{state:Z,tree:ce}}))}match(S){return this.processSegmentGroup(this.injector,this.config,S.root,Vt).pipe(Je(A=>{throw A instanceof Zs?this.noMatchError(A):A}))}inheritParamsAndData(S){const v=S.value,A=ks(v,this.paramsInheritanceStrategy);v.params=Object.freeze(A.params),v.data=Object.freeze(A.data),S.children.forEach(k=>this.inheritParamsAndData(k))}processSegmentGroup(S,v,A,k){return 0===A.segments.length&&A.hasChildren()?this.processChildren(S,v,A):this.processSegment(S,v,A,A.segments,k,!0)}processChildren(S,v,A){const k=[];for(const Z of Object.keys(A.children))"primary"===Z?k.unshift(Z):k.push(Z);return(0,ae.D)(k).pipe(He(Z=>{const ce=A.children[Z],$e=function _s(_,S){const v=_.filter(A=>zi(A)===S);return v.push(..._.filter(A=>zi(A)!==S)),v}(v,Z);return this.processSegmentGroup(S,$e,ce,Z)}),(0,gt.R)((Z,ce)=>(Z.push(...ce),Z)),(0,Tt.d)(null),function rn(_,S){const v=arguments.length>=2;return A=>A.pipe(_?(0,Cr.h)((k,Z)=>_(k,Z,A)):Ee.y,Et(1),v?(0,Tt.d)(S):(0,Wn.T)(()=>new Qt.K))}(),(0,vr.z)(Z=>{if(null===Z)return Ys(A);const ce=za(Z);return function Po(_){_.sort((S,v)=>S.value.outlet===Vt?-1:v.value.outlet===Vt?1:S.value.outlet.localeCompare(v.value.outlet))}(ce),(0,he.of)(ce)}))}processSegment(S,v,A,k,Z,ce){return(0,ae.D)(v).pipe(He($e=>this.processSegmentAgainstRoute($e._injector??S,v,$e,A,k,Z,ce).pipe(Je(Fe=>{if(Fe instanceof Zs)return(0,he.of)(null);throw Fe}))),(0,ke.P)($e=>!!$e),Je($e=>{if(Li($e))return function Vi(_,S,v){return 0===S.length&&!_.children[v]}(A,k,Z)?(0,he.of)([]):Ys(A);throw $e}))}processSegmentAgainstRoute(S,v,A,k,Z,ce,$e){return function Vs(_,S,v,A){return!!(zi(_)===A||A!==Vt&&ls(S,v,_))&&("**"===_.path||_i(S,_,v).matched)}(A,k,Z,ce)?void 0===A.redirectTo?this.matchSegmentAgainstRoute(S,k,A,Z,ce,$e):$e&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(S,k,v,A,Z,ce):Ys(k):Ys(k)}expandSegmentAgainstRouteUsingRedirect(S,v,A,k,Z,ce){return"**"===k.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(S,A,k,ce):this.expandRegularSegmentAgainstRouteUsingRedirect(S,v,A,k,Z,ce)}expandWildCardWithParamsAgainstRouteUsingRedirect(S,v,A,k){const Z=this.applyRedirects.applyRedirectCommands([],A.redirectTo,{});return A.redirectTo.startsWith("/")?vi(Z):this.applyRedirects.lineralizeSegments(A,Z).pipe((0,vr.z)(ce=>{const $e=new Pn(ce,{});return this.processSegment(S,v,$e,ce,k,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(S,v,A,k,Z,ce){const{matched:$e,consumedSegments:Fe,remainingSegments:Xe,positionalParamSegments:ft}=_i(v,k,Z);if(!$e)return Ys(v);const xt=this.applyRedirects.applyRedirectCommands(Fe,k.redirectTo,ft);return k.redirectTo.startsWith("/")?vi(xt):this.applyRedirects.lineralizeSegments(k,xt).pipe((0,vr.z)(At=>this.processSegment(S,A,v,At.concat(Xe),ce,!1)))}matchSegmentAgainstRoute(S,v,A,k,Z,ce){let $e;if("**"===A.path){const Fe=k.length>0?gn(k).parameters:{},Xe=new Ms(k,Fe,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Ga(A),zi(A),A.component??A._loadedComponent??null,A,C(A));$e=(0,he.of)({snapshot:Xe,consumedSegments:[],remainingSegments:[]}),v.children={}}else $e=Xs(v,A,k,S).pipe((0,dn.U)(({matched:Fe,consumedSegments:Xe,remainingSegments:ft,parameters:xt})=>Fe?{snapshot:new Ms(Xe,xt,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Ga(A),zi(A),A.component??A._loadedComponent??null,A,C(A)),consumedSegments:Xe,remainingSegments:ft}:null));return $e.pipe((0,Dr.w)(Fe=>null===Fe?Ys(v):this.getChildConfig(S=A._injector??S,A,k).pipe((0,Dr.w)(({routes:Xe})=>{const ft=A._loadedInjector??S,{snapshot:xt,consumedSegments:At,remainingSegments:fr}=Fe,{segmentGroup:Is,slicedSegments:Qr}=ga(v,At,fr,Xe);if(0===Qr.length&&Is.hasChildren())return this.processChildren(ft,Xe,Is).pipe((0,dn.U)(kr=>null===kr?null:[new Oi(xt,kr)]));if(0===Xe.length&&0===Qr.length)return(0,he.of)([new Oi(xt,[])]);const Do=zi(A)===Z;return this.processSegment(ft,Xe,Is,Qr,Do?Vt:Z,!0).pipe((0,dn.U)(kr=>[new Oi(xt,kr)]))}))))}getChildConfig(S,v,A){return v.children?(0,he.of)({routes:v.children,injector:S}):v.loadChildren?void 0!==v._loadedRoutes?(0,he.of)({routes:v._loadedRoutes,injector:v._loadedInjector}):function fa(_,S,v,A){const k=S.canLoad;if(void 0===k||0===k.length)return(0,he.of)(!0);const Z=k.map(ce=>{const $e=co(ce,_);return tn(function L(_){return _&&No(_.canLoad)}($e)?$e.canLoad(S,v):_.runInContext(()=>$e(S,v)))});return(0,he.of)(Z).pipe(yi(),ra())}(S,v,A).pipe((0,vr.z)(k=>k?this.configLoader.loadChildren(S,v).pipe((0,qe.b)(Z=>{v._loadedRoutes=Z.routes,v._loadedInjector=Z.injector})):function $o(_){return Ve(os(!1,3))}())):(0,he.of)({routes:[],injector:S})}}function ko(_){const S=_.value.routeConfig;return S&&""===S.path}function za(_){const S=[],v=new Set;for(const A of _){if(!ko(A)){S.push(A);continue}const k=S.find(Z=>A.value.routeConfig===Z.value.routeConfig);void 0!==k?(k.children.push(...A.children),v.add(k)):S.push(A)}for(const A of v){const k=za(A.children);S.push(new Oi(A.value,k))}return S.filter(A=>!v.has(A))}function Ga(_){return _.data||{}}function C(_){return _.resolve||{}}function sn(_){return"string"==typeof _.title||null===_.title}function Or(_){return(0,Dr.w)(S=>{const v=_(S);return v?(0,ae.D)(v).pipe((0,dn.U)(()=>S)):(0,he.of)(S)})}const rr=new p.OlP("ROUTES");let ir=(()=>{class _{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,p.f3M)(p.Sil)}loadComponent(v){if(this.componentLoaders.get(v))return this.componentLoaders.get(v);if(v._loadedComponent)return(0,he.of)(v._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(v);const A=tn(v.loadComponent()).pipe((0,dn.U)(Gn),(0,qe.b)(Z=>{this.onLoadEndListener&&this.onLoadEndListener(v),v._loadedComponent=Z}),Ht(()=>{this.componentLoaders.delete(v)})),k=new ln(A,()=>new en.x).pipe(Se());return this.componentLoaders.set(v,k),k}loadChildren(v,A){if(this.childrenLoaders.get(A))return this.childrenLoaders.get(A);if(A._loadedRoutes)return(0,he.of)({routes:A._loadedRoutes,injector:A._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(A);const Z=function un(_,S,v,A){return tn(_.loadChildren()).pipe((0,dn.U)(Gn),(0,vr.z)(k=>k instanceof p.YKP||Array.isArray(k)?(0,he.of)(k):(0,ae.D)(S.compileModuleAsync(k))),(0,dn.U)(k=>{A&&A(_);let Z,ce,$e=!1;return Array.isArray(k)?(ce=k,!0):(Z=k.create(v).injector,ce=Z.get(rr,[],{optional:!0,self:!0}).flat()),{routes:ce.map(zn),injector:Z}}))}(A,this.compiler,v,this.onLoadEndListener).pipe(Ht(()=>{this.childrenLoaders.delete(A)})),ce=new ln(Z,()=>new en.x).pipe(Se());return this.childrenLoaders.set(A,ce),ce}static#e=this.\u0275fac=function(A){return new(A||_)};static#t=this.\u0275prov=p.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"})}return _})();function Gn(_){return function Br(_){return _&&"object"==typeof _&&"default"in _}(_)?_.default:_}let qr=(()=>{class _{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new en.x,this.transitionAbortSubject=new en.x,this.configLoader=(0,p.f3M)(ir),this.environmentInjector=(0,p.f3M)(p.lqb),this.urlSerializer=(0,p.f3M)(xr),this.rootContexts=(0,p.f3M)(Ws),this.inputBindingEnabled=null!==(0,p.f3M)(Yr,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,he.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=k=>this.events.next(new So(k)),this.configLoader.onLoadStartListener=k=>this.events.next(new Gs(k))}complete(){this.transitions?.complete()}handleNavigationRequest(v){const A=++this.navigationId;this.transitions?.next({...this.transitions.value,...v,id:A})}setupNavigations(v,A,k){return this.transitions=new fe.X({id:0,currentUrlTree:A,currentRawUrl:A,currentBrowserUrl:A,extractedUrl:v.urlHandlingStrategy.extract(A),urlAfterRedirects:v.urlHandlingStrategy.extract(A),rawUrl:A,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Ne,restoredState:null,currentSnapshot:k.snapshot,targetSnapshot:null,currentRouterState:k,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,Cr.h)(Z=>0!==Z.id),(0,dn.U)(Z=>({...Z,extractedUrl:v.urlHandlingStrategy.extract(Z.rawUrl)})),(0,Dr.w)(Z=>{this.currentTransition=Z;let ce=!1,$e=!1;return(0,he.of)(Z).pipe((0,qe.b)(Fe=>{this.currentNavigation={id:Fe.id,initialUrl:Fe.rawUrl,extractedUrl:Fe.extractedUrl,trigger:Fe.source,extras:Fe.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Dr.w)(Fe=>{const Xe=Fe.currentBrowserUrl.toString(),ft=!v.navigated||Fe.extractedUrl.toString()!==Xe||Xe!==Fe.currentUrlTree.toString();if(!ft&&"reload"!==(Fe.extras.onSameUrlNavigation??v.onSameUrlNavigation)){const At="";return this.events.next(new Dn(Fe.id,this.urlSerializer.serialize(Fe.rawUrl),At,0)),Fe.resolve(null),Oe.E}if(v.urlHandlingStrategy.shouldProcessUrl(Fe.rawUrl))return(0,he.of)(Fe).pipe((0,Dr.w)(At=>{const fr=this.transitions?.getValue();return this.events.next(new vt(At.id,this.urlSerializer.serialize(At.extractedUrl),At.source,At.restoredState)),fr!==this.transitions?.getValue()?Oe.E:Promise.resolve(At)}),function q(_,S,v,A,k,Z){return(0,vr.z)(ce=>function Oo(_,S,v,A,k,Z,ce="emptyOnly"){return new ma(_,S,v,A,k,ce,Z).recognize()}(_,S,v,A,ce.extractedUrl,k,Z).pipe((0,dn.U)(({state:$e,tree:Fe})=>({...ce,targetSnapshot:$e,urlAfterRedirects:Fe}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,v.config,this.urlSerializer,v.paramsInheritanceStrategy),(0,qe.b)(At=>{Z.targetSnapshot=At.targetSnapshot,Z.urlAfterRedirects=At.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:At.urlAfterRedirects};const fr=new Ps(At.id,this.urlSerializer.serialize(At.extractedUrl),this.urlSerializer.serialize(At.urlAfterRedirects),At.targetSnapshot);this.events.next(fr)}));if(ft&&v.urlHandlingStrategy.shouldProcessUrl(Fe.currentRawUrl)){const{id:At,extractedUrl:fr,source:Is,restoredState:Qr,extras:Do}=Fe,kr=new vt(At,this.urlSerializer.serialize(fr),Is,Qr);this.events.next(kr);const ia=Cn(0,this.rootComponentType).snapshot;return this.currentTransition=Z={...Fe,targetSnapshot:ia,urlAfterRedirects:fr,extras:{...Do,skipLocationChange:!1,replaceUrl:!1}},(0,he.of)(Z)}{const At="";return this.events.next(new Dn(Fe.id,this.urlSerializer.serialize(Fe.extractedUrl),At,1)),Fe.resolve(null),Oe.E}}),(0,qe.b)(Fe=>{const Xe=new Ri(Fe.id,this.urlSerializer.serialize(Fe.extractedUrl),this.urlSerializer.serialize(Fe.urlAfterRedirects),Fe.targetSnapshot);this.events.next(Xe)}),(0,dn.U)(Fe=>(this.currentTransition=Z={...Fe,guards:da(Fe.targetSnapshot,Fe.currentSnapshot,this.rootContexts)},Z)),function cs(_,S){return(0,vr.z)(v=>{const{targetSnapshot:A,currentSnapshot:k,guards:{canActivateChecks:Z,canDeactivateChecks:ce}}=v;return 0===ce.length&&0===Z.length?(0,he.of)({...v,guardsResult:!0}):function Gi(_,S,v,A){return(0,ae.D)(_).pipe((0,vr.z)(k=>function na(_,S,v,A,k){const Z=S&&S.routeConfig?S.routeConfig.canDeactivate:null;if(!Z||0===Z.length)return(0,he.of)(!0);const ce=Z.map($e=>{const Fe=Ti(S)??k,Xe=co($e,Fe);return tn(function te(_){return _&&No(_.canDeactivate)}(Xe)?Xe.canDeactivate(_,S,v,A):Fe.runInContext(()=>Xe(_,S,v,A))).pipe((0,ke.P)())});return(0,he.of)(ce).pipe(yi())}(k.component,k.route,v,S,A)),(0,ke.P)(k=>!0!==k,!0))}(ce,A,k,_).pipe((0,vr.z)($e=>$e&&function Ha(_){return"boolean"==typeof _}($e)?function Io(_,S,v,A){return(0,ae.D)(S).pipe(He(k=>(0,Rt.z)(function Wr(_,S){return null!==_&&S&&S(new Ss(_)),(0,he.of)(!0)}(k.route.parent,A),function Ks(_,S){return null!==_&&S&&S(new vo(_)),(0,he.of)(!0)}(k.route,A),function Qi(_,S,v){const A=S[S.length-1],Z=S.slice(0,S.length-1).reverse().map(ce=>function us(_){const S=_.routeConfig?_.routeConfig.canActivateChild:null;return S&&0!==S.length?{node:_,guards:S}:null}(ce)).filter(ce=>null!==ce).map(ce=>(0,Mn.P)(()=>{const $e=ce.guards.map(Fe=>{const Xe=Ti(ce.node)??v,ft=co(Fe,Xe);return tn(function x(_){return _&&No(_.canActivateChild)}(ft)?ft.canActivateChild(A,_):Xe.runInContext(()=>ft(A,_))).pipe((0,ke.P)())});return(0,he.of)($e).pipe(yi())}));return(0,he.of)(Z).pipe(yi())}(_,k.path,v),function ha(_,S,v){const A=S.routeConfig?S.routeConfig.canActivate:null;if(!A||0===A.length)return(0,he.of)(!0);const k=A.map(Z=>(0,Mn.P)(()=>{const ce=Ti(S)??v,$e=co(Z,ce);return tn(function U(_){return _&&No(_.canActivate)}($e)?$e.canActivate(S,_):ce.runInContext(()=>$e(S,_))).pipe((0,ke.P)())}));return(0,he.of)(k).pipe(yi())}(_,k.route,v))),(0,ke.P)(k=>!0!==k,!0))}(A,Z,_,S):(0,he.of)($e)),(0,dn.U)($e=>({...v,guardsResult:$e})))})}(this.environmentInjector,Fe=>this.events.next(Fe)),(0,qe.b)(Fe=>{if(Z.guardsResult=Fe.guardsResult,wt(Fe.guardsResult))throw Hi(0,Fe.guardsResult);const Xe=new $i(Fe.id,this.urlSerializer.serialize(Fe.extractedUrl),this.urlSerializer.serialize(Fe.urlAfterRedirects),Fe.targetSnapshot,!!Fe.guardsResult);this.events.next(Xe)}),(0,Cr.h)(Fe=>!!Fe.guardsResult||(this.cancelNavigationTransition(Fe,"",3),!1)),Or(Fe=>{if(Fe.guards.canActivateChecks.length)return(0,he.of)(Fe).pipe((0,qe.b)(Xe=>{const ft=new pi(Xe.id,this.urlSerializer.serialize(Xe.extractedUrl),this.urlSerializer.serialize(Xe.urlAfterRedirects),Xe.targetSnapshot);this.events.next(ft)}),(0,Dr.w)(Xe=>{let ft=!1;return(0,he.of)(Xe).pipe(function O(_,S){return(0,vr.z)(v=>{const{targetSnapshot:A,guards:{canActivateChecks:k}}=v;if(!k.length)return(0,he.of)(v);let Z=0;return(0,ae.D)(k).pipe(He(ce=>function j(_,S,v,A){const k=_.routeConfig,Z=_._resolve;return void 0!==k?.title&&!sn(k)&&(Z[Nr]=k.title),function de(_,S,v,A){const k=function Ke(_){return[...Object.keys(_),...Object.getOwnPropertySymbols(_)]}(_);if(0===k.length)return(0,he.of)({});const Z={};return(0,ae.D)(k).pipe((0,vr.z)(ce=>function st(_,S,v,A){const k=Ti(S)??A,Z=co(_,k);return tn(Z.resolve?Z.resolve(S,v):k.runInContext(()=>Z(S,v)))}(_[ce],S,v,A).pipe((0,ke.P)(),(0,qe.b)($e=>{Z[ce]=$e}))),Et(1),function xn(_){return(0,dn.U)(()=>_)}(Z),Je(ce=>Li(ce)?Oe.E:Ve(ce)))}(Z,_,S,A).pipe((0,dn.U)(ce=>(_._resolvedData=ce,_.data=ks(_,v).resolve,k&&sn(k)&&(_.data[Nr]=k.title),null)))}(ce.route,A,_,S)),(0,qe.b)(()=>Z++),Et(1),(0,vr.z)(ce=>Z===k.length?(0,he.of)(v):Oe.E))})}(v.paramsInheritanceStrategy,this.environmentInjector),(0,qe.b)({next:()=>ft=!0,complete:()=>{ft||this.cancelNavigationTransition(Xe,"",2)}}))}),(0,qe.b)(Xe=>{const ft=new Jo(Xe.id,this.urlSerializer.serialize(Xe.extractedUrl),this.urlSerializer.serialize(Xe.urlAfterRedirects),Xe.targetSnapshot);this.events.next(ft)}))}),Or(Fe=>{const Xe=ft=>{const xt=[];ft.routeConfig?.loadComponent&&!ft.routeConfig._loadedComponent&&xt.push(this.configLoader.loadComponent(ft.routeConfig).pipe((0,qe.b)(At=>{ft.component=At}),(0,dn.U)(()=>{})));for(const At of ft.children)xt.push(...Xe(At));return xt};return rt(Xe(Fe.targetSnapshot.root)).pipe((0,Tt.d)(),(0,ii.q)(1))}),Or(()=>this.afterPreactivation()),(0,dn.U)(Fe=>{const Xe=function is(_,S,v){const A=mi(_,S._root,v?v._root:void 0);return new It(A,S)}(v.routeReuseStrategy,Fe.targetSnapshot,Fe.currentRouterState);return this.currentTransition=Z={...Fe,targetRouterState:Xe},Z}),(0,qe.b)(()=>{this.events.next(new ti)}),((_,S,v,A)=>(0,dn.U)(k=>(new Mo(S,k.targetRouterState,k.currentRouterState,v,A).activate(_),k)))(this.rootContexts,v.routeReuseStrategy,Fe=>this.events.next(Fe),this.inputBindingEnabled),(0,ii.q)(1),(0,qe.b)({next:Fe=>{ce=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Zt(Fe.id,this.urlSerializer.serialize(Fe.extractedUrl),this.urlSerializer.serialize(Fe.urlAfterRedirects))),v.titleStrategy?.updateTitle(Fe.targetRouterState.snapshot),Fe.resolve(!0)},complete:()=>{ce=!0}}),function lr(_){return(0,pt.e)((S,v)=>{(0,Be.Xf)(_).subscribe((0,Te.x)(v,()=>v.complete(),Kn.Z)),!v.closed&&S.subscribe(v)})}(this.transitionAbortSubject.pipe((0,qe.b)(Fe=>{throw Fe}))),Ht(()=>{ce||$e||this.cancelNavigationTransition(Z,"",1),this.currentNavigation?.id===Z.id&&(this.currentNavigation=null)}),Je(Fe=>{if($e=!0,Rn(Fe))this.events.next(new Bn(Z.id,this.urlSerializer.serialize(Z.extractedUrl),Fe.message,Fe.cancellationCode)),function Hr(_){return Rn(_)&&wt(_.url)}(Fe)?this.events.next(new Ci(Fe.url)):Z.resolve(!1);else{this.events.next(new $n(Z.id,this.urlSerializer.serialize(Z.extractedUrl),Fe,Z.targetSnapshot??void 0));try{Z.resolve(v.errorHandler(Fe))}catch(Xe){Z.reject(Xe)}}return Oe.E}))}))}cancelNavigationTransition(v,A,k){const Z=new Bn(v.id,this.urlSerializer.serialize(v.extractedUrl),A,k);this.events.next(Z),v.resolve(!1)}static#e=this.\u0275fac=function(A){return new(A||_)};static#t=this.\u0275prov=p.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"})}return _})();function Js(_){return _!==Ne}let dt=(()=>{class _{buildTitle(v){let A,k=v.root;for(;void 0!==k;)A=this.getResolvedTitleForRoute(k)??A,k=k.children.find(Z=>Z.outlet===Vt);return A}getResolvedTitleForRoute(v){return v.data[Nr]}static#e=this.\u0275fac=function(A){return new(A||_)};static#t=this.\u0275prov=p.Yz7({token:_,factory:function(){return(0,p.f3M)(Mr)},providedIn:"root"})}return _})(),Mr=(()=>{class _ extends dt{constructor(v){super(),this.title=v}updateTitle(v){const A=this.buildTitle(v);void 0!==A&&this.title.setTitle(A)}static#e=this.\u0275fac=function(A){return new(A||_)(p.LFG(er.Dx))};static#t=this.\u0275prov=p.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"})}return _})(),Si=(()=>{class _{static#e=this.\u0275fac=function(A){return new(A||_)};static#t=this.\u0275prov=p.Yz7({token:_,factory:function(){return(0,p.f3M)(Bt)},providedIn:"root"})}return _})();class Fi{shouldDetach(S){return!1}store(S,v){}shouldAttach(S){return!1}retrieve(S){return null}shouldReuseRoute(S,v){return S.routeConfig===v.routeConfig}}let Bt=(()=>{class _ extends Fi{static#e=this.\u0275fac=function(){let v;return function(k){return(v||(v=p.n5z(_)))(k||_)}}();static#t=this.\u0275prov=p.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"})}return _})();const zt=new p.OlP("",{providedIn:"root",factory:()=>({})});let Ur=(()=>{class _{static#e=this.\u0275fac=function(A){return new(A||_)};static#t=this.\u0275prov=p.Yz7({token:_,factory:function(){return(0,p.f3M)(Ft)},providedIn:"root"})}return _})(),Ft=(()=>{class _{shouldProcessUrl(v){return!0}extract(v){return v}merge(v,A){return v}static#e=this.\u0275fac=function(A){return new(A||_)};static#t=this.\u0275prov=p.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"})}return _})();var Ue=function(_){return _[_.COMPLETE=0]="COMPLETE",_[_.FAILED=1]="FAILED",_[_.REDIRECTING=2]="REDIRECTING",_}(Ue||{});function ot(_,S){_.events.pipe((0,Cr.h)(v=>v instanceof Zt||v instanceof Bn||v instanceof $n||v instanceof Dn),(0,dn.U)(v=>v instanceof Zt||v instanceof Dn?Ue.COMPLETE:v instanceof Bn&&(0===v.code||1===v.code)?Ue.REDIRECTING:Ue.FAILED),(0,Cr.h)(v=>v!==Ue.REDIRECTING),(0,ii.q)(1)).subscribe(()=>{S()})}function Xi(_){throw _}function Iu(_,S,v){return S.parse("/")}const Oa={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Bs={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let eo=(()=>{class _{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,p.f3M)(p.c2e),this.isNgZoneEnabled=!1,this._events=new en.x,this.options=(0,p.f3M)(zt,{optional:!0})||{},this.pendingTasks=(0,p.f3M)(p.HDt),this.errorHandler=this.options.errorHandler||Xi,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Iu,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,p.f3M)(Ur),this.routeReuseStrategy=(0,p.f3M)(Si),this.titleStrategy=(0,p.f3M)(dt),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,p.f3M)(rr,{optional:!0})?.flat()??[],this.navigationTransitions=(0,p.f3M)(qr),this.urlSerializer=(0,p.f3M)(xr),this.location=(0,p.f3M)(Nn.Ye),this.componentInputBindingEnabled=!!(0,p.f3M)(Yr,{optional:!0}),this.eventsSubscription=new Ze.w0,this.isNgZoneEnabled=(0,p.f3M)(p.R0b)instanceof p.R0b&&p.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new gr,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Cn(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(v=>{this.lastSuccessfulId=v.id,this.currentPageId=this.browserPageId},v=>{this.console.warn(`Unhandled Navigation Error: ${v}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const v=this.navigationTransitions.events.subscribe(A=>{try{const{currentTransition:k}=this.navigationTransitions;if(null===k)return void(lu(A)&&this._events.next(A));if(A instanceof vt)Js(k.source)&&(this.browserUrlTree=k.extractedUrl);else if(A instanceof Dn)this.rawUrlTree=k.rawUrl;else if(A instanceof Ps){if("eager"===this.urlUpdateStrategy){if(!k.extras.skipLocationChange){const Z=this.urlHandlingStrategy.merge(k.urlAfterRedirects,k.rawUrl);this.setBrowserUrl(Z,k)}this.browserUrlTree=k.urlAfterRedirects}}else if(A instanceof ti)this.currentUrlTree=k.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(k.urlAfterRedirects,k.rawUrl),this.routerState=k.targetRouterState,"deferred"===this.urlUpdateStrategy&&(k.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,k),this.browserUrlTree=k.urlAfterRedirects);else if(A instanceof Bn)0!==A.code&&1!==A.code&&(this.navigated=!0),(3===A.code||2===A.code)&&this.restoreHistory(k);else if(A instanceof Ci){const Z=this.urlHandlingStrategy.merge(A.url,k.currentRawUrl),ce={skipLocationChange:k.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Js(k.source)};this.scheduleNavigation(Z,Ne,null,ce,{resolve:k.resolve,reject:k.reject,promise:k.promise})}A instanceof $n&&this.restoreHistory(k,!0),A instanceof Zt&&(this.navigated=!0),lu(A)&&this._events.next(A)}catch(k){this.navigationTransitions.transitionAbortSubject.next(k)}});this.eventsSubscription.add(v)}resetRootComponentType(v){this.routerState.root.component=v,this.navigationTransitions.rootComponentType=v}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const v=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Ne,v)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(v=>{const A="popstate"===v.type?"popstate":"hashchange";"popstate"===A&&setTimeout(()=>{this.navigateToSyncWithBrowser(v.url,A,v.state)},0)}))}navigateToSyncWithBrowser(v,A,k){const Z={replaceUrl:!0},ce=k?.navigationId?k:null;if(k){const Fe={...k};delete Fe.navigationId,delete Fe.\u0275routerPageId,0!==Object.keys(Fe).length&&(Z.state=Fe)}const $e=this.parseUrl(v);this.scheduleNavigation($e,A,ce,Z)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(v){this.config=v.map(zn),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(v,A={}){const{relativeTo:k,queryParams:Z,fragment:ce,queryParamsHandling:$e,preserveFragment:Fe}=A,Xe=Fe?this.currentUrlTree.fragment:ce;let xt,ft=null;switch($e){case"merge":ft={...this.currentUrlTree.queryParams,...Z};break;case"preserve":ft=this.currentUrlTree.queryParams;break;default:ft=Z||null}null!==ft&&(ft=this.removeEmptyProps(ft));try{xt=En(k?k.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof v[0]||!v[0].startsWith("/"))&&(v=[]),xt=this.currentUrlTree.root}return Tr(xt,v,ft,Xe??null)}navigateByUrl(v,A={skipLocationChange:!1}){const k=wt(v)?v:this.parseUrl(v),Z=this.urlHandlingStrategy.merge(k,this.rawUrlTree);return this.scheduleNavigation(Z,Ne,null,A)}navigate(v,A={skipLocationChange:!1}){return function qu(_){for(let S=0;S<_.length;S++)if(null==_[S])throw new p.vHH(4008,!1)}(v),this.navigateByUrl(this.createUrlTree(v,A),A)}serializeUrl(v){return this.urlSerializer.serialize(v)}parseUrl(v){let A;try{A=this.urlSerializer.parse(v)}catch(k){A=this.malformedUriErrorHandler(k,this.urlSerializer,v)}return A}isActive(v,A){let k;if(k=!0===A?{...Oa}:!1===A?{...Bs}:A,wt(v))return di(this.currentUrlTree,v,k);const Z=this.parseUrl(v);return di(this.currentUrlTree,Z,k)}removeEmptyProps(v){return Object.keys(v).reduce((A,k)=>{const Z=v[k];return null!=Z&&(A[k]=Z),A},{})}scheduleNavigation(v,A,k,Z,ce){if(this.disposed)return Promise.resolve(!1);let $e,Fe,Xe;ce?($e=ce.resolve,Fe=ce.reject,Xe=ce.promise):Xe=new Promise((xt,At)=>{$e=xt,Fe=At});const ft=this.pendingTasks.add();return ot(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(ft))}),this.navigationTransitions.handleNavigationRequest({source:A,restoredState:k,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:v,extras:Z,resolve:$e,reject:Fe,promise:Xe,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Xe.catch(xt=>Promise.reject(xt))}setBrowserUrl(v,A){const k=this.urlSerializer.serialize(v);if(this.location.isCurrentPathEqualTo(k)||A.extras.replaceUrl){const ce={...A.extras.state,...this.generateNgRouterState(A.id,this.browserPageId)};this.location.replaceState(k,"",ce)}else{const Z={...A.extras.state,...this.generateNgRouterState(A.id,this.browserPageId+1)};this.location.go(k,"",Z)}}restoreHistory(v,A=!1){if("computed"===this.canceledNavigationResolution){const Z=this.currentPageId-this.browserPageId;0!==Z?this.location.historyGo(Z):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===Z&&(this.resetState(v),this.browserUrlTree=v.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(A&&this.resetState(v),this.resetUrlToCurrentUrlTree())}resetState(v){this.routerState=v.currentRouterState,this.currentUrlTree=v.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,v.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(v,A){return"computed"===this.canceledNavigationResolution?{navigationId:v,\u0275routerPageId:A}:{navigationId:v}}static#e=this.\u0275fac=function(A){return new(A||_)};static#t=this.\u0275prov=p.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"})}return _})();function lu(_){return!(_ instanceof ti||_ instanceof Ci)}let Fo=(()=>{class _{constructor(v,A,k,Z,ce,$e){this.router=v,this.route=A,this.tabIndexAttribute=k,this.renderer=Z,this.el=ce,this.locationStrategy=$e,this.href=null,this.commands=null,this.onChanges=new en.x,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const Fe=ce.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===Fe||"area"===Fe,this.isAnchorElement?this.subscription=v.events.subscribe(Xe=>{Xe instanceof Zt&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(v){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",v)}ngOnChanges(v){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(v){null!=v?(this.commands=Array.isArray(v)?v:[v],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(v,A,k,Z,ce){return!!(null===this.urlTree||this.isAnchorElement&&(0!==v||A||k||Z||ce||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const v=null===this.href?null:(0,p.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",v)}applyAttributeValue(v,A){const k=this.renderer,Z=this.el.nativeElement;null!==A?k.setAttribute(Z,v,A):k.removeAttribute(Z,v)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(A){return new(A||_)(p.Y36(eo),p.Y36(ai),p.$8M("tabindex"),p.Y36(p.Qsj),p.Y36(p.SBq),p.Y36(Nn.S$))};static#t=this.\u0275dir=p.lG2({type:_,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(A,k){1&A&&p.NdJ("click",function(ce){return k.onClick(ce.button,ce.ctrlKey,ce.shiftKey,ce.altKey,ce.metaKey)}),2&A&&p.uIk("target",k.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",p.VuI],skipLocationChange:["skipLocationChange","skipLocationChange",p.VuI],replaceUrl:["replaceUrl","replaceUrl",p.VuI],routerLink:"routerLink"},standalone:!0,features:[p.Xq5,p.TTD]})}return _})();class Ku{}let ya=(()=>{class _{constructor(v,A,k,Z,ce){this.router=v,this.injector=k,this.preloadingStrategy=Z,this.loader=ce}setUpPreloading(){this.subscription=this.router.events.pipe((0,Cr.h)(v=>v instanceof Zt),He(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(v,A){const k=[];for(const Z of A){Z.providers&&!Z._injector&&(Z._injector=(0,p.MMx)(Z.providers,v,`Route: ${Z.path}`));const ce=Z._injector??v,$e=Z._loadedInjector??ce;(Z.loadChildren&&!Z._loadedRoutes&&void 0===Z.canLoad||Z.loadComponent&&!Z._loadedComponent)&&k.push(this.preloadConfig(ce,Z)),(Z.children||Z._loadedRoutes)&&k.push(this.processRoutes($e,Z.children??Z._loadedRoutes))}return(0,ae.D)(k).pipe((0,Qn.J)())}preloadConfig(v,A){return this.preloadingStrategy.preload(A,()=>{let k;k=A.loadChildren&&void 0===A.canLoad?this.loader.loadChildren(v,A):(0,he.of)(null);const Z=k.pipe((0,vr.z)(ce=>null===ce?(0,he.of)(void 0):(A._loadedRoutes=ce.routes,A._loadedInjector=ce.injector,this.processRoutes(ce.injector??v,ce.routes))));if(A.loadComponent&&!A._loadedComponent){const ce=this.loader.loadComponent(A);return(0,ae.D)([Z,ce]).pipe((0,Qn.J)())}return Z})}static#e=this.\u0275fac=function(A){return new(A||_)(p.LFG(eo),p.LFG(p.Sil),p.LFG(p.lqb),p.LFG(Ku),p.LFG(ir))};static#t=this.\u0275prov=p.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"})}return _})();const bn=new p.OlP("");let Kr=(()=>{class _{constructor(v,A,k,Z,ce={}){this.urlSerializer=v,this.transitions=A,this.viewportScroller=k,this.zone=Z,this.options=ce,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},ce.scrollPositionRestoration=ce.scrollPositionRestoration||"disabled",ce.anchorScrolling=ce.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(v=>{v instanceof vt?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=v.navigationTrigger,this.restoredId=v.restoredState?v.restoredState.navigationId:0):v instanceof Zt?(this.lastId=v.id,this.scheduleScrollEvent(v,this.urlSerializer.parse(v.urlAfterRedirects).fragment)):v instanceof Dn&&0===v.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(v,this.urlSerializer.parse(v.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(v=>{v instanceof Hn&&(v.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(v.position):v.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(v.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(v,A){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Hn(v,"popstate"===this.lastSource?this.store[this.restoredId]:null,A))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(A){p.$Z()};static#t=this.\u0275prov=p.Yz7({token:_,factory:_.\u0275fac})}return _})();function on(_,S){return{\u0275kind:_,\u0275providers:S}}function Pa(){const _=(0,p.f3M)(p.zs3);return S=>{const v=_.get(p.z2F);if(S!==v.components[0])return;const A=_.get(eo),k=_.get(Ea);1===_.get(Xa)&&A.initialNavigation(),_.get(zo,null,p.XFs.Optional)?.setUpPreloading(),_.get(bn,null,p.XFs.Optional)?.init(),A.resetRootComponentType(v.componentTypes[0]),k.closed||(k.next(),k.complete(),k.unsubscribe())}}const Ea=new p.OlP("",{factory:()=>new en.x}),Xa=new p.OlP("",{providedIn:"root",factory:()=>1}),zo=new p.OlP("");function H(_){return on(0,[{provide:zo,useExisting:ya},{provide:Ku,useExisting:_}])}const ve=new p.OlP("ROUTER_FORROOT_GUARD"),Q=[Nn.Ye,{provide:xr,useClass:hi},eo,Ws,{provide:ai,useFactory:function va(_){return _.routerState.root},deps:[eo]},ir,[]];function je(){return new p.PXZ("Router",eo)}let Qe=(()=>{class _{constructor(v){}static forRoot(v,A){return{ngModule:_,providers:[Q,[],{provide:rr,multi:!0,useValue:v},{provide:ve,useFactory:Tn,deps:[[eo,new p.FiY,new p.tp0]]},{provide:zt,useValue:A||{}},A?.useHash?{provide:Nn.S$,useClass:Nn.Do}:{provide:Nn.S$,useClass:Nn.b0},{provide:bn,useFactory:()=>{const _=(0,p.f3M)(Nn.EM),S=(0,p.f3M)(p.R0b),v=(0,p.f3M)(zt),A=(0,p.f3M)(qr),k=(0,p.f3M)(xr);return v.scrollOffset&&_.setOffset(v.scrollOffset),new Kr(k,A,_,S,v)}},A?.preloadingStrategy?H(A.preloadingStrategy).\u0275providers:[],{provide:p.PXZ,multi:!0,useFactory:je},A?.initialNavigation?Kt(A):[],A?.bindToComponentInputs?on(8,[Ns,{provide:Yr,useExisting:Ns}]).\u0275providers:[],[{provide:Fn,useFactory:Pa},{provide:p.tb,multi:!0,useExisting:Fn}]]}}static forChild(v){return{ngModule:_,providers:[{provide:rr,multi:!0,useValue:v}]}}static#e=this.\u0275fac=function(A){return new(A||_)(p.LFG(ve,8))};static#t=this.\u0275mod=p.oAB({type:_});static#n=this.\u0275inj=p.cJS({})}return _})();function Tn(_){return"guarded"}function Kt(_){return["disabled"===_.initialNavigation?on(3,[{provide:p.ip1,multi:!0,useFactory:()=>{const S=(0,p.f3M)(eo);return()=>{S.setUpLocationChangeListener()}}},{provide:Xa,useValue:2}]).\u0275providers:[],"enabledBlocking"===_.initialNavigation?on(2,[{provide:Xa,useValue:0},{provide:p.ip1,multi:!0,deps:[p.zs3],useFactory:S=>{const v=S.get(Nn.V_,Promise.resolve());return()=>v.then(()=>new Promise(A=>{const k=S.get(eo),Z=S.get(Ea);ot(k,()=>{A(!0)}),S.get(qr).afterPreactivation=()=>(A(!0),Z.closed?(0,he.of)(void 0):Z),k.initialNavigation()}))}}]).\u0275providers:[]]}const Fn=new p.OlP("")},534:($t,Ge,z)=>{z.r(Ge),z.d(Ge,{FirebaseError:()=>he.ZR,SDK_VERSION:()=>Pn,_DEFAULT_ENTRY_NAME:()=>Xt,_addComponent:()=>_r,_addOrOverwriteComponent:()=>di,_apps:()=>tn,_clearComponents:()=>jn,_components:()=>vn,_getProvider:()=>pr,_registerComponent:()=>Vn,_removeServiceInstance:()=>Mi,deleteApp:()=>zr,getApp:()=>Xn,getApps:()=>kn,initializeApp:()=>ei,onLog:()=>Zn,registerVersion:()=>hi,setLogLevel:()=>wn});var p=z(5861),W=z(4537),ae=z(7879),he=z(9058);const fe=(We,Re)=>Re.some(ut=>We instanceof ut);let xe,Me;const oe=new WeakMap,pe=new WeakMap,Te=new WeakMap,et=new WeakMap,rt=new WeakMap;let Qt={get(We,Re,ut){if(We instanceof IDBTransaction){if("done"===Re)return pe.get(We);if("objectStoreNames"===Re)return We.objectStoreNames||Te.get(We);if("store"===Re)return ut.objectStoreNames[1]?void 0:ut.objectStore(ut.objectStoreNames[0])}return le(We[Re])},set:(We,Re,ut)=>(We[Re]=ut,!0),has:(We,Re)=>We instanceof IDBTransaction&&("done"===Re||"store"===Re)||Re in We};function bt(We){return"function"==typeof We?function Mn(We){return We!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ze(){return Me||(Me=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(We)?function(...Re){return We.apply(Ve(this),Re),le(oe.get(this))}:function(...Re){return le(We.apply(Ve(this),Re))}:function(Re,...ut){const kt=We.call(Ve(this),Re,...ut);return Te.set(kt,Re.sort?Re.sort():[Re]),le(kt)}}(We):(We instanceof IDBTransaction&&function ht(We){if(pe.has(We))return;const Re=new Promise((ut,kt)=>{const wt=()=>{We.removeEventListener("complete",mn),We.removeEventListener("error",En),We.removeEventListener("abort",En)},mn=()=>{ut(),wt()},En=()=>{kt(We.error||new DOMException("AbortError","AbortError")),wt()};We.addEventListener("complete",mn),We.addEventListener("error",En),We.addEventListener("abort",En)});pe.set(We,Re)}(We),fe(We,function Ee(){return xe||(xe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(We,Qt):We)}function le(We){if(We instanceof IDBRequest)return function mt(We){const Re=new Promise((ut,kt)=>{const wt=()=>{We.removeEventListener("success",mn),We.removeEventListener("error",En)},mn=()=>{ut(le(We.result)),wt()},En=()=>{kt(We.error),wt()};We.addEventListener("success",mn),We.addEventListener("error",En)});return Re.then(ut=>{ut instanceof IDBCursor&&oe.set(ut,We)}).catch(()=>{}),rt.set(Re,We),Re}(We);if(et.has(We))return et.get(We);const Re=bt(We);return Re!==We&&(et.set(We,Re),rt.set(Re,We)),Re}const Ve=We=>rt.get(We),pt=["get","getKey","getAll","getAllKeys","count"],Se=["put","add","delete","clear"],ln=new Map;function en(We,Re){if(!(We instanceof IDBDatabase)||Re in We||"string"!=typeof Re)return;if(ln.get(Re))return ln.get(Re);const ut=Re.replace(/FromIndex$/,""),kt=Re!==ut,wt=Se.includes(ut);if(!(ut in(kt?IDBIndex:IDBObjectStore).prototype)||!wt&&!pt.includes(ut))return;const mn=function(){var En=(0,p.Z)(function*(Tr,...hr){const Rr=this.transaction(Tr,wt?"readwrite":"readonly");let xi=Rr.store;return kt&&(xi=xi.index(hr.shift())),(yield Promise.all([xi[ut](...hr),wt&&Rr.done]))[0]});return function(hr){return En.apply(this,arguments)}}();return ln.set(Re,mn),mn}!function Rt(We){Qt=We(Qt)}(We=>({...We,get:(Re,ut,kt)=>en(Re,ut)||We.get(Re,ut,kt),has:(Re,ut)=>!!en(Re,ut)||We.has(Re,ut)}));class Nn{constructor(Re){this.container=Re}getPlatformInfoString(){return this.container.getProviders().map(ut=>{if(function dn(We){const Re=We.getComponent();return"VERSION"===Re?.type}(ut)){const kt=ut.getImmediate();return`${kt.library}/${kt.version}`}return null}).filter(ut=>ut).join(" ")}}const Dr="@firebase/app",br=new ae.Yd("@firebase/app"),Xt="[DEFAULT]",gn={[Dr]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},tn=new Map,vn=new Map;function _r(We,Re){try{We.container.addComponent(Re)}catch(ut){br.debug(`Component ${Re.name} failed to register with FirebaseApp ${We.name}`,ut)}}function di(We,Re){We.container.addOrOverwriteComponent(Re)}function Vn(We){const Re=We.name;if(vn.has(Re))return br.debug(`There were multiple attempts to register component ${Re}.`),!1;vn.set(Re,We);for(const ut of tn.values())_r(ut,We);return!0}function pr(We,Re){const ut=We.container.getProvider("heartbeat").getImmediate({optional:!0});return ut&&ut.triggerHeartbeat(),We.container.getProvider(Re)}function Mi(We,Re,ut=Xt){pr(We,Re).clearInstance(ut)}function jn(){vn.clear()}const fn=new he.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class gr{constructor(Re,ut,kt){this._isDeleted=!1,this._options=Object.assign({},Re),this._config=Object.assign({},ut),this._name=ut.name,this._automaticDataCollectionEnabled=ut.automaticDataCollectionEnabled,this._container=kt,this.container.addComponent(new W.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Re){this.checkDestroyed(),this._automaticDataCollectionEnabled=Re}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Re){this._isDeleted=Re}checkDestroyed(){if(this.isDeleted)throw fn.create("app-deleted",{appName:this._name})}}const Pn="9.23.0";function ei(We,Re={}){let ut=We;"object"!=typeof Re&&(Re={name:Re});const kt=Object.assign({name:Xt,automaticDataCollectionEnabled:!1},Re),wt=kt.name;if("string"!=typeof wt||!wt)throw fn.create("bad-app-name",{appName:String(wt)});if(ut||(ut=(0,he.aH)()),!ut)throw fn.create("no-options");const mn=tn.get(wt);if(mn){if((0,he.vZ)(ut,mn.options)&&(0,he.vZ)(kt,mn.config))return mn;throw fn.create("duplicate-app",{appName:wt})}const En=new W.H0(wt);for(const hr of vn.values())En.addComponent(hr);const Tr=new gr(ut,kt,En);return tn.set(wt,Tr),Tr}function Xn(We=Xt){const Re=tn.get(We);if(!Re&&We===Xt&&(0,he.aH)())return ei();if(!Re)throw fn.create("no-app",{appName:We});return Re}function kn(){return Array.from(tn.values())}function zr(We){return xr.apply(this,arguments)}function xr(){return(xr=(0,p.Z)(function*(We){const Re=We.name;tn.has(Re)&&(tn.delete(Re),yield Promise.all(We.container.getProviders().map(ut=>ut.delete())),We.isDeleted=!0)})).apply(this,arguments)}function hi(We,Re,ut){var kt;let wt=null!==(kt=gn[We])&&void 0!==kt?kt:We;ut&&(wt+=`-${ut}`);const mn=wt.match(/\s|\//),En=Re.match(/\s|\//);if(mn||En){const Tr=[`Unable to register library "${wt}" with version "${Re}":`];return mn&&Tr.push(`library name "${wt}" contains illegal characters (whitespace or "/")`),mn&&En&&Tr.push("and"),En&&Tr.push(`version name "${Re}" contains illegal characters (whitespace or "/")`),void br.warn(Tr.join(" "))}Vn(new W.wA(`${wt}-version`,()=>({library:wt,version:Re}),"VERSION"))}function Zn(We,Re){if(null!==We&&"function"!=typeof We)throw fn.create("invalid-log-argument");(0,ae.Am)(We,Re)}function wn(We){(0,ae.Ub)(We)}const Jt="firebase-heartbeat-database",Yn=1,me="firebase-heartbeat-store";let X=null;function ee(){return X||(X=function Oe(We,Re,{blocked:ut,upgrade:kt,blocking:wt,terminated:mn}={}){const En=indexedDB.open(We,Re),Tr=le(En);return kt&&En.addEventListener("upgradeneeded",hr=>{kt(le(En.result),hr.oldVersion,hr.newVersion,le(En.transaction),hr)}),ut&&En.addEventListener("blocked",hr=>ut(hr.oldVersion,hr.newVersion,hr)),Tr.then(hr=>{mn&&hr.addEventListener("close",()=>mn()),wt&&hr.addEventListener("versionchange",Rr=>wt(Rr.oldVersion,Rr.newVersion,Rr))}).catch(()=>{}),Tr}(Jt,Yn,{upgrade:(We,Re)=>{0===Re&&We.createObjectStore(me)}}).catch(We=>{throw fn.create("idb-open",{originalErrorMessage:We.message})})),X}function J(){return(J=(0,p.Z)(function*(We){try{return yield(yield ee()).transaction(me).objectStore(me).get(yt(We))}catch(Re){if(Re instanceof he.ZR)br.warn(Re.message);else{const ut=fn.create("idb-get",{originalErrorMessage:Re?.message});br.warn(ut.message)}}})).apply(this,arguments)}function Ie(We,Re){return at.apply(this,arguments)}function at(){return(at=(0,p.Z)(function*(We,Re){try{const kt=(yield ee()).transaction(me,"readwrite");yield kt.objectStore(me).put(Re,yt(We)),yield kt.done}catch(ut){if(ut instanceof he.ZR)br.warn(ut.message);else{const kt=fn.create("idb-set",{originalErrorMessage:ut?.message});br.warn(kt.message)}}})).apply(this,arguments)}function yt(We){return`${We.name}!${We.options.appId}`}class _n{constructor(Re){this.container=Re,this._heartbeatsCache=null;const ut=this.container.getProvider("app").getImmediate();this._storage=new Ni(ut),this._heartbeatsCachePromise=this._storage.read().then(kt=>(this._heartbeatsCache=kt,kt))}triggerHeartbeat(){var Re=this;return(0,p.Z)(function*(){const kt=Re.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),wt=In();if(null===Re._heartbeatsCache&&(Re._heartbeatsCache=yield Re._heartbeatsCachePromise),Re._heartbeatsCache.lastSentHeartbeatDate!==wt&&!Re._heartbeatsCache.heartbeats.some(mn=>mn.date===wt))return Re._heartbeatsCache.heartbeats.push({date:wt,agent:kt}),Re._heartbeatsCache.heartbeats=Re._heartbeatsCache.heartbeats.filter(mn=>{const En=new Date(mn.date).valueOf();return Date.now()-En<=2592e6}),Re._storage.overwrite(Re._heartbeatsCache)})()}getHeartbeatsHeader(){var Re=this;return(0,p.Z)(function*(){if(null===Re._heartbeatsCache&&(yield Re._heartbeatsCachePromise),null===Re._heartbeatsCache||0===Re._heartbeatsCache.heartbeats.length)return"";const ut=In(),{heartbeatsToSend:kt,unsentEntries:wt}=function dr(We,Re=1024){const ut=[];let kt=We.slice();for(const wt of We){const mn=ut.find(En=>En.agent===wt.agent);if(mn){if(mn.dates.push(wt.date),ms(ut)>Re){mn.dates.pop();break}}else if(ut.push({agent:wt.agent,dates:[wt.date]}),ms(ut)>Re){ut.pop();break}kt=kt.slice(1)}return{heartbeatsToSend:ut,unsentEntries:kt}}(Re._heartbeatsCache.heartbeats),mn=(0,he.L)(JSON.stringify({version:2,heartbeats:kt}));return Re._heartbeatsCache.lastSentHeartbeatDate=ut,wt.length>0?(Re._heartbeatsCache.heartbeats=wt,yield Re._storage.overwrite(Re._heartbeatsCache)):(Re._heartbeatsCache.heartbeats=[],Re._storage.overwrite(Re._heartbeatsCache)),mn})()}}function In(){return(new Date).toISOString().substring(0,10)}class Ni{constructor(Re){this.app=Re,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,p.Z)(function*(){return!!(0,he.hl)()&&(0,he.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Re=this;return(0,p.Z)(function*(){return(yield Re._canUseIndexedDBPromise)&&(yield function K(We){return J.apply(this,arguments)}(Re.app))||{heartbeats:[]}})()}overwrite(Re){var ut=this;return(0,p.Z)(function*(){var kt;if(yield ut._canUseIndexedDBPromise){const mn=yield ut.read();return Ie(ut.app,{lastSentHeartbeatDate:null!==(kt=Re.lastSentHeartbeatDate)&&void 0!==kt?kt:mn.lastSentHeartbeatDate,heartbeats:Re.heartbeats})}})()}add(Re){var ut=this;return(0,p.Z)(function*(){var kt;if(yield ut._canUseIndexedDBPromise){const mn=yield ut.read();return Ie(ut.app,{lastSentHeartbeatDate:null!==(kt=Re.lastSentHeartbeatDate)&&void 0!==kt?kt:mn.lastSentHeartbeatDate,heartbeats:[...mn.heartbeats,...Re.heartbeats]})}})()}}function ms(We){return(0,he.L)(JSON.stringify({version:2,heartbeats:We})).length}!function ts(We){Vn(new W.wA("platform-logger",Re=>new Nn(Re),"PRIVATE")),Vn(new W.wA("heartbeat",Re=>new _n(Re),"PRIVATE")),hi(Dr,"0.9.13",We),hi(Dr,"0.9.13","esm2017"),hi("fire-js","")}("")},4537:($t,Ge,z)=>{z.d(Ge,{H0:()=>Ee,wA:()=>ae});var p=z(5861),W=z(9058);class ae{constructor(oe,pe,Te){this.name=oe,this.instanceFactory=pe,this.type=Te,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(oe){return this.instantiationMode=oe,this}setMultipleInstances(oe){return this.multipleInstances=oe,this}setServiceProps(oe){return this.serviceProps=oe,this}setInstanceCreatedCallback(oe){return this.onInstanceCreated=oe,this}}const he="[DEFAULT]";class fe{constructor(oe,pe){this.name=oe,this.container=pe,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(oe){const pe=this.normalizeInstanceIdentifier(oe);if(!this.instancesDeferred.has(pe)){const Te=new W.BH;if(this.instancesDeferred.set(pe,Te),this.isInitialized(pe)||this.shouldAutoInitialize())try{const et=this.getOrInitializeService({instanceIdentifier:pe});et&&Te.resolve(et)}catch{}}return this.instancesDeferred.get(pe).promise}getImmediate(oe){var pe;const Te=this.normalizeInstanceIdentifier(oe?.identifier),et=null!==(pe=oe?.optional)&&void 0!==pe&&pe;if(!this.isInitialized(Te)&&!this.shouldAutoInitialize()){if(et)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Te})}catch(rt){if(et)return null;throw rt}}getComponent(){return this.component}setComponent(oe){if(oe.name!==this.name)throw Error(`Mismatching Component ${oe.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=oe,this.shouldAutoInitialize()){if(function Me(ze){return"EAGER"===ze.instantiationMode}(oe))try{this.getOrInitializeService({instanceIdentifier:he})}catch{}for(const[pe,Te]of this.instancesDeferred.entries()){const et=this.normalizeInstanceIdentifier(pe);try{const rt=this.getOrInitializeService({instanceIdentifier:et});Te.resolve(rt)}catch{}}}}clearInstance(oe=he){this.instancesDeferred.delete(oe),this.instancesOptions.delete(oe),this.instances.delete(oe)}delete(){var oe=this;return(0,p.Z)(function*(){const pe=Array.from(oe.instances.values());yield Promise.all([...pe.filter(Te=>"INTERNAL"in Te).map(Te=>Te.INTERNAL.delete()),...pe.filter(Te=>"_delete"in Te).map(Te=>Te._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(oe=he){return this.instances.has(oe)}getOptions(oe=he){return this.instancesOptions.get(oe)||{}}initialize(oe={}){const{options:pe={}}=oe,Te=this.normalizeInstanceIdentifier(oe.instanceIdentifier);if(this.isInitialized(Te))throw Error(`${this.name}(${Te}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const et=this.getOrInitializeService({instanceIdentifier:Te,options:pe});for(const[rt,mt]of this.instancesDeferred.entries())Te===this.normalizeInstanceIdentifier(rt)&&mt.resolve(et);return et}onInit(oe,pe){var Te;const et=this.normalizeInstanceIdentifier(pe),rt=null!==(Te=this.onInitCallbacks.get(et))&&void 0!==Te?Te:new Set;rt.add(oe),this.onInitCallbacks.set(et,rt);const mt=this.instances.get(et);return mt&&oe(mt,et),()=>{rt.delete(oe)}}invokeOnInitCallbacks(oe,pe){const Te=this.onInitCallbacks.get(pe);if(Te)for(const et of Te)try{et(oe,pe)}catch{}}getOrInitializeService({instanceIdentifier:oe,options:pe={}}){let Te=this.instances.get(oe);if(!Te&&this.component&&(Te=this.component.instanceFactory(this.container,{instanceIdentifier:(ze=oe,ze===he?void 0:ze),options:pe}),this.instances.set(oe,Te),this.instancesOptions.set(oe,pe),this.invokeOnInitCallbacks(Te,oe),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,oe,Te)}catch{}var ze;return Te||null}normalizeInstanceIdentifier(oe=he){return this.component?this.component.multipleInstances?oe:he:oe}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ee{constructor(oe){this.name=oe,this.providers=new Map}addComponent(oe){const pe=this.getProvider(oe.name);if(pe.isComponentSet())throw new Error(`Component ${oe.name} has already been registered with ${this.name}`);pe.setComponent(oe)}addOrOverwriteComponent(oe){this.getProvider(oe.name).isComponentSet()&&this.providers.delete(oe.name),this.addComponent(oe)}getProvider(oe){if(this.providers.has(oe))return this.providers.get(oe);const pe=new fe(oe,this);return this.providers.set(oe,pe),pe}getProviders(){return Array.from(this.providers.values())}}},7879:($t,Ge,z)=>{z.d(Ge,{Am:()=>ze,Ub:()=>Ee,Yd:()=>Me,in:()=>W});const p=[];var W=function(oe){return oe[oe.DEBUG=0]="DEBUG",oe[oe.VERBOSE=1]="VERBOSE",oe[oe.INFO=2]="INFO",oe[oe.WARN=3]="WARN",oe[oe.ERROR=4]="ERROR",oe[oe.SILENT=5]="SILENT",oe}(W||{});const ae={debug:W.DEBUG,verbose:W.VERBOSE,info:W.INFO,warn:W.WARN,error:W.ERROR,silent:W.SILENT},he=W.INFO,fe={[W.DEBUG]:"log",[W.VERBOSE]:"log",[W.INFO]:"info",[W.WARN]:"warn",[W.ERROR]:"error"},xe=(oe,pe,...Te)=>{if(pe<oe.logLevel)return;const et=(new Date).toISOString(),rt=fe[pe];if(!rt)throw new Error(`Attempted to log a message with an invalid logType (value: ${pe})`);console[rt](`[${et}]  ${oe.name}:`,...Te)};class Me{constructor(pe){this.name=pe,this._logLevel=he,this._logHandler=xe,this._userLogHandler=null,p.push(this)}get logLevel(){return this._logLevel}set logLevel(pe){if(!(pe in W))throw new TypeError(`Invalid value "${pe}" assigned to \`logLevel\``);this._logLevel=pe}setLogLevel(pe){this._logLevel="string"==typeof pe?ae[pe]:pe}get logHandler(){return this._logHandler}set logHandler(pe){if("function"!=typeof pe)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=pe}get userLogHandler(){return this._userLogHandler}set userLogHandler(pe){this._userLogHandler=pe}debug(...pe){this._userLogHandler&&this._userLogHandler(this,W.DEBUG,...pe),this._logHandler(this,W.DEBUG,...pe)}log(...pe){this._userLogHandler&&this._userLogHandler(this,W.VERBOSE,...pe),this._logHandler(this,W.VERBOSE,...pe)}info(...pe){this._userLogHandler&&this._userLogHandler(this,W.INFO,...pe),this._logHandler(this,W.INFO,...pe)}warn(...pe){this._userLogHandler&&this._userLogHandler(this,W.WARN,...pe),this._logHandler(this,W.WARN,...pe)}error(...pe){this._userLogHandler&&this._userLogHandler(this,W.ERROR,...pe),this._logHandler(this,W.ERROR,...pe)}}function Ee(oe){p.forEach(pe=>{pe.setLogLevel(oe)})}function ze(oe,pe){for(const Te of p){let et=null;pe&&pe.level&&(et=ae[pe.level]),Te.userLogHandler=null===oe?null:(rt,mt,...ht)=>{const Qt=ht.map(Rt=>{if(null==Rt)return null;if("string"==typeof Rt)return Rt;if("number"==typeof Rt||"boolean"==typeof Rt)return Rt.toString();if(Rt instanceof Error)return Rt.message;try{return JSON.stringify(Rt)}catch{return null}}).filter(Rt=>Rt).join(" ");mt>=(et??rt.logLevel)&&oe({level:W[mt].toLowerCase(),message:Qt,args:ht,type:rt.name})}}}},3182:($t,Ge,z)=>{z.d(Ge,{C6:()=>p.getApps,KN:()=>p.registerVersion,Mq:()=>p.getApp,ZF:()=>p.initializeApp});var p=z(534);(0,p.registerVersion)("firebase","9.23.0","app")},5861:($t,Ge,z)=>{function p(ae,he,fe,xe,Me,Ee,ze){try{var oe=ae[Ee](ze),pe=oe.value}catch(Te){return void fe(Te)}oe.done?he(pe):Promise.resolve(pe).then(xe,Me)}function W(ae){return function(){var he=this,fe=arguments;return new Promise(function(xe,Me){var Ee=ae.apply(he,fe);function ze(pe){p(Ee,xe,Me,ze,oe,"next",pe)}function oe(pe){p(Ee,xe,Me,ze,oe,"throw",pe)}ze(void 0)})}}z.d(Ge,{Z:()=>W})},7582:($t,Ge,z)=>{function he(ke,He){var qe={};for(var Be in ke)Object.prototype.hasOwnProperty.call(ke,Be)&&He.indexOf(Be)<0&&(qe[Be]=ke[Be]);if(null!=ke&&"function"==typeof Object.getOwnPropertySymbols){var Je=0;for(Be=Object.getOwnPropertySymbols(ke);Je<Be.length;Je++)He.indexOf(Be[Je])<0&&Object.prototype.propertyIsEnumerable.call(ke,Be[Je])&&(qe[Be[Je]]=ke[Be[Je]])}return qe}function Te(ke,He,qe,Be){return new(qe||(qe=Promise))(function(gt,Tt){function Et(xn){try{rn(Be.next(xn))}catch(Ht){Tt(Ht)}}function Wn(xn){try{rn(Be.throw(xn))}catch(Ht){Tt(Ht)}}function rn(xn){xn.done?gt(xn.value):function Je(gt){return gt instanceof qe?gt:new qe(function(Tt){Tt(gt)})}(xn.value).then(Et,Wn)}rn((Be=Be.apply(ke,He||[])).next())})}function le(ke){return this instanceof le?(this.v=ke,this):new le(ke)}function Ve(ke,He,qe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Je,Be=qe.apply(ke,He||[]),gt=[];return Je={},Tt("next"),Tt("throw"),Tt("return"),Je[Symbol.asyncIterator]=function(){return this},Je;function Tt(Kn){Be[Kn]&&(Je[Kn]=function(lr){return new Promise(function(Qn,er){gt.push([Kn,lr,Qn,er])>1||Et(Kn,lr)})})}function Et(Kn,lr){try{!function Wn(Kn){Kn.value instanceof le?Promise.resolve(Kn.value.v).then(rn,xn):Ht(gt[0][2],Kn)}(Be[Kn](lr))}catch(Qn){Ht(gt[0][3],Qn)}}function rn(Kn){Et("next",Kn)}function xn(Kn){Et("throw",Kn)}function Ht(Kn,lr){Kn(lr),gt.shift(),gt.length&&Et(gt[0][0],gt[0][1])}}function Ze(ke){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var qe,He=ke[Symbol.asyncIterator];return He?He.call(ke):(ke=function ht(ke){var He="function"==typeof Symbol&&Symbol.iterator,qe=He&&ke[He],Be=0;if(qe)return qe.call(ke);if(ke&&"number"==typeof ke.length)return{next:function(){return ke&&Be>=ke.length&&(ke=void 0),{value:ke&&ke[Be++],done:!ke}}};throw new TypeError(He?"Object is not iterable.":"Symbol.iterator is not defined.")}(ke),qe={},Be("next"),Be("throw"),Be("return"),qe[Symbol.asyncIterator]=function(){return this},qe);function Be(gt){qe[gt]=ke[gt]&&function(Tt){return new Promise(function(Et,Wn){!function Je(gt,Tt,Et,Wn){Promise.resolve(Wn).then(function(rn){gt({value:rn,done:Et})},Tt)}(Et,Wn,(Tt=ke[gt](Tt)).done,Tt.value)})}}}z.d(Ge,{FC:()=>Ve,KL:()=>Ze,_T:()=>he,mG:()=>Te,qq:()=>le}),"function"==typeof SuppressedError&&SuppressedError}},$t=>{$t($t.s=4913)}]);